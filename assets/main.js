!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="dist/assets",t(0)}([function(e,t,n){(function(e){"use strict";Object.assign||(Object.assign=n(322));var t=n(2),i=n(6);n(245);var r=n(7),s=n(57);window.jQuery=i,window.$=i,window.React=t,e.ajaxPrefilter(function(e){e.xhrFields={withCredentials:!0}});var o=n(246),a=!1,l=function(){a=!0,t.renderComponent(o,document.getElementById("main"))};s.selfFetched.listen(r.once(l)),s.fetchSelfFailed.listen(r.once(function(){a||alert("Something went wrong. Try again!")})),s.fetchSelf()}).call(t,n(6))},function(e,t,n){var i;(function(e,r){//! moment.js
//! version : 2.8.4
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(s){function o(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function a(e,t){return St.call(e,t)}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(e){Mt.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function u(e,t){var n=!0;return v(function(){return n&&(c(e),n=!1),t.apply(this,arguments)},t)}function d(e,t){xn[e]||(c(t),xn[e]=!0)}function p(e,t){return function(n){return _(e.call(this,n),t)}}function h(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function f(){}function m(e,t){t!==!1&&Y(e),b(this,e),this._d=new Date(+e._d)}function g(e){var t=L(e),n=t.year||0,i=t.quarter||0,r=t.month||0,s=t.week||0,o=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*a,this._days=+o+7*s,this._months=+r+3*i+12*n,this._data={},this._locale=Mt.localeData(),this._bubble()}function v(e,t){for(var n in t)a(t,n)&&(e[n]=t[n]);return a(t,"toString")&&(e.toString=t.toString),a(t,"valueOf")&&(e.valueOf=t.valueOf),e}function b(e,t){var n,i,r;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),At.length>0)for(n in At)i=At[n],r=t[i],"undefined"!=typeof r&&(e[i]=r);return e}function y(e){return 0>e?Math.ceil(e):Math.floor(e)}function _(e,t,n){for(var i=""+Math.abs(e),r=e>=0;i.length<t;)i="0"+i;return(r?n?"+":"":"-")+i}function w(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function x(e,t){var n;return t=F(t,e),e.isBefore(t)?n=w(e,t):(n=w(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function D(e,t){return function(n,i){var r,s;return null===i||isNaN(+i)||(d(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,r=Mt.duration(n,i),M(this,r,e),this}}function M(e,t,n,i){var r=t._milliseconds,s=t._days,o=t._months;i=null==i?!0:i,r&&e._d.setTime(+e._d+r*n),s&&bt(e,"Date",vt(e,"Date")+s*n),o&&gt(e,vt(e,"Month")+o*n),i&&Mt.updateOffset(e,s||o)}function T(e){return"[object Array]"===Object.prototype.toString.call(e)}function k(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function j(e,t,n){var i,r=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),o=0;for(i=0;r>i;i++)(n&&e[i]!==t[i]||!n&&$(e[i])!==$(t[i]))&&o++;return o+s}function C(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=mn[e]||gn[t]||t}return e}function L(e){var t,n,i={};for(n in e)a(e,n)&&(t=C(n),t&&(i[t]=e[n]));return i}function S(e){var t,n;if(0===e.indexOf("week"))t=7,n="day";else{if(0!==e.indexOf("month"))return;t=12,n="month"}Mt[e]=function(i,r){var o,a,l=Mt._locale[e],c=[];if("number"==typeof i&&(r=i,i=s),a=function(e){var t=Mt().utc().set(n,e);return l.call(Mt._locale,t,i||"")},null!=r)return a(r);for(o=0;t>o;o++)c.push(a(o));return c}}function $(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function O(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function E(e,t,n){return pt(Mt([e,11,31+t-n]),t,n).week}function N(e){return I(e)?366:365}function I(e){return e%4===0&&e%100!==0||e%400===0}function Y(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Ot]<0||e._a[Ot]>11?Ot:e._a[Et]<1||e._a[Et]>O(e._a[$t],e._a[Ot])?Et:e._a[Nt]<0||e._a[Nt]>24||24===e._a[Nt]&&(0!==e._a[It]||0!==e._a[Yt]||0!==e._a[Rt])?Nt:e._a[It]<0||e._a[It]>59?It:e._a[Yt]<0||e._a[Yt]>59?Yt:e._a[Rt]<0||e._a[Rt]>999?Rt:-1,e._pf._overflowDayOfYear&&($t>t||t>Et)&&(t=Et),e._pf.overflow=t)}function R(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length&&e._pf.bigHour===s)),e._isValid}function P(e){return e?e.toLowerCase().replace("_","-"):e}function A(e){for(var t,n,i,r,s=0;s<e.length;){for(r=P(e[s]).split("-"),t=r.length,n=P(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=z(r.slice(0,t).join("-")))return i;if(n&&n.length>=t&&j(r,n,!0)>=t-1)break;t--}s++}return null}function z(e){var t=null;if(!Pt[e]&&zt)try{t=Mt.locale(),n(440)("./"+e),Mt.locale(t)}catch(i){}return Pt[e]}function F(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(Mt.isMoment(e)||k(e)?+e:+Mt(e))-+n,n._d.setTime(+n._d+i),Mt.updateOffset(n,!1),n):Mt(e).local()}function H(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function U(e){var t,n,i=e.match(Bt);for(t=0,n=i.length;n>t;t++)i[t]=wn[i[t]]?wn[i[t]]:H(i[t]);return function(r){var s="";for(t=0;n>t;t++)s+=i[t]instanceof Function?i[t].call(r,e):i[t];return s}}function B(e,t){return e.isValid()?(t=W(t,e.localeData()),vn[t]||(vn[t]=U(t)),vn[t](e)):e.localeData().invalidDate()}function W(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Wt.lastIndex=0;i>=0&&Wt.test(e);)e=e.replace(Wt,n),Wt.lastIndex=0,i-=1;return e}function q(e,t){var n,i=t._strict;switch(e){case"Q":return nn;case"DDDD":return sn;case"YYYY":case"GGGG":case"gggg":return i?on:Gt;case"Y":case"G":case"g":return ln;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?an:Kt;case"S":if(i)return nn;case"SS":if(i)return rn;case"SSS":if(i)return sn;case"DDD":return Vt;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Xt;case"a":case"A":return t._locale._meridiemParse;case"x":return en;case"X":return tn;case"Z":case"ZZ":return Qt;case"T":return Zt;case"SSSS":return Jt;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?rn:qt;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return qt;case"Do":return i?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(tt(et(e.replace("\\","")),"i"))}}function V(e){e=e||"";var t=e.match(Qt)||[],n=t[t.length-1]||[],i=(n+"").match(hn)||["-",0,0],r=+(60*i[1])+$(i[2]);return"+"===i[0]?-r:r}function G(e,t,n){var i,r=n._a;switch(e){case"Q":null!=t&&(r[Ot]=3*($(t)-1));break;case"M":case"MM":null!=t&&(r[Ot]=$(t)-1);break;case"MMM":case"MMMM":i=n._locale.monthsParse(t,e,n._strict),null!=i?r[Ot]=i:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(r[Et]=$(t));break;case"Do":null!=t&&(r[Et]=$(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=$(t));break;case"YY":r[$t]=Mt.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":r[$t]=$(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":r[Nt]=$(t);break;case"m":case"mm":r[It]=$(t);break;case"s":case"ss":r[Yt]=$(t);break;case"S":case"SS":case"SSS":case"SSSS":r[Rt]=$(1e3*("0."+t));break;case"x":n._d=new Date($(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=V(t);break;case"dd":case"ddd":case"dddd":i=n._locale.weekdaysParse(t),null!=i?(n._w=n._w||{},n._w.d=i):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=$(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=Mt.parseTwoDigitYear(t)}}function K(e){var t,n,i,r,s,a,l;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,a=4,n=o(t.GG,e._a[$t],pt(Mt(),1,4).year),i=o(t.W,1),r=o(t.E,1)):(s=e._locale._week.dow,a=e._locale._week.doy,n=o(t.gg,e._a[$t],pt(Mt(),s,a).year),i=o(t.w,1),null!=t.d?(r=t.d,s>r&&++i):r=null!=t.e?t.e+s:s),l=ht(n,i,r,a,s),e._a[$t]=l.year,e._dayOfYear=l.dayOfYear}function J(e){var t,n,i,r,s=[];if(!e._d){for(i=Q(e),e._w&&null==e._a[Et]&&null==e._a[Ot]&&K(e),e._dayOfYear&&(r=o(e._a[$t],i[$t]),e._dayOfYear>N(r)&&(e._pf._overflowDayOfYear=!0),n=lt(r,0,e._dayOfYear),e._a[Ot]=n.getUTCMonth(),e._a[Et]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;7>t;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Nt]&&0===e._a[It]&&0===e._a[Yt]&&0===e._a[Rt]&&(e._nextDay=!0,e._a[Nt]=0),e._d=(e._useUTC?lt:at).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm),e._nextDay&&(e._a[Nt]=24)}}function X(e){var t;e._d||(t=L(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],J(e))}function Q(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Z(e){if(e._f===Mt.ISO_8601)return void it(e);e._a=[],e._pf.empty=!0;var t,n,i,r,o,a=""+e._i,l=a.length,c=0;for(i=W(e._f,e._locale).match(Bt)||[],t=0;t<i.length;t++)r=i[t],n=(a.match(q(r,e))||[])[0],n&&(o=a.substr(0,a.indexOf(n)),o.length>0&&e._pf.unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),c+=n.length),wn[r]?(n?e._pf.empty=!1:e._pf.unusedTokens.push(r),G(r,n,e)):e._strict&&!n&&e._pf.unusedTokens.push(r);e._pf.charsLeftOver=l-c,a.length>0&&e._pf.unusedInput.push(a),e._pf.bigHour===!0&&e._a[Nt]<=12&&(e._pf.bigHour=s),e._isPm&&e._a[Nt]<12&&(e._a[Nt]+=12),e._isPm===!1&&12===e._a[Nt]&&(e._a[Nt]=0),J(e),Y(e)}function et(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r})}function tt(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function nt(e){var t,n,i,r,s;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(0/0));for(r=0;r<e._f.length;r++)s=0,t=b({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=l(),t._f=e._f[r],Z(t),R(t)&&(s+=t._pf.charsLeftOver,s+=10*t._pf.unusedTokens.length,t._pf.score=s,(null==i||i>s)&&(i=s,n=t));v(e,n||t)}function it(e){var t,n,i=e._i,r=cn.exec(i);if(r){for(e._pf.iso=!0,t=0,n=dn.length;n>t;t++)if(dn[t][1].exec(i)){e._f=dn[t][0]+(r[6]||" ");break}for(t=0,n=pn.length;n>t;t++)if(pn[t][1].exec(i)){e._f+=pn[t][0];break}i.match(Qt)&&(e._f+="Z"),Z(e)}else e._isValid=!1}function rt(e){it(e),e._isValid===!1&&(delete e._isValid,Mt.createFromInputFallback(e))}function st(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function ot(e){var t,n=e._i;n===s?e._d=new Date:k(n)?e._d=new Date(+n):null!==(t=Ft.exec(n))?e._d=new Date(+t[1]):"string"==typeof n?rt(e):T(n)?(e._a=st(n.slice(0),function(e){return parseInt(e,10)}),J(e)):"object"==typeof n?X(e):"number"==typeof n?e._d=new Date(n):Mt.createFromInputFallback(e)}function at(e,t,n,i,r,s,o){var a=new Date(e,t,n,i,r,s,o);return 1970>e&&a.setFullYear(e),a}function lt(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function ct(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function ut(e,t,n,i,r){return r.relativeTime(t||1,!!n,e,i)}function dt(e,t,n){var i=Mt.duration(e).abs(),r=Lt(i.as("s")),s=Lt(i.as("m")),o=Lt(i.as("h")),a=Lt(i.as("d")),l=Lt(i.as("M")),c=Lt(i.as("y")),u=r<bn.s&&["s",r]||1===s&&["m"]||s<bn.m&&["mm",s]||1===o&&["h"]||o<bn.h&&["hh",o]||1===a&&["d"]||a<bn.d&&["dd",a]||1===l&&["M"]||l<bn.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,ut.apply({},u)}function pt(e,t,n){var i,r=n-t,s=n-e.day();return s>r&&(s-=7),r-7>s&&(s+=7),i=Mt(e).add(s,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ht(e,t,n,i,r){var s,o,a=lt(e,0,1).getUTCDay();return a=0===a?7:a,n=null!=n?n:r,s=r-a+(a>i?7:0)-(r>a?7:0),o=7*(t-1)+(n-r)+s+1,{year:o>0?e:e-1,dayOfYear:o>0?o:N(e-1)+o}}function ft(e){var t,n=e._i,i=e._f;return e._locale=e._locale||Mt.localeData(e._l),null===n||i===s&&""===n?Mt.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=e._locale.preparse(n)),Mt.isMoment(n)?new m(n,!0):(i?T(i)?nt(e):Z(e):ot(e),t=new m(e),t._nextDay&&(t.add(1,"d"),t._nextDay=s),t))}function mt(e,t){var n,i;if(1===t.length&&T(t[0])&&(t=t[0]),!t.length)return Mt();for(n=t[0],i=1;i<t.length;++i)t[i][e](n)&&(n=t[i]);return n}function gt(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),O(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function vt(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function bt(e,t,n){return"Month"===t?gt(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function yt(e,t){return function(n){return null!=n?(bt(this,e,n),Mt.updateOffset(this,t),this):vt(this,e)}}function _t(e){return 400*e/146097}function wt(e){return 146097*e/400}function xt(e){Mt.duration.fn[e]=function(){return this._data[e]}}function Dt(e){"undefined"==typeof ender&&(Tt=Ct.moment,Ct.moment=e?u("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",Mt):Mt)}for(var Mt,Tt,kt,jt="2.8.4",Ct="undefined"!=typeof e?e:this,Lt=Math.round,St=Object.prototype.hasOwnProperty,$t=0,Ot=1,Et=2,Nt=3,It=4,Yt=5,Rt=6,Pt={},At=[],zt="undefined"!=typeof r&&r&&r.exports,Ft=/^\/?Date\((\-?\d+)/i,Ht=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ut=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Bt=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Wt=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,qt=/\d\d?/,Vt=/\d{1,3}/,Gt=/\d{1,4}/,Kt=/[+\-]?\d{1,6}/,Jt=/\d+/,Xt=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Qt=/Z|[\+\-]\d\d:?\d\d/gi,Zt=/T/i,en=/[\+\-]?\d+/,tn=/[\+\-]?\d+(\.\d{1,3})?/,nn=/\d/,rn=/\d\d/,sn=/\d{3}/,on=/\d{4}/,an=/[+-]?\d{6}/,ln=/[+-]?\d+/,cn=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,un="YYYY-MM-DDTHH:mm:ssZ",dn=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],pn=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hn=/([\+\-]|\d\d)/gi,fn=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),mn={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},gn={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},vn={},bn={s:45,m:45,h:22,d:26,M:11},yn="DDD w W M D d".split(" "),_n="M D H h m s w W".split(" "),wn={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return _(this.year()%100,2)},YYYY:function(){return _(this.year(),4)},YYYYY:function(){return _(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+_(Math.abs(e),6)},gg:function(){return _(this.weekYear()%100,2)},gggg:function(){return _(this.weekYear(),4)},ggggg:function(){return _(this.weekYear(),5)},GG:function(){return _(this.isoWeekYear()%100,2)},GGGG:function(){return _(this.isoWeekYear(),4)},GGGGG:function(){return _(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return $(this.milliseconds()/100)},SS:function(){return _($(this.milliseconds()/10),2)},SSS:function(){return _(this.milliseconds(),3)},SSSS:function(){return _(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+_($(e/60),2)+":"+_($(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return 0>e&&(e=-e,t="-"),t+_($(e/60),2)+_($(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},xn={},Dn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];yn.length;)kt=yn.pop(),wn[kt+"o"]=h(wn[kt],kt);for(;_n.length;)kt=_n.pop(),wn[kt+kt]=p(wn[kt],2);wn.DDDD=p(wn.DDD,3),v(f.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var i,r,s;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=Mt.utc([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Mt([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.apply(t,[n]):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(e,t,n,i):r.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return pt(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),Mt=function(e,t,n,i){var r;return"boolean"==typeof n&&(i=n,n=s),r={},r._isAMomentObject=!0,r._i=e,r._f=t,r._l=n,r._strict=i,r._isUTC=!1,r._pf=l(),ft(r)},Mt.suppressDeprecationWarnings=!1,Mt.createFromInputFallback=u("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),Mt.min=function(){var e=[].slice.call(arguments,0);return mt("isBefore",e)},Mt.max=function(){var e=[].slice.call(arguments,0);return mt("isAfter",e)},Mt.utc=function(e,t,n,i){var r;return"boolean"==typeof n&&(i=n,n=s),r={},r._isAMomentObject=!0,r._useUTC=!0,r._isUTC=!0,r._l=n,r._i=e,r._f=t,r._strict=i,r._pf=l(),ft(r).utc()},Mt.unix=function(e){return Mt(1e3*e)},Mt.duration=function(e,t){var n,i,r,s,o=e,l=null;return Mt.isDuration(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(l=Ht.exec(e))?(n="-"===l[1]?-1:1,o={y:0,d:$(l[Et])*n,h:$(l[Nt])*n,m:$(l[It])*n,s:$(l[Yt])*n,ms:$(l[Rt])*n}):(l=Ut.exec(e))?(n="-"===l[1]?-1:1,r=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*n},o={y:r(l[2]),M:r(l[3]),d:r(l[4]),h:r(l[5]),m:r(l[6]),s:r(l[7]),w:r(l[8])}):"object"==typeof o&&("from"in o||"to"in o)&&(s=x(Mt(o.from),Mt(o.to)),o={},o.ms=s.milliseconds,o.M=s.months),i=new g(o),Mt.isDuration(e)&&a(e,"_locale")&&(i._locale=e._locale),i},Mt.version=jt,Mt.defaultFormat=un,Mt.ISO_8601=function(){},Mt.momentProperties=At,Mt.updateOffset=function(){},Mt.relativeTimeThreshold=function(e,t){return bn[e]===s?!1:t===s?bn[e]:(bn[e]=t,!0)},Mt.lang=u("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return Mt.locale(e,t)}),Mt.locale=function(e,t){var n;return e&&(n="undefined"!=typeof t?Mt.defineLocale(e,t):Mt.localeData(e),n&&(Mt.duration._locale=Mt._locale=n)),Mt._locale._abbr},Mt.defineLocale=function(e,t){return null!==t?(t.abbr=e,Pt[e]||(Pt[e]=new f),Pt[e].set(t),Mt.locale(e),Pt[e]):(delete Pt[e],null)},Mt.langData=u("moment.langData is deprecated. Use moment.localeData instead.",function(e){return Mt.localeData(e)}),Mt.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Mt._locale;if(!T(e)){if(t=z(e))return t;e=[e]}return A(e)},Mt.isMoment=function(e){return e instanceof m||null!=e&&a(e,"_isAMomentObject")},Mt.isDuration=function(e){return e instanceof g};for(kt=Dn.length-1;kt>=0;--kt)S(Dn[kt]);Mt.normalizeUnits=function(e){return C(e)},Mt.invalid=function(e){var t=Mt.utc(0/0);return null!=e?v(t._pf,e):t._pf.userInvalidated=!0,t},Mt.parseZone=function(){return Mt.apply(null,arguments).parseZone()},Mt.parseTwoDigitYear=function(e){return $(e)+($(e)>68?1900:2e3)},v(Mt.fn=m.prototype,{clone:function(){return Mt(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=Mt(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():B(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):B(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return R(this)},isDSTShifted:function(){return this._a?this.isValid()&&j(this._a,(this._isUTC?Mt.utc(this._a):Mt(this._a)).toArray())>0:!1},parsingFlags:function(){return v({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._dateTzOffset(),"m")),this},format:function(e){var t=B(this,e||Mt.defaultFormat);return this.localeData().postformat(t)},add:D(1,"add"),subtract:D(-1,"subtract"),diff:function(e,t,n){var i,r,s,o=F(e,this),a=6e4*(this.zone()-o.zone());return t=C(t),"year"===t||"month"===t?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),s=this-Mt(this).startOf("month")-(o-Mt(o).startOf("month")),s-=6e4*(this.zone()-Mt(this).startOf("month").zone()-(o.zone()-Mt(o).startOf("month").zone())),r+=s/i,"year"===t&&(r/=12)):(i=this-o,r="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-a)/864e5:"week"===t?(i-a)/6048e5:i),n?r:y(r)},from:function(e,t){return Mt.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(Mt(),e)},calendar:function(e){var t=e||Mt(),n=F(t,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,Mt(t)))},isLeapYear:function(){return I(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ct(e,this.localeData()),this.add(e-t,"d")):t},month:yt("Month",!0),startOf:function(e){switch(e=C(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=C(e),e===s||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){var n;return t=C("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=Mt.isMoment(e)?e:Mt(e),+this>+e):(n=Mt.isMoment(e)?+e:+Mt(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=C("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=Mt.isMoment(e)?e:Mt(e),+e>+this):(n=Mt.isMoment(e)?+e:+Mt(e),+this.clone().endOf(t)<n)},isSame:function(e,t){var n;return t=C(t||"millisecond"),"millisecond"===t?(e=Mt.isMoment(e)?e:Mt(e),+this===+e):(n=+Mt(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:u("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=Mt.apply(null,arguments),this>e?this:e}),max:u("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=Mt.apply(null,arguments),e>this?this:e}),zone:function(e,t){var n,i=this._offset||0;return null==e?this._isUTC?i:this._dateTzOffset():("string"==typeof e&&(e=V(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateTzOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.subtract(n,"m"),i!==e&&(!t||this._changeInProgress?M(this,Mt.duration(i-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Mt.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?Mt(e).zone():0,(this.zone()-e)%60===0},daysInMonth:function(){return O(this.year(),this.month())},dayOfYear:function(e){var t=Lt((Mt(this).startOf("day")-Mt(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=pt(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=pt(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=pt(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return E(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return E(this.year(),e.dow,e.doy)},get:function(e){return e=C(e),this[e]()},set:function(e,t){return e=C(e),"function"==typeof this[e]&&this[e](t),this},locale:function(e){var t;return e===s?this._locale._abbr:(t=Mt.localeData(e),null!=t&&(this._locale=t),this)},lang:u("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===s?this.localeData():this.locale(e)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),Mt.fn.millisecond=Mt.fn.milliseconds=yt("Milliseconds",!1),Mt.fn.second=Mt.fn.seconds=yt("Seconds",!1),Mt.fn.minute=Mt.fn.minutes=yt("Minutes",!1),Mt.fn.hour=Mt.fn.hours=yt("Hours",!0),Mt.fn.date=yt("Date",!0),Mt.fn.dates=u("dates accessor is deprecated. Use date instead.",yt("Date",!0)),Mt.fn.year=yt("FullYear",!0),Mt.fn.years=u("years accessor is deprecated. Use year instead.",yt("FullYear",!0)),Mt.fn.days=Mt.fn.day,Mt.fn.months=Mt.fn.month,Mt.fn.weeks=Mt.fn.week,Mt.fn.isoWeeks=Mt.fn.isoWeek,Mt.fn.quarters=Mt.fn.quarter,Mt.fn.toJSON=Mt.fn.toISOString,v(Mt.duration.fn=g.prototype,{_bubble:function(){var e,t,n,i=this._milliseconds,r=this._days,s=this._months,o=this._data,a=0;o.milliseconds=i%1e3,e=y(i/1e3),o.seconds=e%60,t=y(e/60),o.minutes=t%60,n=y(t/60),o.hours=n%24,r+=y(n/24),a=y(_t(r)),r-=y(wt(a)),s+=y(r/30),r%=30,a+=y(s/12),s%=12,o.days=r,o.months=s,o.years=a},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return y(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*$(this._months/12)},humanize:function(e){var t=dt(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=Mt.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=Mt.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=C(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=C(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*_t(t),"month"===e?n:n/12;switch(t=this._days+Math.round(wt(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;
case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:Mt.fn.lang,locale:Mt.fn.locale,toIsoString:u("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),s=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(i||r||s?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(s?s+"S":""):"P0D"},localeData:function(){return this._locale}}),Mt.duration.fn.toString=Mt.duration.fn.toISOString;for(kt in fn)a(fn,kt)&&xt(kt.toLowerCase());Mt.duration.fn.asMilliseconds=function(){return this.as("ms")},Mt.duration.fn.asSeconds=function(){return this.as("s")},Mt.duration.fn.asMinutes=function(){return this.as("m")},Mt.duration.fn.asHours=function(){return this.as("h")},Mt.duration.fn.asDays=function(){return this.as("d")},Mt.duration.fn.asWeeks=function(){return this.as("weeks")},Mt.duration.fn.asMonths=function(){return this.as("M")},Mt.duration.fn.asYears=function(){return this.as("y")},Mt.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===$(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),zt?r.exports=Mt:(i=function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(Ct.moment=Tt),Mt}.call(t,n,t,r),!(i!==s&&(r.exports=i)),Dt(!0))}).call(this)}).call(t,function(){return this}(),n(435)(e))},function(e,t,n){e.exports=n(394)},function(e){"use strict";var t=function(e,t,n,i,r,s,o,a){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,s,o,a],u=0;l=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return c[u++]}))}throw l.framesToPop=1,l}};e.exports=t},function(e,t,n){t.ListenerMethods=n(237),t.PublisherMethods=n(428),t.createAction=n(430),t.createStore=n(238),t.connect=n(429),t.ListenerMixin=n(427),t.listenTo=n(431),t.listenToMany=n(432);var i=n(239).staticJoinCreator;t.joinTrailing=t.all=i("last"),t.joinLeading=i("first"),t.joinStrict=i("strict"),t.joinConcat=i("all"),t.createActions=function(e){for(var n=0,i={};n<e.length;n++)i[e[n]]=t.createAction();return i},t.setEventEmitter=function(e){var t=n(23);t.EventEmitter=e},t.nextTick=function(e){var t=n(23);t.nextTick=e},t.__keep=n(98)},function(e){"use strict";var t=!("undefined"==typeof window||!window.document||!window.document.createElement),n={canUseDOM:t,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:t&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};e.exports=n},function(e,t){var n,i;/*!
	 * jQuery JavaScript Library v2.1.1
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2014-05-01T17:11Z
	 */
!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(r,s){function o(e){var t=e.length,n=it.type(e);return"function"===n||it.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function a(e,t,n){if(it.isFunction(t))return it.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return it.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(dt.test(t))return it.filter(t,e,n);t=it.filter(t,e)}return it.grep(e,function(e){return J.call(t,e)>=0!==n})}function l(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function c(e){var t=bt[e]={};return it.each(e.match(vt)||[],function(e,n){t[n]=!0}),t}function u(){tt.removeEventListener("DOMContentLoaded",u,!1),r.removeEventListener("load",u,!1),it.ready()}function d(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=it.expando+Math.random()}function p(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Mt,"-$1").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:Dt.test(n)?it.parseJSON(n):n}catch(r){}xt.set(e,t,n)}else n=void 0;return n}function h(){return!0}function f(){return!1}function m(){try{return tt.activeElement}catch(e){}}function g(e,t){return it.nodeName(e,"table")&&it.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function v(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function b(e){var t=zt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function y(e,t){for(var n=0,i=e.length;i>n;n++)wt.set(e[n],"globalEval",!t||wt.get(t[n],"globalEval"))}function _(e,t){var n,i,r,s,o,a,l,c;if(1===t.nodeType){if(wt.hasData(e)&&(s=wt.access(e),o=wt.set(t,s),c=s.events)){delete o.handle,o.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)it.event.add(t,r,c[r][n])}xt.hasData(e)&&(a=xt.access(e),l=it.extend({},a),xt.set(t,l))}}function w(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&it.nodeName(e,t)?it.merge([e],n):n}function x(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ct.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function D(e,t){var n,i=it(t.createElement(e)).appendTo(t.body),s=r.getDefaultComputedStyle&&(n=r.getDefaultComputedStyle(i[0]))?n.display:it.css(i[0],"display");return i.detach(),s}function M(e){var t=tt,n=Bt[e];return n||(n=D(e,t),"none"!==n&&n||(Ut=(Ut||it("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ut[0].contentDocument,t.write(),t.close(),n=D(e,t),Ut.detach()),Bt[e]=n),n}function T(e,t,n){var i,r,s,o,a=e.style;return n=n||Vt(e),n&&(o=n.getPropertyValue(t)||n[t]),n&&(""!==o||it.contains(e.ownerDocument,e)||(o=it.style(e,t)),qt.test(o)&&Wt.test(t)&&(i=a.width,r=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=i,a.minWidth=r,a.maxWidth=s)),void 0!==o?o+"":o}function k(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function j(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),i=t,r=Zt.length;r--;)if(t=Zt[r]+n,t in e)return t;return i}function C(e,t,n){var i=Kt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function L(e,t,n,i,r){for(var s=n===(i?"border":"content")?4:"width"===t?1:0,o=0;4>s;s+=2)"margin"===n&&(o+=it.css(e,n+kt[s],!0,r)),i?("content"===n&&(o-=it.css(e,"padding"+kt[s],!0,r)),"margin"!==n&&(o-=it.css(e,"border"+kt[s]+"Width",!0,r))):(o+=it.css(e,"padding"+kt[s],!0,r),"padding"!==n&&(o+=it.css(e,"border"+kt[s]+"Width",!0,r)));return o}function S(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,s=Vt(e),o="border-box"===it.css(e,"boxSizing",!1,s);if(0>=r||null==r){if(r=T(e,t,s),(0>r||null==r)&&(r=e.style[t]),qt.test(r))return r;i=o&&(et.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+L(e,t,n||(o?"border":"content"),i,s)+"px"}function $(e,t){for(var n,i,r,s=[],o=0,a=e.length;a>o;o++)i=e[o],i.style&&(s[o]=wt.get(i,"olddisplay"),n=i.style.display,t?(s[o]||"none"!==n||(i.style.display=""),""===i.style.display&&jt(i)&&(s[o]=wt.access(i,"olddisplay",M(i.nodeName)))):(r=jt(i),"none"===n&&r||wt.set(i,"olddisplay",r?n:it.css(i,"display"))));for(o=0;a>o;o++)i=e[o],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?s[o]||"":"none"));return e}function O(e,t,n,i,r){return new O.prototype.init(e,t,n,i,r)}function E(){return setTimeout(function(){en=void 0}),en=it.now()}function N(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=kt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function I(e,t,n){for(var i,r=(an[t]||[]).concat(an["*"]),s=0,o=r.length;o>s;s++)if(i=r[s].call(n,t,e))return i}function Y(e,t,n){var i,r,s,o,a,l,c,u,d=this,p={},h=e.style,f=e.nodeType&&jt(e),m=wt.get(e,"fxshow");n.queue||(a=it._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,it.queue(e,"fx").length||a.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],c=it.css(e,"display"),u="none"===c?wt.get(e,"olddisplay")||M(e.nodeName):c,"inline"===u&&"none"===it.css(e,"float")&&(h.display="inline-block")),n.overflow&&(h.overflow="hidden",d.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],nn.exec(r)){if(delete t[i],s=s||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}p[i]=m&&m[i]||it.style(e,i)}else c=void 0;if(it.isEmptyObject(p))"inline"===("none"===c?M(e.nodeName):c)&&(h.display=c);else{m?"hidden"in m&&(f=m.hidden):m=wt.access(e,"fxshow",{}),s&&(m.hidden=!f),f?it(e).show():d.done(function(){it(e).hide()}),d.done(function(){var t;wt.remove(e,"fxshow");for(t in p)it.style(e,t,p[t])});for(i in p)o=I(f?m[i]:0,i,d),i in m||(m[i]=o.start,f&&(o.end=o.start,o.start="width"===i||"height"===i?1:0))}}function R(e,t){var n,i,r,s,o;for(n in e)if(i=it.camelCase(n),r=t[i],s=e[n],it.isArray(s)&&(r=s[1],s=e[n]=s[0]),n!==i&&(e[i]=s,delete e[n]),o=it.cssHooks[i],o&&"expand"in o){s=o.expand(s),delete e[i];for(n in s)n in e||(e[n]=s[n],t[n]=r)}else t[i]=r}function P(e,t,n){var i,r,s=0,o=on.length,a=it.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=en||E(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,s=1-i,o=0,l=c.tweens.length;l>o;o++)c.tweens[o].run(s);return a.notifyWith(e,[c,s,n]),1>s&&l?n:(a.resolveWith(e,[c]),!1)},c=a.promise({elem:e,props:it.extend({},t),opts:it.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:en||E(),duration:n.duration,tweens:[],createTween:function(t,n){var i=it.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return t?a.resolveWith(e,[c,t]):a.rejectWith(e,[c,t]),this}}),u=c.props;for(R(u,c.opts.specialEasing);o>s;s++)if(i=on[s].call(c,e,u,c.opts))return i;return it.map(u,I,c),it.isFunction(c.opts.start)&&c.opts.start.call(e,c),it.fx.timer(it.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function A(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,s=t.toLowerCase().match(vt)||[];if(it.isFunction(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function z(e,t,n,i){function r(a){var l;return s[a]=!0,it.each(e[a]||[],function(e,a){var c=a(t,n,i);return"string"!=typeof c||o||s[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),l}var s={},o=e===kn;return r(t.dataTypes[0])||!s["*"]&&r("*")}function F(e,t){var n,i,r=it.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&it.extend(!0,e,i),e}function H(e,t,n){for(var i,r,s,o,a=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}return s?(s!==l[0]&&l.unshift(s),n[s]):void 0}function U(e,t,n,i){var r,s,o,a,l,c={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)c[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(o=c[l+" "+s]||c["* "+s],!o)for(r in c)if(a=r.split(" "),a[1]===s&&(o=c[l+" "+a[0]]||c["* "+a[0]])){o===!0?o=c[r]:c[r]!==!0&&(s=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(d){return{state:"parsererror",error:o?d:"No conversion from "+l+" to "+s}}}return{state:"success",data:t}}function B(e,t,n,i){var r;if(it.isArray(t))it.each(t,function(t,r){n||Sn.test(e)?i(e,r):B(e+"["+("object"==typeof r?t:"")+"]",r,n,i)});else if(n||"object"!==it.type(t))i(e,t);else for(r in t)B(e+"["+r+"]",t[r],n,i)}function W(e){return it.isWindow(e)?e:9===e.nodeType&&e.defaultView}var q=[],V=q.slice,G=q.concat,K=q.push,J=q.indexOf,X={},Q=X.toString,Z=X.hasOwnProperty,et={},tt=r.document,nt="2.1.1",it=function(e,t){return new it.fn.init(e,t)},rt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,ot=/-([\da-z])/gi,at=function(e,t){return t.toUpperCase()};it.fn=it.prototype={jquery:nt,constructor:it,selector:"",length:0,toArray:function(){return V.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:V.call(this)},pushStack:function(e){var t=it.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return it.each(this,e,t)},map:function(e){return this.pushStack(it.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:q.sort,splice:q.splice},it.extend=it.fn.extend=function(){var e,t,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||it.isFunction(o)||(o={}),a===l&&(o=this,a--);l>a;a++)if(null!=(e=arguments[a]))for(t in e)n=o[t],i=e[t],o!==i&&(c&&i&&(it.isPlainObject(i)||(r=it.isArray(i)))?(r?(r=!1,s=n&&it.isArray(n)?n:[]):s=n&&it.isPlainObject(n)?n:{},o[t]=it.extend(c,s,i)):void 0!==i&&(o[t]=i));return o},it.extend({expando:"jQuery"+(nt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===it.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!it.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"!==it.type(e)||e.nodeType||it.isWindow(e)?!1:e.constructor&&!Z.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?X[Q.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=it.trim(e),e&&(1===e.indexOf("use strict")?(t=tt.createElement("script"),t.text=e,tt.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(st,"ms-").replace(ot,at)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var i,r=0,s=e.length,a=o(e);if(n){if(a)for(;s>r&&(i=t.apply(e[r],n),i!==!1);r++);else for(r in e)if(i=t.apply(e[r],n),i===!1)break}else if(a)for(;s>r&&(i=t.call(e[r],r,e[r]),i!==!1);r++);else for(r in e)if(i=t.call(e[r],r,e[r]),i===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(rt,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(o(Object(e))?it.merge(n,"string"==typeof e?[e]:e):K.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:J.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],s=0,o=e.length,a=!n;o>s;s++)i=!t(e[s],s),i!==a&&r.push(e[s]);return r},map:function(e,t,n){var i,r=0,s=e.length,a=o(e),l=[];if(a)for(;s>r;r++)i=t(e[r],r,n),null!=i&&l.push(i);else for(r in e)i=t(e[r],r,n),null!=i&&l.push(i);return G.apply([],l)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),it.isFunction(e)?(i=V.call(arguments,2),r=function(){return e.apply(t||this,i.concat(V.call(arguments)))},r.guid=e.guid=e.guid||it.guid++,r):void 0},now:Date.now,support:et}),it.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){X["[object "+t+"]"]=t.toLowerCase()});var lt=/*!
	 * Sizzle CSS Selector Engine v1.10.19
	 * http://sizzlejs.com/
	 *
	 * Copyright 2013 jQuery Foundation, Inc. and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2014-04-18
	 */
function(e){function t(e,t,n,i){var r,s,o,a,l,c,d,h,f,m;if((t?t.ownerDocument||t:z)!==O&&$(t),t=t||O,n=n||[],!e||"string"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(N&&!i){if(r=bt.exec(e))if(o=r[1]){if(9===a){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&P(t,s)&&s.id===o)return n.push(s),n}else{if(r[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((o=r[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&(!I||!I.test(e))){if(h=d=A,f=t,m=9===a&&e,1===a&&"object"!==t.nodeName.toLowerCase()){for(c=T(e),(d=t.getAttribute("id"))?h=d.replace(_t,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+p(c[l]);f=yt.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return j(e.replace(lt,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[A]=!0,e}function r(e){var t=O.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split("|"),i=e.length;i--;)x.attrHandle[n[i]]=t}function o(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||G)-(~e.sourceIndex||G);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var r,s=e([],n.length,t),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))})})}function u(e){return e&&typeof e.getElementsByTagName!==V&&e}function d(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function h(e,t,n){var i=t.dir,r=n&&"parentNode"===i,s=H++;return t.first?function(t,n,s){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,s)}:function(t,n,o){var a,l,c=[F,s];if(o){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,o))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(l=t[A]||(t[A]={}),(a=l[i])&&a[0]===F&&a[1]===s)return c[2]=a[2];if(l[i]=c,c[2]=e(t,n,o))return!0}}}function f(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,s=n.length;s>r;r++)t(e,n[r],i);return i}function g(e,t,n,i,r){for(var s,o=[],a=0,l=e.length,c=null!=t;l>a;a++)(s=e[a])&&(!n||n(s,i,r))&&(o.push(s),c&&t.push(a));return o}function v(e,t,n,r,s,o){return r&&!r[A]&&(r=v(r)),s&&!s[A]&&(s=v(s,o)),i(function(i,o,a,l){var c,u,d,p=[],h=[],f=o.length,v=i||m(t||"*",a.nodeType?[a]:a,[]),b=!e||!i&&t?v:g(v,p,e,a,l),y=n?s||(i?e:f||r)?[]:o:b;if(n&&n(b,y,a,l),r)for(c=g(y,h),r(c,[],a,l),u=c.length;u--;)(d=c[u])&&(y[h[u]]=!(b[h[u]]=d));if(i){if(s||e){if(s){for(c=[],u=y.length;u--;)(d=y[u])&&c.push(b[u]=d);s(null,y=[],c,l)}for(u=y.length;u--;)(d=y[u])&&(c=s?tt.call(i,d):p[u])>-1&&(i[c]=!(o[c]=d))}}else y=g(y===o?y.splice(f,y.length):y),s?s(null,o,y,l):Z.apply(o,y)})}function b(e){for(var t,n,i,r=e.length,s=x.relative[e[0].type],o=s||x.relative[" "],a=s?1:0,l=h(function(e){return e===t},o,!0),c=h(function(e){return tt.call(t,e)>-1},o,!0),u=[function(e,n,i){return!s&&(i||n!==C)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];r>a;a++)if(n=x.relative[e[a].type])u=[h(f(u),n)];else{if(n=x.filter[e[a].type].apply(null,e[a].matches),n[A]){for(i=++a;r>i&&!x.relative[e[i].type];i++);return v(a>1&&f(u),a>1&&p(e.slice(0,a-1).concat({value:" "===e[a-2].type?"*":""})).replace(lt,"$1"),n,i>a&&b(e.slice(a,i)),r>i&&b(e=e.slice(i)),r>i&&p(e))}u.push(n)}return f(u)}function y(e,n){var r=n.length>0,s=e.length>0,o=function(i,o,a,l,c){var u,d,p,h=0,f="0",m=i&&[],v=[],b=C,y=i||s&&x.find.TAG("*",c),_=F+=null==b?1:Math.random()||.1,w=y.length;for(c&&(C=o!==O&&o);f!==w&&null!=(u=y[f]);f++){if(s&&u){for(d=0;p=e[d++];)if(p(u,o,a)){l.push(u);break}c&&(F=_)}r&&((u=!p&&u)&&h--,i&&m.push(u))}if(h+=f,r&&f!==h){for(d=0;p=n[d++];)p(m,v,o,a);if(i){if(h>0)for(;f--;)m[f]||v[f]||(v[f]=X.call(l));v=g(v)}Z.apply(l,v),c&&!i&&v.length>0&&h+n.length>1&&t.uniqueSort(l)}return c&&(F=_,C=b),m};return r?i(o):o}var _,w,x,D,M,T,k,j,C,L,S,$,O,E,N,I,Y,R,P,A="sizzle"+-new Date,z=e.document,F=0,H=0,U=n(),B=n(),W=n(),q=function(e,t){return e===t&&(S=!0),0},V="undefined",G=1<<31,K={}.hasOwnProperty,J=[],X=J.pop,Q=J.push,Z=J.push,et=J.slice,tt=J.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",it="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",st=rt.replace("w","w#"),ot="\\["+it+"*("+rt+")(?:"+it+"*([*^$|!~]?=)"+it+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+st+"))|)"+it+"*\\]",at=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",lt=new RegExp("^"+it+"+|((?:^|[^\\\\])(?:\\\\.)*)"+it+"+$","g"),ct=new RegExp("^"+it+"*,"+it+"*"),ut=new RegExp("^"+it+"*([>+~]|"+it+")"+it+"*"),dt=new RegExp("="+it+"*([^\\]'\"]*?)"+it+"*\\]","g"),pt=new RegExp(at),ht=new RegExp("^"+st+"$"),ft={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+it+"*(even|odd|(([+-]|)(\\d*)n|)"+it+"*(?:([+-]|)"+it+"*(\\d+)|))"+it+"*\\)|)","i"),bool:new RegExp("^(?:"+nt+")$","i"),needsContext:new RegExp("^"+it+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+it+"*((?:-\\d)?\\d*)"+it+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,_t=/'|\\/g,wt=new RegExp("\\\\([\\da-f]{1,6}"+it+"?|("+it+")|.)","ig"),xt=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(J=et.call(z.childNodes),z.childNodes),J[z.childNodes.length].nodeType}catch(Dt){Z={apply:J.length?function(e,t){Q.apply(e,et.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},M=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},$=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:z,i=n.defaultView;return n!==O&&9===n.nodeType&&n.documentElement?(O=n,E=n.documentElement,N=!M(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){$()},!1):i.attachEvent&&i.attachEvent("onunload",function(){$()})),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=vt.test(n.getElementsByClassName)&&r(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),w.getById=r(function(e){return E.appendChild(e).id=A,!n.getElementsByName||!n.getElementsByName(A).length}),w.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==V&&N){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(wt,xt);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(wt,xt);return function(e){var n=typeof e.getAttributeNode!==V&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==V?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],r=0,s=t.getElementsByTagName(e);if("*"===e){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},x.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==V&&N?t.getElementsByClassName(e):void 0},Y=[],I=[],(w.qsa=vt.test(n.querySelectorAll))&&(r(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&I.push("[*^$]="+it+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+it+"*(?:value|"+nt+")"),e.querySelectorAll(":checked").length||I.push(":checked")}),r(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+it+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(w.matchesSelector=vt.test(R=E.matches||E.webkitMatchesSelector||E.mozMatchesSelector||E.oMatchesSelector||E.msMatchesSelector))&&r(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),Y.push("!=",at)}),I=I.length&&new RegExp(I.join("|")),Y=Y.length&&new RegExp(Y.join("|")),t=vt.test(E.compareDocumentPosition),P=t||vt.test(E.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return S=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===z&&P(z,e)?-1:t===n||t.ownerDocument===z&&P(z,t)?1:L?tt.call(L,e)-tt.call(L,t):0:4&i?-1:1)}:function(e,t){if(e===t)return S=!0,0;var i,r=0,s=e.parentNode,a=t.parentNode,l=[e],c=[t];if(!s||!a)return e===n?-1:t===n?1:s?-1:a?1:L?tt.call(L,e)-tt.call(L,t):0;if(s===a)return o(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[r]===c[r];)r++;return r?o(l[r],c[r]):l[r]===z?-1:c[r]===z?1:0},n):O},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==O&&$(e),n=n.replace(dt,"='$1']"),!(!w.matchesSelector||!N||Y&&Y.test(n)||I&&I.test(n)))try{var i=R.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&$(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&$(e);var n=x.attrHandle[t.toLowerCase()],i=n&&K.call(x.attrHandle,t.toLowerCase())?n(e,t,!N):void 0;return void 0!==i?i:w.attributes||!N?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(S=!w.detectDuplicates,L=!w.sortStable&&e.slice(0),e.sort(q),S){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return L=null,e},D=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=D(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=D(t);return n},x=t.selectors={cacheLength:50,createPseudo:i,match:ft,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,xt),e[3]=(e[3]||e[4]||e[5]||"").replace(wt,xt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&pt.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,xt).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+it+")"+e+"("+it+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==V&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var s=t.attr(r,e);return null==s?"!="===n:n?(s+="","="===n?s===i:"!="===n?s!==i:"^="===n?i&&0===s.indexOf(i):"*="===n?i&&s.indexOf(i)>-1:"$="===n?i&&s.slice(-i.length)===i:"~="===n?(" "+s+" ").indexOf(i)>-1:"|="===n?s===i||s.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,r){var s="nth"!==e.slice(0,3),o="last"!==e.slice(-4),a="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,p,h,f,m=s!==o?"nextSibling":"previousSibling",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),b=!l&&!a;if(g){if(s){for(;m;){for(d=t;d=d[m];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=m="only"===e&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&b){for(u=g[A]||(g[A]={}),c=u[e]||[],h=c[0]===F&&c[1],p=c[0]===F&&c[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(p=h=0)||f.pop();)if(1===d.nodeType&&++p&&d===t){u[e]=[F,h,p];break}}else if(b&&(c=(t[A]||(t[A]={}))[e])&&c[0]===F)p=c[1];else for(;(d=++h&&d&&d[m]||(p=h=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++p||(b&&((d[A]||(d[A]={}))[e]=[F,p]),d!==t)););return p-=r,p===i||p%i===0&&p/i>=0}}},PSEUDO:function(e,n){var r,s=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return s[A]?s(n):s.length>1?(r=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=s(e,n),o=r.length;o--;)i=tt.call(e,r[o]),e[i]=!(t[i]=r[o])}):function(e){return s(e,0,r)}):s}},pseudos:{not:i(function(e){var t=[],n=[],r=k(e.replace(lt,"$1"));return r[A]?i(function(e,t,n,i){for(var s,o=r(e,null,i,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return function(t){return(t.textContent||t.innerText||D(t)).indexOf(e)>-1}}),lang:i(function(e){return ht.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(wt,xt).toLowerCase(),function(t){var n;do if(n=N?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===E},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},x.pseudos.nth=x.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[_]=a(_);for(_ in{submit:!0,reset:!0})x.pseudos[_]=l(_);return d.prototype=x.filters=x.pseudos,x.setFilters=new d,T=t.tokenize=function(e,n){var i,r,s,o,a,l,c,u=B[e+" "];if(u)return n?0:u.slice(0);for(a=e,l=[],c=x.preFilter;a;){(!i||(r=ct.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=ut.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(lt," ")}),a=a.slice(i.length));for(o in x.filter)!(r=ft[o].exec(a))||c[o]&&!(r=c[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?t.error(e):B(e,l).slice(0)},k=t.compile=function(e,t){var n,i=[],r=[],s=W[e+" "];if(!s){for(t||(t=T(e)),n=t.length;n--;)s=b(t[n]),s[A]?i.push(s):r.push(s);s=W(e,y(r,i)),s.selector=e}return s},j=t.select=function(e,t,n,i){var r,s,o,a,l,c="function"==typeof e&&e,d=!i&&T(e=c.selector||e);if(n=n||[],1===d.length){if(s=d[0]=d[0].slice(0),s.length>2&&"ID"===(o=s[0]).type&&w.getById&&9===t.nodeType&&N&&x.relative[s[1].type]){if(t=(x.find.ID(o.matches[0].replace(wt,xt),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(r=ft.needsContext.test(e)?0:s.length;r--&&(o=s[r],!x.relative[a=o.type]);)if((l=x.find[a])&&(i=l(o.matches[0].replace(wt,xt),yt.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(r,1),e=i.length&&p(s),!e)return Z.apply(n,i),n;break}}return(c||k(e,d))(i,t,!N,n,yt.test(e)&&u(t.parentNode)||t),n},w.sortStable=A.split("").sort(q).join("")===A,w.detectDuplicates=!!S,$(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(O.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||s("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||s("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||s(nt,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(r);it.find=lt,it.expr=lt.selectors,it.expr[":"]=it.expr.pseudos,it.unique=lt.uniqueSort,it.text=lt.getText,it.isXMLDoc=lt.isXML,it.contains=lt.contains;var ct=it.expr.match.needsContext,ut=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,dt=/^.[^:#\[\.,]*$/;it.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?it.find.matchesSelector(i,e)?[i]:[]:it.find.matches(e,it.grep(t,function(e){return 1===e.nodeType}))},it.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(it(e).filter(function(){for(t=0;n>t;t++)if(it.contains(r[t],this))return!0}));for(t=0;n>t;t++)it.find(e,r[t],i);return i=this.pushStack(n>1?it.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(a(this,e||[],!1))},not:function(e){return this.pushStack(a(this,e||[],!0))},is:function(e){return!!a(this,"string"==typeof e&&ct.test(e)?it(e):e||[],!1).length}});var pt,ht=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ft=it.fn.init=function(e,t){var n,i;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ht.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||pt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof it?t[0]:t,it.merge(this,it.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:tt,!0)),ut.test(n[1])&&it.isPlainObject(t))for(n in t)it.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return i=tt.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=tt,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):it.isFunction(e)?"undefined"!=typeof pt.ready?pt.ready(e):e(it):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),it.makeArray(e,this))};ft.prototype=it.fn,pt=it(tt);var mt=/^(?:parents|prev(?:Until|All))/,gt={children:!0,contents:!0,next:!0,prev:!0};it.extend({dir:function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&it(e).is(n))break;i.push(e)}return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),it.fn.extend({has:function(e){var t=it(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(it.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,s=[],o=ct.test(e)||"string"!=typeof e?it(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&it.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?it.unique(s):s)},index:function(e){return e?"string"==typeof e?J.call(it(e),this[0]):J.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(it.unique(it.merge(this.get(),it(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),it.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return it.dir(e,"parentNode")},parentsUntil:function(e,t,n){return it.dir(e,"parentNode",n)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return it.dir(e,"nextSibling")},prevAll:function(e){return it.dir(e,"previousSibling")},nextUntil:function(e,t,n){return it.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return it.dir(e,"previousSibling",n)},siblings:function(e){return it.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return it.sibling(e.firstChild)},contents:function(e){return e.contentDocument||it.merge([],e.childNodes)}},function(e,t){it.fn[e]=function(n,i){var r=it.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=it.filter(i,r)),this.length>1&&(gt[e]||it.unique(r),mt.test(e)&&r.reverse()),this.pushStack(r)}});var vt=/\S+/g,bt={};it.Callbacks=function(e){e="string"==typeof e?bt[e]||c(e):it.extend({},e);var t,n,i,r,s,o,a=[],l=!e.once&&[],u=function(c){for(t=e.memory&&c,n=!0,o=r||0,r=0,s=a.length,i=!0;a&&s>o;o++)if(a[o].apply(c[0],c[1])===!1&&e.stopOnFalse){t=!1;break}i=!1,a&&(l?l.length&&u(l.shift()):t?a=[]:d.disable())},d={add:function(){if(a){var n=a.length;!function o(t){it.each(t,function(t,n){var i=it.type(n);"function"===i?e.unique&&d.has(n)||a.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?s=a.length:t&&(r=n,u(t))}return this},remove:function(){return a&&it.each(arguments,function(e,t){for(var n;(n=it.inArray(t,a,n))>-1;)a.splice(n,1),i&&(s>=n&&s--,o>=n&&o--)}),this},has:function(e){return e?it.inArray(e,a)>-1:!(!a||!a.length)},empty:function(){return a=[],s=0,this},disable:function(){return a=l=t=void 0,this},disabled:function(){return!a},lock:function(){return l=void 0,t||d.disable(),this},locked:function(){return!l},fireWith:function(e,t){return!a||n&&!l||(t=t||[],t=[e,t.slice?t.slice():t],i?l.push(t):u(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},it.extend({Deferred:function(e){var t=[["resolve","done",it.Callbacks("once memory"),"resolved"],["reject","fail",it.Callbacks("once memory"),"rejected"],["notify","progress",it.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return it.Deferred(function(n){it.each(t,function(t,s){var o=it.isFunction(e[t])&&e[t];r[s[1]](function(){var e=o&&o.apply(this,arguments);e&&it.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===i?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?it.extend(e,i):i}},r={};return i.pipe=i.then,it.each(t,function(e,s){var o=s[2],a=s[3];i[s[1]]=o.add,a&&o.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),r[s[0]]=function(){return r[s[0]+"With"](this===r?i:this,arguments),this},r[s[0]+"With"]=o.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,s=V.call(arguments),o=s.length,a=1!==o||e&&it.isFunction(e.promise)?o:0,l=1===a?e:it.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?V.call(arguments):r,i===t?l.notifyWith(n,i):--a||l.resolveWith(n,i)}};if(o>1)for(t=new Array(o),n=new Array(o),i=new Array(o);o>r;r++)s[r]&&it.isFunction(s[r].promise)?s[r].promise().done(c(r,i,s)).fail(l.reject).progress(c(r,n,t)):--a;return a||l.resolveWith(i,s),l.promise()}});var yt;it.fn.ready=function(e){return it.ready.promise().done(e),this},it.extend({isReady:!1,readyWait:1,holdReady:function(e){e?it.readyWait++:it.ready(!0)},ready:function(e){(e===!0?--it.readyWait:it.isReady)||(it.isReady=!0,e!==!0&&--it.readyWait>0||(yt.resolveWith(tt,[it]),it.fn.triggerHandler&&(it(tt).triggerHandler("ready"),it(tt).off("ready"))))}}),it.ready.promise=function(e){return yt||(yt=it.Deferred(),"complete"===tt.readyState?setTimeout(it.ready):(tt.addEventListener("DOMContentLoaded",u,!1),r.addEventListener("load",u,!1))),yt.promise(e)},it.ready.promise();var _t=it.access=function(e,t,n,i,r,s,o){var a=0,l=e.length,c=null==n;if("object"===it.type(n)){r=!0;for(a in n)it.access(e,t,a,n[a],!0,s,o)}else if(void 0!==i&&(r=!0,it.isFunction(i)||(o=!0),c&&(o?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(it(e),n)})),t))for(;l>a;a++)t(e[a],n,o?i:i.call(e[a],a,t(e[a],n)));return r?e:c?t.call(e):l?t(e[0],n):s};it.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},d.uid=1,d.accepts=it.acceptData,d.prototype={key:function(e){if(!d.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=d.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(i){t[this.expando]=n,it.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var i,r=this.key(e),s=this.cache[r];if("string"==typeof t)s[t]=n;else if(it.isEmptyObject(s))it.extend(this.cache[r],t);else for(i in t)s[i]=t[i];return s},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,it.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,s=this.key(e),o=this.cache[s];if(void 0===t)this.cache[s]={};else{it.isArray(t)?i=t.concat(t.map(it.camelCase)):(r=it.camelCase(t),t in o?i=[t,r]:(i=r,i=i in o?[i]:i.match(vt)||[])),n=i.length;for(;n--;)delete o[i[n]]}},hasData:function(e){return!it.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var wt=new d,xt=new d,Dt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Mt=/([A-Z])/g;it.extend({hasData:function(e){return xt.hasData(e)||wt.hasData(e)},data:function(e,t,n){return xt.access(e,t,n)},removeData:function(e,t){xt.remove(e,t)},_data:function(e,t,n){return wt.access(e,t,n)},_removeData:function(e,t){wt.remove(e,t)}}),it.fn.extend({data:function(e,t){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(r=xt.get(s),1===s.nodeType&&!wt.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&(i=o[n].name,0===i.indexOf("data-")&&(i=it.camelCase(i.slice(5)),p(s,i,r[i])));wt.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){xt.set(this,e)}):_t(this,function(t){var n,i=it.camelCase(e);if(s&&void 0===t){if(n=xt.get(s,e),void 0!==n)return n;if(n=xt.get(s,i),void 0!==n)return n;if(n=p(s,i,void 0),void 0!==n)return n}else this.each(function(){var n=xt.get(this,i);xt.set(this,i,t),-1!==e.indexOf("-")&&void 0!==n&&xt.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){xt.remove(this,e)})}}),it.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=wt.get(e,t),n&&(!i||it.isArray(n)?i=wt.access(e,t,it.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=it.queue(e,t),i=n.length,r=n.shift(),s=it._queueHooks(e,t),o=function(){it.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete s.stop,r.call(e,o,s)),!i&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return wt.get(e,n)||wt.access(e,n,{empty:it.Callbacks("once memory").add(function(){wt.remove(e,[t+"queue",n])})})}}),it.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?it.queue(this[0],e):void 0===t?this:this.each(function(){var n=it.queue(this,e,t);it._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&it.dequeue(this,e)})},dequeue:function(e){return this.each(function(){it.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=it.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)n=wt.get(s[o],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(t)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,kt=["Top","Right","Bottom","Left"],jt=function(e,t){return e=t||e,"none"===it.css(e,"display")||!it.contains(e.ownerDocument,e)},Ct=/^(?:checkbox|radio)$/i;!function(){var e=tt.createDocumentFragment(),t=e.appendChild(tt.createElement("div")),n=tt.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),et.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",et.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Lt="undefined";et.focusinBubbles="onfocusin"in r;var St=/^key/,$t=/^(?:mouse|pointer|contextmenu)|click/,Ot=/^(?:focusinfocus|focusoutblur)$/,Et=/^([^.]*)(?:\.(.+)|)$/;it.event={global:{},add:function(e,t,n,i,r){var s,o,a,l,c,u,d,p,h,f,m,g=wt.get(e);if(g)for(n.handler&&(s=n,n=s.handler,r=s.selector),n.guid||(n.guid=it.guid++),(l=g.events)||(l=g.events={}),(o=g.handle)||(o=g.handle=function(t){return typeof it!==Lt&&it.event.triggered!==t.type?it.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(vt)||[""],c=t.length;c--;)a=Et.exec(t[c])||[],h=m=a[1],f=(a[2]||"").split(".").sort(),h&&(d=it.event.special[h]||{},h=(r?d.delegateType:d.bindType)||h,d=it.event.special[h]||{},u=it.extend({type:h,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&it.expr.match.needsContext.test(r),namespace:f.join(".")},s),(p=l[h])||(p=l[h]=[],p.delegateCount=0,d.setup&&d.setup.call(e,i,f,o)!==!1||e.addEventListener&&e.addEventListener(h,o,!1)),d.add&&(d.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,u):p.push(u),it.event.global[h]=!0)},remove:function(e,t,n,i,r){var s,o,a,l,c,u,d,p,h,f,m,g=wt.hasData(e)&&wt.get(e);if(g&&(l=g.events)){for(t=(t||"").match(vt)||[""],c=t.length;c--;)if(a=Et.exec(t[c])||[],h=m=a[1],f=(a[2]||"").split(".").sort(),h){for(d=it.event.special[h]||{},h=(i?d.delegateType:d.bindType)||h,p=l[h]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=p.length;s--;)u=p[s],!r&&m!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(p.splice(s,1),u.selector&&p.delegateCount--,d.remove&&d.remove.call(e,u));o&&!p.length&&(d.teardown&&d.teardown.call(e,f,g.handle)!==!1||it.removeEvent(e,h,g.handle),delete l[h])}else for(h in l)it.event.remove(e,h+t[c],n,i,!0);it.isEmptyObject(l)&&(delete g.handle,wt.remove(e,"events"))}},trigger:function(e,t,n,i){var s,o,a,l,c,u,d,p=[n||tt],h=Z.call(e,"type")?e.type:e,f=Z.call(e,"namespace")?e.namespace.split("."):[];if(o=a=n=n||tt,3!==n.nodeType&&8!==n.nodeType&&!Ot.test(h+it.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,e=e[it.expando]?e:new it.Event(h,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:it.makeArray(t,[e]),d=it.event.special[h]||{},i||!d.trigger||d.trigger.apply(n,t)!==!1)){if(!i&&!d.noBubble&&!it.isWindow(n)){for(l=d.delegateType||h,Ot.test(l+h)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;
a===(n.ownerDocument||tt)&&p.push(a.defaultView||a.parentWindow||r)}for(s=0;(o=p[s++])&&!e.isPropagationStopped();)e.type=s>1?l:d.bindType||h,u=(wt.get(o,"events")||{})[e.type]&&wt.get(o,"handle"),u&&u.apply(o,t),u=c&&o[c],u&&u.apply&&it.acceptData(o)&&(e.result=u.apply(o,t),e.result===!1&&e.preventDefault());return e.type=h,i||e.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),t)!==!1||!it.acceptData(n)||c&&it.isFunction(n[h])&&!it.isWindow(n)&&(a=n[c],a&&(n[c]=null),it.event.triggered=h,n[h](),it.event.triggered=void 0,a&&(n[c]=a)),e.result}},dispatch:function(e){e=it.event.fix(e);var t,n,i,r,s,o=[],a=V.call(arguments),l=(wt.get(this,"events")||{})[e.type]||[],c=it.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(o=it.event.handlers.call(this,e,l),t=0;(r=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(s.namespace))&&(e.handleObj=s,e.data=s.data,i=((it.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,s,o=[],a=t.delegateCount,l=e.target;if(a&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(i=[],n=0;a>n;n++)s=t[n],r=s.selector+" ",void 0===i[r]&&(i[r]=s.needsContext?it(r,this).index(l)>=0:it.find(r,this,null,[l]).length),i[r]&&i.push(s);i.length&&o.push({elem:l,handlers:i})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,s=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||tt,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},fix:function(e){if(e[it.expando])return e;var t,n,i,r=e.type,s=e,o=this.fixHooks[r];for(o||(this.fixHooks[r]=o=$t.test(r)?this.mouseHooks:St.test(r)?this.keyHooks:{}),i=o.props?this.props.concat(o.props):this.props,e=new it.Event(s),t=i.length;t--;)n=i[t],e[n]=s[n];return e.target||(e.target=tt),3===e.target.nodeType&&(e.target=e.target.parentNode),o.filter?o.filter(e,s):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&it.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return it.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,i){var r=it.extend(new it.Event,n,{type:e,isSimulated:!0,originalEvent:{}});i?it.event.trigger(r,null,t):it.event.dispatch.call(t,r),r.isDefaultPrevented()&&n.preventDefault()}},it.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},it.Event=function(e,t){return this instanceof it.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?h:f):this.type=e,t&&it.extend(this,t),this.timeStamp=e&&e.timeStamp||it.now(),void(this[it.expando]=!0)):new it.Event(e,t)},it.Event.prototype={isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=h,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=h,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},it.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){it.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,s=e.handleObj;return(!r||r!==i&&!it.contains(i,r))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),et.focusinBubbles||it.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){it.event.simulate(t,e.target,it.event.fix(e),!0)};it.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=wt.access(i,t);r||i.addEventListener(e,n,!0),wt.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=wt.access(i,t)-1;r?wt.access(i,t,r):(i.removeEventListener(e,n,!0),wt.remove(i,t))}}}),it.fn.extend({on:function(e,t,n,i,r){var s,o;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],r);return this}if(null==n&&null==i?(i=t,n=t=void 0):null==i&&("string"==typeof t?(i=n,n=void 0):(i=n,n=t,t=void 0)),i===!1)i=f;else if(!i)return this;return 1===r&&(s=i,i=function(e){return it().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=it.guid++)),this.each(function(){it.event.add(this,e,i,n,t)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,it(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=f),this.each(function(){it.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){it.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?it.event.trigger(e,t,n,!0):void 0}});var Nt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,It=/<([\w:]+)/,Yt=/<|&#?\w+;/,Rt=/<(?:script|style|link)/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,At=/^$|\/(?:java|ecma)script/i,zt=/^true\/(.*)/,Ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ht={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ht.optgroup=Ht.option,Ht.tbody=Ht.tfoot=Ht.colgroup=Ht.caption=Ht.thead,Ht.th=Ht.td,it.extend({clone:function(e,t,n){var i,r,s,o,a=e.cloneNode(!0),l=it.contains(e.ownerDocument,e);if(!(et.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||it.isXMLDoc(e)))for(o=w(a),s=w(e),i=0,r=s.length;r>i;i++)x(s[i],o[i]);if(t)if(n)for(s=s||w(e),o=o||w(a),i=0,r=s.length;r>i;i++)_(s[i],o[i]);else _(e,a);return o=w(a,"script"),o.length>0&&y(o,!l&&w(e,"script")),a},buildFragment:function(e,t,n,i){for(var r,s,o,a,l,c,u=t.createDocumentFragment(),d=[],p=0,h=e.length;h>p;p++)if(r=e[p],r||0===r)if("object"===it.type(r))it.merge(d,r.nodeType?[r]:r);else if(Yt.test(r)){for(s=s||u.appendChild(t.createElement("div")),o=(It.exec(r)||["",""])[1].toLowerCase(),a=Ht[o]||Ht._default,s.innerHTML=a[1]+r.replace(Nt,"<$1></$2>")+a[2],c=a[0];c--;)s=s.lastChild;it.merge(d,s.childNodes),s=u.firstChild,s.textContent=""}else d.push(t.createTextNode(r));for(u.textContent="",p=0;r=d[p++];)if((!i||-1===it.inArray(r,i))&&(l=it.contains(r.ownerDocument,r),s=w(u.appendChild(r),"script"),l&&y(s),n))for(c=0;r=s[c++];)At.test(r.type||"")&&n.push(r);return u},cleanData:function(e){for(var t,n,i,r,s=it.event.special,o=0;void 0!==(n=e[o]);o++){if(it.acceptData(n)&&(r=n[wt.expando],r&&(t=wt.cache[r]))){if(t.events)for(i in t.events)s[i]?it.event.remove(n,i):it.removeEvent(n,i,t.handle);wt.cache[r]&&delete wt.cache[r]}delete xt.cache[n[xt.expando]]}}}),it.fn.extend({text:function(e){return _t(this,function(e){return void 0===e?it.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,i=e?it.filter(e,this):this,r=0;null!=(n=i[r]);r++)t||1!==n.nodeType||it.cleanData(w(n)),n.parentNode&&(t&&it.contains(n.ownerDocument,n)&&y(w(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(it.cleanData(w(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return it.clone(this,e,t)})},html:function(e){return _t(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Rt.test(e)&&!Ht[(It.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Nt,"<$1></$2>");try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(it.cleanData(w(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,it.cleanData(w(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=G.apply([],e);var n,i,r,s,o,a,l=0,c=this.length,u=this,d=c-1,p=e[0],h=it.isFunction(p);if(h||c>1&&"string"==typeof p&&!et.checkClone&&Pt.test(p))return this.each(function(n){var i=u.eq(n);h&&(e[0]=p.call(this,n,i.html())),i.domManip(e,t)});if(c&&(n=it.buildFragment(e,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=it.map(w(n,"script"),v),s=r.length;c>l;l++)o=n,l!==d&&(o=it.clone(o,!0,!0),s&&it.merge(r,w(o,"script"))),t.call(this[l],o,l);if(s)for(a=r[r.length-1].ownerDocument,it.map(r,b),l=0;s>l;l++)o=r[l],At.test(o.type||"")&&!wt.access(o,"globalEval")&&it.contains(a,o)&&(o.src?it._evalUrl&&it._evalUrl(o.src):it.globalEval(o.textContent.replace(Ft,"")))}return this}}),it.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){it.fn[e]=function(e){for(var n,i=[],r=it(e),s=r.length-1,o=0;s>=o;o++)n=o===s?this:this.clone(!0),it(r[o])[t](n),K.apply(i,n.get());return this.pushStack(i)}});var Ut,Bt={},Wt=/^margin/,qt=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),Vt=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function e(){o.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o.innerHTML="",i.appendChild(s);var e=r.getComputedStyle(o,null);t="1%"!==e.top,n="4px"===e.width,i.removeChild(s)}var t,n,i=tt.documentElement,s=tt.createElement("div"),o=tt.createElement("div");o.style&&(o.style.backgroundClip="content-box",o.cloneNode(!0).style.backgroundClip="",et.clearCloneStyle="content-box"===o.style.backgroundClip,s.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",s.appendChild(o),r.getComputedStyle&&it.extend(et,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,t=o.appendChild(tt.createElement("div"));return t.style.cssText=o.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",o.style.width="1px",i.appendChild(s),e=!parseFloat(r.getComputedStyle(t,null).marginRight),i.removeChild(s),e}}))}(),it.swap=function(e,t,n,i){var r,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];r=n.apply(e,i||[]);for(s in t)e.style[s]=o[s];return r};var Gt=/^(none|table(?!-c[ea]).+)/,Kt=new RegExp("^("+Tt+")(.*)$","i"),Jt=new RegExp("^([+-])=("+Tt+")","i"),Xt={position:"absolute",visibility:"hidden",display:"block"},Qt={letterSpacing:"0",fontWeight:"400"},Zt=["Webkit","O","Moz","ms"];it.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=T(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,s,o,a=it.camelCase(t),l=e.style;return t=it.cssProps[a]||(it.cssProps[a]=j(l,a)),o=it.cssHooks[t]||it.cssHooks[a],void 0===n?o&&"get"in o&&void 0!==(r=o.get(e,!1,i))?r:l[t]:(s=typeof n,"string"===s&&(r=Jt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(it.css(e,t)),s="number"),null!=n&&n===n&&("number"!==s||it.cssNumber[a]||(n+="px"),et.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,i))||(l[t]=n)),void 0)}},css:function(e,t,n,i){var r,s,o,a=it.camelCase(t);return t=it.cssProps[a]||(it.cssProps[a]=j(e.style,a)),o=it.cssHooks[t]||it.cssHooks[a],o&&"get"in o&&(r=o.get(e,!0,n)),void 0===r&&(r=T(e,t,i)),"normal"===r&&t in Qt&&(r=Qt[t]),""===n||n?(s=parseFloat(r),n===!0||it.isNumeric(s)?s||0:r):r}}),it.each(["height","width"],function(e,t){it.cssHooks[t]={get:function(e,n,i){return n?Gt.test(it.css(e,"display"))&&0===e.offsetWidth?it.swap(e,Xt,function(){return S(e,t,i)}):S(e,t,i):void 0},set:function(e,n,i){var r=i&&Vt(e);return C(e,n,i?L(e,t,i,"border-box"===it.css(e,"boxSizing",!1,r),r):0)}}}),it.cssHooks.marginRight=k(et.reliableMarginRight,function(e,t){return t?it.swap(e,{display:"inline-block"},T,[e,"marginRight"]):void 0}),it.each({margin:"",padding:"",border:"Width"},function(e,t){it.cssHooks[e+t]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+kt[i]+t]=s[i]||s[i-2]||s[0];return r}},Wt.test(e)||(it.cssHooks[e+t].set=C)}),it.fn.extend({css:function(e,t){return _t(this,function(e,t,n){var i,r,s={},o=0;if(it.isArray(t)){for(i=Vt(e),r=t.length;r>o;o++)s[t[o]]=it.css(e,t[o],!1,i);return s}return void 0!==n?it.style(e,t,n):it.css(e,t)},e,t,arguments.length>1)},show:function(){return $(this,!0)},hide:function(){return $(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){jt(this)?it(this).show():it(this).hide()})}}),it.Tween=O,O.prototype={constructor:O,init:function(e,t,n,i,r,s){this.elem=e,this.prop=n,this.easing=r||"swing",this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=s||(it.cssNumber[n]?"":"px")},cur:function(){var e=O.propHooks[this.prop];return e&&e.get?e.get(this):O.propHooks._default.get(this)},run:function(e){var t,n=O.propHooks[this.prop];return this.pos=t=this.options.duration?it.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):O.propHooks._default.set(this),this}},O.prototype.init.prototype=O.prototype,O.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=it.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){it.fx.step[e.prop]?it.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[it.cssProps[e.prop]]||it.cssHooks[e.prop])?it.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},O.propHooks.scrollTop=O.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},it.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},it.fx=O.prototype.init,it.fx.step={};var en,tn,nn=/^(?:toggle|show|hide)$/,rn=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),sn=/queueHooks$/,on=[Y],an={"*":[function(e,t){var n=this.createTween(e,t),i=n.cur(),r=rn.exec(t),s=r&&r[3]||(it.cssNumber[e]?"":"px"),o=(it.cssNumber[e]||"px"!==s&&+i)&&rn.exec(it.css(n.elem,e)),a=1,l=20;if(o&&o[3]!==s){s=s||o[3],r=r||[],o=+i||1;do a=a||".5",o/=a,it.style(n.elem,e,o+s);while(a!==(a=n.cur()/i)&&1!==a&&--l)}return r&&(o=n.start=+o||+i||0,n.unit=s,n.end=r[1]?o+(r[1]+1)*r[2]:+r[2]),n}]};it.Animation=it.extend(P,{tweener:function(e,t){it.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,i=0,r=e.length;r>i;i++)n=e[i],an[n]=an[n]||[],an[n].unshift(t)},prefilter:function(e,t){t?on.unshift(e):on.push(e)}}),it.speed=function(e,t,n){var i=e&&"object"==typeof e?it.extend({},e):{complete:n||!n&&t||it.isFunction(e)&&e,duration:e,easing:n&&t||t&&!it.isFunction(t)&&t};return i.duration=it.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in it.fx.speeds?it.fx.speeds[i.duration]:it.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){it.isFunction(i.old)&&i.old.call(this),i.queue&&it.dequeue(this,i.queue)},i},it.fn.extend({fadeTo:function(e,t,n,i){return this.filter(jt).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=it.isEmptyObject(e),s=it.speed(t,n,i),o=function(){var t=P(this,it.extend({},e),s);(r||wt.get(this,"finish"))&&t.stop(!0)};return o.finish=o,r||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",s=it.timers,o=wt.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&sn.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=e&&s[r].queue!==e||(s[r].anim.stop(n),t=!1,s.splice(r,1));(t||!n)&&it.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=wt.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],s=it.timers,o=i?i.length:0;for(n.finish=!0,it.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),it.each(["toggle","show","hide"],function(e,t){var n=it.fn[t];it.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(N(t,!0),e,i,r)}}),it.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){it.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),it.timers=[],it.fx.tick=function(){var e,t=0,n=it.timers;for(en=it.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||it.fx.stop(),en=void 0},it.fx.timer=function(e){it.timers.push(e),e()?it.fx.start():it.timers.pop()},it.fx.interval=13,it.fx.start=function(){tn||(tn=setInterval(it.fx.tick,it.fx.interval))},it.fx.stop=function(){clearInterval(tn),tn=null},it.fx.speeds={slow:600,fast:200,_default:400},it.fn.delay=function(e,t){return e=it.fx?it.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},function(){var e=tt.createElement("input"),t=tt.createElement("select"),n=t.appendChild(tt.createElement("option"));e.type="checkbox",et.checkOn=""!==e.value,et.optSelected=n.selected,t.disabled=!0,et.optDisabled=!n.disabled,e=tt.createElement("input"),e.value="t",e.type="radio",et.radioValue="t"===e.value}();var ln,cn,un=it.expr.attrHandle;it.fn.extend({attr:function(e,t){return _t(this,it.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){it.removeAttr(this,e)})}}),it.extend({attr:function(e,t,n){var i,r,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===Lt?it.prop(e,t,n):(1===s&&it.isXMLDoc(e)||(t=t.toLowerCase(),i=it.attrHooks[t]||(it.expr.match.bool.test(t)?cn:ln)),void 0===n?i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=it.find.attr(e,t),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):void it.removeAttr(e,t))},removeAttr:function(e,t){var n,i,r=0,s=t&&t.match(vt);if(s&&1===e.nodeType)for(;n=s[r++];)i=it.propFix[n]||n,it.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!et.radioValue&&"radio"===t&&it.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),cn={set:function(e,t,n){return t===!1?it.removeAttr(e,n):e.setAttribute(n,n),n}},it.each(it.expr.match.bool.source.match(/\w+/g),function(e,t){var n=un[t]||it.find.attr;un[t]=function(e,t,i){var r,s;return i||(s=un[t],un[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,un[t]=s),r}});var dn=/^(?:input|select|textarea|button)$/i;it.fn.extend({prop:function(e,t){return _t(this,it.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[it.propFix[e]||e]})}}),it.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var i,r,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!it.isXMLDoc(e),s&&(t=it.propFix[t]||t,r=it.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||dn.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),et.optSelected||(it.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),it.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){it.propFix[this.toLowerCase()]=this});var pn=/[\t\r\n\f]/g;it.fn.extend({addClass:function(e){var t,n,i,r,s,o,a="string"==typeof e&&e,l=0,c=this.length;if(it.isFunction(e))return this.each(function(t){it(this).addClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(vt)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(pn," "):" ")){for(s=0;r=t[s++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");o=it.trim(i),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,i,r,s,o,a=0===arguments.length||"string"==typeof e&&e,l=0,c=this.length;if(it.isFunction(e))return this.each(function(t){it(this).removeClass(e.call(this,t,this.className))});if(a)for(t=(e||"").match(vt)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(pn," "):"")){for(s=0;r=t[s++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");o=e?it.trim(i):"",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(it.isFunction(e)?function(n){it(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,i=0,r=it(this),s=e.match(vt)||[];t=s[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else(n===Lt||"boolean"===n)&&(this.className&&wt.set(this,"__className__",this.className),this.className=this.className||e===!1?"":wt.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(pn," ").indexOf(t)>=0)return!0;return!1}});var hn=/\r/g;it.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=it.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,it(this).val()):e,null==r?r="":"number"==typeof r?r+="":it.isArray(r)&&(r=it.map(r,function(e){return null==e?"":e+""})),t=it.valHooks[this.type]||it.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=it.valHooks[r.type]||it.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(hn,""):null==n?"":n)}}}),it.extend({valHooks:{option:{get:function(e){var t=it.find.attr(e,"value");return null!=t?t:it.trim(it.text(e))}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,s="select-one"===e.type||0>r,o=s?null:[],a=s?r+1:i.length,l=0>r?a:s?r:0;a>l;l++)if(n=i[l],!(!n.selected&&l!==r||(et.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&it.nodeName(n.parentNode,"optgroup"))){if(t=it(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,i,r=e.options,s=it.makeArray(t),o=r.length;o--;)i=r[o],(i.selected=it.inArray(i.value,s)>=0)&&(n=!0);return n||(e.selectedIndex=-1),s}}}}),it.each(["radio","checkbox"],function(){it.valHooks[this]={set:function(e,t){return it.isArray(t)?e.checked=it.inArray(it(e).val(),t)>=0:void 0}},et.checkOn||(it.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),it.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){it.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),it.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var fn=it.now(),mn=/\?/;it.parseJSON=function(e){return JSON.parse(e+"")},it.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(i){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&it.error("Invalid XML: "+e),t};var gn,vn,bn=/#.*$/,yn=/([?&])_=[^&]*/,_n=/^(.*?):[ \t]*([^\r\n]*)$/gm,wn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,xn=/^(?:GET|HEAD)$/,Dn=/^\/\//,Mn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Tn={},kn={},jn="*/".concat("*");try{vn=location.href}catch(Cn){vn=tt.createElement("a"),vn.href="",vn=vn.href}gn=Mn.exec(vn.toLowerCase())||[],it.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vn,type:"GET",isLocal:wn.test(gn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":it.parseJSON,"text xml":it.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?F(F(e,it.ajaxSettings),t):F(it.ajaxSettings,e)},ajaxPrefilter:A(Tn),ajaxTransport:A(kn),ajax:function(e,t){function n(e,t,n,o){var l,u,v,b,_,x=t;2!==y&&(y=2,a&&clearTimeout(a),i=void 0,s=o||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(b=H(d,w,n)),b=U(d,b,w,l),l?(d.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(it.lastModified[r]=_),_=w.getResponseHeader("etag"),_&&(it.etag[r]=_)),204===e||"HEAD"===d.type?x="nocontent":304===e?x="notmodified":(x=b.state,u=b.data,v=b.error,l=!v)):(v=x,(e||!x)&&(x="error",0>e&&(e=0))),w.status=e,w.statusText=(t||x)+"",l?f.resolveWith(p,[u,x,w]):f.rejectWith(p,[w,x,v]),w.statusCode(g),g=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[w,d,l?u:v]),m.fireWith(p,[w,x]),c&&(h.trigger("ajaxComplete",[w,d]),--it.active||it.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,r,s,o,a,l,c,u,d=it.ajaxSetup({},t),p=d.context||d,h=d.context&&(p.nodeType||p.jquery)?it(p):it.event,f=it.Deferred(),m=it.Callbacks("once memory"),g=d.statusCode||{},v={},b={},y=0,_="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===y){if(!o)for(o={};t=_n.exec(s);)o[t[1].toLowerCase()]=t[2];t=o[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===y?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return y||(e=b[n]=b[n]||e,v[e]=t),this},overrideMimeType:function(e){return y||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>y)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||_;return i&&i.abort(t),n(0,t),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||vn)+"").replace(bn,"").replace(Dn,gn[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=it.trim(d.dataType||"*").toLowerCase().match(vt)||[""],null==d.crossDomain&&(l=Mn.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===gn[1]&&l[2]===gn[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(gn[3]||("http:"===gn[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=it.param(d.data,d.traditional)),z(Tn,d,t,w),2===y)return w;c=d.global,c&&0===it.active++&&it.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!xn.test(d.type),r=d.url,d.hasContent||(d.data&&(r=d.url+=(mn.test(r)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=yn.test(r)?r.replace(yn,"$1_="+fn++):r+(mn.test(r)?"&":"?")+"_="+fn++)),d.ifModified&&(it.lastModified[r]&&w.setRequestHeader("If-Modified-Since",it.lastModified[r]),it.etag[r]&&w.setRequestHeader("If-None-Match",it.etag[r])),(d.data&&d.hasContent&&d.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+jn+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)w.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(p,w,d)===!1||2===y))return w.abort();_="abort";for(u in{success:1,error:1,complete:1})w[u](d[u]);if(i=z(kn,d,t,w)){w.readyState=1,c&&h.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},d.timeout));try{y=1,i.send(v,n)}catch(x){if(!(2>y))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return it.get(e,t,n,"json")},getScript:function(e,t){return it.get(e,void 0,t,"script")}}),it.each(["get","post"],function(e,t){it[t]=function(e,n,i,r){return it.isFunction(n)&&(r=r||i,i=n,n=void 0),it.ajax({url:e,type:t,dataType:r,data:n,success:i})}}),it.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){it.fn[t]=function(e){return this.on(t,e)}}),it._evalUrl=function(e){return it.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},it.fn.extend({wrapAll:function(e){var t;return it.isFunction(e)?this.each(function(t){it(this).wrapAll(e.call(this,t))}):(this[0]&&(t=it(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(it.isFunction(e)?function(t){it(this).wrapInner(e.call(this,t))}:function(){var t=it(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=it.isFunction(e);return this.each(function(n){it(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){it.nodeName(this,"body")||it(this).replaceWith(this.childNodes)}).end()}}),it.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},it.expr.filters.visible=function(e){return!it.expr.filters.hidden(e)};var Ln=/%20/g,Sn=/\[\]$/,$n=/\r?\n/g,On=/^(?:submit|button|image|reset|file)$/i,En=/^(?:input|select|textarea|keygen)/i;
it.param=function(e,t){var n,i=[],r=function(e,t){t=it.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=it.ajaxSettings&&it.ajaxSettings.traditional),it.isArray(e)||e.jquery&&!it.isPlainObject(e))it.each(e,function(){r(this.name,this.value)});else for(n in e)B(n,e[n],t,r);return i.join("&").replace(Ln,"+")},it.fn.extend({serialize:function(){return it.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=it.prop(this,"elements");return e?it.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!it(this).is(":disabled")&&En.test(this.nodeName)&&!On.test(e)&&(this.checked||!Ct.test(e))}).map(function(e,t){var n=it(this).val();return null==n?null:it.isArray(n)?it.map(n,function(e){return{name:t.name,value:e.replace($n,"\r\n")}}):{name:t.name,value:n.replace($n,"\r\n")}}).get()}}),it.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Nn=0,In={},Yn={0:200,1223:204},Rn=it.ajaxSettings.xhr();r.ActiveXObject&&it(r).on("unload",function(){for(var e in In)In[e]()}),et.cors=!!Rn&&"withCredentials"in Rn,et.ajax=Rn=!!Rn,it.ajaxTransport(function(e){var t;return et.cors||Rn&&!e.crossDomain?{send:function(n,i){var r,s=e.xhr(),o=++Nn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)s[r]=e.xhrFields[r];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)s.setRequestHeader(r,n[r]);t=function(e){return function(){t&&(delete In[o],t=s.onload=s.onerror=null,"abort"===e?s.abort():"error"===e?i(s.status,s.statusText):i(Yn[s.status]||s.status,s.statusText,"string"==typeof s.responseText?{text:s.responseText}:void 0,s.getAllResponseHeaders()))}},s.onload=t(),s.onerror=t("error"),t=In[o]=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(a){if(t)throw a}},abort:function(){t&&t()}}:void 0}),it.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return it.globalEval(e),e}}}),it.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),it.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=it("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),tt.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Pn=[],An=/(=)\?(?=&|$)|\?\?/;it.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Pn.pop()||it.expando+"_"+fn++;return this[e]=!0,e}}),it.ajaxPrefilter("json jsonp",function(e,t,n){var i,s,o,a=e.jsonp!==!1&&(An.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&An.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=it.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(An,"$1"+i):e.jsonp!==!1&&(e.url+=(mn.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||it.error(i+" was not called"),o[0]},e.dataTypes[0]="json",s=r[i],r[i]=function(){o=arguments},n.always(function(){r[i]=s,e[i]&&(e.jsonpCallback=t.jsonpCallback,Pn.push(i)),o&&it.isFunction(s)&&s(o[0]),o=s=void 0}),"script"):void 0}),it.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||tt;var i=ut.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=it.buildFragment([e],t,r),r&&r.length&&it(r).remove(),it.merge([],i.childNodes))};var zn=it.fn.load;it.fn.load=function(e,t,n){if("string"!=typeof e&&zn)return zn.apply(this,arguments);var i,r,s,o=this,a=e.indexOf(" ");return a>=0&&(i=it.trim(e.slice(a)),e=e.slice(0,a)),it.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),o.length>0&&it.ajax({url:e,type:r,dataType:"html",data:t}).done(function(e){s=arguments,o.html(i?it("<div>").append(it.parseHTML(e)).find(i):e)}).complete(n&&function(e,t){o.each(n,s||[e.responseText,t,e])}),this},it.expr.filters.animated=function(e){return it.grep(it.timers,function(t){return e===t.elem}).length};var Fn=r.document.documentElement;it.offset={setOffset:function(e,t,n){var i,r,s,o,a,l,c,u=it.css(e,"position"),d=it(e),p={};"static"===u&&(e.style.position="relative"),a=d.offset(),s=it.css(e,"top"),l=it.css(e,"left"),c=("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1,c?(i=d.position(),o=i.top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),it.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+o),null!=t.left&&(p.left=t.left-a.left+r),"using"in t?t.using.call(e,p):d.css(p)}},it.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){it.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},s=i&&i.ownerDocument;if(s)return t=s.documentElement,it.contains(t,i)?(typeof i.getBoundingClientRect!==Lt&&(r=i.getBoundingClientRect()),n=W(s),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===it.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),it.nodeName(e[0],"html")||(i=e.offset()),i.top+=it.css(e[0],"borderTopWidth",!0),i.left+=it.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-it.css(n,"marginTop",!0),left:t.left-i.left-it.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Fn;e&&!it.nodeName(e,"html")&&"static"===it.css(e,"position");)e=e.offsetParent;return e||Fn})}}),it.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;it.fn[e]=function(i){return _t(this,function(e,i,s){var o=W(e);return void 0===s?o?o[t]:e[i]:void(o?o.scrollTo(n?r.pageXOffset:s,n?s:r.pageYOffset):e[i]=s)},e,i,arguments.length,null)}}),it.each(["top","left"],function(e,t){it.cssHooks[t]=k(et.pixelPosition,function(e,n){return n?(n=T(e,t),qt.test(n)?it(e).position()[t]+"px":n):void 0})}),it.each({Height:"height",Width:"width"},function(e,t){it.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){it.fn[i]=function(i,r){var s=arguments.length&&(n||"boolean"!=typeof i),o=n||(i===!0||r===!0?"margin":"border");return _t(this,function(t,n,i){var r;return it.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?it.css(t,n,o):it.style(t,n,i,o)},t,s?i:void 0,s,null)}})}),it.fn.size=function(){return this.length},it.fn.andSelf=it.fn.addBack,n=[],i=function(){return it}.apply(t,n),!(void 0!==i&&(e.exports=i));var Hn=r.jQuery,Un=r.$;return it.noConflict=function(e){return r.$===it&&(r.$=Un),e&&r.jQuery===it&&(r.jQuery=Hn),it},typeof s===Lt&&(r.jQuery=r.$=it),it})},function(e,t,n){e.exports={assign:Object.assign,cloneDeep:n(314),forOwn:n(37),isFunction:n(64),pick:n(317),find:n(293),contains:n(292),map:n(295),findIndex:n(288),compact:n(287),without:n(290),zipObject:n(291),last:n(289),partial:n(298),once:n(297),escape:n(319),noop:function(){}}},function(e,t,n){"use strict";var i=n(69),r=function(e,t){var n={};return i(n,e),i(n,t),n};e.exports=r},function(e){"use strict";e.exports={FOCUSABLE_ELEMENTS:"input, select, textarea",URL_REGEX:/^(((https|http|ftp|sftp|file):\/)|(\/)){1}(.*)+$/,PHONE_REGEX:/(^\+\d((([\s.-])?\d+)?)+$)|(^(\(\d{3}\)\s?|^\d{3}[\s.-]?)?\d{3}[\s.-]?\d{4}$)/,EMAIL_REGEX:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,listingActions:{MODIFIED:"modified",ADD_RELATED_TO_ITEM:"addrelatedtoitem",REMOVE_RELATED_TO_ITEM:"removerelatedtoitem",ADD_RELATED_ITEMS:"addrelateditems",REMOVE_RELATED_ITEMS:"removerelateditems",OUTSIDE:"outside",INSIDE:"inside",APPROVED:"approved",REJECTED:"rejected",SUBMITTED:"submitted",CREATED:"created",ENABLED:"enabled",DISABLED:"disabled",TAG_CREATED:"tag_created",TAG_DELETED:"tag_deleted",REVIEW_EDITED:"review_edited",REVIEW_DELETED:"review_deleted",EMS_INCLUDED:"ems_included",EMS_NOT_INCLUDED:"ems_not_included",CLOUD_HOST_INCLUDED:"cloud_host_included",CLOUD_HOST_NOT_INCLUDED:"cloud_host_not_included",SECURITY_SERVICES_INCLUDED:"security_services_included",SECURITY_SERVICES_NOT_INCLUDED:"security_services_not_included",SCALE_INCLUDED:"scale_included",SCALE_NOT_INCLUDED:"scale_not_included",LICENSE_FREE_INCLUDED:"license_free_included",LICENSE_FREE_NOT_INCLUDED:"license_free_not_included",CLOUD_STORAGE_INCLUDED:"cloud_storage_included",CLOUD_STORAGE_NOT_INCLUDED:"cloud_storage_not_included",BROWSER_INCLUDED:"browser_included",BROWSER_NOT_INCLUDED:"browser_not_included",LOCAL_SCORECARD_QUESTION_UPDATED:"local_scorecard_question_updated"},approvalStatus:{IN_PROGRESS:"Draft",PENDING:"Pending",APPROVED:"Published",REJECTED:"Returned to Owner"},UserRole:{USER:1,ORG_STEWARD:2,APPSMALL_STEWARD:3,ADMIN:4},listingFieldName:{title:"Title",description:"Description",descriptionShort:"Short Description",screenshots:"Screenshots",contacts:"Contacts",height:"Height",width:"Width",tags:"Tags",requirements:"Requirements",categories:"Categories",intents:"Intents",launchUrl:"Launch URL",agency:"Organization",whatIsNew:"What's New",owners:"Owners",versionName:"Version",singleton:"Singleton",type:"Type",imageLargeUrl:"Banner URL",imageMediumUrl:"Large Icon URL",imageSmallUrl:"Small Icon URL",imageXlargeUrl:"Featured Banner",docUrls:"Resources"}}},function(e,t,n){"use strict";var i=n(33),r=i({bubbled:null,captured:null}),s=i({topBlur:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topReset:null,topScroll:null,topSelectionChange:null,topSubmit:null,topTextInput:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topWheel:null}),o={topLevelTypes:s,PropagationPhases:r};e.exports=o},function(e,t,n){"use strict";function i(e,t){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:function(){return this._store?this._store[t]:null},set:function(e){c(!1,"Don't set the "+t+" property of the component. Mutate the existing props object instead."),this._store[t]=e}})}function r(e){try{var t={props:!0};for(var n in t)i(e,n);u=!0}catch(r){}}function s(e,t){if("function"==typeof t)for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if("function"==typeof i){var r=i.bind(t);for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);e[n]=r}else e[n]=i}}var o=n(82),a=n(42),l=n(8),c=n(12),u=!1,d=function(){};r(d.prototype),d.createFactory=function(e){var t=Object.create(d.prototype),n=function(e,n){null==e?e={}:"object"==typeof e&&(e=l(e));var i=arguments.length-1;if(1===i)e.children=n;else if(i>1){for(var r=Array(i),s=0;i>s;s++)r[s]=arguments[s+1];e.children=r}var c=Object.create(t);return c._owner=a.current,c._context=o.current,c._store={validated:!1,props:e},u?(Object.freeze(c),c):(c.props=e,c)};return n.prototype=t,n.type=e,t.type=e,s(n,e),t.constructor=n,n},d.cloneAndReplaceProps=function(e,t){var n=Object.create(e.constructor.prototype);return n._owner=e._owner,n._context=e._context,n._store={validated:e._store.validated,props:t},u?(Object.freeze(n),n):(n.props=t,n)},d.isValidFactory=function(e){return"function"==typeof e&&e.prototype instanceof d},d.isValidDescriptor=function(e){return e instanceof d},e.exports=d},function(e,t,n){"use strict";var i=n(19),r=i;r=function(e,t){var n=Array.prototype.slice.call(arguments,2);if(void 0===t)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(!e){var i=0;console.warn("Warning: "+t.replace(/%s/g,function(){return n[i++]}))}},e.exports=r},function(e,t,n){t.DefaultRoute=n(326),t.Link=n(327),t.NotFoundRoute=n(328),t.Redirect=n(329),t.Route=n(53),t.Routes=n(330),t.ActiveState=n(199),t.CurrentPath=n(334),t.Navigation=n(200),t.renderRoutesToString=n(203).renderRoutesToString,t.renderRoutesToStaticMarkup=n(203).renderRoutesToStaticMarkup},function(e,t,n){"use strict";function i(e,t){var n=function(e){this.construct(e)};n.prototype=new o(t,e),n.prototype.constructor=n,n.displayName=t;var i=r.createFactory(n);return s.createFactory(i)}var r=n(11),s=n(211),o=n(209),a=n(69),l=n(231),c=l({a:!1,abbr:!1,address:!1,area:!0,article:!1,aside:!1,audio:!1,b:!1,base:!0,bdi:!1,bdo:!1,big:!1,blockquote:!1,body:!1,br:!0,button:!1,canvas:!1,caption:!1,cite:!1,code:!1,col:!0,colgroup:!1,data:!1,datalist:!1,dd:!1,del:!1,details:!1,dfn:!1,dialog:!1,div:!1,dl:!1,dt:!1,em:!1,embed:!0,fieldset:!1,figcaption:!1,figure:!1,footer:!1,form:!1,h1:!1,h2:!1,h3:!1,h4:!1,h5:!1,h6:!1,head:!1,header:!1,hr:!0,html:!1,i:!1,iframe:!1,img:!0,input:!0,ins:!1,kbd:!1,keygen:!0,label:!1,legend:!1,li:!1,link:!0,main:!1,map:!1,mark:!1,menu:!1,menuitem:!1,meta:!0,meter:!1,nav:!1,noscript:!1,object:!1,ol:!1,optgroup:!1,option:!1,output:!1,p:!1,param:!0,picture:!1,pre:!1,progress:!1,q:!1,rp:!1,rt:!1,ruby:!1,s:!1,samp:!1,script:!1,section:!1,select:!1,small:!1,source:!0,span:!1,strong:!1,style:!1,sub:!1,summary:!1,sup:!1,table:!1,tbody:!1,td:!1,textarea:!1,tfoot:!1,th:!1,thead:!1,time:!1,title:!1,tr:!1,track:!0,u:!1,ul:!1,"var":!1,video:!1,wbr:!0,circle:!1,defs:!1,ellipse:!1,g:!1,line:!1,linearGradient:!1,mask:!1,path:!1,pattern:!1,polygon:!1,polyline:!1,radialGradient:!1,rect:!1,stop:!1,svg:!1,text:!1,tspan:!1},i),u={injectComponentClasses:function(e){a(c,e)}};c.injection=u,e.exports=c},function(e,t,n){"use strict";function i(e){var t=y(e);return t&&N.getID(t)}function r(e){var t=s(e);if(t)if(k.hasOwnProperty(t)){var n=k[t];n!==e&&(w(!l(n,t),"ReactMount: Two valid but unequal nodes with the same `%s`: %s",T,t),k[t]=e)}else k[t]=e;return t}function s(e){return e&&e.getAttribute&&e.getAttribute(T)||""}function o(e,t){var n=s(e);n!==t&&delete k[n],e.setAttribute(T,t),k[t]=e}function a(e){return k.hasOwnProperty(e)&&l(k[e],e)||(k[e]=N.findReactNodeByID(e)),k[e]}function l(e,t){if(e){w(s(e)===t,"ReactMount: Unexpected modification of `%s`",T);var n=N.findReactContainerForID(t);if(n&&b(n,e))return!0}return!1}function c(e){delete k[e]}function u(e){var t=k[e];return t&&l(t,e)?void(E=t):!1}function d(e){E=null,g.traverseAncestors(e,u);var t=E;return E=null,t}var p=n(28),h=n(30),f=n(42),m=n(11),g=n(31),v=n(22),b=n(224),y=n(228),_=n(55),w=n(3),x=n(97),D=n(12),M=g.SEPARATOR,T=p.ID_ATTRIBUTE_NAME,k={},j=1,C=9,L={},S={},$={},O=[],E=null,N={_instancesByReactRootID:L,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,r){var s=t.props;return N.scrollMonitor(n,function(){e.replaceProps(s,r)}),$[i(n)]=y(n),e},_registerComponent:function(e,t){w(t&&(t.nodeType===j||t.nodeType===C),"_registerComponent(...): Target container is not a DOM element."),h.ensureScrollValueMonitoring();var n=N.registerContainer(t);return L[n]=e,n},_renderNewRootComponent:v.measure("ReactMount","_renderNewRootComponent",function(e,t,n){D(null==f.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var i=_(e),r=N._registerComponent(i,t);return i.mountComponentIntoNode(r,t,n),$[r]=y(t),i}),renderComponent:function(e,t,n){w(m.isValidDescriptor(e),"renderComponent(): Invalid component descriptor.%s",m.isValidFactory(e)?" Instead of passing a component class, make sure to instantiate it first by calling it with props.":"undefined"!=typeof e.props?" This may be caused by unintentionally loading two independent copies of React.":"");var r=L[i(t)];if(r){var s=r._descriptor;if(x(s,e))return N._updateRootComponent(r,e,t,n);N.unmountComponentAtNode(t)}var o=y(t),a=o&&N.isRenderedByReact(o),l=a&&!r,c=N._renderNewRootComponent(e,t,l);return n&&n.call(c),c},constructAndRenderComponent:function(e,t,n){return N.renderComponent(e(t),n)},constructAndRenderComponentByID:function(e,t,n){var i=document.getElementById(n);return w(i,'Tried to get element with id of "%s" but it is not present on the page.',n),N.constructAndRenderComponent(e,t,i)},registerContainer:function(e){var t=i(e);return t&&(t=g.getReactRootIDFromNodeID(t)),t||(t=g.createReactRootID()),S[t]=e,t},unmountComponentAtNode:function(e){D(null==f.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate.");var t=i(e),n=L[t];return n?(N.unmountComponentFromNode(n,e),delete L[t],delete S[t],delete $[t],!0):!1},unmountComponentFromNode:function(e,t){for(e.unmountComponent(),t.nodeType===C&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)},findReactContainerForID:function(e){var t=g.getReactRootIDFromNodeID(e),n=S[t],i=$[t];if(i&&i.parentNode!==n){w(s(i)===t,"ReactMount: Root element ID differed from reactRootID.");var r=n.firstChild;r&&t===s(r)?$[t]=r:console.warn("ReactMount: Root element has been removed from its original container. New container:",i.parentNode)}return n},findReactNodeByID:function(e){var t=N.findReactContainerForID(e);return N.findComponentRoot(t,e)},isRenderedByReact:function(e){if(1!==e.nodeType)return!1;var t=N.getID(e);return t?t.charAt(0)===M:!1},getFirstReactDOM:function(e){for(var t=e;t&&t.parentNode!==t;){if(N.isRenderedByReact(t))return t;t=t.parentNode}return null},findComponentRoot:function(e,t){var n=O,i=0,r=d(t)||e;for(n[0]=r.firstChild,n.length=1;i<n.length;){for(var s,o=n[i++];o;){var a=N.getID(o);a?t===a?s=o:g.isAncestorIDOf(a,t)&&(n.length=i=0,n.push(o.firstChild)):n.push(o.firstChild),o=o.nextSibling}if(s)return n.length=0,s}n.length=0,w(!1,"findComponentRoot(..., %s): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting <p> or <a> tags, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",t,N.getID(e))},getReactRootID:i,getID:r,setID:o,getNode:a,purgeID:c};e.exports=N},function(e){"use strict";var t=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e.prototype[n]=t[n])};e.exports=t},function(e,t,n){"use strict";var i=n(83),r=n(15),s=n(3),o={getDOMNode:function(){return s(this.isMounted(),"getDOMNode(): A component must be mounted to have a DOM node."),i.isNullComponentID(this._rootNodeID)?null:r.getNode(this._rootNodeID)}};e.exports=o},function(e,t,n){"use strict";function i(e){var t=e._owner||null;return t&&t.constructor&&t.constructor.displayName?" Check the render method of `"+t.constructor.displayName+"`.":""}function r(e,t,n){for(var i in t)t.hasOwnProperty(i)&&k("function"==typeof t[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",e.displayName||"ReactCompositeComponent",D[n],i)}function s(e,t){var n=Y.hasOwnProperty(t)?Y[t]:null;A.hasOwnProperty(t)&&k(n===N.OVERRIDE_BASE,"ReactCompositeComponentInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",t),e.hasOwnProperty(t)&&k(n===N.DEFINE_MANY||n===N.DEFINE_MANY_MERGED,"ReactCompositeComponentInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",t)}function o(e){var t=e._compositeLifeCycleState;k(e.isMounted()||t===P.MOUNTING,"replaceState(...): Can only update a mounted or mounting component."),k(t!==P.RECEIVING_STATE,"replaceState(...): Cannot update during an existing state transition (such as within `render`). This could potentially cause an infinite loop so it is forbidden."),k(t!==P.UNMOUNTING,"replaceState(...): Cannot update while unmounting component. This usually means you called setState() on an unmounted component.")}function a(e,t){k(!m.isValidFactory(t),"ReactCompositeComponent: You're attempting to use a component class as a mixin. Instead, just use a regular object."),k(!m.isValidDescriptor(t),"ReactCompositeComponent: You're attempting to use a component as a mixin. Instead, just use a regular object.");var n=e.prototype;for(var i in t){var r=t[i];if(t.hasOwnProperty(i))if(s(n,i),R.hasOwnProperty(i))R[i](e,r);else{var o=Y.hasOwnProperty(i),a=n.hasOwnProperty(i),l=r&&r.__reactDontBind,c="function"==typeof r,p=c&&!o&&!a&&!l;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=r,n[i]=r;else if(a){var h=Y[i];k(o&&(h===N.DEFINE_MANY_MERGED||h===N.DEFINE_MANY),"ReactCompositeComponent: Unexpected spec policy %s for key %s when mixing in component specs.",h,i),h===N.DEFINE_MANY_MERGED?n[i]=u(n[i],r):h===N.DEFINE_MANY&&(n[i]=d(n[i],r))}else n[i]=r,"function"==typeof r&&t.displayName&&(n[i].displayName=t.displayName+"_"+i)}}}function l(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var r=n in e,s=i;if(r){var o=e[n],a=typeof o,l=typeof i;k("function"===a&&"function"===l,"ReactCompositeComponent: You are attempting to define `%s` on your component more than once, but that is only supported for functions, which are chained together. This conflict may be due to a mixin.",n),s=d(o,i)}e[n]=s}}}function c(e,t){return k(e&&t&&"object"==typeof e&&"object"==typeof t,"mergeObjectsWithNoDuplicateKeys(): Cannot merge non-objects"),$(t,function(t,n){k(void 0===e[n],"mergeObjectsWithNoDuplicateKeys(): Tried to merge two objects with the same key: %s",n),e[n]=t}),e}function u(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);return null==n?i:null==i?n:c(n,i)}}function d(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}var p=n(41),h=n(82),f=n(42),m=n(11),g=n(211),v=n(83),b=n(383),y=n(214),_=n(22),w=n(215),x=n(217),D=n(216),M=n(32),T=n(55),k=n(3),j=n(33),C=n(8),L=n(16),S=n(96),$=n(231),O=n(97),E=n(12),N=j({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),I=[],Y={mixins:N.DEFINE_MANY,statics:N.DEFINE_MANY,propTypes:N.DEFINE_MANY,contextTypes:N.DEFINE_MANY,childContextTypes:N.DEFINE_MANY,getDefaultProps:N.DEFINE_MANY_MERGED,getInitialState:N.DEFINE_MANY_MERGED,getChildContext:N.DEFINE_MANY_MERGED,render:N.DEFINE_ONCE,componentWillMount:N.DEFINE_MANY,componentDidMount:N.DEFINE_MANY,componentWillReceiveProps:N.DEFINE_MANY,shouldComponentUpdate:N.DEFINE_ONCE,componentWillUpdate:N.DEFINE_MANY,componentDidUpdate:N.DEFINE_MANY,componentWillUnmount:N.DEFINE_MANY,updateComponent:N.OVERRIDE_BASE},R={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)a(e,t[n])},childContextTypes:function(e,t){r(e,t,x.childContext),e.childContextTypes=C(e.childContextTypes,t)},contextTypes:function(e,t){r(e,t,x.context),e.contextTypes=C(e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps=e.getDefaultProps?u(e.getDefaultProps,t):t},propTypes:function(e,t){r(e,t,x.prop),e.propTypes=C(e.propTypes,t)},statics:function(e,t){l(e,t)}},P=j({MOUNTING:null,UNMOUNTING:null,RECEIVING_PROPS:null,RECEIVING_STATE:null}),A={construct:function(){p.Mixin.construct.apply(this,arguments),y.Mixin.construct.apply(this,arguments),this.state=null,this._pendingState=null,this.context=null,this._compositeLifeCycleState=null},isMounted:function(){return p.Mixin.isMounted.call(this)&&this._compositeLifeCycleState!==P.MOUNTING},mountComponent:_.measure("ReactCompositeComponent","mountComponent",function(e,t,n){p.Mixin.mountComponent.call(this,e,t,n),this._compositeLifeCycleState=P.MOUNTING,this.__reactAutoBindMap&&this._bindAutoBindMethods(),this.context=this._processContext(this._descriptor._context),this.props=this._processProps(this.props),this.state=this.getInitialState?this.getInitialState():null,k("object"==typeof this.state&&!Array.isArray(this.state),"%s.getInitialState(): must return an object or null",this.constructor.displayName||"ReactCompositeComponent"),this._pendingState=null,this._pendingForceUpdate=!1,this.componentWillMount&&(this.componentWillMount(),this._pendingState&&(this.state=this._pendingState,this._pendingState=null)),this._renderedComponent=T(this._renderValidatedComponent()),this._compositeLifeCycleState=null;var i=this._renderedComponent.mountComponent(e,t,n+1);return this.componentDidMount&&t.getReactMountReady().enqueue(this.componentDidMount,this),i}),unmountComponent:function(){this._compositeLifeCycleState=P.UNMOUNTING,this.componentWillUnmount&&this.componentWillUnmount(),this._compositeLifeCycleState=null,this._renderedComponent.unmountComponent(),this._renderedComponent=null,p.Mixin.unmountComponent.call(this)},setState:function(e,t){k("object"==typeof e||null==e,"setState(...): takes an object of state variables to update."),E(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."),this.replaceState(C(this._pendingState||this.state,e),t)},replaceState:function(e,t){o(this),this._pendingState=e,this._compositeLifeCycleState!==P.MOUNTING&&M.enqueueUpdate(this,t)},_processContext:function(e){var t=null,n=this.constructor.contextTypes;if(n){t={};for(var i in n)t[i]=e[i];this._checkPropTypes(n,t,x.context)}return t},_processChildContext:function(e){var t=this.getChildContext&&this.getChildContext(),n=this.constructor.displayName||"ReactCompositeComponent";if(t){k("object"==typeof this.constructor.childContextTypes,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",n),this._checkPropTypes(this.constructor.childContextTypes,t,x.childContext);for(var i in t)k(i in this.constructor.childContextTypes,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',n,i);return C(e,t)}return e},_processProps:function(e){var t,n=this.constructor.defaultProps;if(n){t=C(e);for(var i in n)"undefined"==typeof t[i]&&(t[i]=n[i])}else t=e;var r=this.constructor.propTypes;return r&&this._checkPropTypes(r,t,x.prop),t},_checkPropTypes:function(e,t,n){var r=this.constructor.displayName;for(var s in e)if(e.hasOwnProperty(s)){var o=e[s](t,s,r,n);if(o instanceof Error){var a=i(this);E(!1,o.message+a)}}},performUpdateIfNecessary:function(e){var t=this._compositeLifeCycleState;if(t!==P.MOUNTING&&t!==P.RECEIVING_PROPS&&(null!=this._pendingDescriptor||null!=this._pendingState||this._pendingForceUpdate)){var n=this.context,i=this.props,r=this._descriptor;null!=this._pendingDescriptor&&(r=this._pendingDescriptor,n=this._processContext(r._context),i=this._processProps(r.props),this._pendingDescriptor=null,this._compositeLifeCycleState=P.RECEIVING_PROPS,this.componentWillReceiveProps&&this.componentWillReceiveProps(i,n)),this._compositeLifeCycleState=P.RECEIVING_STATE;var s=this._pendingState||this.state;this._pendingState=null;try{var o=this._pendingForceUpdate||!this.shouldComponentUpdate||this.shouldComponentUpdate(i,s,n);"undefined"==typeof o&&console.warn((this.constructor.displayName||"ReactCompositeComponent")+".shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false."),o?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,i,s,n,e)):(this._descriptor=r,this.props=i,this.state=s,this.context=n,this._owner=r._owner)}finally{this._compositeLifeCycleState=null}}},_performComponentUpdate:function(e,t,n,i,r){var s=this._descriptor,o=this.props,a=this.state,l=this.context;this.componentWillUpdate&&this.componentWillUpdate(t,n,i),this._descriptor=e,this.props=t,this.state=n,this.context=i,this._owner=e._owner,this.updateComponent(r,s),this.componentDidUpdate&&r.getReactMountReady().enqueue(this.componentDidUpdate.bind(this,o,a,l),this)},receiveComponent:function(e,t){(e!==this._descriptor||null==e._owner)&&p.Mixin.receiveComponent.call(this,e,t)},updateComponent:_.measure("ReactCompositeComponent","updateComponent",function(e,t){p.Mixin.updateComponent.call(this,e,t);var n=this._renderedComponent,i=n._descriptor,r=this._renderValidatedComponent();if(O(i,r))n.receiveComponent(r,e);else{var s=this._rootNodeID,o=n._rootNodeID;n.unmountComponent(),this._renderedComponent=T(r);var a=this._renderedComponent.mountComponent(s,e,this._mountDepth+1);p.BackendIDOperations.dangerouslyReplaceNodeWithMarkupByID(o,a)}}),forceUpdate:function(e){var t=this._compositeLifeCycleState;k(this.isMounted()||t===P.MOUNTING,"forceUpdate(...): Can only force an update on mounted or mounting components."),k(t!==P.RECEIVING_STATE&&t!==P.UNMOUNTING,"forceUpdate(...): Cannot force an update while unmounting component or during an existing state transition (such as within `render`)."),this._pendingForceUpdate=!0,M.enqueueUpdate(this,e)},_renderValidatedComponent:_.measure("ReactCompositeComponent","_renderValidatedComponent",function(){var e,t=h.current;h.current=this._processChildContext(this._descriptor._context),f.current=this;try{e=this.render(),null===e||e===!1?(e=v.getEmptyComponent(),v.registerNullComponentID(this._rootNodeID)):v.deregisterNullComponentID(this._rootNodeID)}finally{h.current=t,f.current=null}return k(m.isValidDescriptor(e),"%s.render(): A valid ReactComponent must be returned. You may have returned undefined, an array or some other invalid object.",this.constructor.displayName||"ReactCompositeComponent"),e}),_bindAutoBindMethods:function(){for(var e in this.__reactAutoBindMap)if(this.__reactAutoBindMap.hasOwnProperty(e)){var t=this.__reactAutoBindMap[e];this[e]=this._bindAutoBindMethod(b.guard(t,this.constructor.displayName+"."+e))}},_bindAutoBindMethod:function(e){var t=this,n=function(){return e.apply(t,arguments)};n.__reactBoundContext=t,n.__reactBoundMethod=e,n.__reactBoundArguments=null;var i=t.constructor.displayName,r=n.bind;return n.bind=function(s){var o=Array.prototype.slice.call(arguments,1);if(s!==t&&null!==s)S("react_bind_warning",{component:i}),console.warn("bind(): React component methods may only be bound to the component instance. See "+i);else if(!o.length)return S("react_bind_warning",{component:i}),console.warn("bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See "+i),n;var a=r.apply(n,arguments);return a.__reactBoundContext=t,a.__reactBoundMethod=e,a.__reactBoundArguments=o,a},n}},z=function(){};L(z,p.Mixin),L(z,y.Mixin),L(z,w.Mixin),L(z,A);var F={LifeCycle:P,Base:z,createClass:function(e){var t=function(e,t){this.construct(e,t)};t.prototype=new z,t.prototype.constructor=t,I.forEach(a.bind(null,t)),a(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),k(t.prototype.render,"createClass(...): Class specification must implement a `render` method."),t.prototype.componentShouldUpdate&&(S("react_component_should_update_warning",{component:e.displayName}),console.warn((e.displayName||"A component")+" has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value."));for(var n in Y)t.prototype[n]||(t.prototype[n]=null);var i=m.createFactory(t);return g.createFactory(i,t.propTypes,t.contextTypes)},injection:{injectMixin:function(e){I.push(e)}}};e.exports=F},function(e,t,n){function i(e){return function(){return e}}function r(){}var s=n(43);s(r,{thatReturns:i,thatReturnsFalse:i(!1),thatReturnsTrue:i(!0),thatReturnsNull:i(null),thatReturnsThis:function(){return this},thatReturnsArgument:function(e){return e}}),e.exports=r},function(e){var t=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};e.exports=t},function(e,t,n){"use strict";function i(e,t){var n=c.cloneDeep(t);n.isEnabled=e,u.save(n)}var r=n(4),s=n(49),o=s.ListingApi,a=n(107),l=a.ProfileApi,c=n(7),u=r.createActions(["fetchNewArrivals","newArrivalsFetched","fetchMostPopular","mostPopularFetched","fetchFeatured","featuredFetched","search","searchCompleted","approve","fetchById","fetchedById","fetchChangeLogs","changeLogsFetched","fetchOwnedListings","ownedListingsFetched","launch","reject","rejected","addToLibrary","addedToLibrary","removeFromLibrary","removedFromLibrary","save","saved","saveFailed","enable","disable"]);
u.fetchNewArrivals.listen(function(){o.getNewArrivals().then(u.newArrivalsFetched)}),u.fetchMostPopular.listen(function(){o.getMostPopular().then(u.mostPopularFetched)}),u.fetchFeatured.listen(function(){o.getFeatured().then(u.featuredFetched)}),u.fetchById.listen(function(e){o.getById(e).then(u.fetchedById)}),u.search.listen(function(e){o.search(e).then(u.searchCompleted)}),u.fetchChangeLogs.listen(function(e){o.getChangeLogs(e).then(u.changeLogsFetched.bind(null,e))}),u.fetchOwnedListings.listen(function(e){o.getOwnedListings(e).then(u.ownedListingsFetched)}),u.launch.listen(function(e){window.open(e.launchUrl)}),u.addToLibrary.listen(function(e){l.addToLibrary({listing:{id:e.id}}).then(u.addedToLibrary.bind(null,e))}),u.removeFromLibrary.listen(function(e){l.removeFromLibrary(e).then(u.removedFromLibrary.bind(null,e))}),u.save.listen(function(e){var t=!e.id;o.save(e).then(u.saved.bind(null,t)).fail(u.saveFailed)}),u.reject.listen(function(e,t){o.rejectListing(e,t).then(u.rejected)}),u.enable.listen(i.bind(null,!0)),u.disable.listen(i.bind(null,!1)),u.approve.listen(function(e){var t=c.cloneDeep(e);t.approvalStatus="APPROVED",u.save(t)}),e.exports=u},function(e){"use strict";function t(e,t,n){return n}var n={enableMeasure:!1,storedMeasure:t,measure:function(e,t,i){var r=null;return function(){return n.enableMeasure?(r||(r=n.storedMeasure(e,t,i)),r.apply(this,arguments)):i.apply(this,arguments)}},injection:{injectMeasure:function(e){n.storedMeasure=e}}};e.exports=n},function(e,t,n){var i=t.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e};t.extend=function(e){if(!i(e))return e;for(var t,n,r=1,s=arguments.length;s>r;r++){t=arguments[r];for(n in t)e[n]=t[n]}return e},t.isFunction=function(e){return"function"==typeof e},t.EventEmitter=n(426),t.nextTick=function(e){setTimeout(e,0)},t.callbackName=function(e){return"on"+e.charAt(0).toUpperCase()+e.slice(1)},t.object=function(e,t){for(var n={},i=0;i<e.length;i++)n[e[i]]=t[i];return n},t.isArguments=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&("[object Arguments]"===toString.call(e)||hasOwnProperty.call(e,"callee"&&!propertyIsEnumerable.call(e,"callee")))||!1},t.throwIf=function(e,t){if(e)throw Error(t||e)}},function(e,t){var n,i;n=[],i=function(){function e(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var i=-1,r=n-t||0,s=Array(0>r?0:r);++i<r;)s[i]=e[t+i];return s}return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){"use strict";var i=n(3),r=function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)},s=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},o=function(e,t,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,e,t,n),r}return new i(e,t,n)},a=function(e,t,n,i,r){var s=this;if(s.instancePool.length){var o=s.instancePool.pop();return s.call(o,e,t,n,i,r),o}return new s(e,t,n,i,r)},l=function(e){var t=this;i(e instanceof t,"Trying to release an instance into a pool of a different type."),e.destructor&&e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,u=r,d=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||u,n.poolSize||(n.poolSize=c),n.release=l,n},p={addPoolingTo:d,oneArgumentPooler:r,twoArgumentPooler:s,threeArgumentPooler:o,fiveArgumentPooler:a};e.exports=p},function(e,t,n){"use strict";function i(e,t,n){this.dispatchConfig=e,this.dispatchMarker=t,this.nativeEvent=n;var i=this.constructor.Interface;for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];this[r]=o?o(n):n[r]}var a=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;this.isDefaultPrevented=a?s.thatReturnsTrue:s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse}var r=n(25),s=n(19),o=n(93),a=n(8),l=n(69),c={type:null,target:o,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};l(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e.preventDefault?e.preventDefault():e.returnValue=!1,this.isDefaultPrevented=s.thatReturnsTrue},stopPropagation:function(){var e=this.nativeEvent;e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this.isPropagationStopped=s.thatReturnsTrue},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),i.Interface=c,i.augmentClass=function(e,t){var n=this,i=Object.create(n.prototype);l(i,e.prototype),e.prototype=i,e.prototype.constructor=e,e.Interface=a(n.Interface,t),e.augmentClass=n.augmentClass,r.addPoolingTo(e,r.threeArgumentPooler)},r.addPoolingTo(i,r.threeArgumentPooler),e.exports=i},function(e,t,n){var i,r;i=[n(36)],r=function(e){function t(t){return!(!t||!e[typeof t])}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";var i=n(3),r={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=e.Properties||{},n=e.DOMAttributeNames||{},s=e.DOMPropertyNames||{},a=e.DOMMutationMethods||{};e.isCustomAttribute&&o._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var l in t){i(!o.isStandardName.hasOwnProperty(l),"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",l),o.isStandardName[l]=!0;var c=l.toLowerCase();if(o.getPossibleStandardName[c]=l,n.hasOwnProperty(l)){var u=n[l];o.getPossibleStandardName[u]=l,o.getAttributeName[l]=u}else o.getAttributeName[l]=c;o.getPropertyName[l]=s.hasOwnProperty(l)?s[l]:l,o.getMutationMethod[l]=a.hasOwnProperty(l)?a[l]:null;var d=t[l];o.mustUseAttribute[l]=d&r.MUST_USE_ATTRIBUTE,o.mustUseProperty[l]=d&r.MUST_USE_PROPERTY,o.hasSideEffects[l]=d&r.HAS_SIDE_EFFECTS,o.hasBooleanValue[l]=d&r.HAS_BOOLEAN_VALUE,o.hasNumericValue[l]=d&r.HAS_NUMERIC_VALUE,o.hasPositiveNumericValue[l]=d&r.HAS_POSITIVE_NUMERIC_VALUE,o.hasOverloadedBooleanValue[l]=d&r.HAS_OVERLOADED_BOOLEAN_VALUE,i(!o.mustUseAttribute[l]||!o.mustUseProperty[l],"DOMProperty: Cannot require using both attribute and property: %s",l),i(o.mustUseProperty[l]||!o.hasSideEffects[l],"DOMProperty: Properties that have side effects must use property: %s",l),i(!!o.hasBooleanValue[l]+!!o.hasNumericValue[l]+!!o.hasOverloadedBooleanValue[l]<=1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",l)}}},s={},o={ID_ATTRIBUTE_NAME:"data-reactid",isStandardName:{},getPossibleStandardName:{},getAttributeName:{},getPropertyName:{},getMutationMethod:{},mustUseAttribute:{},mustUseProperty:{},hasSideEffects:{},hasBooleanValue:{},hasNumericValue:{},hasPositiveNumericValue:{},hasOverloadedBooleanValue:{},_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<o._isCustomAttributeFunctions.length;t++){var n=o._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},getDefaultValueForProperty:function(e,t){var n,i=s[e];return i||(s[e]=i={}),t in i||(n=document.createElement(e),i[t]=n[t]),i[t]},injection:r};e.exports=o},function(e,t,n){"use strict";function i(e,t,n){var i=t.dispatchConfig.phasedRegistrationNames[n];return g(e,i)}function r(e,t,n){if(!e)throw new Error("Dispatching id must not be null");var r=t?m.bubbled:m.captured,s=i(e,n,r);s&&(n._dispatchListeners=h(n._dispatchListeners,s),n._dispatchIDs=h(n._dispatchIDs,e))}function s(e){e&&e.dispatchConfig.phasedRegistrationNames&&p.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,r,e)}function o(e,t,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=g(e,i);r&&(n._dispatchListeners=h(n._dispatchListeners,r),n._dispatchIDs=h(n._dispatchIDs,e))}}function a(e){e&&e.dispatchConfig.registrationName&&o(e.dispatchMarker,null,e)}function l(e){f(e,s)}function c(e,t,n,i){p.injection.getInstanceHandle().traverseEnterLeave(n,i,o,e,t)}function u(e){f(e,a)}var d=n(10),p=n(39),h=n(87),f=n(91),m=d.PropagationPhases,g=p.getListener,v={accumulateTwoPhaseDispatches:l,accumulateDirectDispatches:u,accumulateEnterLeaveDispatches:c};e.exports=v},function(e,t,n){"use strict";function i(e){return Object.prototype.hasOwnProperty.call(e,m)||(e[m]=h++,d[e[m]]={}),d[e[m]]}var r=n(10),s=n(39),o=n(206),a=n(384),l=n(223),c=n(95),u=n(8),d={},p=!1,h=0,f={topBlur:"blur",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topWheel:"wheel"},m="_reactListenersID"+String(Math.random()).slice(2),g=u(a,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,s=i(n),a=o.registrationNameDependencies[e],l=r.topLevelTypes,u=0,d=a.length;d>u;u++){var p=a[u];s.hasOwnProperty(p)&&s[p]||(p===l.topWheel?c("wheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):c("mousewheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):p===l.topScroll?c("scroll",!0)?g.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):p===l.topFocus||p===l.topBlur?(c("focus",!0)?(g.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):c("focusin")&&(g.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),s[l.topBlur]=!0,s[l.topFocus]=!0):f.hasOwnProperty(p)&&g.ReactEventListener.trapBubbledEvent(p,f[p],n),s[p]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},ensureScrollValueMonitoring:function(){if(!p){var e=l.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),p=!0}},eventNameDispatchConfigs:s.eventNameDispatchConfigs,registrationNameModules:s.registrationNameModules,putListener:s.putListener,getListener:s.getListener,deleteListener:s.deleteListener,deleteAllListeners:s.deleteAllListeners});e.exports=g},function(e,t,n){"use strict";function i(e){return h+e.toString(36)}function r(e,t){return e.charAt(t)===h||t===e.length}function s(e){return""===e||e.charAt(0)===h&&e.charAt(e.length-1)!==h}function o(e,t){return 0===t.indexOf(e)&&r(t,e.length)}function a(e){return e?e.substr(0,e.lastIndexOf(h)):""}function l(e,t){if(p(s(e)&&s(t),"getNextDescendantID(%s, %s): Received an invalid React DOM ID.",e,t),p(o(e,t),"getNextDescendantID(...): React has made an invalid assumption about the DOM hierarchy. Expected `%s` to be an ancestor of `%s`.",e,t),e===t)return e;for(var n=e.length+f,i=n;i<t.length&&!r(t,i);i++);return t.substr(0,i)}function c(e,t){var n=Math.min(e.length,t.length);if(0===n)return"";for(var i=0,o=0;n>=o;o++)if(r(e,o)&&r(t,o))i=o;else if(e.charAt(o)!==t.charAt(o))break;var a=e.substr(0,i);return p(s(a),"getFirstCommonAncestorID(%s, %s): Expected a valid React DOM ID: %s",e,t,a),a}function u(e,t,n,i,r,s){e=e||"",t=t||"",p(e!==t,"traverseParentPath(...): Cannot traverse from and to the same ID, `%s`.",e);var c=o(t,e);p(c||o(e,t),"traverseParentPath(%s, %s, ...): Cannot traverse from two IDs that do not have a parent path.",e,t);for(var u=0,d=c?a:l,h=e;;h=d(h,t)){var f;if(r&&h===e||s&&h===t||(f=n(h,c,i)),f===!1||h===t)break;p(u++<m,"traverseParentPath(%s, %s, ...): Detected an infinite loop while traversing the React DOM ID tree. This may be due to malformed IDs: %s",e,t)}}var d=n(220),p=n(3),h=".",f=h.length,m=100,g={createReactRootID:function(){return i(d.createReactRootIndex())},createReactID:function(e,t){return e+t},getReactRootIDFromNodeID:function(e){if(e&&e.charAt(0)===h&&e.length>1){var t=e.indexOf(h,1);return t>-1?e.substr(0,t):e}return null},traverseEnterLeave:function(e,t,n,i,r){var s=c(e,t);s!==e&&u(e,s,n,i,!1,!0),s!==t&&u(s,t,n,r,!0,!1)},traverseTwoPhase:function(e,t,n){e&&(u("",e,t,n,!0,!1),u(e,"",t,n,!1,!0))},traverseAncestors:function(e,t,n){u("",e,t,n,!0,!1)},_getFirstCommonAncestorID:c,_getNextDescendantID:l,isAncestorIDOf:o,SEPARATOR:h};e.exports=g},function(e,t,n){"use strict";function i(){f(M.ReactReconcileTransaction&&b,"ReactUpdates: must inject a reconcile transaction class and batching strategy")}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=c.getPooled(null),this.reconcileTransaction=M.ReactReconcileTransaction.getPooled()}function s(e,t,n){i(),b.batchedUpdates(e,t,n)}function o(e,t){return e._mountDepth-t._mountDepth}function a(e){var t=e.dirtyComponentsLength;f(t===v.length,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",t,v.length),v.sort(o);for(var n=0;t>n;n++){var i=v[n];if(i.isMounted()){var r=i._pendingCallbacks;if(i._pendingCallbacks=null,i.performUpdateIfNecessary(e.reconcileTransaction),r)for(var s=0;s<r.length;s++)e.callbackQueue.enqueue(r[s],i)}}}function l(e,t){return f(!t||"function"==typeof t,"enqueueUpdate(...): You called `setProps`, `replaceProps`, `setState`, `replaceState`, or `forceUpdate` with a callback that isn't callable."),i(),g(null==d.current,"enqueueUpdate(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate."),b.isBatchingUpdates?(v.push(e),void(t&&(e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t]))):void b.batchedUpdates(l,e,t)}var c=n(79),u=n(25),d=n(42),p=n(22),h=n(68),f=n(3),m=n(16),g=n(12),v=[],b=null,y={initialize:function(){this.dirtyComponentsLength=v.length},close:function(){this.dirtyComponentsLength!==v.length?(v.splice(0,this.dirtyComponentsLength),x()):v.length=0}},_={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},w=[y,_];m(r,h.Mixin),m(r,{getTransactionWrappers:function(){return w},destructor:function(){this.dirtyComponentsLength=null,c.release(this.callbackQueue),this.callbackQueue=null,M.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return h.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),u.addPoolingTo(r);var x=p.measure("ReactUpdates","flushBatchedUpdates",function(){for(;v.length;){var e=r.getPooled();e.perform(a,null,e),r.release(e)}}),D={injectReconcileTransaction:function(e){f(e,"ReactUpdates: must provide a reconcile transaction class"),M.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){f(e,"ReactUpdates: must provide a batching strategy"),f("function"==typeof e.batchedUpdates,"ReactUpdates: must provide a batchedUpdates() function"),f("boolean"==typeof e.isBatchingUpdates,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"),b=e}},M={ReactReconcileTransaction:null,batchedUpdates:s,enqueueUpdate:l,flushBatchedUpdates:x,injection:D};e.exports=M},function(e,t,n){"use strict";var i=n(3),r=function(e){var t,n={};i(e instanceof Object&&!Array.isArray(e),"keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=r},function(e,t,n){"use strict";function i(e){return e.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()}function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function s(e){return r(i(e).replace(/_id$/,"").replace(/_/g," "))}function o(e,t){return t=t||at,t.hasOwnProperty(Q(e))?o(e.meta.type,t):e}function a(e,t){return R.is(e)?t:e}function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}function c(e,t,n){var i=Object.keys(e).map(function(t){return{value:t,text:e[t]}});return i.sort(tt.meta.map[t||"asc"]),n&&i.unshift(n),i}function u(e,t){return e=s(e),t?O.DOM.span(null,e,O.DOM.small({className:"text-muted"},t)):O.DOM.span(null,e)}function d(e,t){var n={};return t&&(n["control-label"]=!0,n[t.toLabelClassName()]=!0),e?O.DOM.label({className:E(n)},e):null}function p(e,t){return t=t||{},t["help-block"]=!0,e?O.DOM.span({className:E(t)},e):null}function h(e,t){return t?p(e,{"error-block":!0}):null}function f(e){return e?O.DOM.span({className:"input-group-addon"},e):null}function m(e){return function(){var t={};for(var n in this){var i=this[n];this.hasOwnProperty(n)&&!R.is(i)&&(t["col-"+n+"-"+i[e]]=!0)}return E(t)}}function g(e,t){return O.DOM.option({key:t,value:e.value},e.text)}function v(e,t,n){if(U.is(e))return c(e.meta.map,t,n).map(g);var i=[];return n&&i.push(g(n,-1)),e.forEach(function(e,t){i.push(e.group?O.DOM.optgroup({label:e.group,key:t},e.options.map(function(e,n){return g(e,String(t)+"-"+String(n))})):g(e,t))}),i}function b(e,t){var n=e.slice();return n.splice(t,1),n}function y(e,t,n){var i=e.slice();if(t===n)return i;var r=i.splice(t,1)[0];return i.splice(n,0,r),i}function _(e,t){return y(e,t,t-1)}function w(e,t){return y(e,t,t+1)}function x(e){return function(){return{hasError:a(e,!1)}}}function D(e,t){return function(){var n=t||this.getRawValue(),i=N.validate(n,e),r=i.isValid();return this.setState({hasError:!r}),r?e(n):i}}function M(e){e=o(e);var t=Q(e),n=xt.inputs[t];return U.is(n)?n:(n=n[Z(e)],U.is(n)?n:T)}function T(e,t){I(X.is(e)),t=new ft(t||{});var n=o(e),i=t.type||"text",r=t.i17n||it,s=r.format(a(t.value,null),n),l=d(t.label,t.breakpoints),c=p(t.help),u=f(t.addonBefore),m=f(t.addonAfter),g={"form-control":!0};return t.height&&(g["input-"+t.height]=!0),O.createClass({displayName:"Textbox",getInitialState:x(t.hasError),getRawValue:function(){var e=this.refs.input.getDOMNode().value.trim()||null;return e=r.parse(e,n)},getValue:D(e),render:function(){var e=h(t.message,this.state.hasError),n=J({"form-group":!0,"has-error":this.state.hasError},t.groupClasses),r="textarea",o={ref:"input",name:t.name,className:E(g),defaultValue:s,disabled:t.disabled,readOnly:t.readOnly,placeholder:t.placeholder,onChange:t.onChange};"textarea"!==i&&(r="input",o.type=i);var a=O.DOM[r](o);return(u||m)&&(a=O.DOM.div({className:"input-group"},u,a,m)),t.breakpoints&&(a=O.DOM.div({className:t.breakpoints.toInputClassName()},a)),O.DOM.div({className:E(n)},l,a,e,c)}})}function k(e,t){I(X.is(e)),t=new mt(t||{});var n=o(e,gt),i=t.multiple===!0,r=i?null:t.emptyOption,s=r?r.value:null,l=a(t.value,s),c=d(t.label,t.breakpoints),u=p(t.help),f=v(t.options||n,t.order,r),m={"form-control":!0};return t.height&&(m["input-"+t.height]=!0),O.createClass({displayName:"Select",getInitialState:x(t.hasError),getRawValue:function(){var e=this.refs.input.getDOMNode();if(i){for(var t=[],n=0,r=e.options.length;r>n;n++){var o=e.options[n];o.selected&&t.push(o.value)}return t}return e.value===s?null:e.value},getValue:D(e),render:function(){var e=h(t.message,this.state.hasError),n=J({"form-group":!0,"has-error":this.state.hasError},t.groupClasses),r=O.DOM.select({ref:"input",name:t.name,className:E(m),disabled:t.disabled,readOnly:t.readOnly,defaultValue:l,multiple:i},f);return t.breakpoints&&(r=O.DOM.div({className:t.breakpoints.toInputClassName()},r)),O.DOM.div({className:E(n)},c,r,e,u)}})}function j(e,t){I(X.is(e)),t=new vt(t||{});var n=o(e),i=a(t.value,null),r=d(t.label,t.breakpoints),s=p(t.help),u=c(n.meta.map,t.order),f=u.length,m=t.name||l();return O.createClass({displayName:"Radio",getInitialState:x(t.hasError),getRawValue:function(){for(var e=null,t=0;f>t;t++){var n=this.refs[m+t].getDOMNode();if(n.checked){e=n.value;break}}return e},getValue:D(e),render:function(){var e=h(t.message,this.state.hasError),n=J({"form-group":!0,"has-error":this.state.hasError},t.groupClasses),o=u.map(function(e,t){return O.DOM.div({className:"radio",key:t},O.DOM.label(null,O.DOM.input({type:"radio",ref:m+t,name:m,value:e.value,defaultChecked:e.value===i}),e.text))});return t.breakpoints&&(o=O.DOM.div({className:t.breakpoints.toInputClassName()},o)),O.DOM.div({className:E(n)},r,o,e,s)}})}function C(e,t){I(X.is(e)),t=new bt(t||{});var n=a(t.value,!1),i=p(t.help);return O.createClass({displayName:"Checkbox",getInitialState:x(t.hasError),getRawValue:function(){return this.refs.input.getDOMNode().checked},getValue:D(e),render:function(){var e=h(t.message,this.state.hasError),r=J({"form-group":!0,"has-error":this.state.hasError},t.groupClasses),s=O.DOM.div({className:"checkbox"},O.DOM.label(null,O.DOM.input({ref:"input",type:"checkbox",name:t.name,defaultChecked:n})," ",t.label));return t.breakpoints&&(s=O.DOM.div({className:t.breakpoints.toCheckboxClassName()},s)),O.DOM.div({className:E(r)},s,e,i)}})}function L(e,t){I(X.is(e)),t=new _t(t||{});var n=o(e),i=n.meta.props,r=Object.keys(i),a=t.order||r,l=a.length;I(r.length===l,"Invalid `order` of value `%j` supplied to `createForm`, all type props must be specified",a);var c=t.fields||{},p=t.value||{},h=d(t.label),f=t.i18n?new rt(t.i18n):st,m=t.auto||"placeholders",g=a.map(function(e){var n=i[e],r=J({ctx:t.ctx,value:p[e],breakpoints:t.breakpoints,i17n:t.i17n,i18n:t.i18n},c[e],!0),o=r.input?r.input:M(n),a="maybe"===Q(n)?f.optional:"";return(o===S||o===L||o===C||o===j)&&(r.label=r.label||u(e,a)),o===L?r.auto=m:"labels"===m?(r.label=r.label||u(e,a),o===k&&(r.emptyOption=r.emptyOption||{value:"",text:"-"})):"placeholders"!==m||r.label||(o===k?r.emptyOption=r.emptyOption||{value:"",text:s(f.select+e+a)}:o===T&&(r.placeholder=r.placeholder||s(e+a))),o(n,r)});return O.createClass({displayName:"Form",getInitialState:x(t.hasError),getValue:function(t){t=t||0;for(var i,r=[],s={},o=0;l>o;o++){var c=a[o],i=this.refs[c].getValue(t+1);et.is(i)?r=r.concat(i.errors):s[c]=i}if(r.length)return t?new et({errors:r}):null;i=N.validate(new n(s),e);var u=i.isValid();return this.setState({hasError:!u}),u?e(s):t?i:null},render:function(){var e={"has-error":this.state.hasError},t=a.map(function(e,t){return g[t]({key:t,ref:e})});return O.DOM.fieldset({className:E(e)},h,t)}})}function S(e,t){I(X.is(e)),t=new wt(t||{});var n=e,i=o(n.meta.type),r=t.input||M(i),s=a(t.value,[]),l=d(t.label),c=t.i18n?new rt(t.i18n):st;return O.createClass({displayName:"List",getInitialState:function(){return{hasError:a(t.hasError,!1),value:s}},getValue:function(t){t=t||0;for(var n,i=[],r=[],s=0,o=this.state.value.length;o>s;s++){var n=this.refs[s].getValue(t+1);et.is(n)?i=i.concat(n.errors):r.push(n)}if(i.length)return t?new et({errors:i}):null;n=N.validate(r,e);var a=n.isValid();return this.setState({hasError:!a,value:r}),a?e(r):t?n:null},add:function(e){e.preventDefault();var t=this.getValue();t&&(t=t.concat(null),this.setState({hasError:this.state.hasError,value:t}))},remove:function(e,t){t.preventDefault();var n=this.getValue();n=n?b(n,e):b(this.state.value,e),this.setState({hasError:this.state.hasError,value:n})},moveUp:function(e,t){t.preventDefault();var n=this.getValue();e>0&&n&&(n=_(n,e),this.setState({hasError:this.state.hasError,value:n}))},moveDown:function(e,t){t.preventDefault();var n=this.getValue();e<this.state.value.length-1&&n&&(n=w(n,e),this.setState({hasError:this.state.hasError,value:n}))},render:function(){for(var e={"form-group":!0,"has-error":this.state.hasError},n=[],s=0,o=this.state.value.length;o>s;s++){var a=J({ctx:t.ctx,value:this.state.value[s],i17n:t.i17n,i18n:t.i18n},t.item,!0);n.push(O.DOM.div({className:"row",key:s},O.DOM.div({className:"col-md-7"},r(i,a)({ref:s})),O.DOM.div({className:"col-md-5"},O.DOM.div({className:"btn-group"},t.disableRemove?null:O.DOM.button({className:"btn btn-default btn-remove",onClick:this.remove.bind(this,s)},c.remove),t.disableOrder?null:O.DOM.button({className:"btn btn-default btn-move-up",onClick:this.moveUp.bind(this,s)},c.up),t.disableOrder?null:O.DOM.button({className:"btn btn-default btn-move-down",onClick:this.moveDown.bind(this,s)},c.down)))))}var u=t.disableAdd?null:O.DOM.div({className:"form-group"},O.DOM.button({className:"btn btn-default btn-add",onClick:this.add},c.add));return O.DOM.fieldset({className:E(e)},l,n,u)}})}function $(e,t){return"struct"===Q(o(e))?L(e,t):S(e,t)}var O=n(2),E=n(89),N=n(433),I=N.assert,Y=N.Any,R=N.Nil,P=N.Str,A=N.Num,z=N.Bool,F=N.Obj,H=N.Arr,U=N.Func,B=N.subtype,W=N.maybe,q=N.enums,V=N.list,G=N.struct,K=N.tuple,J=(N.func,N.util.mixin),X=N.Type,Q=N.util.getKind,Z=N.util.getName,et=N.validate.Result,tt=q({asc:function(e,t){return e.text<t.text?-1:e.text>t.text?1:0},desc:function(e,t){return e.text<t.text?1:e.text>t.text?-1:0}},"Order"),nt=G({format:U,parse:U},"I17n"),it=new nt({parse:function(e,t){return t===A?parseFloat(e):e},format:function(e){return e}}),rt=G({select:P,optional:P,add:P,remove:P,up:P,down:P},"I18n"),st=new rt({select:"Select your ",optional:" (optional)",add:"Add",remove:"Remove",up:"Up",down:"Down"}),ot=G({value:P,text:P},"Option"),at={maybe:1,subtype:1},lt=B(A,function(e){return e%1===0&&e>=0},"Positive"),ct=B(K([lt,lt]),function(e){return e[0]+e[1]===12},"Cols"),ut=G({xs:W(ct),sm:W(ct),md:W(ct),lg:W(ct)},"Breakpoints"),dt=q.of("xs sm md lg","Size");ut.prototype.toLabelClassName=m(0),ut.prototype.toInputClassName=m(1),ut.prototype.toCheckboxClassName=function(){var e={};for(var t in this){var n=this[t];this.hasOwnProperty(t)&&!R.is(n)&&(e["col-"+t+"-offset-"+n[0]]=!0,e["col-"+t+"-"+n[1]]=!0)}return E(e)};var pt=G({ctx:Y,value:Y,name:W(P),label:Y,help:Y,message:W(P),hasError:W(z),onChange:W(U)}),ht=q.of("hidden text textarea password color date datetime datetime-local email month number range search tel time url week","TypeAttr"),ft=pt.extend([{type:W(ht),groupClasses:W(F),placeholder:W(P),i17n:W(nt),disabled:W(z),readOnly:W(z),addonBefore:Y,addonAfter:Y,breakpoints:W(ut),height:W(dt)}],"TextboxOpts"),mt=pt.extend([{options:Y,groupClasses:W(F),emptyOption:W(ot),order:W(tt),disabled:W(z),breakpoints:W(ut),height:W(dt),multiple:W(z)}],"SelectOpts"),gt={maybe:1,subtype:1,list:1},vt=pt.extend([{groupClasses:W(F),order:W(tt),breakpoints:W(ut)}],"RadioOpts"),bt=pt.extend([{groupClasses:W(F),breakpoints:W(ut)}],"CheckboxOpts"),yt=q.of("none placeholders labels","FormAuto"),_t=G({ctx:Y,value:W(F),label:Y,auto:W(yt),order:W(V(P)),fields:W(F),breakpoints:W(ut),i17n:W(nt),i18n:W(rt)},"FormOpts"),wt=G({ctx:Y,value:W(H),label:Y,disableAdd:W(z),disableRemove:W(z),disableOrder:W(z),item:W(F),i17n:W(nt),i18n:W(rt)},"ListOpts"),xt={inputs:{irriducible:{Bool:C},enums:k,struct:L,list:S}};N.form={options:xt,util:{humanize:s,Option:ot,Breakpoints:ut},I17n:nt,I18n:rt,textbox:T,select:k,radio:j,checkbox:C,createForm:L,createList:S,create:$},e.exports=N},function(e,t,n){var i,r;i=[n(296),n(320),n(76),n(318)],r=function(e,t,n,i){function r(r,l,c){if("function"!=typeof r)return t;if("undefined"==typeof l||!("prototype"in r))return r;var u=r.__bindData__;if("undefined"==typeof u&&(i.funcNames&&(u=!r.name),u=u||!i.funcDecomp,!u)){var d=a.call(r);i.funcNames||(u=!s.test(d)),u||(u=o.test(d),n(r,u))}if(u===!1||u!==!0&&1&u[1])return r;switch(c){case 1:return function(e){return r.call(l,e)};case 2:return function(e,t){return r.call(l,e,t)};case 3:return function(e,t,n){return r.call(l,e,t,n)};case 4:return function(e,t,n,i){return r.call(l,e,t,n,i)}}return e(r,l)}var s=/^\s*function[ \n\r\t]+\w/,o=/\bthis\b/,a=Function.prototype.toString;return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){var e={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(35),n(52),n(36)],r=function(e,t,n){var i=function(i,r,s){var o,a=i,l=a;if(!a)return l;if(!n[typeof a])return l;r=r&&"undefined"==typeof s?r:e(r,s,3);for(var c=-1,u=n[typeof a]&&t(a),d=u?u.length:0;++c<d;)if(o=u[c],r(a[o],o,i)===!1)return l;return l};return i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){"use strict";function i(e,t){return null==t||r.hasBooleanValue[e]&&!t||r.hasNumericValue[e]&&isNaN(t)||r.hasPositiveNumericValue[e]&&1>t||r.hasOverloadedBooleanValue[e]&&t===!1}var r=n(28),s=n(90),o=n(232),a=n(12),l=o(function(e){return s(e)+'="'}),c={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0},u={},d=function(e){if(!(c.hasOwnProperty(e)&&c[e]||u.hasOwnProperty(e)&&u[e])){u[e]=!0;var t=e.toLowerCase(),n=r.isCustomAttribute(t)?t:r.getPossibleStandardName.hasOwnProperty(t)?r.getPossibleStandardName[t]:null;a(null==n,"Unknown DOM property "+e+". Did you mean "+n+"?")}},p={createMarkupForID:function(e){return l(r.ID_ATTRIBUTE_NAME)+s(e)+'"'},createMarkupForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(e)&&r.isStandardName[e]){if(i(e,t))return"";var n=r.getAttributeName[e];return r.hasBooleanValue[e]||r.hasOverloadedBooleanValue[e]&&t===!0?s(n):l(n)+s(t)+'"'}return r.isCustomAttribute(e)?null==t?"":l(e)+s(t)+'"':(d(e),null)},setValueForProperty:function(e,t,n){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var s=r.getMutationMethod[t];if(s)s(e,n);else if(i(t,n))this.deleteValueForProperty(e,t);else if(r.mustUseAttribute[t])e.setAttribute(r.getAttributeName[t],""+n);else{var o=r.getPropertyName[t];r.hasSideEffects[t]&&e[o]===n||(e[o]=n)}}else r.isCustomAttribute(t)?null==n?e.removeAttribute(t):e.setAttribute(t,""+n):d(t)},deleteValueForProperty:function(e,t){if(r.isStandardName.hasOwnProperty(t)&&r.isStandardName[t]){var n=r.getMutationMethod[t];if(n)n(e,void 0);else if(r.mustUseAttribute[t])e.removeAttribute(r.getAttributeName[t]);else{var i=r.getPropertyName[t],s=r.getDefaultValueForProperty(e.nodeName,i);r.hasSideEffects[t]&&e[i]===s||(e[i]=s)}}else r.isCustomAttribute(t)?e.removeAttribute(t):d(t)}};e.exports=p},function(e,t,n){"use strict";function i(){var e=!f||!f.traverseTwoPhase||!f.traverseEnterLeave;if(e)throw new Error("InstanceHandle not injected before use!")}var r=n(206),s=n(80),o=n(87),a=n(91),l=n(3),c=n(95),u=n(96),d={},p=null,h=function(e){if(e){var t=s.executeDispatch,n=r.getPluginModuleForEvent(e);n&&n.executeDispatch&&(t=n.executeDispatch),s.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e)}},f=null,m={injection:{injectMount:s.injection.injectMount,injectInstanceHandle:function(e){f=e,i()},getInstanceHandle:function(){return i(),f},injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},eventNameDispatchConfigs:r.eventNameDispatchConfigs,registrationNameModules:r.registrationNameModules,putListener:function(e,t,n){l(!n||"function"==typeof n,"Expected %s listener to be a function, instead got type %s",t,typeof n),"onScroll"!==t||c("scroll",!0)||(u("react_no_scroll_event"),console.warn("This browser doesn't support the `onScroll` event"));var i=d[t]||(d[t]={});i[e]=n},getListener:function(e,t){var n=d[t];return n&&n[e]},deleteListener:function(e,t){var n=d[t];
n&&delete n[e]},deleteAllListeners:function(e){for(var t in d)delete d[t][e]},extractEvents:function(e,t,n,i){for(var s,a=r.plugins,l=0,c=a.length;c>l;l++){var u=a[l];if(u){var d=u.extractEvents(e,t,n,i);d&&(s=o(s,d))}}return s},enqueueEvents:function(e){e&&(p=o(p,e))},processEventQueue:function(){var e=p;p=null,a(e,h),l(!p,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented.")},__purge:function(){d={}},__getListenerBank:function(){return d}};e.exports=m},function(e,t,n){"use strict";function i(e){var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)}var r=n(38),s=n(80),o=n(208),a=n(41),l=n(18),c=n(82),u=n(42),d=n(11),p=n(14),h=n(209),f=n(381),m=n(31),g=n(15),v=n(212),b=n(22),y=n(218),_=n(389),w=n(86),x=n(233),D=n(12);f.inject();var M=!1,T={Children:{map:o.map,forEach:o.forEach,count:o.count,only:x},DOM:p,PropTypes:y,initializeTouchEvents:function(e){s.useTouchEvents=e},createClass:l.createClass,createDescriptor:function(){return D(M,"React.createDescriptor is deprecated and will be removed in the next version of React. Use React.createElement instead."),M=!0,i.apply(this,arguments)},createElement:i,constructAndRenderComponent:g.constructAndRenderComponent,constructAndRenderComponentByID:g.constructAndRenderComponentByID,renderComponent:b.measure("React","renderComponent",g.renderComponent),renderComponentToString:_.renderComponentToString,renderComponentToStaticMarkup:_.renderComponentToStaticMarkup,unmountComponentAtNode:g.unmountComponentAtNode,isValidClass:d.isValidFactory,isValidComponent:d.isValidDescriptor,withContext:c.withContext,__internals:{Component:a,CurrentOwner:u,DOMComponent:h,DOMPropertyOperations:r,InstanceHandles:m,Mount:g,MultiChild:v,TextComponent:w}},k=n(5);if(k.canUseDOM&&window.top===window.self&&navigator.userAgent.indexOf("Chrome")>-1){console.debug("Download the React DevTools for a better development experience: http://fb.me/react-devtools");var j=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.split,String.prototype.trim,Object.create,Object.freeze];for(var C in j)if(!j[C]){console.error("One or more ES5 shim/shams expected by React are not available: http://fb.me/react-warning-polyfills");break}}T.version="0.11.2",e.exports=T},function(e,t,n){"use strict";var i=n(11),r=n(214),s=n(32),o=n(3),a=n(33),l=n(8),c=a({MOUNTED:null,UNMOUNTED:null}),u=!1,d=null,p=null,h={injection:{injectEnvironment:function(e){o(!u,"ReactComponent: injectEnvironment() can only be called once."),p=e.mountImageIntoNode,d=e.unmountIDFromEnvironment,h.BackendIDOperations=e.BackendIDOperations,u=!0}},LifeCycle:c,BackendIDOperations:null,Mixin:{isMounted:function(){return this._lifeCycleState===c.MOUNTED},setProps:function(e,t){var n=this._pendingDescriptor||this._descriptor;this.replaceProps(l(n.props,e),t)},replaceProps:function(e,t){o(this.isMounted(),"replaceProps(...): Can only update a mounted component."),o(0===this._mountDepth,"replaceProps(...): You called `setProps` or `replaceProps` on a component with a parent. This is an anti-pattern since props will get reactively updated when rendered. Instead, change the owner's `render` method to pass the correct value as props to the component where it is created."),this._pendingDescriptor=i.cloneAndReplaceProps(this._pendingDescriptor||this._descriptor,e),s.enqueueUpdate(this,t)},_setPropsInternal:function(e,t){var n=this._pendingDescriptor||this._descriptor;this._pendingDescriptor=i.cloneAndReplaceProps(n,l(n.props,e)),s.enqueueUpdate(this,t)},construct:function(e){this.props=e.props,this._owner=e._owner,this._lifeCycleState=c.UNMOUNTED,this._pendingCallbacks=null,this._descriptor=e,this._pendingDescriptor=null},mountComponent:function(e,t,n){o(!this.isMounted(),"mountComponent(%s, ...): Can only mount an unmounted component. Make sure to avoid storing components between renders or reusing a single component instance in multiple places.",e);var i=this._descriptor.props;if(null!=i.ref){var s=this._descriptor._owner;r.addComponentAsRefTo(this,i.ref,s)}this._rootNodeID=e,this._lifeCycleState=c.MOUNTED,this._mountDepth=n},unmountComponent:function(){o(this.isMounted(),"unmountComponent(): Can only unmount a mounted component.");var e=this.props;null!=e.ref&&r.removeComponentAsRefFrom(this,e.ref,this._owner),d(this._rootNodeID),this._rootNodeID=null,this._lifeCycleState=c.UNMOUNTED},receiveComponent:function(e,t){o(this.isMounted(),"receiveComponent(...): Can only update a mounted component."),this._pendingDescriptor=e,this.performUpdateIfNecessary(t)},performUpdateIfNecessary:function(e){if(null!=this._pendingDescriptor){var t=this._descriptor,n=this._pendingDescriptor;this._descriptor=n,this.props=n.props,this._owner=n._owner,this._pendingDescriptor=null,this.updateComponent(e,t)}},updateComponent:function(e,t){var n=this._descriptor;(n._owner!==t._owner||n.props.ref!==t.props.ref)&&(null!=t.props.ref&&r.removeComponentAsRefFrom(this,t.props.ref,t._owner),null!=n.props.ref&&r.addComponentAsRefTo(this,n.props.ref,n._owner))},mountComponentIntoNode:function(e,t,n){var i=s.ReactReconcileTransaction.getPooled();i.perform(this._mountComponentIntoNode,this,e,t,i,n),s.ReactReconcileTransaction.release(i)},_mountComponentIntoNode:function(e,t,n,i){var r=this.mountComponent(e,n,0);p(r,t,i)},isOwnedBy:function(e){return this._owner===e},getSiblingByRef:function(e){var t=this._owner;return t&&t.refs?t.refs[e]:null}}};e.exports=h},function(e){"use strict";var t={current:null};e.exports=t},function(e){function t(e,t,n,i,r,s,o){if(e=e||{},o)throw new Error("Too many arguments passed to copyProperties");for(var a,l=[t,n,i,r,s],c=0;l[c];){a=l[c++];for(var u in a)e[u]=a[u];a.hasOwnProperty&&a.hasOwnProperty("toString")&&"undefined"!=typeof a.toString&&e.toString!==a.toString&&(e.toString=a.toString)}return e}e.exports=t},function(e,t,n){"use strict";var i=n(4);e.exports=i.createActions(["listingCreated","loadListing","updateListing","save","submit","saveSucceeded"])},function(e,t,n){"use strict";var i=n(2),r=i.addons,s=r.cloneWithProps,o=r.classSet,a={getInitialState:function(){return{blurred:!1}},render:function(){var e=o({"input-optional":this.props.optional});return i.DOM.div({className:this.getClasses()},i.DOM.label({htmlFor:this.props.id,className:e},this.props.label),i.DOM.p({className:"small"},this.props.description),s(this.renderInput(),this.getInputProps()),i.DOM.p({className:"help-block small"},this.props.help))},shouldComponentUpdate:function(e,t){return e.description!==this.props.description?!0:e.label!==this.props.label?!0:e.help!==this.props.help?!0:e.optional!==this.props.optional?!0:e.value!==this.props.value?!0:t.blurred!==this.state.blurred?!0:this.showWarning(e,t.blurred)!==this.showWarning(this.props,this.state.blurred)?!0:this.showError(e,t.blurred)!==this.showError(this.props,this.state.blurred)?!0:e.id!==this.props.id?!0:!1},getClasses:function(){return o({"form-group":!0,"has-error":this.showError(this.props,this.state.blurred),"has-warning":this.showWarning(this.props,this.state.blurred)})},showWarning:function(e,t){return!this.showError(e,t)&&e.warning&&t},showError:function(e,t){return e.error&&(t||e.forceError)},_onBlur:function(e){e.preventDefault(),this.setState({blurred:!0})},_onChange:function(e){e.preventDefault(),this.props.setter(e.target.value)},getInputProps:function(){var e=this.getValue?this.getValue(this.props.value):this.props.value,t=this.onChange?this.onChange:this._onChange,n=this.onBlur?this.onBlur:this._onBlur;return{ref:"input",className:"form-control",id:this.props.id,value:e,onBlur:n,onChange:t}}};e.exports=a},function(e,t,n){"use strict";n(442),w2utils.settings.dataType="RESTFULL";var i=n(2),r=n(6),s=n(34),o=n(47),a=n(7),l=n(106),c=n(72),u=c.DeleteConfirmation,d=n(9),p=d.FOCUSABLE_ELEMENTS,h=n(104),f=i.createClass({displayName:"CreateEditModal",propTypes:{title:i.PropTypes.string.isRequired},render:function(){return this.transferPropsTo(o({ref:"modal",confirm:"Save",cancel:"Cancel",size:"small",title:this.props.title,onShown:this.onShown},this.props.children))},onShown:function(){var e=r(this.getDOMNode()).find(p).not(":disabled").get(0);if(e){var t=r(e).focus();("INPUT"===e.tagName||"TEXTAREA"===e.tagName)&&t.val(t.val())}},close:function(){this.refs.modal.close()}}),m=i.createClass({displayName:"Crud",mixins:[h],propTypes:{title:i.PropTypes.string.isRequired,getDisplayName:i.PropTypes.func.isRequired,url:i.PropTypes.string.isRequired,Schema:i.PropTypes.func.isRequired,form:i.PropTypes.oneOfType([i.PropTypes.func,i.PropTypes.shape({fields:i.PropTypes.object.isRequired})]).isRequired,grid:i.PropTypes.shape({columns:i.PropTypes.array.isRequired})},getInitialState:function(){return{adding:!1,editing:!1,deleting:!1,records:[]}},render:function(){return i.DOM.div(null,i.DOM.section({ref:"grid"}),this.state.adding&&this.renderCreateForm(),this.state.editing&&this.renderEditForm(),this.state.deleting&&this.renderDeleteConfirmation())},_renderCreateEditForm:function(e,t,n){var r=a.cloneDeep(t),o=r.fields||(r.fields={});this.state.errors&&Object.keys(this.state.errors).forEach(function(e){o[e]=a.assign(o[e]||{},{message:this.state.errors[e],hasError:!0})}.bind(this));var l=s.form.createForm(this.props.Schema,r);return f({ref:"modal",title:e,onHidden:this.resetState,onConfirm:n},i.DOM.form(null,l({ref:"form"})))},renderCreateForm:function(){var e="Create "+this.props.title,t=a.assign({auto:"labels",value:this.refs.form&&this.refs.form.getValue()},a.isFunction(this.props.form)?this.props.form():this.props.form);return this._renderCreateEditForm(e,t,this.onCreate)},renderEditForm:function(){var e="Edit "+this.props.title,t=this.refs.form&&this.refs.form.getValue()||this.getSelectedRecord(),n=a.assign({auto:"labels",value:t},a.isFunction(this.props.form)?this.props.form(t):this.props.form);return this._renderCreateEditForm(e,n,this.onEdit)},renderDeleteConfirmation:function(){var e=this.props.title.toLowerCase(),t=this.props.getDisplayName(this.getSelectedRecord());return u({ref:"modal",kind:e,title:t,errorMessage:this.state.errorMessage,onHidden:this.resetState,onDelete:this.onDelete})},getSelectedId:function(){return this.grid.getSelection()[0]},getSelectedRecord:function(){return a.find(this.records,{id:this.getSelectedId()})},getUrlWithoutParams:function(){return this.props.url.replace(/\?.*/,"")},onCreate:function(){var e=this.refs.form.getValue();e&&r.ajax({url:this.getUrlWithoutParams(),type:"post",dataType:"json",contentType:"application/json",data:JSON.stringify(e)}).done(this.reload).fail(this.handleError)},onEdit:function(){var e=this.getSelectedId(),t=this.refs.form.getValue();t&&r.ajax({url:this.getUrlWithoutParams()+"/"+e,type:"put",dataType:"json",contentType:"application/json",data:JSON.stringify(t)}).done(this.reload).fail(this.handleError)},onDelete:function(){var e=this.getSelectedId();r.ajax({url:this.getUrlWithoutParams()+"/"+e,type:"delete",dataType:"json",contentType:"application/json"}).done(this.reload).fail(this.handleError)},reload:function(){this.grid.reload(),this.refs.modal.close()},resetState:function(){this.setState(this.getInitialState())},componentDidMount:function(){var e=a.assign({recid:"id",name:l(),fixedBody:!1,multiSelect:!1,show:{toolbar:!0,toolbarAdd:!0,toolbarEdit:!0,toolbarDelete:!0,toolbarSearch:!1,toolbarReload:!1,toolbarColumns:!1},url:this.props.url,parser:function(e){var t=JSON.parse(e);return this.records=t.total>0?[].concat(t._embedded.item):[],{total:this.records.length,records:this.records}}.bind(this),getCellValue:function(){var e=w2obj.grid.prototype.getCellValue.apply(this.grid,arguments);return a.escape(e)}.bind(this),onAdd:function(e){e.preventDefault(),this.setState({adding:!0,editing:!1,deleting:!1})}.bind(this),onEdit:function(e){e.preventDefault(),this.setState({adding:!1,editing:!0,deleting:!1})}.bind(this),onDelete:function(e){e.preventDefault(),this.setState({adding:!1,editing:!1,deleting:!0})}.bind(this)},this.props.grid);this.grid=r(this.refs.grid.getDOMNode()).w2grid(e)},componentWillUnmount:function(){this.grid.destroy()}});e.exports=m},function(e,t,n){(function(t){"use strict";var i=n(2),r=i.createClass({displayName:"BootstrapModal",propTypes:{buttons:i.PropTypes.array,confirm:i.PropTypes.string,cancel:i.PropTypes.string,onConfirm:i.PropTypes.func,onCancel:i.PropTypes.func,onShown:i.PropTypes.func,onHidden:i.PropTypes.func},componentDidMount:function(){var e=this;t(this.getDOMNode()).one("shown.bs.modal",function(){e.props.onShown&&e.props.onShown()}).one("hidden.bs.modal",function(){e.props.onHidden&&e.props.onHidden()}).modal({backdrop:"static",keyboard:!1,show:!0})},close:function(){t(this.getDOMNode()).modal("hide")},render:function(){var e=this.props.buttons;e||(this.props.cancel&&(e=[i.DOM.a({href:"javascript:;",role:"button",className:"btn btn-link",onClick:this.handleCancel},this.props.cancel)]),this.props.confirm&&e.push(i.DOM.a({href:"javascript:;",role:"button",className:"btn btn-primary",onClick:this.handleConfirm},this.props.confirm)));var t=i.addons.classSet({"modal-dialog":!0,"modal-lg":"small"!==this.props.size});return this.transferPropsTo(i.DOM.div({className:"modal fade",tabIndex:"-1",role:"dialog","aria-hidden":"true"},i.DOM.div({className:t},i.DOM.div({className:"modal-content"},this.props.title&&i.DOM.div({className:"modal-header"},i.DOM.button({type:"button",className:"close",onClick:this.handleCancel},i.DOM.span({"aria-hidden":"true"},""),i.DOM.span({className:"sr-only"},"Close")),i.DOM.h4({className:"modal-title"},this.props.title)),i.DOM.div({className:"modal-body"},this.props.children),e&&e.length>0&&i.DOM.div({className:"modal-footer"},e)))))},handleCancel:function(){this.props.onCancel&&this.props.onCancel(),this.close()},handleConfirm:function(){this.props.onConfirm&&this.props.onConfirm()}});e.exports=r}).call(t,n(6))},function(e,t,n){"use strict";var i=n(7),r={mixins:[n(13).ActiveState],getActiveRoute:function(){return i.last(this.getActiveRoutes())},getActiveRoutePath:function(){return i.last(this.getActiveRoutes()).props.name}};e.exports=r},function(e,t,n){"use strict";function i(e){return e=e||{},s.forEach(function(t){this[t]=e[t]}.bind(this)),this.intents=this.intents||[],this.screenshots=this.screenshots||[],this.categories=this.categories||[],this.contacts=this.contacts||[],this.docUrls=this.docUrls||[],this.owners=this.owners||[],this.tags=this.tags||[],this.changeLogs=[],this}var r=n(6),s=(n(7),["id","title","description","descriptionShort","screenshots","contacts","totalComments","avgRate","totalRate1","totalRate2","totalRate3","totalRate4","height","width","totalRate5","totalVotes","state","tags","type","uuid","requirements","singleton","versionName","imageLargeUrl","imageSmallUrl","imageMediumUrl","imageXlargeUrl","launchUrl","company","whatIsNew","owners","agency","currentRejection","isEnabled","categories","releaseDate","editedDate","intents","docUrls","approvalStatus"]),o={getFeatured:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/listing/search?isFeatured=true&sort=avgRate&order=DESC&max=24").pipe(function(e){return(e._embedded&&[].concat(e._embedded.item)||[]).map(function(e){return new i(e)})})},getNewArrivals:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/listing/search?sort=approvedDate&order=DESC&max=24").pipe(function(e){return(e._embedded&&[].concat(e._embedded.item)||[]).map(function(e){return new i(e)})})},getMostPopular:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/listing/search?sort=avgRate&order=ASC&max=24").pipe(function(e){return(e._embedded&&[].concat(e._embedded.item)||[]).map(function(e){return new i(e)})})},search:function(e){var t=r.param(e,!0);return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/listing/search?"+t).pipe(function(e){return(e._embedded&&[].concat(e._embedded.item)||[]).map(function(e){return new i(e)})})},getById:function(e){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/listing/"+e)},save:function(e){var t=e.id?"PUT":"POST",n="https://www.owfgoss.org/ng/dev/mp/api/listing";return n=e.id?n+"/"+e.id:n,r.ajax({type:t,url:n,data:JSON.stringify(e),dataType:"json",contentType:"application/json"})},del:function(e){return r.ajax({type:"DELETE",url:"https://www.owfgoss.org/ng/dev/mp/api/listing/"+encodeURIComponent(e)})},getChangeLogs:function(e){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/listing/"+e+"/activity").pipe(function(e){return e._embedded&&[].concat(e._embedded.item)||[]})},getOwnedListings:function(e){var t=e?e.id:"self";return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/profile/"+t+"/listing").pipe(function(e){var t=e._embedded,n=t?t.item:null;return(n||[]).map(function(e){return new i(e)})})},rejectListing:function(e,t){return r.ajax({type:"POST",url:"https://www.owfgoss.org/ng/dev/mp/api/listing/"+e+"/rejectionListing",data:JSON.stringify({description:t}),dataType:"json",contentType:"application/json"})}};e.exports.Listing=i,e.exports.ListingApi=o},function(e,t,n){var i,r;i=[n(35),n(304),n(27),n(52),n(321)],r=function(e,t,n,i,r){function s(s,o,a){var l=typeof s;if(null==s||"function"==l)return e(s,o,a);if("object"!=l)return r(s);var c=i(s),u=c[0],d=s[u];return 1!=c.length||d!==d||n(d)?function(e){for(var n=c.length,i=!1;n--&&(i=t(e[c[n]],s[c[n]],null,!0)););return i}:function(e){var t=e[u];return d===t&&(0!==d||1/d==1/t)}}return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){function e(e){return"function"==typeof e&&i.test(e)}var t=Object.prototype,n=t.toString,i=RegExp("^"+String(n).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(51),n(27),n(312)],r=function(e,t,n){var i=e(i=Object.keys)&&i,r=i?function(e){return t(e)?i(e):[]}:n;return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i=n(2),r=n(343),s={handler:!0,path:!0,defaultRoute:!0,notFoundRoute:!0,paramNames:!0,children:!0},o=i.createClass({displayName:"Route",statics:{getUnreservedProps:function(e){return r(e,s)}},propTypes:{handler:i.PropTypes.any.isRequired,path:i.PropTypes.string,name:i.PropTypes.string,ignoreScrollBehavior:i.PropTypes.bool},render:function(){throw new Error("The <Route> component should not be rendered directly. You may be missing a <Routes> wrapper around your list of routes.")}});e.exports=o},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(26),s=n(93),o={view:function(e){if(e.view)return e.view;var t=s(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e){return e&&"function"==typeof e.type&&"function"==typeof e.type.prototype.mountComponent&&"function"==typeof e.type.prototype.receiveComponent}function r(e){return s(i(e),"Only React Components are valid for mounting."),new e.type(e)}var s=n(3);e.exports=r},function(e){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){"use strict";var i=n(4),r=n(107),s=r.ProfileApi,o=i.createActions(["fetchLibrary","libraryFetched","fetchSelf","selfFetched","fetchSelfFailed"]);o.fetchLibrary.listen(function(){s.getLibrary().then(o.libraryFetched)}),o.fetchSelf.listen(function(){s.getSelf().done(o.selfFetched).fail(o.fetchSelfFailed)}),e.exports=o},function(e,t,n){"use strict";var i=n(2),r=n(260),s=n(261),o=i.createClass({displayName:"Header",render:function(){return i.DOM.div({id:"header"},i.DOM.div({className:"row"},r(null),this.props.children,s(null)),i.DOM.div({className:"row"},i.DOM.div({className:"spacer"})),this.props.subHeader)}});e.exports=o},function(e,t,n){"use strict";var i=n(2),r=n(323),s=i.createClass({displayName:"IconRating",getDefaultProps:function(){return{className:"icon-rating",toggledClassName:"fa fa-star",untoggledClassName:"fa fa-star-o",halfClassName:"fa fa-star-half-o"}},render:function(){return this.transferPropsTo(r({className:this.props.className,toggledClassName:this.props.toggledClassName,untoggledClassName:this.props.untoggledClassName,halfClassName:this.props.halfClassName}))}});e.exports=s},function(e,t,n){"use strict";var i=n(4),r=n(74);e.exports={mixins:[i.connect(r)],getInitialState:function(){return r.getDefaultData()}}},function(e,t,n){"use strict";function i(e){e.forEach(function(e){var t=b[e.id];t&&(e.changeLogs=t.changeLogs),b[e.id]=e,e.owners.forEach(function(t){var n=y[t.username]||[];n=n.filter(function(t){return t.id!==e.id}),y[t.username]=n.concat([e])})})}var r=n(4),s=n(21),o=s.newArrivalsFetched,a=s.mostPopularFetched,l=s.featuredFetched,c=s.searchCompleted,u=s.changeLogsFetched,d=s.ownedListingsFetched,p=s.rejected,h=s.saved,f=s.fetchChangeLogs,m=n(44),g=m.listingCreated,v=n(49).Listing,b={},y={},_=r.createStore({init:function(){this.listenTo(o,i),this.listenTo(a,i),this.listenTo(l,i),this.listenTo(c,i),this.listenTo(u,function(e,t){b[e].changeLogs=t,this.trigger()}),this.listenTo(d,i),this.listenTo(h,function(e,t){var n=new v(t);i([n]),e&&g(n),f(n.id),this.trigger()}),this.listenTo(p,function(e){var t=b[e.listingId];t.currentRejection=e,t.approvalStatus="REJECTED",f(t.id),this.trigger()}),this.listenTo(s.fetchedById,function(e){i([new v(e)]),this.trigger()})},getById:function(e){return b[e]?b[e]:(s.fetchById(e),null)},getByOwner:function(e){return y[e.username]||[]}});e.exports=_},function(e,t,n){"use strict";var i=n(4),r=n(7),s=r.pick(n(57),"libraryFetched","selfFetched"),o=r.pick(n(21),"addedToLibrary","removedFromLibrary"),a=n(9),l=a.UserRole,c=n(49),u=(c.Listing,[]),d={isAdmin:!1},p=i.createStore({listenables:Object.assign({},s,o),onLibraryFetched:function(e){u=e,this.trigger({library:u})},onSelfFetched:function(e){d=e,d.isAdmin=l[d.highestRole]>=l.ADMIN,this.trigger({currentUser:d})},onAddedToLibrary:function(e){u.push({folder:null,listing:{id:e.id,imageLargeUrl:e.imageLargeUrl,imageMediumUrl:e.imageMediumUrl,launchUrl:e.launchUrl,title:e.title,uuid:e.uuid}}),this.trigger({library:u})},onRemovedFromLibrary:function(e){var t=r.find(u,{listing:{id:e.id}});u=r.without(u,t),this.trigger({library:u})},isListingInLibrary:function(e){return u.map(function(e){return e.listing}).some(function(t){return t.uuid===e})},getCurrentUser:function(){return d},getDefaultData:function(){return{currentUser:d,library:u}}});e.exports=p},function(e,t,n){var i,r;i=[n(51)],r=function(e){var t="[object Array]",n=Object.prototype,i=n.toString,r=e(r=Array.isArray)&&r,s=r||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==t||!1};return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){function e(e){return"function"==typeof e}return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e){var t={PUSH:"push",REPLACE:"replace",POP:"pop"};e.exports=t},function(e,t,n){"use strict";var i=n(225),r={componentDidMount:function(){this.props.autoFocus&&i(this.getDOMNode())}};e.exports=r},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(54),s=n(223),o=n(92),a={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:o,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+s.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+s.currentScrollTop}};r.augmentClass(i,a),e.exports=i},function(e,t,n){"use strict";var i=n(3),r={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,r,s,o,a,l){i(!this.isInTransaction(),"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction.");var c,u;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),u=e.call(t,n,r,s,o,a,l),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(d){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return u},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i=t[n];try{this.wrapperInitData[n]=s.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===s.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(r){}}}},closeAll:function(e){i(this.isInTransaction(),"Transaction.closeAll(): Cannot close transaction when none are open.");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r,o=t[n],a=this.wrapperInitData[n];try{r=!0,a!==s.OBSERVED_ERROR&&o.close&&o.close.call(this,a),r=!1}finally{if(r)try{this.closeAll(n+1)}catch(l){}}}this.wrapperInitData.length=0}},s={Mixin:r,OBSERVED_ERROR:{}};e.exports=s},function(e,t,n){"use strict";function i(e,t){if(o(e),null!=t){s(t);for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}}var r=n(421),s=r.checkMergeObjectArg,o=r.checkMergeIntoObjectArg;e.exports=i},function(e,t,n){(function(t){"use strict";var i=n(2),r=n(8);n(242);var s=i.createClass({displayName:"Carousel",propTypes:{children:i.PropTypes.array,autoInit:i.PropTypes.bool},getDefaultProps:function(){return{autoInit:!0}},render:function(){return this.transferPropsTo(i.DOM.div({className:"carousel-wrapper"},i.DOM.div({className:"carousel"},i.DOM.ul({ref:"list",className:"list-unstyled"},this.props.children),i.DOM.div({className:"clearfix"}),i.DOM.button({className:"prev btn hidden",href:"#",ref:"prev"},i.DOM.i({className:"fa fa-angle-left"})),i.DOM.button({className:"next btn hidden",href:"#",ref:"next"},i.DOM.i({className:"fa fa-angle-right"})))))},componentDidMount:function(){this.renderCarousel()},componentDidUpdate:function(e){e.autoInit===!1&&this.props.autoInit===!0&&this.renderCarousel()},renderCarousel:function(){if(this.props.autoInit){var e=r({prev:t(this.refs.prev.getDOMNode()),next:t(this.refs.next.getDOMNode()),auto:!1,scroll:{easing:"quadratic"}},this.props.options);this._$carousel=t(this.refs.list.getDOMNode()).carouFredSel(e,{wrapper:"parent"})}},componentWillUnmount:function(){this._$carousel&&this._$carousel.trigger("destroy")}});e.exports=s}).call(t,n(6))},function(e,t,n){"use strict";var i=n(6);n(244);var r={componentDidMount:function(){var e=i(this.refs.input.getDOMNode()),t=e.select2(this.getSelect2Options()).data("select2");e.on("change",this.onChange),e.on("select2-blur",this._onBlur),this._$select2=t,this._$input=e},componentDidUpdate:function(){this._$input.select2("val",this.props.value)},componentWillUnmount:function(){this._$input.off("change"),this._$input.off("select2-blur"),this._$select2.destroy()},onChange:function(e){e.preventDefault(),this.props.setter(e.val)}};e.exports=r},function(e,t,n){"use strict";var i=n(2),r=n(4),s=n(47),o=n(13),a=o.Navigation,l=n(104),c=n(49).ListingApi,u=n(61),d=n(7),p=i.createClass({displayName:"DeleteConfirmation",propTypes:{errorMessage:i.PropTypes.string,onHidden:i.PropTypes.func,onDelete:i.PropTypes.func.isRequired},getDefaultProps:function(){return{onHidden:d.noop}},getInitialState:function(){return{}},render:function(){var e=this.props.kind,t=this.props.title,n=this.props.onDelete,r=this.props.errorMessage;return s({ref:"modal",className:"DeleteConfirmation",size:"small",onHidden:this.props.onHidden},i.DOM.button({className:"close corner","data-dismiss":"modal"},""),r&&i.DOM.div({className:"alert alert-danger"},r),i.DOM.strong(null,"Are you sure that you would like to delete the ",e,' "',t,'"?'),i.DOM.button({className:"btn btn-default cancel","data-dismiss":"modal"},"Cancel"),i.DOM.button({className:"btn btn-warning delete",onClick:n},"Delete"))},close:function(){this.refs.modal.close()}}),h=i.createClass({displayName:"ListingDeleteConfirmation",propTypes:{listing:i.PropTypes.string.isRequired},mixins:[r.ListenerMixin,a,l],getInitialState:function(){return this.listenTo(u,this.onStoreChange),this.getState()},getState:function(){return{listing:u.getById(this.props.listing)}},onStoreChange:function(){this.setState(this.getState())},render:function(){var e=this.getListing();if(!e)return null;var t=e.title;return p({ref:"modal",kind:"listing",title:t,errorMessage:this.state.errorMessage,onHidden:this.onHidden,onDelete:this.onDelete})},getListing:function(){return this.state.listing},close:function(){this.refs.modal.close()},onHidden:function(){this.goBack()},onDelete:function(){var e=this.getListing();c.del(e.id).done(function(){return this.close()}.bind(this)).fail(this.handleError)}});e.exports={DeleteConfirmation:p,ListingDeleteConfirmation:h}},function(e,t,n){"use strict";var i=n(13),r=i.Link,s=i.ActiveState,o={mixins:[s],renderTabs:function(e,t){var n=this,i=e.map(function(e){var i=n.isActive(e.to),s=i?"active":"";return React.DOM.li({className:s,key:e.to},r({to:e.to,params:t},e.name))});return React.DOM.ul({className:"nav nav-tabs",role:"tablist"},i)}};e.exports=o},function(e,t,n){"use strict";var i=n(4),r=n(283),s=r.capitalize,o=n(286),a=n(62),l=(n(7),["types","categories","intents","contactTypes","organizations","users"]),c={},u=i.createStore({listenables:{profileChange:a},init:function(){l.forEach(function(e){c[e]=[]}),this.loadSystem()},onProfileChange:function(e){var t=e,n=t.currentUser;n&&this.trigger({currentUser:n})},getDefaultData:function(){var e=a.getDefaultData(),t=e.currentUser;return{system:c,currentUser:t}},loadSystem:function(){l.forEach(function(e){o["get"+s(e)]().then(function(t){c[e]=t,this.trigger({system:c})}.bind(this))}.bind(this))}});e.exports=u},function(e,t){var n,i;n=[],i=function(){function e(e,t,n){for(var i=(n||0)-1,r=e?e.length:0;++i<r;)if(e[i]===t)return i;return-1}return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(51),n(119)],r=function(e,t){var n={configurable:!1,enumerable:!1,value:null,writable:!1},i=function(){try{var t={},n=e(n=Object.defineProperty)&&n,i=n(t,t,t)&&n}catch(r){}return i}(),r=i?function(e,t){n.value=t,i(e,"__bindData__",n)}:t;return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e){function t(){return window.location.pathname+window.location.search}e.exports=t},function(e,t,n){(function(e){t.arrayToObject=function(e){for(var t={},n=0,i=e.length;i>n;++n)"undefined"!=typeof e[n]&&(t[n]=e[n]);return t},t.merge=function(e,n){if(!n)return e;if(Array.isArray(n)){for(var i=0,r=n.length;r>i;++i)"undefined"!=typeof n[i]&&(e[i]="object"==typeof e[i]?t.merge(e[i],n[i]):n[i]);return e}if(Array.isArray(e)){if("object"!=typeof n)return e.push(n),e;e=t.arrayToObject(e)}for(var s=Object.keys(n),o=0,a=s.length;a>o;++o){var l=s[o],c=n[l];e[l]=c&&"object"==typeof c&&e[l]?t.merge(e[l],c):c}return e},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},t.compact=function(e,n){if("object"!=typeof e||null===e)return e;n=n||[];var i=n.indexOf(e);if(-1!==i)return n[i];if(n.push(e),Array.isArray(e)){for(var r=[],s=0,o=e.length;o>s;++s)"undefined"!=typeof e[s]&&r.push(e[s]);return r}for(var a=Object.keys(e),s=0,l=a.length;l>s;++s){var c=a[s];e[c]=t.compact(e[c],n)}return e},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},t.isBuffer=function(t){return"undefined"!=typeof e?e.isBuffer(t):!1}}).call(t,n(240).Buffer)},function(e,t,n){"use strict";function i(){this._callbacks=null,this._contexts=null}var r=n(25),s=n(3),o=n(16);o(i,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){s(e.length===t.length,"Mismatched list of contexts in callback queue"),this._callbacks=null,this._contexts=null;
for(var n=0,i=e.length;i>n;n++)e[n].call(t[n]);e.length=0,t.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),r.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e){return e===v.topMouseUp||e===v.topTouchEnd||e===v.topTouchCancel}function r(e){return e===v.topMouseMove||e===v.topTouchMove}function s(e){return e===v.topMouseDown||e===v.topTouchStart}function o(e,t){var n=e._dispatchListeners,i=e._dispatchIDs;if(h(e),Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)t(e,n[r],i[r]);else n&&t(e,n,i)}function a(e,t,n){e.currentTarget=g.Mount.getNode(n);var i=t(e,n);return e.currentTarget=null,i}function l(e,t){o(e,t),e._dispatchListeners=null,e._dispatchIDs=null}function c(e){var t=e._dispatchListeners,n=e._dispatchIDs;if(h(e),Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,n[i]))return n[i]}else if(t&&t(e,n))return n;return null}function u(e){var t=c(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function d(e){h(e);var t=e._dispatchListeners,n=e._dispatchIDs;m(!Array.isArray(t),"executeDirectDispatch(...): Invalid `event`.");var i=t?t(e,n):null;return e._dispatchListeners=null,e._dispatchIDs=null,i}function p(e){return!!e._dispatchListeners}var h,f=n(10),m=n(3),g={Mount:null,injectMount:function(e){g.Mount=e,m(e&&e.getNode,"EventPluginUtils.injection.injectMount(...): Injected Mount module is missing getNode.")}},v=f.topLevelTypes;h=function(e){var t=e._dispatchListeners,n=e._dispatchIDs,i=Array.isArray(t),r=Array.isArray(n),s=r?n.length:n?1:0,o=i?t.length:t?1:0;m(r===i&&s===o,"EventPluginUtils: Invalid `event`.")};var b={isEndish:i,isMoveish:r,isStartish:s,executeDirectDispatch:d,executeDispatch:a,executeDispatchesInOrder:l,executeDispatchesInOrderStopAtTrue:u,hasDispatches:p,injection:g,useTouchEvents:!1};e.exports=b},function(e,t,n){"use strict";function i(e){c(null==e.props.checkedLink||null==e.props.valueLink,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa.")}function r(e){i(e),c(null==e.props.value&&null==e.props.onChange,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink.")}function s(e){i(e),c(null==e.props.checked&&null==e.props.onChange,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink")}function o(e){this.props.valueLink.requestChange(e.target.value)}function a(e){this.props.checkedLink.requestChange(e.target.checked)}var l=n(218),c=n(3),u={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},d={Mixin:{propTypes:{value:function(e,t){return!e[t]||u[e.type]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t){return!e[t]||e.onChange||e.readOnly||e.disabled?void 0:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func}},getValue:function(e){return e.props.valueLink?(r(e),e.props.valueLink.value):e.props.value},getChecked:function(e){return e.props.checkedLink?(s(e),e.props.checkedLink.value):e.props.checked},getOnChange:function(e){return e.props.valueLink?(r(e),o):e.props.checkedLink?(s(e),a):e.props.onChange}};e.exports=d},function(e,t,n){"use strict";var i=n(8),r={current:{},withContext:function(e,t){var n,s=r.current;r.current=i(s,e);try{n=t()}finally{r.current=s}return n}};e.exports=r},function(e,t,n){"use strict";function i(){return l(a,"Trying to return null from a render, but no null placeholder component was injected."),a()}function r(e){c[e]=!0}function s(e){delete c[e]}function o(e){return c[e]}var a,l=n(3),c={},u={injectEmptyComponent:function(e){a=e}},d={deregisterNullComponentID:s,getEmptyComponent:i,injection:u,isNullComponentID:o,registerNullComponentID:r};e.exports=d},function(e,t,n){"use strict";function i(e){return s(document.documentElement,e)}var r=n(378),s=n(224),o=n(225),a=n(226),l={hasSelectionCapabilities:function(e){return e&&("INPUT"===e.nodeName&&"text"===e.type||"TEXTAREA"===e.nodeName||"true"===e.contentEditable)},getSelectionInformation:function(){var e=a();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=a(),n=e.focusedElem,r=e.selectionRange;t!==n&&i(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,r),o(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&"INPUT"===e.nodeName){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if("undefined"==typeof i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&"INPUT"===e.nodeName){var s=e.createTextRange();s.collapse(!0),s.moveStart("character",n),s.moveEnd("character",i-n),s.select()}else r.setOffsets(e,t)}};e.exports=l},function(e,t,n){"use strict";var i=n(407),r={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=i(e);return e.replace(">"," "+r.CHECKSUM_ATTR_NAME+'="'+t+'">')},canReuseMarkup:function(e,t){var n=t.getAttribute(r.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var s=i(e);return s===n}};e.exports=r},function(e,t,n){"use strict";var i=n(38),r=n(17),s=n(41),o=n(11),a=n(90),l=n(16),c=function(e){this.construct(e)};l(c,s.Mixin),l(c,r),l(c,{mountComponent:function(e,t,n){s.Mixin.mountComponent.call(this,e,t,n);var r=a(this.props);return t.renderToStaticMarkup?r:"<span "+i.createMarkupForID(e)+">"+r+"</span>"},receiveComponent:function(e){var t=e.props;t!==this.props&&(this.props=t,s.BackendIDOperations.updateTextContentByID(this._rootNodeID,t))}}),e.exports=o.createFactory(c)},function(e,t,n){"use strict";function i(e,t){if(r(null!=t,"accumulate(...): Accumulated items must be not be null or undefined."),null==e)return t;var n=Array.isArray(e),i=Array.isArray(t);return n?e.concat(t):i?[e].concat(t):[e,t]}var r=n(3);e.exports=i},function(e,t,n){"use strict";function i(e,t){o(!e.props.ref,"You are calling cloneWithProps() on a child with a ref. This is dangerous because you're creating a new child which will not be added as a ref to its parent.");var n=r.mergeProps(t,e.props);return!n.hasOwnProperty(a)&&e.props.hasOwnProperty(a)&&(n.children=e.props.children),e.constructor(n)}var r=n(215),s=n(20),o=n(12),a=s({children:null});e.exports=i},function(e){function t(e){return"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}).join(" "):Array.prototype.join.call(arguments," ")}e.exports=t},function(e){"use strict";function t(e){return i[e]}function n(e){return(""+e).replace(r,t)}var i={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},r=/[&><"']/g;e.exports=n},function(e){"use strict";var t=function(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)};e.exports=t},function(e){"use strict";function t(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var r=i[e];return r?!!n[r]:!1}function n(){return t}var i={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=n},function(e){"use strict";function t(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}e.exports=t},function(e,t,n){"use strict";function i(){return!s&&r.canUseDOM&&(s="textContent"in document.documentElement?"textContent":"innerText"),s}var r=n(5),s=null;e.exports=i},function(e,t,n){"use strict";/**
	 * Checks if an event is supported in the current execution environment.
	 *
	 * NOTE: This will not work correctly for non-generic events such as `change`,
	 * `reset`, `load`, `error`, and `select`.
	 *
	 * Borrows from Modernizr.
	 *
	 * @param {string} eventNameSuffix Event name, e.g. "click".
	 * @param {?boolean} capture Check if the capture phase is supported.
	 * @return {boolean} True if the event is supported.
	 * @internal
	 * @license Modernizr 3.0.0pre (Custom Build) | MIT
	 */
function i(e,t){if(!s.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var o=document.createElement("div");o.setAttribute(n,"return;"),i="function"==typeof o[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var r,s=n(5);s.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=i},function(e,t,n){"use strict";function i(e){r(e&&!/[^a-z0-9_]/.test(e),"You must provide an eventName using only the characters [a-z0-9_]")}var r=n(3);e.exports=i},function(e){"use strict";function t(e,t){return e&&t&&e.type===t.type&&(e.props&&e.props.key)===(t.props&&t.props.key)&&e._owner===t._owner?!0:!1}e.exports=t},function(e,t){t.createdStores=[],t.createdActions=[],t.reset=function(){for(;t.createdStores.length;)t.createdStores.pop();for(;t.createdActions.length;)t.createdActions.pop()}},function(e,t,n){"use strict";function i(e){return e.map(function(e){return{id:e.title,text:e.title}})}var r=n(2),s=(n(4),n(47),n(7)),o=s.pick,a=s.assign,l=n(9),c=l.approvalStatus,u=n(105),d=n(44),p=d.loadListing,h=d.updateListing,f=d.save,m=d.submit,g=n(13),v=g.Navigation,b=n(58),y=n(259),_=y.ValidatedFormMixin,w=y.ListInput,x=y.TextInput,D=y.Select2Input,M=y.Select2TagInput,T=y.TextAreaInput,k=r.addons,j=k.classSet,C=n(48),L=n(6),S=r.createClass({displayName:"CreateEditPage",mixins:[u,v,C],getInitialState:function(){return{scrollToError:!1}},render:function(){var e=this.state.listing,t=function(){return this.state.hasChanges||!e.id}.bind(this),n={btn:!0,"btn-success":!t(),"btn-warning":t()},i=c[e.approvalStatus],s=c,l=s.IN_PROGRESS,u=s.REJECTED,d=[l,u].some(function(e){return e===i}),p=!!e.id,f=t()?"Save":"Saved",m=a({},o(this.state,["errors","warnings","messages","firstError"]),{system:this.props.system,value:e,requestChange:h,forceError:!this.state.isValid}),g=r.DOM.div({className:"CreateEdit__titlebar row"},r.DOM.h1(null,"Create New Listing"),r.DOM.div({className:"btn-group",role:"group"},r.DOM.button({type:"button",className:j(n),onClick:this.onSave},f),d&&r.DOM.button({className:"btn btn-default",onClick:this.onSubmit},"Submit"),p&&r.DOM.button({className:"btn btn-default",onClick:this.onPreview},"Preview"),r.DOM.button({type:"button",className:"btn btn-default",onClick:this.onClose},"Close")));return r.DOM.div(null,b({subHeader:g}),$(Object.assign({ref:"form"},m)))},componentWillMount:function(){p(this.props.params.listingId)},componentWillReceiveProps:function(e){var t=this.props.params.listingId,n=e.params.listingId;t!==n&&(this.setState(this.getInitialState()),p(n))},componentDidUpdate:function(){this.state.scrollToError&&!this.state.isValid&&this.scrollToError(this.state.firstError)},onSave:function(){f(),this.setState({scrollToError:!0})},onPreview:function(){var e=this.state.listing.id;this.transitionTo("edit",{listingId:e},{listing:e,action:"preview",tab:"overview"})},onSubmit:function(){m(),this.setState({scrollToError:!0})},onClose:function(){this.state.hasChanges?window.confirm("You have unsaved information, are you sure you want to leave this page?")&&(p(this.props.params.listingId),this.transitionTo("my-listings")):this.transitionTo("my-listings")},scrollToError:function(){var e=L("div.form-group.has-error"),t=L(this.refs.form.getDOMNode()).find(":first-child"),n=L("html, body");if(e[0]){var i=e.offset().top-t.offset().top;n.animate({scrollTop:i},"medium"),this.setState({scrollToError:!1})}}}),$=r.createClass({displayName:"ListingForm",mixins:[_],render:function(){var e=this.props.value,t=this.props.system,n=(e.owners||[]).map(function(e){return e.username}),s=function(e){this.props.requestChange(["owners"],e.map(function(e){return{username:e}}))}.bind(this),o=this.getFormComponentProps;return r.DOM.form({className:"CreateEdit__form"},r.DOM.h2(null,"Basic Listing Information"),x(Object.assign({},o("title"))),D(Object.assign({},o("type"),{options:i(t.types)})),D(Object.assign({},o("categories"),{multiple:!0,options:i(t.categories)})),M(Object.assign({},o("tags"),{multiple:!0})),T(Object.assign({},o("description"),{rows:"6"})),T(Object.assign({},o("descriptionShort"),{rows:"3"})),r.DOM.h2(null,"Listing Details"),x(Object.assign({},o("versionName"))),x(Object.assign({},o("launchUrl"))),T(Object.assign({},o("requirements"),{rows:"5"})),T(Object.assign({},o("whatIsNew"),{rows:"3",optional:!0})),D(Object.assign({},o("intents"),{multiple:!0,options:this.props.system.intents.map(function(e){var t=e.type+"/"+e.action;return{id:t,text:t}})})),w(Object.assign({},this.getSubFormProps("docUrls"),{itemForm:O,optional:!0})),r.DOM.h2(null,"Graphics"),x(Object.assign({},o("imageXlargeUrl"))),x(Object.assign({},o("imageLargeUrl"))),x(Object.assign({},o("imageMediumUrl"))),x(Object.assign({},o("imageSmallUrl"))),w(Object.assign({},this.getSubFormProps("screenshots"),{itemForm:E})),r.DOM.h2(null,"Owner Information and Contacts"),D(Object.assign({},o("agency"),{options:i(t.organizations)})),D(Object.assign({},o("owners"),{value:n,setter:s,multiple:!0,options:this.props.system.users.map(function(e){return{id:e.username,text:e.username}})})),w(Object.assign({},this.getSubFormProps("contacts"),{itemForm:N})))}}),O=r.createClass({displayName:"ResourceForm",mixins:[_],render:function(){return r.DOM.div({className:"well"},r.DOM.button({type:"button",className:"close",onClick:this.props.removeHandler},r.DOM.span({"aria-hidden":"true"},""),r.DOM.span({className:"sr-only"},"Close")),x(Object.assign({},this.getFormComponentProps("name"))),x(Object.assign({},this.getFormComponentProps("url"))))}}),E=r.createClass({displayName:"ScreenshotForm",mixins:[_],render:function(){return r.DOM.div({className:"well"},r.DOM.button({type:"button",className:"close",onClick:this.props.removeHandler},r.DOM.span({"aria-hidden":"true"},""),r.DOM.span({className:"sr-only"},"Close")),x(Object.assign({},this.getFormComponentProps("smallImageUrl"))),x(Object.assign({},this.getFormComponentProps("largeImageUrl"))))}}),N=r.createClass({displayName:"ContactForm",mixins:[n(60),_],render:function(){return r.DOM.div({className:"well"},r.DOM.button({type:"button",className:"close",onClick:this.props.removeHandler},r.DOM.span({"aria-hidden":"true"},""),r.DOM.span({className:"sr-only"},"Close")),D(Object.assign({},this.getFormComponentProps("type"),{options:i(this.state.system.contactTypes)})),x(Object.assign({},this.getFormComponentProps("name"))),x(Object.assign({},this.getFormComponentProps("organization"),{optional:!0})),x(Object.assign({},this.getFormComponentProps("email"))),x(Object.assign({},this.getFormComponentProps("securePhone"))),x(Object.assign({},this.getFormComponentProps("unsecurePhone"))))}});e.exports=S},function(e,t,n){"use strict";var i=n(2),r=n(61),s=n(47),o=n(13),a=o.Navigation;e.exports=i.createClass({displayName:"exports",propTypes:{listing:i.PropTypes.string.isRequired},mixins:[a],getInitialState:function(){var e=r.getById(this.props.listing),t=e?e.currentRejection:null;return t?{title:e.title,steward:t.author.username,feedback:t.description}:{title:"",steward:"",feedback:""}},render:function(){return s({ref:"modal",className:"FeedbackModal",size:"small"},i.DOM.button({className:"close corner",onClick:this.close},""),i.DOM.h3(null,"Steward Feedback"),i.DOM.dl(null,i.DOM.dt(null,"Listing"),i.DOM.dd(null,this.state.title),i.DOM.dt(null,"Steward"),i.DOM.dd(null,this.state.steward),i.DOM.dt(null,"Feedback"),i.DOM.dd({className:"feedback"},this.state.feedback)),i.DOM.a({className:"btn btn-primary edit",href:"#edit"},"Edit this listing"))},close:function(){this.refs.modal.close(),this.goBack()}})},function(e,t,n){"use strict";var i=n(2),r=n(4),s=n(268),o=n(269),a=n(61),l=n(21),c=n(57),u=l.fetchOwnedListings,d=l.ownedListingsFetched,p=c.fetchSelf,h=c.selfFetched,f=i.createClass({displayName:"MyListings",defaultValue:"all",mixins:[r.ListenerMixin],componentWillMount:function(){this.listenTo(d,this.onStoreChanged),u(),this.listenTo(h,this.onSelfFetched),p()},getListings:function(e){return e=e||(this.state?this.state.profile:null),e?a.getByOwner(e):[]},getInitialState:function(){return{listings:this.getListings(),filter:this.defaultValue,profile:null}},onStoreChanged:function(){this.setState({listings:this.getListings(),filter:this.state.filter,profile:this.state.profile})},onFilterChanged:function(e){this.setState({listings:this.state.listings,filter:e,profile:this.state.profile})},onSelfFetched:function(e){this.setState({listings:this.getListings(e),filter:this.state.filter,profile:e})},render:function(){var e=this.state.listings.map(function(e){return s({listing:e})}),t=this.state.filter||"";return this.transferPropsTo(i.DOM.div({className:"MyListings"},i.DOM.aside({className:"MyListings__sidebar col-md-3"},o({value:this.state.filter,listings:this.state.listings,onFilterChanged:this.onFilterChanged})),i.DOM.ul({className:"MyListings__listings col-md-9 "+t},e),this.props.activeRouteHandler(null)))}});e.exports=f},function(e,t,n){"use strict";var i=n(2),r=i.createClass({displayName:"RecentActivity",render:function(){return i.DOM.div({className:"RecentActivity"},i.DOM.div({className:"RecentActivity__sidebar col-md-3"},"Sidebar"),i.DOM.div({className:"RecentActivity__activities col-md-9"},"Activities"))}});e.exports=r},function(e,t,n){"use strict";var i=n(2),r=i.createClass({displayName:"EmptyFieldValue",propTypes:{text:i.PropTypes.string,inline:i.PropTypes.bool},getDefaultProps:function(){return{text:"Not provided!",inline:!1}},render:function(){var e=this.props.text;return this.props.inline?i.DOM.span({className:"text-muted"},e):i.DOM.p({className:"text-muted"},e)}});e.exports=r},function(e){"use strict";var t={getInitialState:function(){return{errors:null,errorMessage:null,errorStatus:null}},handleError:function(e){var t=e.responseJSON,n=e.status;this.setState({errors:t?t.errors:null,errorStatus:n,errorMessage:t?t.message||t.responseText:t.responseText})}};e.exports=t},function(e,t,n){"use strict";{var i=n(4),r=n(281),s=n(44);s.loadListing}e.exports={mixins:[i.connect(r)],getInitialState:function(){return r.getDefaultData()}}},function(e){"use strict";e.exports=function(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)});return t}},function(e,t,n){"use strict";var i=n(6),r={addToLibrary:function(e){return i.ajax({url:"https://www.owfgoss.org/ng/dev/mp/api/profile/self/library",type:"post",dataType:"json",contentType:"application/json",data:JSON.stringify(e)})},removeFromLibrary:function(e){return i.ajax({url:"https://www.owfgoss.org/ng/dev/mp/api/profile/self/library/"+e.id,type:"delete"})},getLibrary:function(){return i.getJSON("https://www.owfgoss.org/ng/dev/mp/api/profile/self/library")},getSelf:function(){return i.getJSON("https://www.owfgoss.org/ng/dev/mp/api/profile/self")}};e.exports.ProfileApi=r},function(e,t){var n,i;n=[],i=function(){var e=[];return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(51),n(27),n(119)],r=function(e,t){function n(e){return t(e)?i(e):{}}var i=e(i=Object.create)&&i;return i||(n=function(){function e(){}return function(n){if(t(n)){e.prototype=n;var i=new e;e.prototype=null}return i||window.Object()}}()),n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(299),n(301),n(64),n(24)],r=function(e,t,n,i){function r(s,l,c,u,d,p){var h=1&l,f=2&l,m=4&l,g=16&l,v=32&l;if(!f&&!n(s))throw new TypeError;g&&!c.length&&(l&=-17,g=c=!1),v&&!u.length&&(l&=-33,v=u=!1);var b=s&&s.__bindData__;if(b&&b!==!0)return b=i(b),b[2]&&(b[2]=i(b[2])),b[3]&&(b[3]=i(b[3])),!h||1&b[1]||(b[4]=d),!h&&1&b[1]&&(l|=8),!m||4&b[1]||(b[5]=p),g&&o.apply(b[2]||(b[2]=[]),c),v&&a.apply(b[3]||(b[3]=[]),u),b[1]|=l,r.apply(null,b);var y=1==l||17===l?e:t;return y([s,l,c,u,d,p])}var s=[],o=s.push,a=s.unshift;return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(108)],r=function(e){function t(){return e.pop()||[]}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){var n,i;n=[],i=function(){var e=+new Date+"";return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){var n,i;n=[],i=function(){var e=40;return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){var n,i;n=[],i=function(){var e=[];return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(108),n(114)],r=function(e,t){function n(n){n.length=0,e.length<t&&e.push(n)}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(114),n(115)],r=function(e,t){function n(i){var r=i.cache;r&&n(r),i.array=i.cache=i.criteria=i.object=i.number=i.string=i.value=null,t.length<e&&t.push(i)}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(35),n(36)],r=function(e,t){var n=function(n,i,r){var s,o=n,a=o;if(!o)return a;if(!t[typeof o])return a;i=i&&"undefined"==typeof r?i:e(i,r,3);for(s in o)if(i(o[s],s,n)===!1)return a;return a};return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){function e(){}return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiem:function(e,t,n){return 12>e?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Mre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("ar-sa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(e){return 12>e?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"},i=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&10>=e%100?3:e%100>=11?4:5},r={s:["  "," ",["",""],"%d ","%d ","%d "],m:["  "," ",["",""],"%d ","%d ","%d "],h:["  "," ",["",""],"%d ","%d ","%d "],d:["  "," ",["",""],"%d ","%d ","%d "],M:["  "," ",["",""],"%d ","%d ","%d "],y:["  "," ",["",""],"%d ","%d ","%d "]},s=function(e){return function(t,n){var s=i(t),o=r[e][i(t)];return 2===s&&(o=o[n?0:1]),o.replace(/%d/i,t)}},o=["  "," "," "," "," "," "," "," "," ","  ","  ","  "];return e.defineLocale("ar",{months:o,monthsShort:o,weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiem:function(e){return 12>e?"":""},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:s("s"),m:s("m"),mm:s("m"),h:s("h"),hh:s("h"),d:s("d"),dd:s("d"),M:s("M"),MM:s("M"),y:s("y"),yy:s("y")},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-nc",4:"-nc",100:"-nc",6:"-nc",9:"-uncu",10:"-uncu",30:"-uncu",60:"-nc",90:"-nc"};return e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertsi_rnb axam_rnb_Cm axam_Cm_nb".split("_"),weekdaysShort:"Baz_BzE_Ax_r_CAx_Cm_n".split("_"),weekdaysMin:"Bz_BE_A__CA_C_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gln hft] dddd [saat] LT",lastDay:"[dnn] LT",lastWeek:"[ken hft] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s vvl",s:"birne saniyy",m:"bir dqiq",mm:"%d dqiq",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiem:function(e){return 4>e?"gec":12>e?"shr":17>e?"gndz":"axam"},ordinalParse:/\d{1,2}-(nc|inci|nci|nc|nc|uncu)/,ordinal:function(e){if(0===e)return e+"-nc";var n=e%10,i=e%100-n,r=e>=100?100:null;return e+(t[n]||t[i]||t[r])},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?n[1]:n[2]}function n(e,n,i){var r={mm:n?"__":"__",hh:n?"__":"__",dd:"__",MM:"__",yy:"__"};return"m"===i?n?"":"":"h"===i?n?"":"":e+" "+t(r[i],+e)}function i(e,t){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return n[i][e.month()]}function r(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_")},i=/\[ ?[] ?(?:|)? ?\] ?dddd/.test(t)?"accusative":"nominative";return n[i][e.day()]}return e.defineLocale("be",{months:i,monthsShort:"___________".split("_"),weekdays:r,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:n,hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiem:function(e){return 4>e?"":12>e?"":17>e?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!==2&&e%10!==3||e%100===12||e%100===13?e+"-":e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&20>n?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("bn",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 4>e?"":10>e?"":17>e?"":20>e?"":""},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("bo",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[], LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 4>e?"":10>e?"":17>e?"":20>e?"":""},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i={mm:"munutenn",MM:"miz",dd:"devezh"};return e+" "+r(i[n],e)}function n(e){switch(i(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function i(e){return e>9?i(e%10):e}function r(e,t){return 2===t?s(e):e}function s(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}return e.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:n},ordinalParse:/\d{1,2}(a|vet)/,ordinal:function(e){var t=1===e?"a":"vet";return e+t},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}return e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t||a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"";return("w"===t||"W"===t)&&(n="a"),e+n},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e){return e>1&&5>e&&1!==~~(e/10)}function n(e,n,i,r){var s=e+" ";switch(i){case"s":return n||r?"pr sekund":"pr sekundami";
case"m":return n?"minuta":r?"minutu":"minutou";case"mm":return n||r?s+(t(e)?"minuty":"minut"):s+"minutami";case"h":return n?"hodina":r?"hodinu":"hodinou";case"hh":return n||r?s+(t(e)?"hodiny":"hodin"):s+"hodinami";case"d":return n||r?"den":"dnem";case"dd":return n||r?s+(t(e)?"dny":"dn"):s+"dny";case"M":return n||r?"msc":"mscem";case"MM":return n||r?s+(t(e)?"msce":"msc"):s+"msci";case"y":return n||r?"rok":"rokem";case"yy":return n||r?s+(t(e)?"roky":"let"):s+"lety"}}var i="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),r="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");return e.defineLocale("cs",{months:i,monthsShort:r,monthsParse:function(e,t){var n,i=[];for(n=0;12>n;n++)i[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return i}(i,r),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], LT",LLLL:"dddd, YYYY [] MMMM [] D[-], LT"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(e){var t=/$/i.exec(e)?"":/$/i.exec(e)?"":"";return e+t},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}-/,ordinal:"%d-",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t=e,n="",i=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return t>20?n=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(n=i[t]),e+n},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}return e.defineLocale("de-at",{months:"Jnner_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jn._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}return e.defineLocale("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(e,t){return/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(e,t,n){return e>11?n?"":"":n?"":""},isPM:function(e){return""===(e+"").toLowerCase()[0]},meridiemParse:/[]\.??\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[ ] dddd [{}] LT";default:return"[ ] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var n=this._calendarEl[e],i=t&&t.hours();return"function"==typeof n&&(n=n.apply(t)),n.replace("{}",i%12===1?"":"")},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n,i){var r={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[e+" minuti",e+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[e+" tunni",e+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[e+" kuu",e+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[e+" aasta",e+" aastat"]};return t?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}return e.defineLocale("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d peva",M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(e){return 12>e?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[-]/g,function(e){return n[e]}).replace(//g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"")},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:6,doy:12}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,i,r){var s="";switch(i){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"m":return r?"minuutin":"minuutti";case"mm":s=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":s=r?"tunnin":"tuntia";break;case"d":return r?"pivn":"piv";case"dd":s=r?"pivn":"piv";break;case"M":return r?"kuukauden":"kuukausi";case"MM":s=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":s=r?"vuoden":"vuotta"}return s=n(e,r)+" "+s}function n(e,t){return 10>e?t?r[e]:i[e]:e}var i="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),r=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",i[7],i[8],i[9]];return e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return"uns segundos"===e?"nuns segundos":"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY LT",LLLL:"dddd, D []MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(e){return 2===e?"":e+" "},d:"",dd:function(e){return 2===e?"":e+" "},M:"",MM:function(e){return 2===e?"":e+" "},y:"",yy:function(e){return 2===e?"":e+" "}}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 4>e?"":10>e?"":17>e?"":20>e?"":""},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return i+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return i+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return i+=1===e?"dan":"dana";case"MM":return i+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return i+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}return e.defineLocale("hr",{months:"sjeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n,i){var r=e;switch(n){case"s":return i||t?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(i||t?" perc":" perce");case"mm":return r+(i||t?" perc":" perce");case"h":return"egy"+(i||t?" ra":" rja");case"hh":return r+(i||t?" ra":" rja");case"d":return"egy"+(i||t?" nap":" napja");case"dd":return r+(i||t?" nap":" napja");case"M":return"egy"+(i||t?" hnap":" hnapja");case"MM":return r+(i||t?" hnap":" hnapja");case"y":return"egy"+(i||t?" v":" ve");case"yy":return r+(i||t?" v":" ve")}return""}function n(e){return(e?"":"[mlt] ")+"["+i[this.day()]+"] LT[-kor]"}var i="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");return e.defineLocale("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(e,t,n){return 12>e?n===!0?"de":"DE":n===!0?"du":"DU"
},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return n.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return n.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return n[i][e.month()]}function n(e){var t="___________".split("_");return t[e.month()]}function i(e){var t="______".split("_");return t[e.day()]}return e.defineLocale("hy-am",{months:t,monthsShort:n,weekdays:i,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiem:function(e){return 4>e?"":12>e?"":17>e?"":""},ordinalParse:/\d{1,2}|\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-":e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(e){return 11>e?"pagi":15>e?"siang":19>e?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e){return e%100===11?!0:e%10===1?!1:!0}function n(e,n,i,r){var s=e+" ";switch(i){case"s":return n||r?"nokkrar sekndur":"nokkrum sekndum";case"m":return n?"mnta":"mntu";case"mm":return t(e)?s+(n||r?"mntur":"mntum"):n?s+"mnta":s+"mntu";case"hh":return t(e)?s+(n||r?"klukkustundir":"klukkustundum"):s+"klukkustund";case"d":return n?"dagur":r?"dag":"degi";case"dd":return t(e)?n?s+"dagar":s+(r?"daga":"dgum"):n?s+"dagur":s+(r?"dag":"degi");case"M":return n?"mnuur":r?"mnu":"mnui";case"MM":return t(e)?n?s+"mnuir":s+(r?"mnui":"mnuum"):n?s+"mnuur":s+(r?"mnu":"mnui");case"y":return n||r?"r":"ri";case"yy":return t(e)?s+(n||r?"r":"rum"):s+(n||r?"r":"ri")}}return e.defineLocale("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",LTS:"LTs",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDLT",LLLL:"YYYYMDLT dddd"},meridiem:function(e){return 12>e?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD] *MMMM?/.test(t)?"accusative":"nominative";return n[i][e.month()]}function n(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_")},i=/(|)/.test(t)?"accusative":"nominative";return n[i][e.day()]}return e.defineLocale("ka",{months:t,monthsShort:"___________".split("_"),weekdays:n,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(e){return/(|||)/.test(e)?e.replace(/$/,""):e+""},past:function(e){return/(||||)/.test(e)?e.replace(/(|)$/," ")://.test(e)?e.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/0|1-|-\d{1,2}|\d{1,2}-/,ordinal:function(e){return 0===e?e:1===e?e+"-":20>e||100>=e&&e%20===0||e%100===0?"-"+e:e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h m",LTS:"A h m s",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D LT",LLLL:"YYYY MMMM D dddd LT"},meridiem:function(e){return 12>e?"":""},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"},ordinalParse:/\d{1,2}/,ordinal:"%d",meridiemParse:/(|)/,isPM:function(e){return""===e}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function n(e){var t=e.substr(0,e.indexOf(" "));return r(t)?"a "+e:"an "+e}function i(e){var t=e.substr(0,e.indexOf(" "));return r(t)?"viru "+e:"virun "+e}function r(e){if(e=parseInt(e,10),isNaN(e))return!1;if(0>e)return!0;if(10>e)return e>=4&&7>=e?!0:!1;if(100>e){var t=e%10,n=e/10;return r(0===t?n:t)}if(1e4>e){for(;e>=10;)e/=10;return r(e)}return e/=1e3,r(e)}return e.defineLocale("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:i,s:"e puer Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Mint",y:t,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n,i){return t?"kelios sekunds":i?"keli sekundi":"kelias sekundes"}function n(e,t,n,i){return t?r(n)[0]:i?r(n)[1]:r(n)[2]}function i(e){return e%10===0||e>10&&20>e}function r(e){return a[e].split("_")}function s(e,t,s,o){var a=e+" ";return 1===e?a+n(e,t,s[0],o):t?a+(i(e)?r(s)[1]:r(s)[0]):o?a+r(s)[1]:a+(i(e)?r(s)[1]:r(s)[2])}function o(e,t){var n=-1===t.indexOf("dddd HH:mm"),i=l[e.day()];return n?i:i.substring(0,i.length-2)+""}var a={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"},l="sekmadienis_pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis".split("_");return e.defineLocale("lt",{months:"sausio_vasario_kovo_balandio_gegus_birelio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:o,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:t,m:n,mm:s,h:n,hh:s,d:n,dd:s,M:n,MM:s,y:n,yy:s},ordinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i=e.split("_");return n?t%10===1&&11!==t?i[2]:i[3]:t%10===1&&11!==t?i[0]:i[1]}function n(e,n,r){return e+" "+t(i[r],e,n)}var i={mm:"minti_mintes_minte_mintes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mnesi_mneus_mnesis_mnei",yy:"gadu_gadus_gads_gadi"};return e.defineLocale("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vlk",past:"%s agrk",s:"daas sekundes",m:"minti",mm:n,h:"stundu",hh:n,d:"dienu",dd:n,M:"mnesi",MM:n,y:"gadu",yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinalParse:/\d{1,2}-(|||||)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-":0===n?e+"-":n>10&&20>n?e+"-":1===t?e+"-":2===t?e+"-":7===t||8===t?e+"-":e+"-"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",LTS:"A h:mm:ss -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiem:function(e){return 4>e?"":12>e?"":17>e?" ":20>e?"":""}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 4>e?"":10>e?"":17>e?"":20>e?"":""},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(e){return 11>e?"pagi":15>e?"tengahari":19>e?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("my",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[.] LT []",nextDay:"[] LT []",nextWeek:"dddd LT []",lastDay:"[.] LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:" %s ",past:" %s ",s:".",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tirs_ons_tors_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"H.mm",LTS:"LT.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return e.defineLocale("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._.__._._._.".split("_"),longDateFormat:{LT:"A h:mm ",LTS:"A h:mm:ss ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(e){return e.replace(/[]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiem:function(e){return 3>e?"":10>e?"":15>e?"":18>e?"":20>e?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,i){return/-MMM-/.test(i)?n[e.month()]:t[e.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e){return 5>e%10&&e%10>1&&~~(e/10)%10!==1}function n(e,n,i){var r=e+" ";switch(i){case"m":return n?"minuta":"minut";case"mm":return r+(t(e)?"minuty":"minut");case"h":return n?"godzina":"godzin";case"hh":return r+(t(e)?"godziny":"godzin");case"MM":return r+(t(e)?"miesice":"miesicy");case"yy":return r+(t(e)?"lata":"lat")}}var i="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),r="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");return e.defineLocale("pl",{months:function(e,t){return/D MMMM/.test(t)?r[e.month()]:i[e.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:n,mm:n,h:n,hh:n,d:"1 dzie",dd:"%d dni",M:"miesic",MM:n,y:"rok",yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"dom_2_3_4_5_6_sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [s] LT"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d"})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"dom_2_3_4_5_6_sb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},r=" ";return(e%100>=20||e>=100&&e%100===0)&&(r=" de "),e+r+i[n]}return e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:t,h:"o or",hh:t,d:"o zi",dd:t,M:"o lun",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})
})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?n[1]:n[2]}function n(e,n,i){var r={mm:n?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===i?n?"":"":e+" "+t(r[i],+e)}function i(e,t){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return n[i][e.month()]}function r(e,t){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative";return n[i][e.month()]}function s(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_")},i=/\[ ?[] ?(?:||)? ?\] ?dddd/.test(t)?"accusative":"nominative";return n[i][e.day()]}return e.defineLocale("ru",{months:i,monthsShort:r,weekdays:s,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT"},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT";switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiemParse:/|||/i,isPM:function(e){return/^(|)$/.test(e)},meridiem:function(e){return 4>e?"":12>e?"":17>e?"":""},ordinalParse:/\d{1,2}-(||)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-";case"D":return e+"-";case"w":case"W":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e){return e>1&&5>e}function n(e,n,i,r){var s=e+" ";switch(i){case"s":return n||r?"pr seknd":"pr sekundami";case"m":return n?"minta":r?"mintu":"mintou";case"mm":return n||r?s+(t(e)?"minty":"mint"):s+"mintami";case"h":return n?"hodina":r?"hodinu":"hodinou";case"hh":return n||r?s+(t(e)?"hodiny":"hodn"):s+"hodinami";case"d":return n||r?"de":"dom";case"dd":return n||r?s+(t(e)?"dni":"dn"):s+"dami";case"M":return n||r?"mesiac":"mesiacom";case"MM":return n||r?s+(t(e)?"mesiace":"mesiacov"):s+"mesiacmi";case"y":return n||r?"rok":"rokom";case"yy":return n||r?s+(t(e)?"roky":"rokov"):s+"rokmi"}}var i="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),r="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");return e.defineLocale("sk",{months:i,monthsShort:r,monthsParse:function(e,t){var n,i=[];for(n=0;12>n;n++)i[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return i}(i,r),weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t,n){var i=e+" ";switch(n){case"m":return t?"ena minuta":"eno minuto";case"mm":return i+=1===e?"minuta":2===e?"minuti":3===e||4===e?"minute":"minut";case"h":return t?"ena ura":"eno uro";case"hh":return i+=1===e?"ura":2===e?"uri":3===e||4===e?"ure":"ur";case"dd":return i+=1===e?"dan":"dni";case"MM":return i+=1===e?"mesec":2===e?"meseca":3===e||4===e?"mesece":"mesecev";case"yy":return i+=1===e?"leto":2===e?"leti":3===e||4===e?"leta":"let"}}return e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"%s nazaj",s:"nekaj sekund",m:t,mm:t,h:t,hh:t,d:"en dan",dd:t,M:"en mesec",MM:t,y:"eno leto",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),meridiem:function(e){return 12>e?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&4>=e?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];return 1===i.length?n?r[0]:r[1]:e+" "+t.correctGrammaticalCase(e,r)}};return e.defineLocale("sr-cyrl",{months:["","","","","","","","","","","",""],monthsShort:[".",".",".",".","","","",".",".",".",".","."],weekdays:["","","","","","",""],weekdaysShort:[".",".",".",".",".",".","."],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){var e=["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"",dd:t.translate,M:"",MM:t.translate,y:"",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&4>=e?t[1]:t[2]},translate:function(e,n,i){var r=t.words[i];return 1===i.length?n?r[0]:r[1]:e+" "+t.correctGrammaticalCase(e,r)}};return e.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","et.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","e","pe","su"],longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var e=["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return e[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"dddd LT",lastWeek:"[Frra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10,n=1===~~(e%100/10)?"e":1===t?"a":2===t?"a":3===t?"e":"e";return e+n},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinalParse:/\d{1,2}/,ordinal:function(e){return e+""},meridiem:function(e){return e>=6&&10>=e?" ":e>=10&&14>=e?" ":e>=14&&18>=e?" ":e>=18&&20>=e?" ":e>=20&&24>=e?" ":e>=0&&6>=e?" ":void 0},week:{dow:0,doy:6}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("th",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{LT:"H  m ",LTS:"LT s ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  LT",LLLL:"dddd D MMMM YYYY  LT"},meridiem:function(e){return 12>e?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};return e.defineLocale("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinalParse:/\d{1,2}'(inci|nci|nc|nc|uncu|nc)/,ordinal:function(e){if(0===e)return e+"'nc";var n=e%10,i=e%100-n,r=e>=100?100:null;return e+(t[n]||t[i]||t[r])},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("tzm-latn",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){function t(e,t){var n=e.split("_");return t%10===1&&t%100!==11?n[0]:t%10>=2&&4>=t%10&&(10>t%100||t%100>=20)?n[1]:n[2]}function n(e,n,i){var r={mm:"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===i?n?"":"":"h"===i?n?"":"":e+" "+t(r[i],+e)}function i(e,t){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]? *MMMM?/.test(t)?"accusative":"nominative";return n[i][e.month()]}function r(e,t){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},i=/(\[[]\]) ?dddd/.test(t)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(t)?"genitive":"nominative";return n[i][e.day()]}function s(e){return function(){return e+""+(11===this.hours()?"":"")+"] LT"}}return e.defineLocale("uk",{months:i,monthsShort:"___________".split("_"),weekdays:r,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:s("[ "),nextDay:s("[ "),lastDay:s("[ "),nextWeek:s("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return s("[] dddd [").call(this);case 1:case 2:case 4:return s("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiem:function(e){return 4>e?"":12>e?"":17>e?"":""},ordinalParse:/\d{1,2}-(|)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-";case"D":return e+"-";default:return e}},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY LT",LLLL:"dddd, D MMMM [nm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"},meridiem:function(e,t){var n=100*e+t;return 600>n?"":900>n?"":1130>n?"":1230>n?"":1800>n?"":""},calendar:{sameDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},lastDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()-t.unix()>=604800?"[]":"[]",0===this.minutes()?n+"dddAh":n+"dddAhmm"},lastWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()<t.unix()?"[]":"[]",0===this.minutes()?n+"dddAh":n+"dddAhmm"},sameElse:"LL"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"},week:{dow:1,doy:4}})})},function(e,t,n){var i,r,s;!function(o){r=[n(1)],i=o,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(function(e){return e.defineLocale("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",LTS:"Ahms",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"},meridiem:function(e,t){var n=100*e+t;return 900>n?"":1130>n?"":1230>n?"":1800>n?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(||)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"";case"M":return e+"";case"w":case"W":return e+"";default:return e}},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"}})})},function(e,t,n){function i(){return window.location.hash.substr(1)}function r(){var e=i();return"/"===e.charAt(0)?!0:(u.replace("/"+e),!1)}function s(){if(r()){{i()}a({type:o||l.POP,path:i()}),o=null}}var o,a,l=n(65),c=n(77),u={setup:function(e){a=e,r(),window.addEventListener?window.addEventListener("hashchange",s,!1):window.attachEvent("onhashchange",s)},teardown:function(){window.removeEventListener?window.removeEventListener("hashchange",s,!1):window.detachEvent("onhashchange",s)},push:function(e){o=l.PUSH,window.location.hash=e},replace:function(e){o=l.REPLACE,window.location.replace(c()+"#"+e)},pop:function(){o=l.POP,window.history.back()},getCurrentPath:i,toString:function(){return"<HashLocation>"}};e.exports=u},function(e,t,n){var i=n(2),r={contextTypes:{activeRoutes:i.PropTypes.array.isRequired,activeParams:i.PropTypes.object.isRequired,activeQuery:i.PropTypes.object.isRequired,isActive:i.PropTypes.func.isRequired},getActiveRoutes:function(){return this.context.activeRoutes},getActiveParams:function(){return this.context.activeParams},getActiveQuery:function(){return this.context.activeQuery},isActive:function(e,t,n){return this.context.isActive(e,t,n)}};e.exports=r},function(e,t,n){var i=n(2),r={contextTypes:{makePath:i.PropTypes.func.isRequired,makeHref:i.PropTypes.func.isRequired,transitionTo:i.PropTypes.func.isRequired,replaceWith:i.PropTypes.func.isRequired,goBack:i.PropTypes.func.isRequired},makePath:function(e,t,n){return this.context.makePath(e,t,n)},makeHref:function(e,t,n){return this.context.makeHref(e,t,n)},transitionTo:function(e,t,n){this.context.transitionTo(e,t,n)},replaceWith:function(e,t,n){this.context.replaceWith(e,t,n)},goBack:function(){this.context.goBack()}};e.exports=r},function(e,t,n){function i(e){return encodeURIComponent(e).replace(/%20/g,"+")}function r(e){return decodeURIComponent(e.replace(/\+/g," "))}function s(e){return String(e).split("/").map(i).join("/")}function o(e){if(!(e in f)){var t=[],n=e.replace(u,function(e,n){return n?(t.push(n),"([^/?#]+)"):"*"===e?(t.push("splat"),"(.*?)"):"\\"+e});f[e]={matcher:new RegExp("^"+n+"$","i"),paramNames:t}}return f[e]}var a=n(3),l=n(78).merge,c=n(345),u=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|[*.()\[\]\\+|{}^$]/g,d=/:([a-zA-Z_$][a-zA-Z0-9_$?]*[?]?)|[*]/g,p=/\/\/\?|\/\?/g,h=/\?(.+)/,f={},m={extractParamNames:function(e){return o(e).paramNames},extractParams:function(e,t){var n=o(e),i=r(t).match(n.matcher);if(!i)return null;var s={};return n.paramNames.forEach(function(e,t){s[e]=i[t+1]}),s},injectParams:function(e,t){t=t||{};var n=0;return e.replace(d,function(i,r){if(r=r||"splat","?"!==r.slice(-1))a(null!=t[r],'Missing "'+r+'" parameter for path "'+e+'"');else if(r=r.slice(0,-1),null==t[r])return"";var o;return"splat"===r&&Array.isArray(t[r])?(o=t[r][n++],a(null!=o,"Missing splat # "+n+' for path "'+e+'"')):o=t[r],s(o)}).replace(p,"/")},extractQuery:function(e){var t=e.match(h);return t&&c.parse(t[1])},withoutQuery:function(e){return e.replace(h,"")},withQuery:function(e,t){var n=m.extractQuery(e);n&&(t=t?l(n,t):n);var i=t&&c.stringify(t);return i?m.withoutQuery(e)+"?"+i:e},isAbsolute:function(e){return"/"===e.charAt(0)},normalize:function(e){return e.replace(/^\/*/,"/")},join:function(e,t){return e.replace(/\/*$/,"/")+t}};e.exports=m},function(e){function t(e,t,n){this.to=e,this.params=t,this.query=n}e.exports=t},function(e,t,n){function i(e){return d(e,{location:"none",scrollBehavior:"none"})}function r(e,t){p(t,{initialPath:e.path,initialMatches:e.matches,initialActiveRoutes:e.activeRoutes,initialActiveParams:e.activeParams,initialActiveQuery:e.activeQuery})}function s(e,t,n){f(a.isValidDescriptor(e),"You must pass a valid ReactComponent to renderRoutesToString");var s=h(i(e));s.dispatch(t,function(e,t,i){if(e||t)return n(e,t);r(i,s.props);var o;try{var a=l.createReactRootID();o=u.getPooled(!1),o.perform(function(){var e=s.mountComponent(a,o,0);n(null,null,c.addChecksumToMarkup(e))},null)}finally{u.release(o)}})}function o(e,t,n){f(a.isValidDescriptor(e),"You must pass a valid ReactComponent to renderRoutesToStaticMarkup");var s=h(i(e));s.dispatch(t,function(e,t,i){if(e||t)return n(e,t);r(i,s.props);var o;try{var a=l.createReactRootID();o=u.getPooled(!1),o.perform(function(){n(null,null,s.mountComponent(a,o,0))},null)}finally{u.release(o)}})}var a=n(11),l=n(31),c=n(85),u=n(221),d=n(88),p=n(43),h=n(55),f=n(3);e.exports={renderRoutesToString:s,renderRoutesToStaticMarkup:o}},function(e){"use strict";function t(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var n={columnCount:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},i=["Webkit","ms","Moz","O"];Object.keys(n).forEach(function(e){i.forEach(function(i){n[t(i,e)]=n[e]})});var r={background:{backgroundImage:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundColor:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0}},s={isUnitlessNumber:n,shorthandPropertyExpansions:r};
e.exports=s},function(e,t,n){"use strict";var i=n(204),r=n(411),s=n(417),o=n(232),a=o(function(e){return s(e)}),l={createMarkupForStyles:function(e){var t="";for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];null!=i&&(t+=a(n)+":",t+=r(n,i)+";")}return t||null},setValueForStyles:function(e,t){var n=e.style;for(var s in t)if(t.hasOwnProperty(s)){var o=r(s,t[s]);if(o)n[s]=o;else{var a=i.shorthandPropertyExpansions[s];if(a)for(var l in a)n[l]="";else n[s]=""}}}};e.exports=l},function(e,t,n){"use strict";function i(){if(a)for(var e in l){var t=l[e],n=a.indexOf(e);if(o(n>-1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",e),!c.plugins[n]){o(t.extractEvents,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",e),c.plugins[n]=t;var i=t.eventTypes;for(var s in i)o(r(i[s],t,s),"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",s,e)}}}function r(e,t,n){o(!c.eventNameDispatchConfigs.hasOwnProperty(n),"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",n),c.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var r in i)if(i.hasOwnProperty(r)){var a=i[r];s(a,t,n)}return!0}return e.registrationName?(s(e.registrationName,t,n),!0):!1}function s(e,t,n){o(!c.registrationNameModules[e],"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",e),c.registrationNameModules[e]=t,c.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var o=n(3),a=null,l={},c={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){o(!a,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."),a=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];l.hasOwnProperty(n)&&l[n]===r||(o(!l[n],"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",n),l[n]=r,t=!0)}t&&i()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return c.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var i=c.registrationNameModules[t.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){a=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];c.plugins.length=0;var t=c.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=c.registrationNameModules;for(var r in i)i.hasOwnProperty(r)&&delete i[r]}};e.exports=c},function(e,t,n){"use strict";function i(e){e.remove()}var r=n(30),s=n(87),o=n(91),a=n(3),l={trapBubbledEvent:function(e,t){a(this.isMounted(),"Must be mounted to trap events");var n=r.trapBubbledEvent(e,t,this.getDOMNode());this._localEventListeners=s(this._localEventListeners,n)},componentWillUnmount:function(){this._localEventListeners&&o(this._localEventListeners,i)}};e.exports=l},function(e,t,n){"use strict";function i(e,t){this.forEachFunction=e,this.forEachContext=t}function r(e,t,n,i){var r=e;r.forEachFunction.call(r.forEachContext,t,i)}function s(e,t,n){if(null==e)return e;var s=i.getPooled(t,n);p(e,r,s),i.release(s)}function o(e,t,n){this.mapResult=e,this.mapFunction=t,this.mapContext=n}function a(e,t,n,i){var r=e,s=r.mapResult,o=!s.hasOwnProperty(n);if(h(o,"ReactChildren.map(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),o){var a=r.mapFunction.call(r.mapContext,t,i);s[n]=a}}function l(e,t,n){if(null==e)return e;var i={},r=o.getPooled(i,t,n);return p(e,a,r),o.release(r),i}function c(){return null}function u(e){return p(e,c,null)}var d=n(25),p=n(236),h=n(12),f=d.twoArgumentPooler,m=d.threeArgumentPooler;d.addPoolingTo(i,f),d.addPoolingTo(o,m);var g={forEach:s,map:l,count:u};e.exports=g},function(e,t,n){"use strict";function i(e){e&&(g(null==e.children||null==e.dangerouslySetInnerHTML,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."),g(null==e.style||"object"==typeof e.style,"The `style` prop expects a mapping from style properties to values, not a string."))}function r(e,t,n,i){var r=p.findReactContainerForID(e);if(r){var s=r.nodeType===T?r.ownerDocument:r;w(t,s)}i.getPutListenerQueue().enqueuePutListener(e,t,n)}function s(e,t){this._tagOpen="<"+e,this._tagClose=t?"":"</"+e+">",this.tagName=e.toUpperCase()}var o=n(205),a=n(28),l=n(38),c=n(17),u=n(41),d=n(30),p=n(15),h=n(212),f=n(22),m=n(90),g=n(3),v=n(20),b=n(8),y=n(16),_=d.deleteListener,w=d.listenTo,x=d.registrationNameModules,D={string:!0,number:!0},M=v({style:null}),T=1;s.Mixin={mountComponent:f.measure("ReactDOMComponent","mountComponent",function(e,t,n){return u.Mixin.mountComponent.call(this,e,t,n),i(this.props),this._createOpenTagMarkupAndPutListeners(t)+this._createContentMarkup(t)+this._tagClose}),_createOpenTagMarkupAndPutListeners:function(e){var t=this.props,n=this._tagOpen;for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];if(null!=s)if(x.hasOwnProperty(i))r(this._rootNodeID,i,s,e);else{i===M&&(s&&(s=t.style=b(t.style)),s=o.createMarkupForStyles(s));var a=l.createMarkupForProperty(i,s);a&&(n+=" "+a)}}if(e.renderToStaticMarkup)return n+">";var c=l.createMarkupForID(this._rootNodeID);return n+" "+c+">"},_createContentMarkup:function(e){var t=this.props.dangerouslySetInnerHTML;if(null!=t){if(null!=t.__html)return t.__html}else{var n=D[typeof this.props.children]?this.props.children:null,i=null!=n?null:this.props.children;if(null!=n)return m(n);if(null!=i){var r=this.mountChildren(i,e);return r.join("")}}return""},receiveComponent:function(e,t){(e!==this._descriptor||null==e._owner)&&u.Mixin.receiveComponent.call(this,e,t)},updateComponent:f.measure("ReactDOMComponent","updateComponent",function(e,t){i(this._descriptor.props),u.Mixin.updateComponent.call(this,e,t),this._updateDOMProperties(t.props,e),this._updateDOMChildren(t.props,e)}),_updateDOMProperties:function(e,t){var n,i,s,o=this.props;for(n in e)if(!o.hasOwnProperty(n)&&e.hasOwnProperty(n))if(n===M){var l=e[n];for(i in l)l.hasOwnProperty(i)&&(s=s||{},s[i]="")}else x.hasOwnProperty(n)?_(this._rootNodeID,n):(a.isStandardName[n]||a.isCustomAttribute(n))&&u.BackendIDOperations.deletePropertyByID(this._rootNodeID,n);for(n in o){var c=o[n],d=e[n];if(o.hasOwnProperty(n)&&c!==d)if(n===M)if(c&&(c=o.style=b(c)),d){for(i in d)!d.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(s=s||{},s[i]="");for(i in c)c.hasOwnProperty(i)&&d[i]!==c[i]&&(s=s||{},s[i]=c[i])}else s=c;else x.hasOwnProperty(n)?r(this._rootNodeID,n,c,t):(a.isStandardName[n]||a.isCustomAttribute(n))&&u.BackendIDOperations.updatePropertyByID(this._rootNodeID,n,c)}s&&u.BackendIDOperations.updateStylesByID(this._rootNodeID,s)},_updateDOMChildren:function(e,t){var n=this.props,i=D[typeof e.children]?e.children:null,r=D[typeof n.children]?n.children:null,s=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,o=n.dangerouslySetInnerHTML&&n.dangerouslySetInnerHTML.__html,a=null!=i?null:e.children,l=null!=r?null:n.children,c=null!=i||null!=s,d=null!=r||null!=o;null!=a&&null==l?this.updateChildren(null,t):c&&!d&&this.updateTextContent(""),null!=r?i!==r&&this.updateTextContent(""+r):null!=o?s!==o&&u.BackendIDOperations.updateInnerHTMLByID(this._rootNodeID,o):null!=l&&this.updateChildren(l,t)},unmountComponent:function(){this.unmountChildren(),d.deleteAllListeners(this._rootNodeID),u.Mixin.unmountComponent.call(this)}},y(s,u.Mixin),y(s,s.Mixin),y(s,h.Mixin),y(s,c),e.exports=s},function(e,t,n){"use strict";function i(e){return Math.floor(100*e)/100}function r(e,t,n){e[t]=(e[t]||0)+n}var s=n(28),o=n(382),a=n(15),l=n(22),c=n(423),u={_allMeasurements:[],_mountStack:[0],_injected:!1,start:function(){u._injected||l.injection.injectMeasure(u.measure),u._allMeasurements.length=0,l.enableMeasure=!0},stop:function(){l.enableMeasure=!1},getLastMeasurements:function(){return u._allMeasurements},printExclusive:function(e){e=e||u._allMeasurements;var t=o.getExclusiveSummary(e);console.table(t.map(function(e){return{"Component class name":e.componentName,"Total inclusive time (ms)":i(e.inclusive),"Exclusive mount time (ms)":i(e.exclusive),"Exclusive render time (ms)":i(e.render),"Mount time per instance (ms)":i(e.exclusive/e.count),"Render time per instance (ms)":i(e.render/e.count),Instances:e.count}}))},printInclusive:function(e){e=e||u._allMeasurements;var t=o.getInclusiveSummary(e);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Inclusive time (ms)":i(e.time),Instances:e.count}})),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},printWasted:function(e){e=e||u._allMeasurements;var t=o.getInclusiveSummary(e,!0);console.table(t.map(function(e){return{"Owner > component":e.componentName,"Wasted time (ms)":e.time,Instances:e.count}})),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},printDOM:function(e){e=e||u._allMeasurements;var t=o.getDOMSummary(e);console.table(t.map(function(e){var t={};return t[s.ID_ATTRIBUTE_NAME]=e.id,t.type=e.type,t.args=JSON.stringify(e.args),t})),console.log("Total time:",o.getTotalTime(e).toFixed(2)+" ms")},_recordWrite:function(e,t,n,i){var r=u._allMeasurements[u._allMeasurements.length-1].writes;r[e]=r[e]||[],r[e].push({type:t,time:n,args:i})},measure:function(e,t,n){return function(){var i,s,o,l=Array.prototype.slice.call(arguments,0);if("_renderNewRootComponent"===t||"flushBatchedUpdates"===t)return u._allMeasurements.push({exclusive:{},inclusive:{},render:{},counts:{},writes:{},displayNames:{},totalTime:0}),o=c(),s=n.apply(this,l),u._allMeasurements[u._allMeasurements.length-1].totalTime=c()-o,s;if("ReactDOMIDOperations"===e||"ReactComponentBrowserEnvironment"===e){if(o=c(),s=n.apply(this,l),i=c()-o,"mountImageIntoNode"===t){var d=a.getID(l[1]);u._recordWrite(d,t,i,l[0])}else"dangerouslyProcessChildrenUpdates"===t?l[0].forEach(function(e){var t={};null!==e.fromIndex&&(t.fromIndex=e.fromIndex),null!==e.toIndex&&(t.toIndex=e.toIndex),null!==e.textContent&&(t.textContent=e.textContent),null!==e.markupIndex&&(t.markup=l[1][e.markupIndex]),u._recordWrite(e.parentID,e.type,i,t)}):u._recordWrite(l[0],t,i,Array.prototype.slice.call(l,1));return s}if("ReactCompositeComponent"!==e||"mountComponent"!==t&&"updateComponent"!==t&&"_renderValidatedComponent"!==t)return n.apply(this,l);var p="mountComponent"===t?l[0]:this._rootNodeID,h="_renderValidatedComponent"===t,f="mountComponent"===t,m=u._mountStack,g=u._allMeasurements[u._allMeasurements.length-1];if(h?r(g.counts,p,1):f&&m.push(0),o=c(),s=n.apply(this,l),i=c()-o,h)r(g.render,p,i);else if(f){var v=m.pop();m[m.length-1]+=i,r(g.exclusive,p,i-v),r(g.inclusive,p,i)}else r(g.inclusive,p,i);return g.displayNames[p]={current:this.constructor.displayName,owner:this._owner?this._owner.constructor.displayName:"<root>"},s}}};e.exports=u},function(e,t,n){"use strict";function i(){var e=p.current;return e&&e.constructor.displayName||void 0}function r(e,t){e._store.validated||null!=e.props.key||(e._store.validated=!0,o("react_key_warning",'Each child in an array should have a unique "key" prop.',e,t))}function s(e,t,n){v.test(e)&&o("react_numeric_key_warning","Child objects should have non-numeric keys so ordering is preserved.",t,n)}function o(e,t,n,r){var s=i(),o=r.displayName,a=s||o,l=f[e];if(!l.hasOwnProperty(a)){l[a]=!0,t+=s?" Check the render method of "+s+".":" Check the renderComponent call using <"+o+">.";var c=null;n._owner&&n._owner!==p.current&&(c=n._owner.constructor.displayName,t+=" It was passed a child from "+c+"."),t+=" See http://fb.me/react-warning-keys for more information.",h(e,{component:a,componentOwner:c}),console.warn(t)}}function a(){var e=i()||"";m.hasOwnProperty(e)||(m[e]=!0,h("react_object_map_children"))}function l(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++){var i=e[n];u.isValidDescriptor(i)&&r(i,t)}else if(u.isValidDescriptor(e))e._store.validated=!0;else if(e&&"object"==typeof e){a();for(var o in e)s(o,e[o],t)}}function c(e,t,n,i){for(var r in t)if(t.hasOwnProperty(r)){var s;try{s=t[r](n,r,e,i)}catch(o){s=o}s instanceof Error&&!(s.message in g)&&(g[s.message]=!0,h("react_failed_descriptor_type_check",{message:s.message}))}}var u=n(11),d=n(217),p=n(42),h=n(96),f={react_key_warning:{},react_numeric_key_warning:{}},m={},g={},v=/^\d+$/,b={createFactory:function(e,t,n){var i=function(){for(var i=e.apply(this,arguments),r=1;r<arguments.length;r++)l(arguments[r],i.type);var s=i.type.displayName;return t&&c(s,t,i.props,d.prop),n&&c(s,n,i._context,d.context),i};i.prototype=e.prototype,i.type=e.type;for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i}};e.exports=b},function(e,t,n){"use strict";function i(e,t,n){m.push({parentID:e,parentNode:null,type:u.INSERT_MARKUP,markupIndex:g.push(t)-1,textContent:null,fromIndex:null,toIndex:n})}function r(e,t,n){m.push({parentID:e,parentNode:null,type:u.MOVE_EXISTING,markupIndex:null,textContent:null,fromIndex:t,toIndex:n})}function s(e,t){m.push({parentID:e,parentNode:null,type:u.REMOVE_NODE,markupIndex:null,textContent:null,fromIndex:t,toIndex:null})}function o(e,t){m.push({parentID:e,parentNode:null,type:u.TEXT_CONTENT,markupIndex:null,textContent:t,fromIndex:null,toIndex:null})}function a(){m.length&&(c.BackendIDOperations.dangerouslyProcessChildrenUpdates(m,g),l())}function l(){m.length=0,g.length=0}var c=n(41),u=n(213),d=n(413),p=n(55),h=n(97),f=0,m=[],g=[],v={Mixin:{mountChildren:function(e,t){var n=d(e),i=[],r=0;this._renderedChildren=n;for(var s in n){var o=n[s];if(n.hasOwnProperty(s)){var a=p(o);n[s]=a;var l=this._rootNodeID+s,c=a.mountComponent(l,t,this._mountDepth+1);a._mountIndex=r,i.push(c),r++}}return i},updateTextContent:function(e){f++;var t=!0;try{var n=this._renderedChildren;for(var i in n)n.hasOwnProperty(i)&&this._unmountChildByName(n[i],i);this.setTextContent(e),t=!1}finally{f--,f||(t?l():a())}},updateChildren:function(e,t){f++;var n=!0;try{this._updateChildren(e,t),n=!1}finally{f--,f||(n?l():a())}},_updateChildren:function(e,t){var n=d(e),i=this._renderedChildren;if(n||i){var r,s=0,o=0;for(r in n)if(n.hasOwnProperty(r)){var a=i&&i[r],l=a&&a._descriptor,c=n[r];if(h(l,c))this.moveChild(a,o,s),s=Math.max(a._mountIndex,s),a.receiveComponent(c,t),a._mountIndex=o;else{a&&(s=Math.max(a._mountIndex,s),this._unmountChildByName(a,r));var u=p(c);this._mountChildByNameAtIndex(u,r,o,t)}o++}for(r in i)!i.hasOwnProperty(r)||n&&n[r]||this._unmountChildByName(i[r],r)}},unmountChildren:function(){var e=this._renderedChildren;for(var t in e){var n=e[t];n.unmountComponent&&n.unmountComponent()}this._renderedChildren=null},moveChild:function(e,t,n){e._mountIndex<n&&r(this._rootNodeID,e._mountIndex,t)},createChild:function(e,t){i(this._rootNodeID,t,e._mountIndex)},removeChild:function(e){s(this._rootNodeID,e._mountIndex)},setTextContent:function(e){o(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,t,n,i){var r=this._rootNodeID+t,s=e.mountComponent(r,i,this._mountDepth+1);e._mountIndex=n,this.createChild(e,s),this._renderedChildren=this._renderedChildren||{},this._renderedChildren[t]=e},_unmountChildByName:function(e,t){this.removeChild(e),e._mountIndex=null,e.unmountComponent(),delete this._renderedChildren[t]}}};e.exports=v},function(e,t,n){"use strict";var i=n(33),r=i({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,TEXT_CONTENT:null});e.exports=r},function(e,t,n){"use strict";var i=n(412),r=n(3),s={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r(s.isValidOwner(n),"addComponentAsRefTo(...): Only a ReactOwner can have refs. This usually means that you're trying to add a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r(s.isValidOwner(n),"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. This usually means that you're trying to remove a ref to a component that doesn't have an owner (that is, was not created inside of another component's `render` method). Try rendering this component inside of a new top-level component which will hold the ref."),n.refs[t]===e&&n.detachRef(t)},Mixin:{construct:function(){this.refs=i},attachRef:function(e,t){r(t.isOwnedBy(this),"attachRef(%s, ...): Only a component's owner can store a ref to it.",e);var n=this.refs===i?this.refs={}:this.refs;n[e]=t},detachRef:function(e){delete this.refs[e]}}};e.exports=s},function(e,t,n){"use strict";function i(e){return function(t,n,i){t[n]=t.hasOwnProperty(n)?e(t[n],i):i}}function r(e,t){for(var n in t)if(t.hasOwnProperty(n)){var i=u[n];i&&u.hasOwnProperty(n)?i(e,n,t[n]):e.hasOwnProperty(n)||(e[n]=t[n])}return e}var s=n(19),o=n(3),a=n(420),l=n(8),c=i(function(e,t){return l(t,e)}),u={children:s,className:i(a),key:s,ref:s,style:c},d={TransferStrategies:u,mergeProps:function(e,t){return r(l(e),t)},Mixin:{transferPropsTo:function(e){return o(e._owner===this,"%s: You can't call transferPropsTo() on a component that you don't own, %s. This usually means you are calling transferPropsTo() on a component passed in as props or children.",this.constructor.displayName,e.type.displayName),r(e.props,this.props),e}}};e.exports=d},function(e){"use strict";var t={};t={prop:"prop",context:"context",childContext:"child context"},e.exports=t},function(e,t,n){"use strict";var i=n(33),r=i({prop:null,context:null,childContext:null});e.exports=r},function(e,t,n){"use strict";function i(e){function t(t,n,i,r,s){if(r=r||_,null!=n[i])return e(n,i,r,s);var o=b[s];return t?new Error("Required "+o+" `"+i+"` was not specified in "+("`"+r+"`.")):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function r(e){function t(t,n,i,r){var s=t[n],o=m(s);if(o!==e){var a=b[r],l=g(s);return new Error("Invalid "+a+" `"+n+"` of type `"+l+"` "+("supplied to `"+i+"`, expected `"+e+"`."))}}return i(t)}function s(){return i(y.thatReturns())}function o(e){function t(t,n,i,r){var s=t[n];if(!Array.isArray(s)){var o=b[r],a=m(s);return new Error("Invalid "+o+" `"+n+"` of type "+("`"+a+"` supplied to `"+i+"`, expected an array."))}for(var l=0;l<s.length;l++){var c=e(s,l,i,r);if(c instanceof Error)return c}}return i(t)}function a(){function e(e,t,n,i){if(!v.isValidDescriptor(e[t])){var r=b[i];return new Error("Invalid "+r+" `"+t+"` supplied to "+("`"+n+"`, expected a React component."))}}return i(e)}function l(e){function t(t,n,i,r){if(!(t[n]instanceof e)){var s=b[r],o=e.name||_;return new Error("Invalid "+s+" `"+n+"` supplied to "+("`"+i+"`, expected instance of `"+o+"`."))}}return i(t)}function c(e){function t(t,n,i,r){for(var s=t[n],o=0;o<e.length;o++)if(s===e[o])return;var a=b[r],l=JSON.stringify(e);return new Error("Invalid "+a+" `"+n+"` of value `"+s+"` "+("supplied to `"+i+"`, expected one of "+l+"."))}return i(t)}function u(e){function t(t,n,i,r){var s=t[n],o=m(s);if("object"!==o){var a=b[r];return new Error("Invalid "+a+" `"+n+"` of type "+("`"+o+"` supplied to `"+i+"`, expected an object."))}for(var l in s)if(s.hasOwnProperty(l)){var c=e(s,l,i,r);if(c instanceof Error)return c}}return i(t)}function d(e){function t(t,n,i,r){for(var s=0;s<e.length;s++){var o=e[s];if(null==o(t,n,i,r))return}var a=b[r];return new Error("Invalid "+a+" `"+n+"` supplied to "+("`"+i+"`."))}return i(t)}function p(){function e(e,t,n,i){if(!f(e[t])){var r=b[i];return new Error("Invalid "+r+" `"+t+"` supplied to "+("`"+n+"`, expected a renderable prop."))}}return i(e)}function h(e){function t(t,n,i,r){var s=t[n],o=m(s);if("object"!==o){var a=b[r];return new Error("Invalid "+a+" `"+n+"` of type `"+o+"` "+("supplied to `"+i+"`, expected `object`."))}for(var l in e){var c=e[l];if(c){var u=c(s,l,i,r);if(u)return u}}}return i(t,"expected `object`")}function f(e){switch(typeof e){case"number":case"string":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(f);if(v.isValidDescriptor(e))return!0;for(var t in e)if(!f(e[t]))return!1;return!0;default:return!1}}function m(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":t}function g(e){var t=m(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}var v=n(11),b=n(216),y=n(19),_="<<anonymous>>",w={array:r("array"),bool:r("boolean"),func:r("function"),number:r("number"),object:r("object"),string:r("string"),any:s(),arrayOf:o,component:a(),instanceOf:l,objectOf:u,oneOf:c,oneOfType:d,renderable:p(),shape:h};e.exports=w},function(e,t,n){"use strict";function i(){this.listenersToPut=[]}var r=n(25),s=n(30),o=n(16);o(i,{enqueuePutListener:function(e,t,n){this.listenersToPut.push({rootNodeID:e,propKey:t,propValue:n})},putListeners:function(){for(var e=0;e<this.listenersToPut.length;e++){var t=this.listenersToPut[e];s.putListener(t.rootNodeID,t.propKey,t.propValue)}},reset:function(){this.listenersToPut.length=0},destructor:function(){this.reset()}}),r.addPoolingTo(i),e.exports=i},function(e){"use strict";var t={injectCreateReactRootIndex:function(e){n.createReactRootIndex=e}},n={createReactRootIndex:null,injection:t};e.exports=n},function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=s.getPooled(null),this.putListenerQueue=o.getPooled()}var r=n(25),s=n(79),o=n(219),a=n(68),l=n(19),c=n(16),u={initialize:function(){this.reactMountReady.reset()},close:l},d={initialize:function(){this.putListenerQueue.reset()},close:l},p=[d,u],h={getTransactionWrappers:function(){return p},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){s.release(this.reactMountReady),this.reactMountReady=null,o.release(this.putListenerQueue),this.putListenerQueue=null}};c(i,a.Mixin),c(i,h),r.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";var i=n(40),r=n(392),s=n(88),o=n(19),a=n(8),l=i.createClass({displayName:"ReactTransitionGroup",propTypes:{component:i.PropTypes.func,childFactory:i.PropTypes.func},getDefaultProps:function(){return{component:i.DOM.span,childFactory:o.thatReturnsArgument}},getInitialState:function(){return{children:r.getChildMapping(this.props.children)}},componentWillReceiveProps:function(e){var t=r.getChildMapping(e.children),n=this.state.children;this.setState({children:r.mergeChildMappings(n,t)});var i;for(i in t){var s=n&&n.hasOwnProperty(i);!t[i]||s||this.currentlyTransitioningKeys[i]||this.keysToEnter.push(i)}for(i in n){var o=t&&t.hasOwnProperty(i);!n[i]||o||this.currentlyTransitioningKeys[i]||this.keysToLeave.push(i)}},componentWillMount:function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},componentDidUpdate:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)},performEnter:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)},_handleDoneEntering:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e];var n=r.getChildMapping(this.props.children);n&&n.hasOwnProperty(e)||this.performLeave(e)},performLeave:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)},_handleDoneLeaving:function(e){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n=r.getChildMapping(this.props.children);if(n&&n.hasOwnProperty(e))this.performEnter(e);else{var i=a(this.state.children);delete i[e],this.setState({children:i})}},render:function(){var e={};for(var t in this.state.children){var n=this.state.children[t];n&&(e[t]=s(this.props.childFactory(n),{ref:t}))}return this.transferPropsTo(this.props.component(null,e))}});e.exports=l},function(e,t,n){"use strict";var i=n(229),r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(){var e=i(window);r.currentScrollLeft=e.x,r.currentScrollTop=e.y}};e.exports=r},function(e,t,n){function i(e,t){return e&&t?e===t?!0:r(e)?!1:r(t)?i(e,t.parentNode):e.contains?e.contains(t):e.compareDocumentPosition?!!(16&e.compareDocumentPosition(t)):!1:!1}var r=n(419);e.exports=i},function(e){"use strict";function t(e){e.disabled||e.focus()}e.exports=t},function(e){function t(){try{return document.activeElement||document.body}catch(e){return document.body}}e.exports=t},function(e,t,n){function i(e){return s(!!o,"Markup wrapping node not initialized"),p.hasOwnProperty(e)||(e="*"),a.hasOwnProperty(e)||(o.innerHTML="*"===e?"<link />":"<"+e+"></"+e+">",a[e]=!o.firstChild),a[e]?p[e]:null}var r=n(5),s=n(3),o=r.canUseDOM?document.createElement("div"):null,a={circle:!0,defs:!0,ellipse:!0,g:!0,line:!0,linearGradient:!0,path:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,text:!0},l=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],u=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,"<svg>","</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:u,th:u,circle:d,defs:d,ellipse:d,g:d,line:d,linearGradient:d,path:d,polygon:d,polyline:d,radialGradient:d,rect:d,stop:d,text:d};e.exports=i},function(e){"use strict";function t(e){return e?e.nodeType===n?e.documentElement:e.firstChild:null}var n=9;e.exports=t},function(e){"use strict";function t(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}e.exports=t},function(e){"use strict";function t(e){return e&&("INPUT"===e.nodeName&&n[e.type]||"TEXTAREA"===e.nodeName)}var n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=t},function(e){"use strict";function t(e,t,n){if(!e)return null;var i=0,r={};for(var s in e)e.hasOwnProperty(s)&&(r[s]=t.call(n,e[s],s,i++));return r}e.exports=t},function(e){"use strict";function t(e){var t={};return function(n){return t.hasOwnProperty(n)?t[n]:t[n]=e.call(this,n)}}e.exports=t},function(e,t,n){"use strict";function i(e){return s(r.isValidDescriptor(e),"onlyChild must be passed a children with exactly one child."),e}var r=n(11),s=n(3);e.exports=i},function(e,t,n){"use strict";var i=n(5),r=function(e,t){e.innerHTML=t};if(i.canUseDOM){var s=document.createElement("div");s.innerHTML=" ",""===s.innerHTML&&(r=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),t.match(/^[ \r\n\t\f]/)||"<"===t[0]&&(-1!==t.indexOf("<noscript")||-1!==t.indexOf("<script")||-1!==t.indexOf("<style")||-1!==t.indexOf("<meta")||-1!==t.indexOf("<link"))){e.innerHTML=""+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t})}e.exports=r},function(e){"use strict";function t(e,t){if(e===t)return!0;var n;for(n in e)if(e.hasOwnProperty(n)&&(!t.hasOwnProperty(n)||e[n]!==t[n]))return!1;for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0}e.exports=t},function(e,t,n){"use strict";function i(e){return h[e]}function r(e,t){return e&&e.props&&null!=e.props.key?o(e.props.key):t.toString(36)}function s(e){return(""+e).replace(f,i)}function o(e){return"$"+s(e)}function a(e,t,n){return null==e?0:m(e,"",0,t,n)}var l=n(31),c=n(86),u=n(3),d=l.SEPARATOR,p=":",h={"=":"=0",".":"=1",":":"=2"},f=/[=.:]/g,m=function(e,t,n,i,s){var a=0;if(Array.isArray(e))for(var l=0;l<e.length;l++){var h=e[l],f=t+(t?p:d)+r(h,l),g=n+a;a+=m(h,f,g,i,s)}else{var v=typeof e,b=""===t,y=b?d+r(e,0):t;if(null==e||"boolean"===v)i(s,null,y,n),a=1;else if(e.type&&e.type.prototype&&e.type.prototype.mountComponentIntoNode)i(s,e,y,n),a=1;else if("object"===v){u(!e||1!==e.nodeType,"traverseAllChildren(...): Encountered an invalid child; DOM elements are not valid children of React components.");for(var _ in e)e.hasOwnProperty(_)&&(a+=m(e[_],t+(t?p:d)+o(_)+p+r(e[_],0),n+a,i,s))}else if("string"===v){var w=c(e);i(s,w,y,n),a+=1}else if("number"===v){var x=c(""+e);i(s,x,y,n),a+=1}}return a};e.exports=a},function(e,t,n){var i=n(23),r=n(239).instanceJoinCreator;e.exports={hasListener:function(e){for(var t,n,i,r=0;r<(this.subscriptions||[]).length;++r)for(i=[].concat(this.subscriptions[r].listenable),t=0;t<i.length;t++)if(n=i[t],n===e||n.hasListener&&n.hasListener(e))return!0;return!1},listenToMany:function(e){for(var t in e){var n=i.callbackName(t),r=this[n]?n:this[t]?t:void 0;r&&this.listenTo(e[t],r,this[n+"Default"]||this[r+"Default"]||r)}},validateListening:function(e){return e===this?"Listener is not able to listen to itself":i.isFunction(e.listen)?e.hasListener&&e.hasListener(this)?"Listener cannot listen to this listenable because of circular loop":void 0:e+" is missing a listen method"},listenTo:function(e,t,n){var r,s,o,a=this.subscriptions=this.subscriptions||[];return i.throwIf(this.validateListening(e)),this.fetchDefaultData(e,n),r=e.listen(this[t]||t,this),s=function(){var e=a.indexOf(o);i.throwIf(-1===e,"Tried to remove listen already gone from subscriptions list!"),a.splice(e,1),r()},o={stop:s,listenable:e},a.push(o),o},stopListeningTo:function(e){for(var t,n=0,r=this.subscriptions||[];n<r.length;n++)if(t=r[n],t.listenable===e)return t.stop(),i.throwIf(-1!==r.indexOf(t),"Failed to remove listen from subscriptions list!"),!0;return!1},stopListeningToAll:function(){for(var e,t=this.subscriptions||[];e=t.length;)t[0].stop(),i.throwIf(t.length!==e-1,"Failed to remove listen from subscriptions list!")},fetchDefaultData:function(e,t){t=t&&this[t]||t;var n=this;i.isFunction(t)&&i.isFunction(e.getDefaultData)&&(data=e.getDefaultData(),data&&i.isFunction(data.then)?data.then(function(){t.apply(n,arguments)}):t.call(this,data))},joinTrailing:r("last"),joinLeading:r("first"),joinConcat:r("all"),joinStrict:r("strict")}},function(e,t,n){var i=n(23),r=n(4),s=n(98),o={preEmit:1,shouldEmit:1};e.exports=function(e){function t(){var e,t=0;if(this.subscriptions=[],this.emitter=new i.EventEmitter,this.eventLabel="change",this.init&&i.isFunction(this.init)&&this.init(),this.listenables)for(e=[].concat(this.listenables);t<e.length;t++)this.listenToMany(e[t])}e=e||{};for(var n in e)if(!o[n]&&(r.PublisherMethods[n]||r.ListenerMethods[n]))throw new Error("Cannot override API method "+n+" in store creation. Use another method name or override it on Reflux.PublisherMethods / Reflux.ListenerMethods instead.");i.extend(t.prototype,r.ListenerMethods,r.PublisherMethods,e);var a=new t;return s.createdStores.push(a),a}},function(e,t,n){function i(e,t,n){return function(){var i,r=n.subscriptions;for(index=r?r.indexOf(e):-1,l.throwIf(-1===index,"Tried to remove join already gone from subscriptions list!"),i=0;i<t.length;i++)t[i]();r.splice(index,1)}}function r(e){e.listenablesEmitted=new Array(e.numberOfListenables),e.args=new Array(e.numberOfListenables)}function s(e,t){return function(){var n=a.call(arguments);if(t.listenablesEmitted[e])switch(t.strategy){case"strict":throw new Error("Strict join failed because listener triggered twice.");case"last":t.args[e]=n;break;case"all":t.args[e].push(n)}else t.listenablesEmitted[e]=!0,t.args[e]="all"===t.strategy?[n]:n;o(t)}}function o(e){for(var t=0;t<e.numberOfListenables;t++)if(!e.listenablesEmitted[t])return;e.callback.apply(e.listener,e.args),r(e)}var a=Array.prototype.slice,l=n(23),c=n(238),u={strict:"joinStrict",first:"joinLeading",last:"joinTrailing",all:"joinConcat"};
t.staticJoinCreator=function(e){return function(){var t=a.call(arguments);return c({init:function(){this[u[e]].apply(this,t.concat("triggerAsync"))}})}},t.instanceJoinCreator=function(e){return function(){l.throwIf(arguments.length<3,"Cannot create a join with less than 2 listenables!");var t,n,o=a.call(arguments),c=o.pop(),u=o.length,d={numberOfListenables:u,callback:this[c]||c,listener:this,strategy:e},p=[];for(t=0;u>t;t++)l.throwIf(this.validateListening(o[t]));for(t=0;u>t;t++)p.push(o[t].listen(s(t,d),this));return r(d),n={listenable:o},n.stop=i(n,p,this),this.subscriptions=(this.subscriptions||[]).concat(n),n}}},function(e,t,n){(function(e){function e(t,n,i){if(!(this instanceof e))return new e(t,n,i);var r,s=typeof t;if("number"===s)r=t>0?t>>>0:0;else if("string"===s)"base64"===n&&(t=x(t)),r=e.byteLength(t,n);else{if("object"!==s||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&N(t.data)&&(t=t.data),r=+t.length>0?Math.floor(+t.length):0}if(this.length>I)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+I.toString(16)+" bytes");var o;e.TYPED_ARRAY_SUPPORT?o=e._augment(new Uint8Array(r)):(o=this,o.length=r,o._isBuffer=!0);var a;if(e.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)o._set(t);else if(M(t))if(e.isBuffer(t))for(a=0;r>a;a++)o[a]=t.readUInt8(a);else for(a=0;r>a;a++)o[a]=(t[a]%256+256)%256;else if("string"===s)o.write(t,0,n);else if("number"===s&&!e.TYPED_ARRAY_SUPPORT&&!i)for(a=0;r>a;a++)o[a]=0;return o}function i(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var s=t.length;if(s%2!==0)throw new Error("Invalid hex string");i>s/2&&(i=s/2);for(var o=0;i>o;o++){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))throw new Error("Invalid hex string");e[n+o]=a}return o}function r(e,t,n,i){var r=S(k(t),e,n,i);return r}function s(e,t,n,i){var r=S(j(t),e,n,i);return r}function o(e,t,n,i){return s(e,t,n,i)}function a(e,t,n,i){var r=S(L(t),e,n,i);return r}function l(e,t,n,i){var r=S(C(t),e,n,i);return r}function c(e,t,n){return O.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function u(e,t,n){var i="",r="";n=Math.min(e.length,n);for(var s=t;n>s;s++)e[s]<=127?(i+=$(r)+String.fromCharCode(e[s]),r=""):r+="%"+e[s].toString(16);return i+$(r)}function d(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;n>r;r++)i+=String.fromCharCode(e[r]);return i}function p(e,t,n){return d(e,t,n)}function h(e,t,n){var i=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>i)&&(n=i);for(var r="",s=t;n>s;s++)r+=T(e[s]);return r}function f(e,t,n){for(var i=e.slice(t,n),r="",s=0;s<i.length;s+=2)r+=String.fromCharCode(i[s]+256*i[s+1]);return r}function m(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function g(t,n,i,r,s,o){if(!e.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(n>s||o>n)throw new TypeError("value is out of bounds");if(i+r>t.length)throw new TypeError("index out of range")}function v(e,t,n,i){0>t&&(t=65535+t+1);for(var r=0,s=Math.min(e.length-n,2);s>r;r++)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function b(e,t,n,i){0>t&&(t=4294967295+t+1);for(var r=0,s=Math.min(e.length-n,4);s>r;r++)e[n+r]=t>>>8*(i?r:3-r)&255}function y(e,t,n,i,r,s){if(t>r||s>t)throw new TypeError("value is out of bounds");if(n+i>e.length)throw new TypeError("index out of range")}function _(e,t,n,i,r){return r||y(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),E.write(e,t,n,i,23,4),n+4}function w(e,t,n,i,r){return r||y(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),E.write(e,t,n,i,52,8),n+8}function x(e){for(e=D(e).replace(R,"");e.length%4!==0;)e+="=";return e}function D(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function M(t){return N(t)||e.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function T(e){return 16>e?"0"+e.toString(16):e.toString(16)}function k(e){for(var t=[],n=0;n<e.length;n++){var i=e.charCodeAt(n);if(127>=i)t.push(i);else{var r=n;i>=55296&&57343>=i&&n++;for(var s=encodeURIComponent(e.slice(r,n+1)).substr(1).split("%"),o=0;o<s.length;o++)t.push(parseInt(s[o],16))}}return t}function j(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function C(e){for(var t,n,i,r=[],s=0;s<e.length;s++)t=e.charCodeAt(s),n=t>>8,i=t%256,r.push(i),r.push(n);return r}function L(e){return O.toByteArray(e)}function S(e,t,n,i){for(var r=0;i>r&&!(r+n>=t.length||r>=e.length);r++)t[r+n]=e[r];return r}function $(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var O=n(436),E=n(437),N=n(438);t.Buffer=e,t.SlowBuffer=e,t.INSPECT_MAX_BYTES=50,e.poolSize=8192;var I=1073741823;e.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),e.isBuffer=function(e){return!(null==e||!e._isBuffer)},e.compare=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");for(var i=t.length,r=n.length,s=0,o=Math.min(i,r);o>s&&t[s]===n[s];s++);return s!==o&&(i=t[s],r=n[s]),r>i?-1:i>r?1:0},e.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(t,n){if(!N(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new e(0);if(1===t.length)return t[0];var i;if(void 0===n)for(n=0,i=0;i<t.length;i++)n+=t[i].length;var r=new e(n),s=0;for(i=0;i<t.length;i++){var o=t[i];o.copy(r,s),s+=o.length}return r},e.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=k(e).length;break;case"base64":n=L(e).length;break;default:n=e.length}return n},e.prototype.length=void 0,e.prototype.parent=void 0,e.prototype.toString=function(e,t,n){var i=!1;if(t>>>=0,n=void 0===n||1/0===n?this.length:n>>>0,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return h(this,t,n);case"utf8":case"utf-8":return u(this,t,n);case"ascii":return d(this,t,n);case"binary":return p(this,t,n);case"base64":return c(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}},e.prototype.equals=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===e.compare(this,t)},e.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},e.prototype.compare=function(t){if(!e.isBuffer(t))throw new TypeError("Argument must be a Buffer");return e.compare(this,t)},e.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},e.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},e.prototype.write=function(e,t,n,c){if(isFinite(t))isFinite(n)||(c=n,n=void 0);else{var u=c;c=t,t=n,n=u}t=Number(t)||0;var d=this.length-t;n?(n=Number(n),n>d&&(n=d)):n=d,c=String(c||"utf8").toLowerCase();var p;switch(c){case"hex":p=i(this,e,t,n);break;case"utf8":case"utf-8":p=r(this,e,t,n);break;case"ascii":p=s(this,e,t,n);break;case"binary":p=o(this,e,t,n);break;case"base64":p=a(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=l(this,e,t,n);break;default:throw new TypeError("Unknown encoding: "+c)}return p},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(t,n){var i=this.length;if(t=~~t,n=void 0===n?i:~~n,0>t?(t+=i,0>t&&(t=0)):t>i&&(t=i),0>n?(n+=i,0>n&&(n=0)):n>i&&(n=i),t>n&&(n=t),e.TYPED_ARRAY_SUPPORT)return e._augment(this.subarray(t,n));for(var r=n-t,s=new e(r,void 0,!0),o=0;r>o;o++)s[o]=this[o+t];return s},e.prototype.readUInt8=function(e,t){return t||m(e,1,this.length),this[e]},e.prototype.readUInt16LE=function(e,t){return t||m(e,2,this.length),this[e]|this[e+1]<<8},e.prototype.readUInt16BE=function(e,t){return t||m(e,2,this.length),this[e]<<8|this[e+1]},e.prototype.readUInt32LE=function(e,t){return t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},e.prototype.readUInt32BE=function(e,t){return t||m(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},e.prototype.readInt8=function(e,t){return t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},e.prototype.readInt16LE=function(e,t){t||m(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt16BE=function(e,t){t||m(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},e.prototype.readInt32LE=function(e,t){return t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},e.prototype.readInt32BE=function(e,t){return t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},e.prototype.readFloatLE=function(e,t){return t||m(e,4,this.length),E.read(this,e,!0,23,4)},e.prototype.readFloatBE=function(e,t){return t||m(e,4,this.length),E.read(this,e,!1,23,4)},e.prototype.readDoubleLE=function(e,t){return t||m(e,8,this.length),E.read(this,e,!0,52,8)},e.prototype.readDoubleBE=function(e,t){return t||m(e,8,this.length),E.read(this,e,!1,52,8)},e.prototype.writeUInt8=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,1,255,0),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=t,n+1},e.prototype.writeUInt16LE=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t,this[n+1]=t>>>8):v(this,t,n,!0),n+2},e.prototype.writeUInt16BE=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,2,65535,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t):v(this,t,n,!1),n+2},e.prototype.writeUInt32LE=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=t):b(this,t,n,!0),n+4},e.prototype.writeUInt32BE=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,4,4294967295,0),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t):b(this,t,n,!1),n+4},e.prototype.writeInt8=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,1,127,-128),e.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[n]=t,n+1},e.prototype.writeInt16LE=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t,this[n+1]=t>>>8):v(this,t,n,!0),n+2},e.prototype.writeInt16BE=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,2,32767,-32768),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=t):v(this,t,n,!1),n+2},e.prototype.writeInt32LE=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,4,2147483647,-2147483648),e.TYPED_ARRAY_SUPPORT?(this[n]=t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):b(this,t,n,!0),n+4},e.prototype.writeInt32BE=function(t,n,i){return t=+t,n>>>=0,i||g(this,t,n,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),e.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=t):b(this,t,n,!1),n+4},e.prototype.writeFloatLE=function(e,t,n){return _(this,e,t,!0,n)},e.prototype.writeFloatBE=function(e,t,n){return _(this,e,t,!1,n)},e.prototype.writeDoubleLE=function(e,t,n){return w(this,e,t,!0,n)},e.prototype.writeDoubleBE=function(e,t,n){return w(this,e,t,!1,n)},e.prototype.copy=function(t,n,i,r){var s=this;if(i||(i=0),r||0===r||(r=this.length),n||(n=0),r!==i&&0!==t.length&&0!==s.length){if(i>r)throw new TypeError("sourceEnd < sourceStart");if(0>n||n>=t.length)throw new TypeError("targetStart out of bounds");if(0>i||i>=s.length)throw new TypeError("sourceStart out of bounds");if(0>r||r>s.length)throw new TypeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-i&&(r=t.length-n+i);var o=r-i;if(1e3>o||!e.TYPED_ARRAY_SUPPORT)for(var a=0;o>a;a++)t[a+n]=this[a+i];else t._set(this.subarray(i,i+o),n)}},e.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new TypeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new TypeError("start out of bounds");if(0>n||n>this.length)throw new TypeError("end out of bounds");var i;if("number"==typeof e)for(i=t;n>i;i++)this[i]=e;else{var r=k(e.toString()),s=r.length;for(i=t;n>i;i++)this[i]=r[i%s]}return this}},e.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(e.TYPED_ARRAY_SUPPORT)return new e(this).buffer;for(var t=new Uint8Array(this.length),n=0,i=t.length;i>n;n+=1)t[n]=this[n];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Y=e.prototype;e._augment=function(t){return t.constructor=e,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=Y.get,t.set=Y.set,t.write=Y.write,t.toString=Y.toString,t.toLocaleString=Y.toString,t.toJSON=Y.toJSON,t.equals=Y.equals,t.compare=Y.compare,t.copy=Y.copy,t.slice=Y.slice,t.readUInt8=Y.readUInt8,t.readUInt16LE=Y.readUInt16LE,t.readUInt16BE=Y.readUInt16BE,t.readUInt32LE=Y.readUInt32LE,t.readUInt32BE=Y.readUInt32BE,t.readInt8=Y.readInt8,t.readInt16LE=Y.readInt16LE,t.readInt16BE=Y.readInt16BE,t.readInt32LE=Y.readInt32LE,t.readInt32BE=Y.readInt32BE,t.readFloatLE=Y.readFloatLE,t.readFloatBE=Y.readFloatBE,t.readDoubleLE=Y.readDoubleLE,t.readDoubleBE=Y.readDoubleBE,t.writeUInt8=Y.writeUInt8,t.writeUInt16LE=Y.writeUInt16LE,t.writeUInt16BE=Y.writeUInt16BE,t.writeUInt32LE=Y.writeUInt32LE,t.writeUInt32BE=Y.writeUInt32BE,t.writeInt8=Y.writeInt8,t.writeInt16LE=Y.writeInt16LE,t.writeInt16BE=Y.writeInt16BE,t.writeInt32LE=Y.writeInt32LE,t.writeInt32BE=Y.writeInt32BE,t.writeFloatLE=Y.writeFloatLE,t.writeFloatBE=Y.writeFloatBE,t.writeDoubleLE=Y.writeDoubleLE,t.writeDoubleBE=Y.writeDoubleBE,t.fill=Y.fill,t.inspect=Y.inspect,t.toArrayBuffer=Y.toArrayBuffer,t};var R=/[^+\/0-9A-z]/g}).call(t,n(240).Buffer)},function(e){var t=React.createClass({displayName:"RadioGroup",getInitialState:function(){return{defaultValue:this.props.defaultValue}},componentDidMount:function(){this.setRadioNames(),this.setCheckedRadio()},componentDidUpdate:function(){this.setRadioNames(),this.setCheckedRadio()},render:function(){return this.transferPropsTo(React.DOM.div({onChange:this.props.onChange},this.props.children))},setRadioNames:function(){for(var e=this.getRadios(),t=0,n=e.length;n>t;t++)e[t].setAttribute("name",this.props.name)},getRadios:function(){return this.getDOMNode().querySelectorAll('input[type="radio"]')},setCheckedRadio:function(){for(var e=this.getRadios(),t=null!=this.props.value?this.props.value:this.state.defaultValue,n=0,i=e.length;i>n;n++){var r=e[n];r.value==t&&(r.checked=!0)}},getCheckedValue:function(){for(var e=this.getRadios(),t=0,n=e.length;n>t;t++)if(e[t].checked)return e[t].value;return null}});e.exports=t},function(module,exports,__webpack_require__){(function(jQuery){!function($){function sc_setScroll(e,t,n){return"transition"==n.transition&&"swing"==t&&(t="ease"),{anims:[],duration:e,orgDuration:e,easing:t,startTime:getTime()}}function sc_startScroll(e,t){for(var n=0,i=e.anims.length;i>n;n++){var r=e.anims[n];r&&r[0][t.transition](r[1],e.duration,e.easing,r[2])}}function sc_stopScroll(e,t){is_boolean(t)||(t=!0),is_object(e.pre)&&sc_stopScroll(e.pre,t);for(var n=0,i=e.anims.length;i>n;n++){var r=e.anims[n];r[0].stop(!0),t&&(r[0].css(r[1]),is_function(r[2])&&r[2]())}is_object(e.post)&&sc_stopScroll(e.post,t)}function sc_afterScroll(e,t,n){switch(t&&t.remove(),n.fx){case"fade":case"crossfade":case"cover-fade":case"uncover-fade":e.css("opacity",1),e.css("filter","")}}function sc_fireCallbacks(e,t,n,i,r){if(t[n]&&t[n].call(e,i),r[n].length)for(var s=0,o=r[n].length;o>s;s++)r[n][s].call(e,i);return[]}function sc_fireQueue(e,t,n){return t.length&&(e.trigger(cf_e(t[0][0],n),t[0][1]),t.shift()),t}function sc_hideHiddenItems(e){e.each(function(){var e=$(this);e.data("_cfs_isHidden",e.is(":hidden")).hide()})}function sc_showHiddenItems(e){e&&e.each(function(){var e=$(this);e.data("_cfs_isHidden")||e.show()})}function sc_clearTimers(e){return e.auto&&clearTimeout(e.auto),e.progress&&clearInterval(e.progress),e}function sc_mapCallbackArguments(e,t,n,i,r,s,o){return{width:o.width,height:o.height,items:{old:e,skipped:t,visible:n},scroll:{items:i,direction:r,duration:s}}}function sc_getDuration(e,t,n,i){var r=e.duration;return"none"==e.fx?0:("auto"==r?r=t.scroll.duration/t.scroll.items*n:10>r&&(r=i/r),1>r?0:("fade"==e.fx&&(r/=2),Math.round(r)))}function nv_showNavi(e,t,n){var i=is_number(e.items.minimum)?e.items.minimum:e.items.visible+1;if("show"==t||"hide"==t)var r=t;else if(i>t){debug(n,"Not enough items ("+t+" total, "+i+" needed): Hiding navigation.");var r="hide"}else var r="show";var s="show"==r?"removeClass":"addClass",o=cf_c("hidden",n);e.auto.button&&e.auto.button[r]()[s](o),e.prev.button&&e.prev.button[r]()[s](o),e.next.button&&e.next.button[r]()[s](o),e.pagination.container&&e.pagination.container[r]()[s](o)}function nv_enableNavi(e,t,n){if(!e.circular&&!e.infinite){var i="removeClass"==t||"addClass"==t?t:!1,r=cf_c("disabled",n);if(e.auto.button&&i&&e.auto.button[i](r),e.prev.button){var s=i||0==t?"addClass":"removeClass";e.prev.button[s](r)}if(e.next.button){var s=i||t==e.items.visible?"addClass":"removeClass";e.next.button[s](r)}}}function go_getObject(e,t){return is_function(t)?t=t.call(e):is_undefined(t)&&(t={}),t}function go_getItemsObject(e,t){return t=go_getObject(e,t),is_number(t)?t={visible:t}:"variable"==t?t={visible:t,width:t,height:t}:is_object(t)||(t={}),t}function go_getScrollObject(e,t){return t=go_getObject(e,t),is_number(t)?t=50>=t?{items:t}:{duration:t}:is_string(t)?t={easing:t}:is_object(t)||(t={}),t}function go_getNaviObject(e,t){if(t=go_getObject(e,t),is_string(t)){var n=cf_getKeyCode(t);t=-1==n?$(t):n}return t}function go_getAutoObject(e,t){return t=go_getNaviObject(e,t),is_jquery(t)?t={button:t}:is_boolean(t)?t={play:t}:is_number(t)&&(t={timeoutDuration:t}),t.progress&&(is_string(t.progress)||is_jquery(t.progress))&&(t.progress={bar:t.progress}),t}function go_complementAutoObject(e,t){return is_function(t.button)&&(t.button=t.button.call(e)),is_string(t.button)&&(t.button=$(t.button)),is_boolean(t.play)||(t.play=!0),is_number(t.delay)||(t.delay=0),is_undefined(t.pauseOnEvent)&&(t.pauseOnEvent=!0),is_boolean(t.pauseOnResize)||(t.pauseOnResize=!0),is_number(t.timeoutDuration)||(t.timeoutDuration=t.duration<10?2500:5*t.duration),t.progress&&(is_function(t.progress.bar)&&(t.progress.bar=t.progress.bar.call(e)),is_string(t.progress.bar)&&(t.progress.bar=$(t.progress.bar)),t.progress.bar?(is_function(t.progress.updater)||(t.progress.updater=$.fn.carouFredSel.progressbarUpdater),is_number(t.progress.interval)||(t.progress.interval=50)):t.progress=!1),t}function go_getPrevNextObject(e,t){return t=go_getNaviObject(e,t),is_jquery(t)?t={button:t}:is_number(t)&&(t={key:t}),t}function go_complementPrevNextObject(e,t){return is_function(t.button)&&(t.button=t.button.call(e)),is_string(t.button)&&(t.button=$(t.button)),is_string(t.key)&&(t.key=cf_getKeyCode(t.key)),t}function go_getPaginationObject(e,t){return t=go_getNaviObject(e,t),is_jquery(t)?t={container:t}:is_boolean(t)&&(t={keys:t}),t}function go_complementPaginationObject(e,t){return is_function(t.container)&&(t.container=t.container.call(e)),is_string(t.container)&&(t.container=$(t.container)),is_number(t.items)||(t.items=!1),is_boolean(t.keys)||(t.keys=!1),is_function(t.anchorBuilder)||is_false(t.anchorBuilder)||(t.anchorBuilder=$.fn.carouFredSel.pageAnchorBuilder),is_number(t.deviation)||(t.deviation=0),t}function go_getSwipeObject(e,t){return is_function(t)&&(t=t.call(e)),is_undefined(t)&&(t={onTouch:!1}),is_true(t)?t={onTouch:t}:is_number(t)&&(t={items:t}),t}function go_complementSwipeObject(e,t){return is_boolean(t.onTouch)||(t.onTouch=!0),is_boolean(t.onMouse)||(t.onMouse=!1),is_object(t.options)||(t.options={}),is_boolean(t.options.triggerOnTouchEnd)||(t.options.triggerOnTouchEnd=!1),t}function go_getMousewheelObject(e,t){return is_function(t)&&(t=t.call(e)),is_true(t)?t={}:is_number(t)?t={items:t}:is_undefined(t)&&(t=!1),t}function go_complementMousewheelObject(e,t){return t}function gn_getItemIndex(e,t,n,i,r){if(is_string(e)&&(e=$(e,r)),is_object(e)&&(e=$(e,r)),is_jquery(e)?(e=r.children().index(e),is_boolean(n)||(n=!1)):is_boolean(n)||(n=!0),is_number(e)||(e=0),is_number(t)||(t=0),n&&(e+=i.first),e+=t,i.total>0){for(;e>=i.total;)e-=i.total;for(;0>e;)e+=i.total}return e}function gn_getVisibleItemsPrev(e,t,n){for(var i=0,r=0,s=n;s>=0;s--){var o=e.eq(s);if(i+=o.is(":visible")?o[t.d.outerWidth](!0):0,i>t.maxDimension)return r;0==s&&(s=e.length),r++}}function gn_getVisibleItemsPrevFilter(e,t,n){return gn_getItemsPrevFilter(e,t.items.filter,t.items.visibleConf.org,n)}function gn_getScrollItemsPrevFilter(e,t,n,i){return gn_getItemsPrevFilter(e,t.items.filter,i,n)}function gn_getItemsPrevFilter(e,t,n,i){for(var r=0,s=0,o=i,a=e.length;o>=0;o--){if(s++,s==a)return s;var l=e.eq(o);if(l.is(t)&&(r++,r==n))return s;0==o&&(o=a)}}function gn_getVisibleOrg(e,t){return t.items.visibleConf.org||e.children().slice(0,t.items.visible).filter(t.items.filter).length}function gn_getVisibleItemsNext(e,t,n){for(var i=0,r=0,s=n,o=e.length-1;o>=s;s++){var a=e.eq(s);if(i+=a.is(":visible")?a[t.d.outerWidth](!0):0,i>t.maxDimension)return r;if(r++,r==o+1)return r;s==o&&(s=-1)}}function gn_getVisibleItemsNextTestCircular(e,t,n,i){var r=gn_getVisibleItemsNext(e,t,n);return t.circular||n+r>i&&(r=i-n),r}function gn_getVisibleItemsNextFilter(e,t,n){return gn_getItemsNextFilter(e,t.items.filter,t.items.visibleConf.org,n,t.circular)}function gn_getScrollItemsNextFilter(e,t,n,i){return gn_getItemsNextFilter(e,t.items.filter,i+1,n,t.circular)-1}function gn_getItemsNextFilter(e,t,n,i){for(var r=0,s=0,o=i,a=e.length-1;a>=o;o++){if(s++,s>=a)return s;var l=e.eq(o);if(l.is(t)&&(r++,r==n))return s;o==a&&(o=-1)}}function gi_getCurrentItems(e,t){return e.slice(0,t.items.visible)}function gi_getOldItemsPrev(e,t,n){return e.slice(n,t.items.visibleConf.old+n)}function gi_getNewItemsPrev(e,t){return e.slice(0,t.items.visible)}function gi_getOldItemsNext(e,t){return e.slice(0,t.items.visibleConf.old)}function gi_getNewItemsNext(e,t,n){return e.slice(n,t.items.visible+n)}function sz_storeMargin(e,t,n){t.usePadding&&(is_string(n)||(n="_cfs_origCssMargin"),e.each(function(){var e=$(this),i=parseInt(e.css(t.d.marginRight),10);is_number(i)||(i=0),e.data(n,i)}))}function sz_resetMargin(e,t,n){if(t.usePadding){var i=is_boolean(n)?n:!1;is_number(n)||(n=0),sz_storeMargin(e,t,"_cfs_tempCssMargin"),e.each(function(){var e=$(this);e.css(t.d.marginRight,i?e.data("_cfs_tempCssMargin"):n+e.data("_cfs_origCssMargin"))})}}function sz_storeOrigCss(e){e.each(function(){var e=$(this);e.data("_cfs_origCss",e.attr("style")||"")})}function sz_restoreOrigCss(e){e.each(function(){var e=$(this);e.attr("style",e.data("_cfs_origCss")||"")})}function sz_setResponsiveSizes(e,t){var n=(e.items.visible,e.items[e.d.width]),i=e[e.d.height],r=is_percentage(i);t.each(function(){var t=$(this),s=n-ms_getPaddingBorderMargin(t,e,"Width");t[e.d.width](s),r&&t[e.d.height](ms_getPercentage(s,i))})}function sz_setSizes(e,t){var n=e.parent(),i=e.children(),r=gi_getCurrentItems(i,t),s=cf_mapWrapperSizes(ms_getSizes(r,t,!0),t,!1);if(n.css(s),t.usePadding){var o=t.padding,a=o[t.d[1]];t.align&&0>a&&(a=0);var l=r.last();l.css(t.d.marginRight,l.data("_cfs_origCssMargin")+a),e.css(t.d.top,o[t.d[0]]),e.css(t.d.left,o[t.d[3]])}return e.css(t.d.width,s[t.d.width]+2*ms_getTotalSize(i,t,"width")),e.css(t.d.height,ms_getLargestSize(i,t,"height")),s}function ms_getSizes(e,t,n){return[ms_getTotalSize(e,t,"width",n),ms_getLargestSize(e,t,"height",n)]}function ms_getLargestSize(e,t,n,i){return is_boolean(i)||(i=!1),is_number(t[t.d[n]])&&i?t[t.d[n]]:is_number(t.items[t.d[n]])?t.items[t.d[n]]:(n=n.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",ms_getTrueLargestSize(e,t,n))}function ms_getTrueLargestSize(e,t,n){for(var i=0,r=0,s=e.length;s>r;r++){var o=e.eq(r),a=o.is(":visible")?o[t.d[n]](!0):0;a>i&&(i=a)}return i}function ms_getTotalSize(e,t,n,i){if(is_boolean(i)||(i=!1),is_number(t[t.d[n]])&&i)return t[t.d[n]];if(is_number(t.items[t.d[n]]))return t.items[t.d[n]]*e.length;for(var r=n.toLowerCase().indexOf("width")>-1?"outerWidth":"outerHeight",s=0,o=0,a=e.length;a>o;o++){var l=e.eq(o);s+=l.is(":visible")?l[t.d[r]](!0):0}return s}function ms_getParentSize(e,t,n){var i=e.is(":visible");i&&e.hide();var r=e.parent()[t.d[n]]();return i&&e.show(),r}function ms_getMaxDimension(e,t){return is_number(e[e.d.width])?e[e.d.width]:t}function ms_hasVariableSizes(e,t,n){for(var i=!1,r=!1,s=0,o=e.length;o>s;s++){var a=e.eq(s),l=a.is(":visible")?a[t.d[n]](!0):0;i===!1?i=l:i!=l&&(r=!0),0==i&&(r=!0)}return r}function ms_getPaddingBorderMargin(e,t,n){return e[t.d["outer"+n]](!0)-e[t.d[n.toLowerCase()]]()}function ms_getPercentage(e,t){if(is_percentage(t)){if(t=parseInt(t.slice(0,-1),10),!is_number(t))return e;e*=t/100}return e}function cf_e(e,t,n,i,r){return is_boolean(n)||(n=!0),is_boolean(i)||(i=!0),is_boolean(r)||(r=!1),n&&(e=t.events.prefix+e),i&&(e=e+"."+t.events.namespace),i&&r&&(e+=t.serialNumber),e}function cf_c(e,t){return is_string(t.classnames[e])?t.classnames[e]:e}function cf_mapWrapperSizes(e,t,n){is_boolean(n)||(n=!0);var i=t.usePadding&&n?t.padding:[0,0,0,0],r={};return r[t.d.width]=e[0]+i[1]+i[3],r[t.d.height]=e[1]+i[0]+i[2],r}function cf_sortParams(e,t){for(var n=[],i=0,r=e.length;r>i;i++)for(var s=0,o=t.length;o>s;s++)if(t[s].indexOf(typeof e[i])>-1&&is_undefined(n[s])){n[s]=e[i];break}return n}function cf_getPadding(e){if(is_undefined(e))return[0,0,0,0];if(is_number(e))return[e,e,e,e];if(is_string(e)&&(e=e.split("px").join("").split("em").join("").split(" ")),!is_array(e))return[0,0,0,0];for(var t=0;4>t;t++)e[t]=parseInt(e[t],10);switch(e.length){case 0:return[0,0,0,0];case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];default:return[e[0],e[1],e[2],e[3]]}}function cf_getAlignPadding(e,t){var n=is_number(t[t.d.width])?Math.ceil(t[t.d.width]-ms_getTotalSize(e,t,"width")):0;switch(t.align){case"left":return[0,n];case"right":return[n,0];case"center":default:return[Math.ceil(n/2),Math.floor(n/2)]}}function cf_getDimensions(e){for(var t=[["width","innerWidth","outerWidth","height","innerHeight","outerHeight","left","top","marginRight",0,1,2,3],["height","innerHeight","outerHeight","width","innerWidth","outerWidth","top","left","marginBottom",3,2,1,0]],n=t[0].length,i="right"==e.direction||"left"==e.direction?0:1,r={},s=0;n>s;s++)r[t[0][s]]=t[i][s];return r}function cf_getAdjust(e,t,n,i){var r=e;if(is_function(n))r=n.call(i,r);else if(is_string(n)){var s=n.split("+"),o=n.split("-");if(o.length>s.length)var a=!0,l=o[0],c=o[1];else var a=!1,l=s[0],c=s[1];switch(l){case"even":r=e%2==1?e-1:e;break;case"odd":r=e%2==0?e-1:e;break;default:r=e}c=parseInt(c,10),is_number(c)&&(a&&(c=-c),r+=c)}return(!is_number(r)||1>r)&&(r=1),r}function cf_getItemsAdjust(e,t,n,i){return cf_getItemAdjustMinMax(cf_getAdjust(e,t,n,i),t.items.visibleConf)}function cf_getItemAdjustMinMax(e,t){return is_number(t.min)&&e<t.min&&(e=t.min),is_number(t.max)&&e>t.max&&(e=t.max),1>e&&(e=1),e}function cf_getSynchArr(e){is_array(e)||(e=[[e]]),is_array(e[0])||(e=[e]);for(var t=0,n=e.length;n>t;t++)is_string(e[t][0])&&(e[t][0]=$(e[t][0])),is_boolean(e[t][1])||(e[t][1]=!0),is_boolean(e[t][2])||(e[t][2]=!0),is_number(e[t][3])||(e[t][3]=0);return e}function cf_getKeyCode(e){return"right"==e?39:"left"==e?37:"up"==e?38:"down"==e?40:-1}function cf_setCookie(e,t,n){if(e){var i=t.triggerHandler(cf_e("currentPosition",n));$.fn.carouFredSel.cookie.set(e,i)}}function cf_getCookie(e){var t=$.fn.carouFredSel.cookie.get(e);return""==t?0:t}function in_mapCss(e,t){for(var n={},i=0,r=t.length;r>i;i++)n[t[i]]=e.css(t[i]);return n}function in_complementItems(e,t,n,i){return is_object(e.visibleConf)||(e.visibleConf={}),is_object(e.sizesConf)||(e.sizesConf={}),0==e.start&&is_number(i)&&(e.start=i),is_object(e.visible)?(e.visibleConf.min=e.visible.min,e.visibleConf.max=e.visible.max,e.visible=!1):is_string(e.visible)?("variable"==e.visible?e.visibleConf.variable=!0:e.visibleConf.adjust=e.visible,e.visible=!1):is_function(e.visible)&&(e.visibleConf.adjust=e.visible,e.visible=!1),is_string(e.filter)||(e.filter=n.filter(":hidden").length>0?":visible":"*"),e[t.d.width]||(t.responsive?(debug(!0,"Set a "+t.d.width+" for the items!"),e[t.d.width]=ms_getTrueLargestSize(n,t,"outerWidth")):e[t.d.width]=ms_hasVariableSizes(n,t,"outerWidth")?"variable":n[t.d.outerWidth](!0)),e[t.d.height]||(e[t.d.height]=ms_hasVariableSizes(n,t,"outerHeight")?"variable":n[t.d.outerHeight](!0)),e.sizesConf.width=e.width,e.sizesConf.height=e.height,e}function in_complementVisibleItems(e,t){return"variable"==e.items[e.d.width]&&(e.items.visibleConf.variable=!0),e.items.visibleConf.variable||(is_number(e[e.d.width])?e.items.visible=Math.floor(e[e.d.width]/e.items[e.d.width]):(e.items.visible=Math.floor(t/e.items[e.d.width]),e[e.d.width]=e.items.visible*e.items[e.d.width],e.items.visibleConf.adjust||(e.align=!1)),("Infinity"==e.items.visible||e.items.visible<1)&&(debug(!0,'Not a valid number of visible items: Set to "variable".'),e.items.visibleConf.variable=!0)),e}function in_complementPrimarySize(e,t,n){return"auto"==e&&(e=ms_getTrueLargestSize(n,t,"outerWidth")),e}function in_complementSecondarySize(e,t,n){return"auto"==e&&(e=ms_getTrueLargestSize(n,t,"outerHeight")),e||(e=t.items[t.d.height]),e}function in_getAlignPadding(e,t){var n=cf_getAlignPadding(gi_getCurrentItems(t,e),e);return e.padding[e.d[1]]=n[1],e.padding[e.d[3]]=n[0],e}function in_getResponsiveValues(e,t){var n=cf_getItemAdjustMinMax(Math.ceil(e[e.d.width]/e.items[e.d.width]),e.items.visibleConf);n>t.length&&(n=t.length);var i=Math.floor(e[e.d.width]/n);return e.items.visible=n,e.items[e.d.width]=i,e[e.d.width]=n*i,e}function bt_pauseOnHoverConfig(e){if(is_string(e))var t=e.indexOf("immediate")>-1?!0:!1,n=e.indexOf("resume")>-1?!0:!1;else var t=n=!1;return[t,n]}function bt_mousesheelNumber(e){return is_number(e)?e:null}function is_null(e){return null===e}function is_undefined(e){return is_null(e)||"undefined"==typeof e||""===e||"undefined"===e}function is_array(e){return e instanceof Array}function is_jquery(e){return e instanceof jQuery}function is_object(e){return(e instanceof Object||"object"==typeof e)&&!is_null(e)&&!is_jquery(e)&&!is_array(e)&&!is_function(e)}function is_number(e){return(e instanceof Number||"number"==typeof e)&&!isNaN(e)}function is_string(e){return(e instanceof String||"string"==typeof e)&&!is_undefined(e)&&!is_true(e)&&!is_false(e)}function is_function(e){return e instanceof Function||"function"==typeof e}function is_boolean(e){return e instanceof Boolean||"boolean"==typeof e||is_true(e)||is_false(e)}function is_true(e){return e===!0||"true"===e}function is_false(e){return e===!1||"false"===e}function is_percentage(e){return is_string(e)&&"%"==e.slice(-1)}function getTime(){return(new Date).getTime()}function deprecated(e,t){debug(!0,e+" is DEPRECATED, support for it will be removed. Use "+t+" instead.")}function debug(e,t){if(!is_undefined(window.console)&&!is_undefined(window.console.log)){if(is_object(e)){var n=" ("+e.selector+")";e=e.debug}else var n="";if(!e)return!1;t=is_string(t)?"carouFredSel"+n+": "+t:["carouFredSel"+n+":",t],window.console.log(t)}return!1}$.fn.carouFredSel||($.fn.caroufredsel=$.fn.carouFredSel=function(options,configs){if(0==this.length)return debug(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){$(this).carouFredSel(options,configs)});var $cfs=this,$tt0=this[0],starting_position=!1;$cfs.data("_cfs_isCarousel")&&(starting_position=$cfs.triggerHandler("_cfs_triggerEvent","currentPosition"),$cfs.trigger("_cfs_triggerEvent",["destroy",!0]));var FN={};FN._init=function(e,t,n){e=go_getObject($tt0,e),e.items=go_getItemsObject($tt0,e.items),e.scroll=go_getScrollObject($tt0,e.scroll),e.auto=go_getAutoObject($tt0,e.auto),e.prev=go_getPrevNextObject($tt0,e.prev),e.next=go_getPrevNextObject($tt0,e.next),e.pagination=go_getPaginationObject($tt0,e.pagination),e.swipe=go_getSwipeObject($tt0,e.swipe),e.mousewheel=go_getMousewheelObject($tt0,e.mousewheel),t&&(opts_orig=$.extend(!0,{},$.fn.carouFredSel.defaults,e)),opts=$.extend(!0,{},$.fn.carouFredSel.defaults,e),opts.d=cf_getDimensions(opts),crsl.direction="up"==opts.direction||"left"==opts.direction?"next":"prev";var i=$cfs.children(),r=ms_getParentSize($wrp,opts,"width");if(is_true(opts.cookie)&&(opts.cookie="caroufredsel_cookie_"+conf.serialNumber),opts.maxDimension=ms_getMaxDimension(opts,r),opts.items=in_complementItems(opts.items,opts,i,n),opts[opts.d.width]=in_complementPrimarySize(opts[opts.d.width],opts,i),opts[opts.d.height]=in_complementSecondarySize(opts[opts.d.height],opts,i),opts.responsive&&(is_percentage(opts[opts.d.width])||(opts[opts.d.width]="100%")),is_percentage(opts[opts.d.width])&&(crsl.upDateOnWindowResize=!0,crsl.primarySizePercentage=opts[opts.d.width],opts[opts.d.width]=ms_getPercentage(r,crsl.primarySizePercentage),opts.items.visible||(opts.items.visibleConf.variable=!0)),opts.responsive?(opts.usePadding=!1,opts.padding=[0,0,0,0],opts.align=!1,opts.items.visibleConf.variable=!1):(opts.items.visible||(opts=in_complementVisibleItems(opts,r)),opts[opts.d.width]||(!opts.items.visibleConf.variable&&is_number(opts.items[opts.d.width])&&"*"==opts.items.filter?(opts[opts.d.width]=opts.items.visible*opts.items[opts.d.width],opts.align=!1):opts[opts.d.width]="variable"),is_undefined(opts.align)&&(opts.align=is_number(opts[opts.d.width])?"center":!1),opts.items.visibleConf.variable&&(opts.items.visible=gn_getVisibleItemsNext(i,opts,0))),"*"==opts.items.filter||opts.items.visibleConf.variable||(opts.items.visibleConf.org=opts.items.visible,opts.items.visible=gn_getVisibleItemsNextFilter(i,opts,0)),opts.items.visible=cf_getItemsAdjust(opts.items.visible,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts.responsive)opts.items.visibleConf.min||(opts.items.visibleConf.min=opts.items.visible),opts.items.visibleConf.max||(opts.items.visibleConf.max=opts.items.visible),opts=in_getResponsiveValues(opts,i,r);else switch(opts.padding=cf_getPadding(opts.padding),"top"==opts.align?opts.align="left":"bottom"==opts.align&&(opts.align="right"),opts.align){case"center":case"left":case"right":"variable"!=opts[opts.d.width]&&(opts=in_getAlignPadding(opts,i),opts.usePadding=!0);break;default:opts.align=!1,opts.usePadding=0==opts.padding[0]&&0==opts.padding[1]&&0==opts.padding[2]&&0==opts.padding[3]?!1:!0}is_number(opts.scroll.duration)||(opts.scroll.duration=500),is_undefined(opts.scroll.items)&&(opts.scroll.items=opts.responsive||opts.items.visibleConf.variable||"*"!=opts.items.filter?"visible":opts.items.visible),opts.auto=$.extend(!0,{},opts.scroll,opts.auto),opts.prev=$.extend(!0,{},opts.scroll,opts.prev),opts.next=$.extend(!0,{},opts.scroll,opts.next),opts.pagination=$.extend(!0,{},opts.scroll,opts.pagination),opts.auto=go_complementAutoObject($tt0,opts.auto),opts.prev=go_complementPrevNextObject($tt0,opts.prev),opts.next=go_complementPrevNextObject($tt0,opts.next),opts.pagination=go_complementPaginationObject($tt0,opts.pagination),opts.swipe=go_complementSwipeObject($tt0,opts.swipe),opts.mousewheel=go_complementMousewheelObject($tt0,opts.mousewheel),opts.synchronise&&(opts.synchronise=cf_getSynchArr(opts.synchronise)),opts.auto.onPauseStart&&(opts.auto.onTimeoutStart=opts.auto.onPauseStart,deprecated("auto.onPauseStart","auto.onTimeoutStart")),opts.auto.onPausePause&&(opts.auto.onTimeoutPause=opts.auto.onPausePause,deprecated("auto.onPausePause","auto.onTimeoutPause")),opts.auto.onPauseEnd&&(opts.auto.onTimeoutEnd=opts.auto.onPauseEnd,deprecated("auto.onPauseEnd","auto.onTimeoutEnd")),opts.auto.pauseDuration&&(opts.auto.timeoutDuration=opts.auto.pauseDuration,deprecated("auto.pauseDuration","auto.timeoutDuration"))},FN._build=function(){$cfs.data("_cfs_isCarousel",!0);var e=$cfs.children(),t=in_mapCss($cfs,["textAlign","float","position","top","right","bottom","left","zIndex","width","height","marginTop","marginRight","marginBottom","marginLeft"]),n="relative";switch(t.position){case"absolute":case"fixed":n=t.position}"parent"==conf.wrapper?sz_storeOrigCss($wrp):$wrp.css(t),$wrp.css({overflow:"hidden",position:n}),sz_storeOrigCss($cfs),$cfs.data("_cfs_origCssZindex",t.zIndex),$cfs.css({textAlign:"left","float":"none",position:"absolute",top:0,right:"auto",bottom:"auto",left:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0}),sz_storeMargin(e,opts),sz_storeOrigCss(e),opts.responsive&&sz_setResponsiveSizes(opts,e)
},FN._bind_events=function(){FN._unbind_events(),$cfs.bind(cf_e("stop",conf),function(e,t){return e.stopPropagation(),crsl.isStopped||opts.auto.button&&opts.auto.button.addClass(cf_c("stopped",conf)),crsl.isStopped=!0,opts.auto.play&&(opts.auto.play=!1,$cfs.trigger(cf_e("pause",conf),t)),!0}),$cfs.bind(cf_e("finish",conf),function(e){return e.stopPropagation(),crsl.isScrolling&&sc_stopScroll(scrl),!0}),$cfs.bind(cf_e("pause",conf),function(e,t,n){if(e.stopPropagation(),tmrs=sc_clearTimers(tmrs),t&&crsl.isScrolling){scrl.isStopped=!0;var i=getTime()-scrl.startTime;scrl.duration-=i,scrl.pre&&(scrl.pre.duration-=i),scrl.post&&(scrl.post.duration-=i),sc_stopScroll(scrl,!1)}if(crsl.isPaused||crsl.isScrolling||n&&(tmrs.timePassed+=getTime()-tmrs.startTime),crsl.isPaused||opts.auto.button&&opts.auto.button.addClass(cf_c("paused",conf)),crsl.isPaused=!0,opts.auto.onTimeoutPause){var r=opts.auto.timeoutDuration-tmrs.timePassed,s=100-Math.ceil(100*r/opts.auto.timeoutDuration);opts.auto.onTimeoutPause.call($tt0,s,r)}return!0}),$cfs.bind(cf_e("play",conf),function(e,t,n,i){e.stopPropagation(),tmrs=sc_clearTimers(tmrs);var r=[t,n,i],s=["string","number","boolean"],o=cf_sortParams(r,s);if(t=o[0],n=o[1],i=o[2],"prev"!=t&&"next"!=t&&(t=crsl.direction),is_number(n)||(n=0),is_boolean(i)||(i=!1),i&&(crsl.isStopped=!1,opts.auto.play=!0),!opts.auto.play)return e.stopImmediatePropagation(),debug(conf,"Carousel stopped: Not scrolling.");crsl.isPaused&&opts.auto.button&&(opts.auto.button.removeClass(cf_c("stopped",conf)),opts.auto.button.removeClass(cf_c("paused",conf))),crsl.isPaused=!1,tmrs.startTime=getTime();var a=opts.auto.timeoutDuration+n;return dur2=a-tmrs.timePassed,perc=100-Math.ceil(100*dur2/a),opts.auto.progress&&(tmrs.progress=setInterval(function(){var e=getTime()-tmrs.startTime+tmrs.timePassed,t=Math.ceil(100*e/a);opts.auto.progress.updater.call(opts.auto.progress.bar[0],t)},opts.auto.progress.interval)),tmrs.auto=setTimeout(function(){opts.auto.progress&&opts.auto.progress.updater.call(opts.auto.progress.bar[0],100),opts.auto.onTimeoutEnd&&opts.auto.onTimeoutEnd.call($tt0,perc,dur2),crsl.isScrolling?$cfs.trigger(cf_e("play",conf),t):$cfs.trigger(cf_e(t,conf),opts.auto)},dur2),opts.auto.onTimeoutStart&&opts.auto.onTimeoutStart.call($tt0,perc,dur2),!0}),$cfs.bind(cf_e("resume",conf),function(e){return e.stopPropagation(),scrl.isStopped?(scrl.isStopped=!1,crsl.isPaused=!1,crsl.isScrolling=!0,scrl.startTime=getTime(),sc_startScroll(scrl,conf)):$cfs.trigger(cf_e("play",conf)),!0}),$cfs.bind(cf_e("prev",conf)+" "+cf_e("next",conf),function(e,t,n,i,r){if(e.stopPropagation(),crsl.isStopped||$cfs.is(":hidden"))return e.stopImmediatePropagation(),debug(conf,"Carousel stopped or hidden: Not scrolling.");var s=is_number(opts.items.minimum)?opts.items.minimum:opts.items.visible+1;if(s>itms.total)return e.stopImmediatePropagation(),debug(conf,"Not enough items ("+itms.total+" total, "+s+" needed): Not scrolling.");var o=[t,n,i,r],a=["object","number/string","function","boolean"],l=cf_sortParams(o,a);t=l[0],n=l[1],i=l[2],r=l[3];var c=e.type.slice(conf.events.prefix.length);if(is_object(t)||(t={}),is_function(i)&&(t.onAfter=i),is_boolean(r)&&(t.queue=r),t=$.extend(!0,{},opts[c],t),t.conditions&&!t.conditions.call($tt0,c))return e.stopImmediatePropagation(),debug(conf,'Callback "conditions" returned false.');if(!is_number(n)){if("*"!=opts.items.filter)n="visible";else for(var u=[n,t.items,opts[c].items],l=0,d=u.length;d>l;l++)if(is_number(u[l])||"page"==u[l]||"visible"==u[l]){n=u[l];break}switch(n){case"page":return e.stopImmediatePropagation(),$cfs.triggerHandler(cf_e(c+"Page",conf),[t,i]);case"visible":opts.items.visibleConf.variable||"*"!=opts.items.filter||(n=opts.items.visible)}}if(scrl.isStopped)return $cfs.trigger(cf_e("resume",conf)),$cfs.trigger(cf_e("queue",conf),[c,[t,n,i]]),e.stopImmediatePropagation(),debug(conf,"Carousel resumed scrolling.");if(t.duration>0&&crsl.isScrolling)return t.queue&&("last"==t.queue&&(queu=[]),("first"!=t.queue||0==queu.length)&&$cfs.trigger(cf_e("queue",conf),[c,[t,n,i]])),e.stopImmediatePropagation(),debug(conf,"Carousel currently scrolling.");if(tmrs.timePassed=0,$cfs.trigger(cf_e("slide_"+c,conf),[t,n]),opts.synchronise)for(var p=opts.synchronise,h=[t,n],f=0,d=p.length;d>f;f++){var m=c;p[f][2]||(m="prev"==m?"next":"prev"),p[f][1]||(h[0]=p[f][0].triggerHandler("_cfs_triggerEvent",["configuration",m])),h[1]=n+p[f][3],p[f][0].trigger("_cfs_triggerEvent",["slide_"+m,h])}return!0}),$cfs.bind(cf_e("slide_prev",conf),function(e,t,n){e.stopPropagation();var i=$cfs.children();if(!opts.circular&&0==itms.first)return opts.infinite&&$cfs.trigger(cf_e("next",conf),itms.total-1),e.stopImmediatePropagation();if(sz_resetMargin(i,opts),!is_number(n)){if(opts.items.visibleConf.variable)n=gn_getVisibleItemsPrev(i,opts,itms.total-1);else if("*"!=opts.items.filter){var r=is_number(t.items)?t.items:gn_getVisibleOrg($cfs,opts);n=gn_getScrollItemsPrevFilter(i,opts,itms.total-1,r)}else n=opts.items.visible;n=cf_getAdjust(n,opts,t.items,$tt0)}if(opts.circular||itms.total-n<itms.first&&(n=itms.total-itms.first),opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){var s=cf_getItemsAdjust(gn_getVisibleItemsNext(i,opts,itms.total-n),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible+n<=s&&n<itms.total&&(n++,s=cf_getItemsAdjust(gn_getVisibleItemsNext(i,opts,itms.total-n),opts,opts.items.visibleConf.adjust,$tt0)),opts.items.visible=s}else if("*"!=opts.items.filter){var s=gn_getVisibleItemsNextFilter(i,opts,itms.total-n);opts.items.visible=cf_getItemsAdjust(s,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(i,opts,!0),0==n)return e.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+n+" items backward."),itms.first+=n;itms.first>=itms.total;)itms.first-=itms.total;opts.circular||(0==itms.first&&t.onEnd&&t.onEnd.call($tt0,"prev"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),$cfs.children().slice(itms.total-n,itms.total).prependTo($cfs),itms.total<opts.items.visible+n&&$cfs.children().slice(0,opts.items.visible+n-itms.total).clone(!0).appendTo($cfs);var i=$cfs.children(),o=gi_getOldItemsPrev(i,opts,n),a=gi_getNewItemsPrev(i,opts),l=i.eq(n-1),c=o.last(),u=a.last();sz_resetMargin(i,opts);var d=0,p=0;if(opts.align){var h=cf_getAlignPadding(a,opts);d=h[0],p=h[1]}var f=0>d?opts.padding[opts.d[3]]:0,m=!1,g=$();if(opts.items.visible<n&&(g=i.slice(opts.items.visibleConf.old,n),"directscroll"==t.fx)){var v=opts.items[opts.d.width];m=g,l=u,sc_hideHiddenItems(m),opts.items[opts.d.width]="variable"}var b=!1,y=ms_getTotalSize(i.slice(0,n),opts,"width"),_=cf_mapWrapperSizes(ms_getSizes(a,opts,!0),opts,!opts.usePadding),w=0,x={},D={},M={},T={},k={},j={},C={},L=sc_getDuration(t,opts,n,y);switch(t.fx){case"cover":case"cover-fade":w=ms_getTotalSize(i.slice(0,opts.items.visible),opts,"width")}m&&(opts.items[opts.d.width]=v),sz_resetMargin(i,opts,!0),p>=0&&sz_resetMargin(c,opts,opts.padding[opts.d[1]]),d>=0&&sz_resetMargin(l,opts,opts.padding[opts.d[3]]),opts.align&&(opts.padding[opts.d[1]]=p,opts.padding[opts.d[3]]=d),j[opts.d.left]=-(y-f),C[opts.d.left]=-(w-f),D[opts.d.left]=_[opts.d.width];var S=function(){},O=function(){},E=function(){},N=function(){},I=function(){},Y=function(){},R=function(){},P=function(){},A=function(){},z=function(){},F=function(){};switch(t.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":b=$cfs.clone(!0).appendTo($wrp)}switch(t.fx){case"crossfade":case"uncover":case"uncover-fade":b.children().slice(0,n).remove(),b.children().slice(opts.items.visibleConf.old).remove();break;case"cover":case"cover-fade":b.children().slice(opts.items.visible).remove(),b.css(C)}if($cfs.css(j),scrl=sc_setScroll(L,t.easing,conf),x[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0,("variable"==opts[opts.d.width]||"variable"==opts[opts.d.height])&&(S=function(){$wrp.css(_)},O=function(){scrl.anims.push([$wrp,_])}),opts.usePadding){switch(u.not(l).length&&(M[opts.d.marginRight]=l.data("_cfs_origCssMargin"),0>d?l.css(M):(R=function(){l.css(M)},P=function(){scrl.anims.push([l,M])})),t.fx){case"cover":case"cover-fade":b.children().eq(n-1).css(M)}u.not(c).length&&(T[opts.d.marginRight]=c.data("_cfs_origCssMargin"),E=function(){c.css(T)},N=function(){scrl.anims.push([c,T])}),p>=0&&(k[opts.d.marginRight]=u.data("_cfs_origCssMargin")+opts.padding[opts.d[1]],I=function(){u.css(k)},Y=function(){scrl.anims.push([u,k])})}F=function(){$cfs.css(x)};var H=opts.items.visible+n-itms.total;z=function(){if(H>0&&($cfs.children().slice(itms.total).remove(),o=$($cfs.children().slice(itms.total-(opts.items.visible-H)).get().concat($cfs.children().slice(0,H).get()))),sc_showHiddenItems(m),opts.usePadding){var e=$cfs.children().eq(opts.items.visible+n-1);e.css(opts.d.marginRight,e.data("_cfs_origCssMargin"))}};var U=sc_mapCallbackArguments(o,g,a,n,"prev",L,_);switch(A=function(){sc_afterScroll($cfs,b,t),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,t,"onAfter",U,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,t,"onBefore",U,clbk),t.fx){case"none":$cfs.css(x),S(),E(),I(),R(),F(),z(),A();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){S(),E(),I(),R(),F(),z(),scrl=sc_setScroll(L,t.easing,conf),scrl.anims.push([$cfs,{opacity:1},A]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([b,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},A]),O(),E(),I(),R(),F(),z();break;case"cover":scrl.anims.push([b,x,function(){E(),I(),R(),F(),z(),A()}]),O();break;case"cover-fade":scrl.anims.push([$cfs,{opacity:0}]),scrl.anims.push([b,x,function(){E(),I(),R(),F(),z(),A()}]),O();break;case"uncover":scrl.anims.push([b,D,A]),O(),E(),I(),R(),F(),z();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([b,D,A]),O(),E(),I(),R(),F(),z();break;default:scrl.anims.push([$cfs,x,function(){z(),A()}]),O(),N(),Y(),P()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,_]),!0}),$cfs.bind(cf_e("slide_next",conf),function(e,t,n){e.stopPropagation();var i=$cfs.children();if(!opts.circular&&itms.first==opts.items.visible)return opts.infinite&&$cfs.trigger(cf_e("prev",conf),itms.total-1),e.stopImmediatePropagation();if(sz_resetMargin(i,opts),!is_number(n)){if("*"!=opts.items.filter){var r=is_number(t.items)?t.items:gn_getVisibleOrg($cfs,opts);n=gn_getScrollItemsNextFilter(i,opts,0,r)}else n=opts.items.visible;n=cf_getAdjust(n,opts,t.items,$tt0)}var s=0==itms.first?itms.total:itms.first;if(!opts.circular){if(opts.items.visibleConf.variable)var o=gn_getVisibleItemsNext(i,opts,n),r=gn_getVisibleItemsPrev(i,opts,s-1);else var o=opts.items.visible,r=opts.items.visible;n+o>s&&(n=s-r)}if(opts.items.visibleConf.old=opts.items.visible,opts.items.visibleConf.variable){for(var o=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(i,opts,n,s),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible-n>=o&&n<itms.total;)n++,o=cf_getItemsAdjust(gn_getVisibleItemsNextTestCircular(i,opts,n,s),opts,opts.items.visibleConf.adjust,$tt0);opts.items.visible=o}else if("*"!=opts.items.filter){var o=gn_getVisibleItemsNextFilter(i,opts,n);opts.items.visible=cf_getItemsAdjust(o,opts,opts.items.visibleConf.adjust,$tt0)}if(sz_resetMargin(i,opts,!0),0==n)return e.stopImmediatePropagation(),debug(conf,"0 items to scroll: Not scrolling.");for(debug(conf,"Scrolling "+n+" items forward."),itms.first-=n;itms.first<0;)itms.first+=itms.total;opts.circular||(itms.first==opts.items.visible&&t.onEnd&&t.onEnd.call($tt0,"next"),opts.infinite||nv_enableNavi(opts,itms.first,conf)),itms.total<opts.items.visible+n&&$cfs.children().slice(0,opts.items.visible+n-itms.total).clone(!0).appendTo($cfs);var i=$cfs.children(),a=gi_getOldItemsNext(i,opts),l=gi_getNewItemsNext(i,opts,n),c=i.eq(n-1),u=a.last(),d=l.last();sz_resetMargin(i,opts);var p=0,h=0;if(opts.align){var f=cf_getAlignPadding(l,opts);p=f[0],h=f[1]}var m=!1,g=$();if(opts.items.visibleConf.old<n&&(g=i.slice(opts.items.visibleConf.old,n),"directscroll"==t.fx)){var v=opts.items[opts.d.width];m=g,c=u,sc_hideHiddenItems(m),opts.items[opts.d.width]="variable"}var b=!1,y=ms_getTotalSize(i.slice(0,n),opts,"width"),_=cf_mapWrapperSizes(ms_getSizes(l,opts,!0),opts,!opts.usePadding),w=0,x={},D={},M={},T={},k={},j=sc_getDuration(t,opts,n,y);switch(t.fx){case"uncover":case"uncover-fade":w=ms_getTotalSize(i.slice(0,opts.items.visibleConf.old),opts,"width")}m&&(opts.items[opts.d.width]=v),opts.align&&opts.padding[opts.d[1]]<0&&(opts.padding[opts.d[1]]=0),sz_resetMargin(i,opts,!0),sz_resetMargin(u,opts,opts.padding[opts.d[1]]),opts.align&&(opts.padding[opts.d[1]]=h,opts.padding[opts.d[3]]=p),k[opts.d.left]=opts.usePadding?opts.padding[opts.d[3]]:0;var C=function(){},L=function(){},S=function(){},O=function(){},E=function(){},N=function(){},I=function(){},Y=function(){},R=function(){};switch(t.fx){case"crossfade":case"cover":case"cover-fade":case"uncover":case"uncover-fade":b=$cfs.clone(!0).appendTo($wrp),b.children().slice(opts.items.visibleConf.old).remove()}switch(t.fx){case"crossfade":case"cover":case"cover-fade":$cfs.css("zIndex",1),b.css("zIndex",0)}if(scrl=sc_setScroll(j,t.easing,conf),x[opts.d.left]=-y,D[opts.d.left]=-w,0>p&&(x[opts.d.left]+=p),("variable"==opts[opts.d.width]||"variable"==opts[opts.d.height])&&(C=function(){$wrp.css(_)},L=function(){scrl.anims.push([$wrp,_])}),opts.usePadding){var P=d.data("_cfs_origCssMargin");h>=0&&(P+=opts.padding[opts.d[1]]),d.css(opts.d.marginRight,P),c.not(u).length&&(T[opts.d.marginRight]=u.data("_cfs_origCssMargin")),S=function(){u.css(T)},O=function(){scrl.anims.push([u,T])};var A=c.data("_cfs_origCssMargin");p>0&&(A+=opts.padding[opts.d[3]]),M[opts.d.marginRight]=A,E=function(){c.css(M)},N=function(){scrl.anims.push([c,M])}}R=function(){$cfs.css(k)};var z=opts.items.visible+n-itms.total;Y=function(){z>0&&$cfs.children().slice(itms.total).remove();var e=$cfs.children().slice(0,n).appendTo($cfs).last();if(z>0&&(l=gi_getCurrentItems(i,opts)),sc_showHiddenItems(m),opts.usePadding){if(itms.total<opts.items.visible+n){var t=$cfs.children().eq(opts.items.visible-1);t.css(opts.d.marginRight,t.data("_cfs_origCssMargin")+opts.padding[opts.d[1]])}e.css(opts.d.marginRight,e.data("_cfs_origCssMargin"))}};var F=sc_mapCallbackArguments(a,g,l,n,"next",j,_);switch(I=function(){$cfs.css("zIndex",$cfs.data("_cfs_origCssZindex")),sc_afterScroll($cfs,b,t),crsl.isScrolling=!1,clbk.onAfter=sc_fireCallbacks($tt0,t,"onAfter",F,clbk),queu=sc_fireQueue($cfs,queu,conf),crsl.isPaused||$cfs.trigger(cf_e("play",conf))},crsl.isScrolling=!0,tmrs=sc_clearTimers(tmrs),clbk.onBefore=sc_fireCallbacks($tt0,t,"onBefore",F,clbk),t.fx){case"none":$cfs.css(x),C(),S(),E(),R(),Y(),I();break;case"fade":scrl.anims.push([$cfs,{opacity:0},function(){C(),S(),E(),R(),Y(),scrl=sc_setScroll(j,t.easing,conf),scrl.anims.push([$cfs,{opacity:1},I]),sc_startScroll(scrl,conf)}]);break;case"crossfade":$cfs.css({opacity:0}),scrl.anims.push([b,{opacity:0}]),scrl.anims.push([$cfs,{opacity:1},I]),L(),S(),E(),R(),Y();break;case"cover":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([$cfs,k,I]),L(),S(),E(),Y();break;case"cover-fade":$cfs.css(opts.d.left,$wrp[opts.d.width]()),scrl.anims.push([b,{opacity:0}]),scrl.anims.push([$cfs,k,I]),L(),S(),E(),Y();break;case"uncover":scrl.anims.push([b,D,I]),L(),S(),E(),R(),Y();break;case"uncover-fade":$cfs.css({opacity:0}),scrl.anims.push([$cfs,{opacity:1}]),scrl.anims.push([b,D,I]),L(),S(),E(),R(),Y();break;default:scrl.anims.push([$cfs,x,function(){R(),Y(),I()}]),L(),O(),N()}return sc_startScroll(scrl,conf),cf_setCookie(opts.cookie,$cfs,conf),$cfs.trigger(cf_e("updatePageStatus",conf),[!1,_]),!0}),$cfs.bind(cf_e("slideTo",conf),function(e,t,n,i,r,s,o){e.stopPropagation();var a=[t,n,i,r,s,o],l=["string/number/object","number","boolean","object","string","function"],c=cf_sortParams(a,l);return r=c[3],s=c[4],o=c[5],t=gn_getItemIndex(c[0],c[1],c[2],itms,$cfs),0==t?!1:(is_object(r)||(r=!1),"prev"!=s&&"next"!=s&&(s=opts.circular?t<=itms.total/2?"next":"prev":0==itms.first||itms.first>t?"next":"prev"),"prev"==s&&(t=itms.total-t),$cfs.trigger(cf_e(s,conf),[r,t,o]),!0)}),$cfs.bind(cf_e("prevPage",conf),function(e,t,n){e.stopPropagation();var i=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[i-1,t,"prev",n])}),$cfs.bind(cf_e("nextPage",conf),function(e,t,n){e.stopPropagation();var i=$cfs.triggerHandler(cf_e("currentPage",conf));return $cfs.triggerHandler(cf_e("slideToPage",conf),[i+1,t,"next",n])}),$cfs.bind(cf_e("slideToPage",conf),function(e,t,n,i,r){e.stopPropagation(),is_number(t)||(t=$cfs.triggerHandler(cf_e("currentPage",conf)));var s=opts.pagination.items||opts.items.visible,o=Math.ceil(itms.total/s)-1;return 0>t&&(t=o),t>o&&(t=0),$cfs.triggerHandler(cf_e("slideTo",conf),[t*s,0,!0,n,i,r])}),$cfs.bind(cf_e("jumpToStart",conf),function(e,t){if(e.stopPropagation(),t=t?gn_getItemIndex(t,0,!0,itms,$cfs):0,t+=itms.first,0!=t){if(itms.total>0)for(;t>itms.total;)t-=itms.total;$cfs.prepend($cfs.children().slice(t,itms.total))}return!0}),$cfs.bind(cf_e("synchronise",conf),function(e,t){if(e.stopPropagation(),t)t=cf_getSynchArr(t);else{if(!opts.synchronise)return debug(conf,"No carousel to synchronise.");t=opts.synchronise}for(var n=$cfs.triggerHandler(cf_e("currentPosition",conf)),i=!0,r=0,s=t.length;s>r;r++)t[r][0].triggerHandler(cf_e("slideTo",conf),[n,t[r][3],!0])||(i=!1);return i}),$cfs.bind(cf_e("queue",conf),function(e,t,n){return e.stopPropagation(),is_function(t)?t.call($tt0,queu):is_array(t)?queu=t:is_undefined(t)||queu.push([t,n]),queu}),$cfs.bind(cf_e("insertItem",conf),function(e,t,n,i,r){e.stopPropagation();var s=[t,n,i,r],o=["string/object","string/number/object","boolean","number"],a=cf_sortParams(s,o);if(t=a[0],n=a[1],i=a[2],r=a[3],is_object(t)&&!is_jquery(t)?t=$(t):is_string(t)&&(t=$(t)),!is_jquery(t)||0==t.length)return debug(conf,"Not a valid object.");is_undefined(n)&&(n="end"),sz_storeMargin(t,opts),sz_storeOrigCss(t);var l=n,c="before";"end"==n?i?(0==itms.first?(n=itms.total-1,c="after"):(n=itms.first,itms.first+=t.length),0>n&&(n=0)):(n=itms.total-1,c="after"):n=gn_getItemIndex(n,r,i,itms,$cfs);var u=$cfs.children().eq(n);return u.length?u[c](t):(debug(conf,"Correct insert-position not found! Appending item to the end."),$cfs.append(t)),"end"==l||i||n<itms.first&&(itms.first+=t.length),itms.total=$cfs.children().length,itms.first>=itms.total&&(itms.first-=itms.total),$cfs.trigger(cf_e("updateSizes",conf)),$cfs.trigger(cf_e("linkAnchors",conf)),!0}),$cfs.bind(cf_e("removeItem",conf),function(e,t,n,i){e.stopPropagation();var r=[t,n,i],s=["string/number/object","boolean","number"],o=cf_sortParams(r,s);t=o[0],n=o[1],i=o[2];if(t instanceof $&&t.length>1)return a=$(),t.each(function(){var e=$cfs.trigger(cf_e("removeItem",conf),[$(this),n,i]);e&&(a=a.add(e))}),a;if(is_undefined(t)||"end"==t)a=$cfs.children().last();else{t=gn_getItemIndex(t,i,n,itms,$cfs);var a=$cfs.children().eq(t);a.length&&t<itms.first&&(itms.first-=a.length)}return a&&a.length&&(a.detach(),itms.total=$cfs.children().length,$cfs.trigger(cf_e("updateSizes",conf))),a}),$cfs.bind(cf_e("onBefore",conf)+" "+cf_e("onAfter",conf),function(e,t){e.stopPropagation();var n=e.type.slice(conf.events.prefix.length);return is_array(t)&&(clbk[n]=t),is_function(t)&&clbk[n].push(t),clbk[n]}),$cfs.bind(cf_e("currentPosition",conf),function(e,t){if(e.stopPropagation(),0==itms.first)var n=0;else var n=itms.total-itms.first;return is_function(t)&&t.call($tt0,n),n}),$cfs.bind(cf_e("currentPage",conf),function(e,t){e.stopPropagation();var n,i=opts.pagination.items||opts.items.visible,r=Math.ceil(itms.total/i-1);return n=0==itms.first?0:itms.first<itms.total%i?0:itms.first!=i||opts.circular?Math.round((itms.total-itms.first)/i):r,0>n&&(n=0),n>r&&(n=r),is_function(t)&&t.call($tt0,n),n}),$cfs.bind(cf_e("currentVisible",conf),function(e,t){e.stopPropagation();var n=gi_getCurrentItems($cfs.children(),opts);return is_function(t)&&t.call($tt0,n),n}),$cfs.bind(cf_e("slice",conf),function(e,t,n,i){if(e.stopPropagation(),0==itms.total)return!1;var r=[t,n,i],s=["number","number","function"],o=cf_sortParams(r,s);if(t=is_number(o[0])?o[0]:0,n=is_number(o[1])?o[1]:itms.total,i=o[2],t+=itms.first,n+=itms.first,items.total>0){for(;t>itms.total;)t-=itms.total;for(;n>itms.total;)n-=itms.total;for(;0>t;)t+=itms.total;for(;0>n;)n+=itms.total}var a,l=$cfs.children();return a=n>t?l.slice(t,n):$(l.slice(t,itms.total).get().concat(l.slice(0,n).get())),is_function(i)&&i.call($tt0,a),a}),$cfs.bind(cf_e("isPaused",conf)+" "+cf_e("isStopped",conf)+" "+cf_e("isScrolling",conf),function(e,t){e.stopPropagation();var n=e.type.slice(conf.events.prefix.length),i=crsl[n];return is_function(t)&&t.call($tt0,i),i}),$cfs.bind(cf_e("configuration",conf),function(e,a,b,c){e.stopPropagation();var reInit=!1;if(is_function(a))a.call($tt0,opts);else if(is_object(a))opts_orig=$.extend(!0,{},opts_orig,a),b!==!1?reInit=!0:opts=$.extend(!0,{},opts,a);else if(!is_undefined(a))if(is_function(b)){var val=eval("opts."+a);is_undefined(val)&&(val=""),b.call($tt0,val)}else{if(is_undefined(b))return eval("opts."+a);"boolean"!=typeof c&&(c=!0),eval("opts_orig."+a+" = b"),c!==!1?reInit=!0:eval("opts."+a+" = b")}if(reInit){sz_resetMargin($cfs.children(),opts),FN._init(opts_orig),FN._bind_buttons();var sz=sz_setSizes($cfs,opts);$cfs.trigger(cf_e("updatePageStatus",conf),[!0,sz])}return opts}),$cfs.bind(cf_e("linkAnchors",conf),function(e,t,n){return e.stopPropagation(),is_undefined(t)?t=$("body"):is_string(t)&&(t=$(t)),is_jquery(t)&&0!=t.length?(is_string(n)||(n="a.caroufredsel"),t.find(n).each(function(){var e=this.hash||"";e.length>0&&-1!=$cfs.children().index($(e))&&$(this).unbind("click").click(function(t){t.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),e)})}),!0):debug(conf,"Not a valid object.")}),$cfs.bind(cf_e("updatePageStatus",conf),function(e,t){if(e.stopPropagation(),opts.pagination.container){var n=opts.pagination.items||opts.items.visible,i=Math.ceil(itms.total/n);t&&(opts.pagination.anchorBuilder&&(opts.pagination.container.children().remove(),opts.pagination.container.each(function(){for(var e=0;i>e;e++){var t=$cfs.children().eq(gn_getItemIndex(e*n,0,!0,itms,$cfs));$(this).append(opts.pagination.anchorBuilder.call(t[0],e+1))}})),opts.pagination.container.each(function(){$(this).children().unbind(opts.pagination.event).each(function(e){$(this).bind(opts.pagination.event,function(t){t.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[e*n,-opts.pagination.deviation,!0,opts.pagination])})})}));var r=$cfs.triggerHandler(cf_e("currentPage",conf))+opts.pagination.deviation;return r>=i&&(r=0),0>r&&(r=i-1),opts.pagination.container.each(function(){$(this).children().removeClass(cf_c("selected",conf)).eq(r).addClass(cf_c("selected",conf))}),!0}}),$cfs.bind(cf_e("updateSizes",conf),function(){var e=opts.items.visible,t=$cfs.children(),n=ms_getParentSize($wrp,opts,"width");if(itms.total=t.length,crsl.primarySizePercentage?(opts.maxDimension=n,opts[opts.d.width]=ms_getPercentage(n,crsl.primarySizePercentage)):opts.maxDimension=ms_getMaxDimension(opts,n),opts.responsive?(opts.items.width=opts.items.sizesConf.width,opts.items.height=opts.items.sizesConf.height,opts=in_getResponsiveValues(opts,t,n),e=opts.items.visible,sz_setResponsiveSizes(opts,t)):opts.items.visibleConf.variable?e=gn_getVisibleItemsNext(t,opts,0):"*"!=opts.items.filter&&(e=gn_getVisibleItemsNextFilter(t,opts,0)),!opts.circular&&0!=itms.first&&e>itms.first){if(opts.items.visibleConf.variable)var i=gn_getVisibleItemsPrev(t,opts,itms.first)-itms.first;else if("*"!=opts.items.filter)var i=gn_getVisibleItemsPrevFilter(t,opts,itms.first)-itms.first;else var i=opts.items.visible-itms.first;debug(conf,"Preventing non-circular: sliding "+i+" items backward."),$cfs.trigger(cf_e("prev",conf),i)}opts.items.visible=cf_getItemsAdjust(e,opts,opts.items.visibleConf.adjust,$tt0),opts.items.visibleConf.old=opts.items.visible,opts=in_getAlignPadding(opts,t);var r=sz_setSizes($cfs,opts);return $cfs.trigger(cf_e("updatePageStatus",conf),[!0,r]),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),r}),$cfs.bind(cf_e("destroy",conf),function(e,t){return e.stopPropagation(),tmrs=sc_clearTimers(tmrs),$cfs.data("_cfs_isCarousel",!1),$cfs.trigger(cf_e("finish",conf)),t&&$cfs.trigger(cf_e("jumpToStart",conf)),sz_restoreOrigCss($cfs.children()),sz_restoreOrigCss($cfs),FN._unbind_events(),FN._unbind_buttons(),"parent"==conf.wrapper?sz_restoreOrigCss($wrp):$wrp.replaceWith($cfs),!0}),$cfs.bind(cf_e("debug",conf),function(){return debug(conf,"Carousel width: "+opts.width),debug(conf,"Carousel height: "+opts.height),debug(conf,"Item widths: "+opts.items.width),debug(conf,"Item heights: "+opts.items.height),debug(conf,"Number of items visible: "+opts.items.visible),opts.auto.play&&debug(conf,"Number of items scrolled automatically: "+opts.auto.items),opts.prev.button&&debug(conf,"Number of items scrolled backward: "+opts.prev.items),opts.next.button&&debug(conf,"Number of items scrolled forward: "+opts.next.items),conf.debug}),$cfs.bind("_cfs_triggerEvent",function(e,t,n){return e.stopPropagation(),$cfs.triggerHandler(cf_e(t,conf),n)})},FN._unbind_events=function(){$cfs.unbind(cf_e("",conf)),$cfs.unbind(cf_e("",conf,!1)),$cfs.unbind("_cfs_triggerEvent")},FN._bind_buttons=function(){if(FN._unbind_buttons(),nv_showNavi(opts,itms.total,conf),nv_enableNavi(opts,itms.first,conf),opts.auto.pauseOnHover){var e=bt_pauseOnHoverConfig(opts.auto.pauseOnHover);$wrp.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),e)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.auto.button&&opts.auto.button.bind(cf_e(opts.auto.event,conf,!1),function(e){e.preventDefault();var t=!1,n=null;crsl.isPaused?t="play":opts.auto.pauseOnEvent&&(t="pause",n=bt_pauseOnHoverConfig(opts.auto.pauseOnEvent)),t&&$cfs.trigger(cf_e(t,conf),n)}),opts.prev.button&&(opts.prev.button.bind(cf_e(opts.prev.event,conf,!1),function(e){e.preventDefault(),$cfs.trigger(cf_e("prev",conf))}),opts.prev.pauseOnHover)){var e=bt_pauseOnHoverConfig(opts.prev.pauseOnHover);opts.prev.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),e)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.next.button&&(opts.next.button.bind(cf_e(opts.next.event,conf,!1),function(e){e.preventDefault(),$cfs.trigger(cf_e("next",conf))}),opts.next.pauseOnHover)){var e=bt_pauseOnHoverConfig(opts.next.pauseOnHover);opts.next.button.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),e)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if(opts.pagination.container&&opts.pagination.pauseOnHover){var e=bt_pauseOnHoverConfig(opts.pagination.pauseOnHover);opts.pagination.container.bind(cf_e("mouseenter",conf,!1),function(){$cfs.trigger(cf_e("pause",conf),e)}).bind(cf_e("mouseleave",conf,!1),function(){$cfs.trigger(cf_e("resume",conf))})}if((opts.prev.key||opts.next.key)&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(e){var t=e.keyCode;t==opts.next.key&&(e.preventDefault(),$cfs.trigger(cf_e("next",conf))),t==opts.prev.key&&(e.preventDefault(),$cfs.trigger(cf_e("prev",conf)))}),opts.pagination.keys&&$(document).bind(cf_e("keyup",conf,!1,!0,!0),function(e){var t=e.keyCode;t>=49&&58>t&&(t=(t-49)*opts.items.visible,t<=itms.total&&(e.preventDefault(),$cfs.trigger(cf_e("slideTo",conf),[t,0,!0,opts.pagination])))}),$.fn.swipe){var t="ontouchstart"in window;if(t&&opts.swipe.onTouch||!t&&opts.swipe.onMouse){var n=$.extend(!0,{},opts.prev,opts.swipe),i=$.extend(!0,{},opts.next,opts.swipe),r=function(){$cfs.trigger(cf_e("prev",conf),[n])},s=function(){$cfs.trigger(cf_e("next",conf),[i])};switch(opts.direction){case"up":case"down":opts.swipe.options.swipeUp=s,opts.swipe.options.swipeDown=r;break;default:opts.swipe.options.swipeLeft=s,opts.swipe.options.swipeRight=r}crsl.swipe&&$cfs.swipe("destroy"),$wrp.swipe(opts.swipe.options),$wrp.css("cursor","move"),crsl.swipe=!0}}if($.fn.mousewheel&&opts.mousewheel){var o=$.extend(!0,{},opts.prev,opts.mousewheel),a=$.extend(!0,{},opts.next,opts.mousewheel);crsl.mousewheel&&$wrp.unbind(cf_e("mousewheel",conf,!1)),$wrp.bind(cf_e("mousewheel",conf,!1),function(e,t){e.preventDefault(),t>0?$cfs.trigger(cf_e("prev",conf),[o]):$cfs.trigger(cf_e("next",conf),[a])}),crsl.mousewheel=!0}if(opts.auto.play&&$cfs.trigger(cf_e("play",conf),opts.auto.delay),crsl.upDateOnWindowResize){var l=function(){$cfs.trigger(cf_e("finish",conf)),opts.auto.pauseOnResize&&!crsl.isPaused&&$cfs.trigger(cf_e("play",conf)),sz_resetMargin($cfs.children(),opts),$cfs.trigger(cf_e("updateSizes",conf))},c=$(window),u=null;if($.debounce&&"debounce"==conf.onWindowResize)u=$.debounce(200,l);else if($.throttle&&"throttle"==conf.onWindowResize)u=$.throttle(300,l);else{var d=0,p=0;u=function(){var e=c.width(),t=c.height();(e!=d||t!=p)&&(l(),d=e,p=t)}}c.bind(cf_e("resize",conf,!1,!0,!0),u)}},FN._unbind_buttons=function(){var e=(cf_e("",conf),cf_e("",conf,!1));ns3=cf_e("",conf,!1,!0,!0),$(document).unbind(ns3),$(window).unbind(ns3),$wrp.unbind(e),opts.auto.button&&opts.auto.button.unbind(e),opts.prev.button&&opts.prev.button.unbind(e),opts.next.button&&opts.next.button.unbind(e),opts.pagination.container&&(opts.pagination.container.unbind(e),opts.pagination.anchorBuilder&&opts.pagination.container.children().remove()),crsl.swipe&&($cfs.swipe("destroy"),$wrp.css("cursor","default"),crsl.swipe=!1),crsl.mousewheel&&(crsl.mousewheel=!1),nv_showNavi(opts,"hide",conf),nv_enableNavi(opts,"removeClass",conf)},is_boolean(configs)&&(configs={debug:configs});var crsl={direction:"next",isPaused:!0,isScrolling:!1,isStopped:!1,mousewheel:!1,swipe:!1},itms={total:$cfs.children().length,first:0},tmrs={auto:null,progress:null,startTime:getTime(),timePassed:0},scrl={isStopped:!1,duration:0,startTime:0,easing:"",anims:[]},clbk={onBefore:[],onAfter:[]},queu=[],conf=$.extend(!0,{},$.fn.carouFredSel.configs,configs),opts={},opts_orig=$.extend(!0,{},options),$wrp="parent"==conf.wrapper?$cfs.parent():$cfs.wrap("<"+conf.wrapper.element+' class="'+conf.wrapper.classname+'" />').parent();if(conf.selector=$cfs.selector,conf.serialNumber=$.fn.carouFredSel.serialNumber++,conf.transition=conf.transition&&$.fn.transition?"transition":"animate",FN._init(opts_orig,!0,starting_position),FN._build(),FN._bind_events(),FN._bind_buttons(),is_array(opts.items.start))var start_arr=opts.items.start;else{var start_arr=[];0!=opts.items.start&&start_arr.push(opts.items.start)}if(opts.cookie&&start_arr.unshift(parseInt(cf_getCookie(opts.cookie),10)),start_arr.length>0)for(var a=0,l=start_arr.length;l>a;a++){var s=start_arr[a];if(0!=s){if(s===!0){if(s=window.location.hash,s.length<1)continue}else"random"===s&&(s=Math.floor(Math.random()*itms.total));if($cfs.triggerHandler(cf_e("slideTo",conf),[s,0,!0,{fx:"none"}]))break}}var siz=sz_setSizes($cfs,opts),itm=gi_getCurrentItems($cfs.children(),opts);return opts.onCreate&&opts.onCreate.call($tt0,{width:siz.width,height:siz.height,items:itm}),$cfs.trigger(cf_e("updatePageStatus",conf),[!0,siz]),$cfs.trigger(cf_e("linkAnchors",conf)),conf.debug&&$cfs.trigger(cf_e("debug",conf)),$cfs},$.fn.carouFredSel.serialNumber=1,$.fn.carouFredSel.defaults={synchronise:!1,infinite:!0,circular:!0,responsive:!1,direction:"left",items:{start:0},scroll:{easing:"swing",duration:500,pauseOnHover:!1,event:"click",queue:!1}},$.fn.carouFredSel.configs={debug:!1,transition:!1,onWindowResize:"throttle",events:{prefix:"",namespace:"cfs"},wrapper:{element:"div",classname:"caroufredsel_wrapper"},classnames:{}},$.fn.carouFredSel.pageAnchorBuilder=function(e){return'<a href="#"><span>'+e+"</span></a>"},$.fn.carouFredSel.progressbarUpdater=function(e){$(this).css("width",e+"%")
},$.fn.carouFredSel.cookie={get:function(e){e+="=";for(var t=document.cookie.split(";"),n=0,i=t.length;i>n;n++){for(var r=t[n];" "==r.charAt(0);)r=r.slice(1);if(0==r.indexOf(e))return r.slice(e.length)}return 0},set:function(e,t,n){var i="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="; expires="+r.toGMTString()}document.cookie=e+"="+t+i+"; path=/"},remove:function(e){$.fn.carouFredSel.cookie.set(e,"",-1)}},$.extend($.easing,{quadratic:function(e){var t=e*e;return e*(-t*e+4*t-6*e+4)},cubic:function(e){return e*(4*e*e-9*e+6)},elastic:function(e){var t=e*e;return e*(33*t*t-106*t*e+126*t-67*e+15)}}))}(jQuery)}).call(exports,__webpack_require__(6))},function(){!function(e){var t,n,i,r,s,o,a,l="Close",c="BeforeClose",u="AfterClose",d="BeforeAppend",p="MarkupParse",h="Open",f="Change",m="mfp",g="."+m,v="mfp-ready",b="mfp-removing",y="mfp-prevent-close",_=function(){},w=!!window.jQuery,x=e(window),D=function(e,n){t.ev.on(m+e+g,n)},M=function(t,n,i,r){var s=document.createElement("div");return s.className="mfp-"+t,i&&(s.innerHTML=i),r?n&&n.appendChild(s):(s=e(s),n&&s.appendTo(n)),s},T=function(n,i){t.ev.triggerHandler(m+n,i),t.st.callbacks&&(n=n.charAt(0).toLowerCase()+n.slice(1),t.st.callbacks[n]&&t.st.callbacks[n].apply(t,e.isArray(i)?i:[i]))},k=function(n){return n===a&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),a=n),t.currTemplate.closeBtn},j=function(){e.magnificPopup.instance||(t=new _,t.init(),e.magnificPopup.instance=t)},C=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};_.prototype={constructor:_,init:function(){var n=navigator.appVersion;t.isIE7=-1!==n.indexOf("MSIE 7."),t.isIE8=-1!==n.indexOf("MSIE 8."),t.isLowIE=t.isIE7||t.isIE8,t.isAndroid=/android/gi.test(n),t.isIOS=/iphone|ipad|ipod/gi.test(n),t.supportsTransition=C(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),i=e(document.body),r=e(document),t.popupsCache={}},open:function(n){var i;if(n.isObj===!1){t.items=n.items.toArray(),t.index=0;var s,a=n.items;for(i=0;i<a.length;i++)if(s=a[i],s.parsed&&(s=s.el[0]),s===n.el[0]){t.index=i;break}}else t.items=e.isArray(n.items)?n.items:[n.items],t.index=n.index||0;if(t.isOpen)return void t.updateItemHTML();t.types=[],o="",t.ev=n.mainEl&&n.mainEl.length?n.mainEl.eq(0):r,n.key?(t.popupsCache[n.key]||(t.popupsCache[n.key]={}),t.currTemplate=t.popupsCache[n.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,n),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=M("bg").on("click"+g,function(){t.close()}),t.wrap=M("wrap").attr("tabindex",-1).on("click"+g,function(e){t._checkIfClose(e.target)&&t.close()}),t.container=M("container",t.wrap)),t.contentContainer=M("content"),t.st.preloader&&(t.preloader=M("preloader",t.container,t.st.tLoading));var l=e.magnificPopup.modules;for(i=0;i<l.length;i++){var c=l[i];c=c.charAt(0).toUpperCase()+c.slice(1),t["init"+c].call(t)}T("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(D(p,function(e,t,n,i){n.close_replaceWith=k(i.type)}),o+=" mfp-close-btn-in"):t.wrap.append(k())),t.st.alignTop&&(o+=" mfp-align-top"),t.wrap.css(t.fixedContentPos?{overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}:{top:x.scrollTop(),position:"absolute"}),(t.st.fixedBgPos===!1||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:r.height(),position:"absolute"}),t.st.enableEscapeKey&&r.on("keyup"+g,function(e){27===e.keyCode&&t.close()}),x.on("resize"+g,function(){t.updateSize()}),t.st.closeOnContentClick||(o+=" mfp-auto-cursor"),o&&t.wrap.addClass(o);var u=t.wH=x.height(),d={};if(t.fixedContentPos&&t._hasScrollBar(u)){var f=t._getScrollbarSize();f&&(d.marginRight=f)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):d.overflow="hidden");var m=t.st.mainClass;return t.isIE7&&(m+=" mfp-ie7"),m&&t._addClassToMFP(m),t.updateItemHTML(),T("BuildControls"),e("html").css(d),t.bgOverlay.add(t.wrap).prependTo(document.body),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(v),t._setFocus()):t.bgOverlay.addClass(v),r.on("focusin"+g,t._onFocusIn)},16),t.isOpen=!0,t.updateSize(u),T(h),n},close:function(){t.isOpen&&(T(c),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(b),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){T(l);var n=b+" "+v+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(n+=t.st.mainClass+" "),t._removeClassFromMFP(n),t.fixedContentPos){var i={marginRight:""};t.isIE7?e("body, html").css("overflow",""):i.overflow="",e("html").css(i)}r.off("keyup"+g+" focusin"+g),t.ev.off(g),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),!t.st.showCloseBtn||t.st.closeBtnInside&&t.currTemplate[t.currItem.type]!==!0||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,T(u)},updateSize:function(e){if(t.isIOS){var n=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*n;t.wrap.css("height",i),t.wH=i}else t.wH=e||x.height();t.fixedContentPos||t.wrap.css("height",t.wH),T("Resize")},updateItemHTML:function(){var n=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),n.parsed||(n=t.parseEl(t.index));var i=n.type;if(T("BeforeChange",[t.currItem?t.currItem.type:"",i]),t.currItem=n,!t.currTemplate[i]){var r=t.st[i]?t.st[i].markup:!1;T("FirstMarkupParse",r),t.currTemplate[i]=r?e(r):!0}s&&s!==n.type&&t.container.removeClass("mfp-"+s+"-holder");var o=t["get"+i.charAt(0).toUpperCase()+i.slice(1)](n,t.currTemplate[i]);t.appendContent(o,i),n.preloaded=!0,T(f,n),s=n.type,t.container.prepend(t.contentContainer),T("AfterChange")},appendContent:function(e,n){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&t.currTemplate[n]===!0?t.content.find(".mfp-close").length||t.content.append(k()):t.content=e:t.content="",T(d),t.container.addClass("mfp-"+n+"-holder"),t.contentContainer.append(t.content)},parseEl:function(n){var i=t.items[n],r=i.type;if(i=i.tagName?{el:e(i)}:{data:i,src:i.src},i.el){for(var s=t.types,o=0;o<s.length;o++)if(i.el.hasClass("mfp-"+s[o])){r=s[o];break}i.src=i.el.attr("data-mfp-src"),i.src||(i.src=i.el.attr("href"))}return i.type=r||t.st.type||"inline",i.index=n,i.parsed=!0,t.items[n]=i,T("ElementParse",i),t.items[n]},addGroup:function(e,n){var i=function(i){i.mfpEl=this,t._openClick(i,e,n)};n||(n={});var r="click.magnificPopup";n.mainEl=e,n.items?(n.isObj=!0,e.off(r).on(r,i)):(n.isObj=!1,n.delegate?e.off(r).on(r,n.delegate,i):(n.items=e,e.off(r).on(r,i)))},_openClick:function(n,i,r){var s=void 0!==r.midClick?r.midClick:e.magnificPopup.defaults.midClick;if(s||2!==n.which&&!n.ctrlKey&&!n.metaKey){var o=void 0!==r.disableOn?r.disableOn:e.magnificPopup.defaults.disableOn;if(o)if(e.isFunction(o)){if(!o.call(t))return!0}else if(x.width()<o)return!0;n.type&&(n.preventDefault(),t.isOpen&&n.stopPropagation()),r.el=e(n.mfpEl),r.delegate&&(r.items=i.find(r.delegate)),t.open(r)}},updateStatus:function(e,i){if(t.preloader){n!==e&&t.container.removeClass("mfp-s-"+n),i||"loading"!==e||(i=t.st.tLoading);var r={status:e,text:i};T("UpdateStatus",r),e=r.status,i=r.text,t.preloader.html(i),t.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),t.container.addClass("mfp-s-"+e),n=e}},_checkIfClose:function(n){if(!e(n).hasClass(y)){var i=t.st.closeOnContentClick,r=t.st.closeOnBgClick;if(i&&r)return!0;if(!t.content||e(n).hasClass("mfp-close")||t.preloader&&n===t.preloader[0])return!0;if(n===t.content[0]||e.contains(t.content[0],n)){if(i)return!0}else if(r&&e.contains(document,n))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?r.height():document.body.scrollHeight)>(e||x.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(n){return n.target===t.wrap[0]||e.contains(t.wrap[0],n.target)?void 0:(t._setFocus(),!1)},_parseMarkup:function(t,n,i){var r;i.data&&(n=e.extend(i.data,n)),T(p,[t,n,i]),e.each(n,function(e,n){if(void 0===n||n===!1)return!0;if(r=e.split("_"),r.length>1){var i=t.find(g+"-"+r[0]);if(i.length>0){var s=r[1];"replaceWith"===s?i[0]!==n[0]&&i.replaceWith(n):"img"===s?i.is("img")?i.attr("src",n):i.replaceWith('<img src="'+n+'" class="'+i.attr("class")+'" />'):i.attr(r[1],n)}}else t.find(g+"-"+e).html(n)})},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.id="mfp-sbm",e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:_.prototype,modules:[],open:function(t,n){return j(),t=t?e.extend(!0,{},t):{},t.isObj=!0,t.index=n||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(n){j();var i=e(this);if("string"==typeof n)if("open"===n){var r,s=w?i.data("magnificPopup"):i[0].magnificPopup,o=parseInt(arguments[1],10)||0;s.items?r=s.items[o]:(r=i,s.delegate&&(r=r.find(s.delegate)),r=r.eq(o)),t._openClick({mfpEl:r},i,s)}else t.isOpen&&t[n].apply(t,Array.prototype.slice.call(arguments,1));else n=e.extend(!0,{},n),w?i.data("magnificPopup",n):i[0].magnificPopup=n,t.addGroup(i,n);return i};var L,S,$,O="inline",E=function(){$&&(S.after($.addClass(L)).detach(),$=null)};e.magnificPopup.registerModule(O,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(O),D(l+"."+O,function(){E()})},getInline:function(n,i){if(E(),n.src){var r=t.st.inline,s=e(n.src);if(s.length){var o=s[0].parentNode;o&&o.tagName&&(S||(L=r.hiddenClass,S=M(L),L="mfp-"+L),$=s.after(S).detach().removeClass(L)),t.updateStatus("ready")}else t.updateStatus("error",r.tNotFound),s=e("<div>");return n.inlineElement=s,s}return t.updateStatus("ready"),t._parseMarkup(i,{},n),i}}});var N,I="ajax",Y=function(){N&&i.removeClass(N)},R=function(){Y(),t.req&&t.req.abort()};e.magnificPopup.registerModule(I,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(I),N=t.st.ajax.cursor,D(l+"."+I,R),D("BeforeChange."+I,R)},getAjax:function(n){N&&i.addClass(N),t.updateStatus("loading");var r=e.extend({url:n.src,success:function(i,r,s){var o={data:i,xhr:s};T("ParseAjax",o),t.appendContent(e(o.data),I),n.finished=!0,Y(),t._setFocus(),setTimeout(function(){t.wrap.addClass(v)},16),t.updateStatus("ready"),T("AjaxContentAdded")},error:function(){Y(),n.finished=n.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",n.src))}},t.st.ajax.settings);return t.req=e.ajax(r),""}}});var P,A=function(n){if(n.data&&void 0!==n.data.title)return n.data.title;var i=t.st.image.titleSrc;if(i){if(e.isFunction(i))return i.call(t,n);if(n.el)return n.el.attr(i)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var e=t.st.image,n=".image";t.types.push("image"),D(h+n,function(){"image"===t.currItem.type&&e.cursor&&i.addClass(e.cursor)}),D(l+n,function(){e.cursor&&i.removeClass(e.cursor),x.off("resize"+g)}),D("Resize"+n,t.resizeImage),t.isLowIE&&D("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var n=0;t.isLowIE&&(n=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-n)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,P&&clearInterval(P),e.isCheckingImgSize=!1,T("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var n=0,i=e.img[0],r=function(s){P&&clearInterval(P),P=setInterval(function(){return i.naturalWidth>0?void t._onImageHasSize(e):(n>200&&clearInterval(P),n++,void(3===n?r(10):40===n?r(50):100===n&&r(500)))},s)};r(1)},getImage:function(n,i){var r=0,s=function(){n&&(n.img[0].complete?(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("ready")),n.hasSize=!0,n.loaded=!0,T("ImageLoadComplete")):(r++,200>r?setTimeout(s,100):o()))},o=function(){n&&(n.img.off(".mfploader"),n===t.currItem&&(t._onImageHasSize(n),t.updateStatus("error",a.tError.replace("%url%",n.src))),n.hasSize=!0,n.loaded=!0,n.loadError=!0)},a=t.st.image,l=i.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",n.img=e(c).on("load.mfploader",s).on("error.mfploader",o),c.src=n.src,l.is("img")&&(n.img=n.img.clone()),n.img[0].naturalWidth>0&&(n.hasSize=!0)}return t._parseMarkup(i,{title:A(n),img_replaceWith:n.img},n),t.resizeImage(),n.hasSize?(P&&clearInterval(P),n.loadError?(i.addClass("mfp-loading"),t.updateStatus("error",a.tError.replace("%url%",n.src))):(i.removeClass("mfp-loading"),t.updateStatus("ready")),i):(t.updateStatus("loading"),n.loading=!0,n.hasSize||(n.imgHidden=!0,i.addClass("mfp-loading"),t.findImageSize(n)),i)}}});var z,F=function(){return void 0===z&&(z=void 0!==document.createElement("p").style.MozTransform),z};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,n=t.st.zoom,i=".zoom";if(n.enabled&&t.supportsTransition){var r,s,o=n.duration,a=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+n.duration/1e3+"s "+n.easing,r={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},s="transition";return r["-webkit-"+s]=r["-moz-"+s]=r["-o-"+s]=r[s]=i,t.css(r),t},u=function(){t.content.css("visibility","visible")};D("BuildControls"+i,function(){if(t._allowZoom()){if(clearTimeout(r),t.content.css("visibility","hidden"),e=t._getItemToZoom(),!e)return void u();s=a(e),s.css(t._getOffset()),t.wrap.append(s),r=setTimeout(function(){s.css(t._getOffset(!0)),r=setTimeout(function(){u(),setTimeout(function(){s.remove(),e=s=null,T("ZoomAnimationEnded")},16)},o)},16)}}),D(c+i,function(){if(t._allowZoom()){if(clearTimeout(r),t.st.removalDelay=o,!e){if(e=t._getItemToZoom(),!e)return;s=a(e)}s.css(t._getOffset(!0)),t.wrap.append(s),t.content.css("visibility","hidden"),setTimeout(function(){s.css(t._getOffset())},16)}}),D(l+i,function(){t._allowZoom()&&(u(),s&&s.remove(),e=null)})}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return t.currItem.hasSize?t.currItem.img:!1},_getOffset:function(n){var i;i=n?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem);var r=i.offset(),s=parseInt(i.css("padding-top"),10),o=parseInt(i.css("padding-bottom"),10);r.top-=e(window).scrollTop()-s;var a={width:i.width(),height:(w?i.innerHeight():i[0].offsetHeight)-o-s};return F()?a["-moz-transform"]=a.transform="translate("+r.left+"px,"+r.top+"px)":(a.left=r.left,a.top=r.top),a}}});var H="iframe",U="//about:blank",B=function(e){if(t.currTemplate[H]){var n=t.currTemplate[H].find("iframe");n.length&&(e||(n[0].src=U),t.isIE8&&n.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(H,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(H),D("BeforeChange",function(e,t,n){t!==n&&(t===H?B():n===H&&B(!0))}),D(l+"."+H,function(){B()})},getIframe:function(n,i){var r=n.src,s=t.st.iframe;e.each(s.patterns,function(){return r.indexOf(this.index)>-1?(this.id&&(r="string"==typeof this.id?r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):this.id.call(this,r)),r=this.src.replace("%id%",r),!1):void 0});var o={};return s.srcAction&&(o[s.srcAction]=r),t._parseMarkup(i,o,n),t.updateStatus("ready"),i}}});var W=function(e){var n=t.items.length;return e>n-1?e-n:0>e?n+e:e},q=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=t.st.gallery,i=".mfp-gallery",s=Boolean(e.fn.mfpFastClick);return t.direction=!0,n&&n.enabled?(o+=" mfp-gallery",D(h+i,function(){n.navigateByImgClick&&t.wrap.on("click"+i,".mfp-img",function(){return t.items.length>1?(t.next(),!1):void 0}),r.on("keydown"+i,function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()})}),D("UpdateStatus"+i,function(e,n){n.text&&(n.text=q(n.text,t.currItem.index,t.items.length))}),D(p+i,function(e,i,r,s){var o=t.items.length;r.counter=o>1?q(n.tCounter,s.index,o):""}),D("BuildControls"+i,function(){if(t.items.length>1&&n.arrows&&!t.arrowLeft){var i=n.arrowMarkup,r=t.arrowLeft=e(i.replace(/%title%/gi,n.tPrev).replace(/%dir%/gi,"left")).addClass(y),o=t.arrowRight=e(i.replace(/%title%/gi,n.tNext).replace(/%dir%/gi,"right")).addClass(y),a=s?"mfpFastClick":"click";r[a](function(){t.prev()}),o[a](function(){t.next()}),t.isIE7&&(M("b",r[0],!1,!0),M("a",r[0],!1,!0),M("b",o[0],!1,!0),M("a",o[0],!1,!0)),t.container.append(r.add(o))}}),D(f+i,function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout(function(){t.preloadNearbyImages(),t._preloadTimeout=null},16)}),void D(l+i,function(){r.off(i),t.wrap.off("click"+i),t.arrowLeft&&s&&t.arrowLeft.add(t.arrowRight).destroyMfpFastClick(),t.arrowRight=t.arrowLeft=null})):!1},next:function(){t.direction=!0,t.index=W(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=W(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,n=t.st.gallery.preload,i=Math.min(n[0],t.items.length),r=Math.min(n[1],t.items.length);for(e=1;e<=(t.direction?r:i);e++)t._preloadItem(t.index+e);for(e=1;e<=(t.direction?i:r);e++)t._preloadItem(t.index-e)},_preloadItem:function(n){if(n=W(n),!t.items[n].preloaded){var i=t.items[n];i.parsed||(i=t.parseEl(n)),T("LazyLoad",i),"image"===i.type&&(i.img=e('<img class="mfp-img" />').on("load.mfploader",function(){i.hasSize=!0}).on("error.mfploader",function(){i.hasSize=!0,i.loadError=!0,T("LazyLoadError",i)}).attr("src",i.src)),i.preloaded=!0}}}});var V="retina";e.magnificPopup.registerModule(V,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,n=e.ratio;n=isNaN(n)?n():n,n>1&&(D("ImageHasSize."+V,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/n,width:"100%"})}),D("ElementParse."+V,function(t,i){i.src=e.replaceSrc(i,n)}))}}}}),function(){var t=1e3,n="ontouchstart"in window,i=function(){x.off("touchmove"+s+" touchend"+s)},r="mfpFastClick",s="."+r;e.fn.mfpFastClick=function(r){return e(this).each(function(){var o,a=e(this);if(n){var l,c,u,d,p,h;a.on("touchstart"+s,function(e){d=!1,h=1,p=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],c=p.clientX,u=p.clientY,x.on("touchmove"+s,function(e){p=e.originalEvent?e.originalEvent.touches:e.touches,h=p.length,p=p[0],(Math.abs(p.clientX-c)>10||Math.abs(p.clientY-u)>10)&&(d=!0,i())}).on("touchend"+s,function(e){i(),d||h>1||(o=!0,e.preventDefault(),clearTimeout(l),l=setTimeout(function(){o=!1},t),r())})})}a.on("click"+s,function(){o||r()})})},e.fn.destroyMfpFastClick=function(){e(this).off("touchstart"+s+" click"+s),n&&x.off("touchmove"+s+" touchend"+s)}}(),j()}(window.jQuery||window.Zepto)},function(e,t,n){(function(e){!function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(t){for(var n=e([0]),i=-1,r=this.length;++i<r&&(n.context=n[0]=this[i])&&t.call(n[0],i,n)!==!1;);return this}})}(e),function(e,t){"use strict";function n(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function i(e){function t(e){return z[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function r(e,t){for(var n=0,i=t.length;i>n;n+=1)if(o(e,t[n]))return n;return-1}function s(){var t=e(A);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function o(e,n){return e===n?!0:e===t||n===t?!1:null===e||null===n?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function a(t,n){var i,r,s;if(null===t||t.length<1)return[];for(i=t.split(n),r=0,s=i.length;s>r;r+=1)i[r]=e.trim(i[r]);return i}function l(e){return e.outerWidth(!1)-e.width()}function c(n){var i="keyup-change-value";n.on("keydown",function(){e.data(n,i)===t&&e.data(n,i,n.val())}),n.on("keyup",function(){var r=e.data(n,i);r!==t&&n.val()!==r&&(e.removeData(n,i),n.trigger("keyup-change"))})}function u(n){n.on("mousemove",function(n){var i=P;(i===t||i.x!==n.pageX||i.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function d(e,n,i){i=i||t;var r;return function(){var t=arguments;window.clearTimeout(r),r=window.setTimeout(function(){n.apply(i,t)},e)}}function p(e,t){var n=d(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){r(e.target,t.get())>=0&&n(e)})}function h(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],i=e.val().length;e.focus();var r=n.offsetWidth>0||n.offsetHeight>0;r&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(i,i):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},0)}function f(t){t=e(t)[0];var n=0,i=0;if("selectionStart"in t)n=t.selectionStart,i=t.selectionEnd-n;else if("selection"in document){t.focus();var r=document.selection.createRange();i=document.selection.createRange().text.length,r.moveStart("character",-t.value.length),n=r.text.length-i}return{offset:n,length:i}}function m(e){e.preventDefault(),e.stopPropagation()}function g(e){e.preventDefault(),e.stopImmediatePropagation()}function v(t){if(!I){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);I=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),I.attr("class","select2-sizer"),e("body").append(I)}return I.text(t.val()),I.width()}function b(t,n,i){var r,s,o=[];r=e.trim(t.attr("class")),r&&(r=""+r,e(r.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&o.push(this)})),r=e.trim(n.attr("class")),r&&(r=""+r,e(r.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(s=i(this),s&&o.push(s))})),t.attr("class",o.join(" "))}function y(e,t,n,r){var s=i(e.toUpperCase()).indexOf(i(t.toUpperCase())),o=t.length;return 0>s?void n.push(r(e)):(n.push(r(e.substring(0,s))),n.push("<span class='select2-match'>"),n.push(r(e.substring(s,s+o))),n.push("</span>"),void n.push(r(e.substring(s+o,e.length))))}function _(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function w(n){var i,r=null,s=n.quietMillis||100,o=n.url,a=this;return function(l){window.clearTimeout(i),i=window.setTimeout(function(){var i=n.data,s=o,c=n.transport||e.fn.select2.ajaxDefaults.transport,u={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},d=e.extend({},e.fn.select2.ajaxDefaults.params,u);i=i?i.call(a,l.term,l.page,l.context):null,s="function"==typeof s?s.call(a,l.term,l.page,l.context):s,r&&"function"==typeof r.abort&&r.abort(),n.params&&(e.isFunction(n.params)?e.extend(d,n.params.call(a)):e.extend(d,n.params)),e.extend(d,{url:s,dataType:n.dataType,data:i,success:function(e){var t=n.results(e,l.page,l);l.callback(t)},error:function(e,t,n){var i={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};l.callback(i)}}),r=c.call(a,d)},s)}}function x(t){var n,i,r=t,s=function(e){return""+e.text};e.isArray(r)&&(i=r,r={results:i}),e.isFunction(r)===!1&&(i=r,r=function(){return i});var o=r();return o.text&&(s=o.text,e.isFunction(s)||(n=o.text,s=function(e){return e[n]})),function(t){var n,i=t.term,o={results:[]};return""===i?void t.callback(r()):(n=function(r,o){var a,l;if(r=r[0],r.children){a={};for(l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);a.children=[],e(r.children).each2(function(e,t){n(t,a.children)}),(a.children.length||t.matcher(i,s(a),r))&&o.push(a)}else t.matcher(i,s(r),r)&&o.push(r)},e(r().results).each2(function(e,t){n(t,o.results)}),void t.callback(o))}}function D(n){var i=e.isFunction(n);return function(r){var s=r.term,o={results:[]},a=i?n(r):n;e.isArray(a)&&(e(a).each(function(){var e=this.text!==t,n=e?this.text:this;(""===s||r.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),r.callback(o))}}function M(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if("string"==typeof t)return!0;throw new Error(n+" must be a string, function, or falsy value")}function T(t,n){if(e.isFunction(t)){var i=Array.prototype.slice.call(arguments,2);return t.apply(n,i)}return t}function k(t){var n=0;return e.each(t,function(e,t){t.children?n+=k(t.children):n++}),n}function j(e,n,i,r){var s,a,l,c,u,d=e,p=!1;if(!r.createSearchChoice||!r.tokenSeparators||r.tokenSeparators.length<1)return t;for(;;){for(a=-1,l=0,c=r.tokenSeparators.length;c>l&&(u=r.tokenSeparators[l],a=e.indexOf(u),!(a>=0));l++);if(0>a)break;if(s=e.substring(0,a),e=e.substring(a+u.length),s.length>0&&(s=r.createSearchChoice.call(this,s,n),s!==t&&null!==s&&r.id(s)!==t&&null!==r.id(s))){for(p=!1,l=0,c=n.length;c>l;l++)if(o(r.id(s),r.id(n[l]))){p=!0;break}p||i(s)}}return d!==e?e:void 0}function C(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function L(t,n){var i=function(){};return i.prototype=new t,i.prototype.constructor=i,i.prototype.parent=t.prototype,i.prototype=e.extend(i.prototype,n),i}if(window.Select2===t){var S,$,O,E,N,I,Y,R,P={x:0,y:0},S={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){switch(e=e.which?e.which:e){case S.LEFT:case S.RIGHT:case S.UP:case S.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case S.SHIFT:case S.CTRL:case S.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e}},A="<div class='select2-measure-scrollbar'></div>",z={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};
Y=e(document),N=function(){var e=1;return function(){return e++}}(),$=L(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var i,r,o=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&null!==n.element.data("select2")&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+N()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(T(n.containerCss,this.opts.element)),this.container.addClass(T(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=i=this.container.find(o),this.search=r=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),u(this.results),this.dropdown.on("mousemove-filtered",o,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",o,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",o,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",o,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),p(80,this.results),this.dropdown.on("scroll-debounced",o,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&i.mousewheel(function(e,t,n,r){var s=i.scrollTop();r>0&&0>=s-r?(i.scrollTop(0),m(e)):0>r&&i.get(0).scrollHeight-i.scrollTop()+r<=i.height()&&(i.scrollTop(i.get(0).scrollHeight-i.height()),m(e))}),c(r),r.on("keyup-change input paste",this.bind(this.updateResults)),r.on("focus",function(){r.addClass("select2-focused")}),r.on("blur",function(){r.removeClass("select2-focused")}),this.dropdown.on("mouseup",o,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==n.maximumInputLength&&this.search.attr("maxlength",n.maximumInputLength);var a=n.element.prop("disabled");a===t&&(a=!1),this.enable(!a);var l=n.element.prop("readonly");l===t&&(l=!1),this.readonly(l),R=R||s(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){var e=this.opts.element,n=e.data("select2"),i=this;this.close(),e.length&&e[0].detachEvent&&e.each(function(){this.detachEvent("onpropertychange",i._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),C.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){return e.is("option")?{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:o(e.attr("locked"),"locked")||o(e.data("locked"),!0)}:e.is("optgroup")?{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}:void 0},prepareOpts:function(n){var i,r,s,l,c=this;if(i=n.element,"select"===i.get(0).tagName.toLowerCase()&&(this.select=r=n.element),r&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(i,r,s){var o,a=this.opts.id,l=this.liveRegion;(o=function(i,r,u){var d,p,h,f,m,g,v,b,y,_;i=n.sortResults(i,r,s);var w=[];for(d=0,p=i.length;p>d;d+=1)h=i[d],m=h.disabled===!0,f=!m&&a(h)!==t,g=h.children&&h.children.length>0,v=e("<li></li>"),v.addClass("select2-results-dept-"+u),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(h)),v.attr("role","presentation"),b=e(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+N()),b.attr("role","option"),_=n.formatResult(h,b,s,c.opts.escapeMarkup),_!==t&&(b.html(_),v.append(b)),g&&(y=e("<ul></ul>"),y.addClass("select2-result-sub"),o(h.children,y,u+1),v.append(y)),v.data("select2-data",h),w.push(v[0]);r.append(w),l.text(n.formatMatches(i.length))})(r,i,0)}},e.fn.select2.defaults,n),"function"!=typeof n.id&&(s=n.id,n.id=function(e){return e[s]}),e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}if(r?(n.query=this.bind(function(e){var n,r,s,o={results:[],more:!1},a=e.term;s=function(t,n){var i;t.is("option")?e.matcher(a,t.text(),t)&&n.push(c.optionToData(t)):t.is("optgroup")&&(i=c.optionToData(t),t.children().each2(function(e,t){s(t,i.children)}),i.children.length>0&&n.push(i))},n=i.children(),this.getPlaceholder()!==t&&n.length>0&&(r=this.getPlaceholderOption(),r&&(n=n.not(r))),n.each2(function(e,t){s(t,o.results)}),e.callback(o)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(l=n.element.data("ajax-url"),l&&l.length>0&&(n.ajax.url=l),n.query=w.call(n.element,n.ajax)):"data"in n?n.query=x(n.data):"tags"in n&&(n.query=D(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,i){var r=[];e(a(t.val(),n.separator)).each(function(){var t={id:this,text:this},i=n.tags;e.isFunction(i)&&(i=i()),e(i).each(function(){return o(this.id,t.id)?(t=this,!1):void 0}),r.push(t)}),i(r)}))),"function"!=typeof n.query)throw"query function not defined for Select2 "+n.element.attr("id");if("top"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if("bottom"===n.createSearchChoicePosition)n.createSearchChoicePosition=function(e,t){e.push(t)};else if("function"!=typeof n.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n,i=this.opts.element,r=this;i.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=i.prop("disabled");e===t&&(e=!1),this.enable(!e);var n=i.prop("readonly");n===t&&(n=!1),this.readonly(n),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass,this.opts.element)),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass,this.opts.element))}),i.length&&i[0].attachEvent&&i.each(function(){this.attachEvent("onpropertychange",r._sync)}),n=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,n!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new n(function(t){e.each(t,r._sync)}),this.propertyObserver.observe(i.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,n,i,r,s,o=this.dropdown,a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=o.outerHeight(!1),d=e(window),p=d.width(),h=d.height(),f=d.scrollLeft()+p,m=d.scrollTop()+h,g=a.top+l,v=a.left,b=m>=g+u,y=a.top-u>=d.scrollTop(),_=o.outerWidth(!1),w=f>=v+_,x=o.hasClass("select2-drop-above");x?(n=!0,!y&&b&&(i=!0,n=!1)):(n=!1,!b&&y&&(i=!0,n=!0)),i&&(o.hide(),a=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),u=o.outerHeight(!1),f=d.scrollLeft()+p,m=d.scrollTop()+h,g=a.top+l,v=a.left,_=o.outerWidth(!1),w=f>=v+_,o.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(s=e(".select2-results",o)[0],o.addClass("select2-drop-auto-width"),o.css("width",""),_=o.outerWidth(!1)+(s.scrollHeight===s.clientHeight?0:R.width),_>c?c=_:_=c,u=o.outerHeight(!1),w=f>=v+_):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),g-=t.top,v-=t.left),w||(v=a.left+this.container.outerWidth(!1)-_),r={left:v,width:c},n?(r.top=a.top-u,r.bottom="auto",this.container.addClass("select2-drop-above"),o.addClass("select2-drop-above")):(r.top=g,r.bottom="auto",this.container.removeClass("select2-drop-above"),o.removeClass("select2-drop-above")),r=e.extend(r,T(this.opts.dropdownCss,this.opts.element)),o.css(r)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),Y.on("mousemove.select2Event",function(e){P.x=e.pageX,P.y=e.pageY}),!0):!1},opening:function(){var t,i=this.containerEventName,r="scroll."+i,s="resize."+i,o="orientationchange."+i;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),t=e("#select2-drop-mask"),0==t.length&&(t=e(document.createElement("div")),t.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),t.hide(),t.appendTo(this.body),t.on("mousedown touchstart click",function(i){n(t);var r,s=e("#select2-drop");s.length>0&&(r=s.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),i.preventDefault(),i.stopPropagation())})),this.dropdown.prev()[0]!==t[0]&&this.dropdown.before(t),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),t.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var a=this;this.container.parents().add(window).each(function(){e(this).on(s+" "+r+" "+o,function(){a.opened()&&a.positionDropdown()})})},close:function(){if(this.opened()){var t=this.containerEventName,n="scroll."+t,i="resize."+t,r="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(i).off(r)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),Y.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t,n,i,r,s,o,a,l,c=this.results;if(n=this.highlight(),!(0>n)){if(0==n)return void c.scrollTop(0);t=this.findHighlightableChoices().find(".select2-result-label"),i=e(t[n]),l=(i.offset()||{}).top||0,r=l+i.outerHeight(!0),n===t.length-1&&(a=c.find("li.select2-more-results"),a.length>0&&(r=a.offset().top+a.outerHeight(!0))),s=c.offset().top+c.outerHeight(!0),r>s&&c.scrollTop(c.scrollTop()+(r-s)),o=l-c.offset().top,0>o&&"none"!=i.css("display")&&c.scrollTop(c.scrollTop()+o)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){for(var n=this.findHighlightableChoices(),i=this.highlight();i>-1&&i<n.length;){i+=t;var r=e(n[i]);if(r.hasClass("select2-result-selectable")&&!r.hasClass("select2-disabled")&&!r.hasClass("select2-selected")){this.highlight(i);break}}},highlight:function(t){var n,i,s=this.findHighlightableChoices();return 0===arguments.length?r(s.filter(".select2-highlighted")[0],s.get()):(t>=s.length&&(t=s.length-1),0>t&&(t=0),this.removeHighlight(),n=e(s[t]),n.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",n.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(n.text()),i=n.data("select2-data"),void(i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var i=this.findHighlightableChoices();this.highlight(i.index(n))}else 0==n.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var e,t=this.results,n=t.find("li.select2-more-results"),i=this.resultsPage+1,r=this,s=this.search.val(),o=this.context;0!==n.length&&(e=n.offset().top-t.offset().top-t.height(),e<=this.opts.loadMorePadding&&(n.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:i,context:o,matcher:this.opts.matcher,callback:this.bind(function(e){r.opened()&&(r.opts.populateResults.call(this,t,e.results,{term:s,page:i,context:o}),r.postprocessResults(e,!1,!1),e.more===!0?(n.detach().appendTo(t).text(T(r.opts.formatLoadMore,r.opts.element,i+1)),window.setTimeout(function(){r.loadMoreIfNeeded()},10)):n.remove(),r.positionDropdown(),r.resultsPage=i,r.context=e.context,this.opts.element.trigger({type:"select2-loaded",items:e}))})})))},tokenize:function(){},updateResults:function(n){function i(){c.removeClass("select2-active"),p.positionDropdown(),p.liveRegion.text(u.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?u.text():p.opts.formatMatches(u.find(".select2-result-selectable").length))}function r(e){u.html(e),i()}var s,a,l,c=this.search,u=this.results,d=this.opts,p=this,h=c.val(),f=e.data(this.container,"select2-last-term");if((n===!0||!f||!o(h,f))&&(e.data(this.container,"select2-last-term",h),n===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(s=this.data(),e.isArray(s)&&s.length>=m&&M(d.formatSelectionTooBig,"formatSelectionTooBig")))return void r("<li class='select2-selection-limit'>"+T(d.formatSelectionTooBig,d.element,m)+"</li>");if(c.val().length<d.minimumInputLength)return r(M(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+T(d.formatInputTooShort,d.element,c.val(),d.minimumInputLength)+"</li>":""),void(n&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void r(M(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+T(d.formatInputTooLong,d.element,c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&r("<li class='select2-searching'>"+T(d.formatSearching,d.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&null!=a&&c.val(a),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(s){var a;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(s.hasError!==t&&M(d.formatAjaxError,"formatAjaxError"))return void r("<li class='select2-ajax-error'>"+T(d.formatAjaxError,d.element,s.jqXHR,s.textStatus,s.errorThrown)+"</li>");if(this.context=s.context===t?null:s.context,this.opts.createSearchChoice&&""!==c.val()&&(a=this.opts.createSearchChoice.call(p,c.val(),s.results),a!==t&&null!==a&&p.id(a)!==t&&null!==p.id(a)&&0===e(s.results).filter(function(){return o(p.id(this),p.id(a))}).length&&this.opts.createSearchChoicePosition(s.results,a)),0===s.results.length&&M(d.formatNoMatches,"formatNoMatches"))return void r("<li class='select2-no-results'>"+T(d.formatNoMatches,d.element,c.val())+"</li>");u.empty(),p.opts.populateResults.call(this,u,s.results,{term:c.val(),page:this.resultsPage,context:null}),s.more===!0&&M(d.formatLoadMore,"formatLoadMore")&&(u.append("<li class='select2-more-results'>"+d.escapeMarkup(T(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){p.loadMoreIfNeeded()},10)),this.postprocessResults(s,n),i(),this.opts.element.trigger({type:"select2-loaded",items:s})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){h(this.search)},selectHighlighted:function(e){if(this._touchMoved)return void this.clearTouchMoved();var t=this.highlight(),n=this.results.find(".select2-highlighted"),i=n.closest(".select2-result").data("select2-data");i?(this.highlight(t),this.onSelect(i,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return"first"===this.opts.placeholderOption&&n||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===e.trim(n.text())&&""===n.val())return n}},initContainerWidth:function(){function n(){var n,i,r,s,o,a;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(n=this.opts.element.attr("style"),n!==t)for(i=n.split(";"),s=0,o=i.length;o>s;s+=1)if(a=i[s].replace(/\s/g,""),r=a.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==r&&r.length>=1)return r[1];return"resolve"===this.opts.width?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var i=n.call(this);null!==i&&this.container.css("width",i)}}),O=L($,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,i,r;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(i=n.createTextRange(),i.collapse(!1),i.select()):n.setSelectionRange&&(r=this.search.val().length,n.setSelectionRange(r,r))),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"selection","focusser")},initContainer:function(){var t,i,r=this.container,s=this.dropdown,o=N();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=t=r.find(".select2-choice"),this.focusser=r.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+o),this.focusser.attr("aria-labelledby","select2-chosen-"+o),this.results.attr("id","select2-results-"+o),this.search.attr("aria-owns","select2-results-"+o),this.focusser.attr("id","s2id_autogen"+o),i=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(i.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||i.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&229!=e.keyCode){if(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)return void m(e);switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),void m(e);case S.ENTER:return this.selectHighlighted(),void m(e);case S.TAB:return void this.selectHighlighted({noFocus:!0});case S.ESC:return this.cancel(e),void m(e)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()&&e.which!==S.TAB&&!S.isControl(e)&&!S.isFunctionKey(e)&&e.which!==S.ESC){if(this.opts.openOnEnter===!1&&e.which===S.ENTER)return void m(e);if(e.which==S.DOWN||e.which==S.UP||e.which==S.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;return this.open(),void m(e)}return e.which==S.DELETE||e.which==S.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(e)):void 0}})),c(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){if(e.stopPropagation(),this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){this.isInterfaceEnabled()&&(this.clear(),g(e),this.close(),this.selection.focus())})),t.on("mousedown touchstart",this.bind(function(i){n(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),m(i)})),s.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){m(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var i=e.Event("select2-clearing");if(this.opts.element.trigger(i),i.isDefaultPrevented())return;var r=this.getPlaceholderOption();this.opts.element.val(r?r.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.setPlaceholder(),e.nextSearchTerm=e.opts.nextSearchTerm(n,e.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===t||null===this.opts.element.val()},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(i))}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=n.val(),s=null;t.query({matcher:function(e,n,i){var a=o(r,t.id(i));return a&&(s=i),a},callback:e.isFunction(i)?function(){i(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var i=0,r=this;if(this.findHighlightableChoices().each2(function(e,t){return o(r.id(t.data("select2-data")),r.opts.element.val())?(i=e,!1):void 0}),n!==!1&&this.highlight(t===!0&&i>=0?i:0),t===!0){var s=this.opts.minimumResultsForSearch;s>=0&&this.showSearch(k(e.results)>=s)}},showSearch:function(t){this.showSearchInput!==t&&(this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t))},onSelect:function(e,t){if(this.triggerSelect(e)){var n=this.opts.element.val(),i=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),t&&t.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),o(n,this.id(e))||this.triggerChange({added:e,removed:i})}},updateSelection:function(e){var n,i,r=this.selection.find(".select2-chosen");this.selection.data("select2-data",e),r.empty(),null!==e&&(n=this.opts.formatSelection(e,r,this.opts.escapeMarkup)),n!==t&&r.append(n),i=this.opts.formatSelectionCssClass(e,r),i!==t&&r.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,i=null,r=this,s=this.data();if(0===arguments.length)return this.opts.element.val();if(e=arguments[0],arguments.length>1&&(n=arguments[1]),this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return i=r.optionToData(t),!1}),this.updateSelection(i),this.setPlaceholder(),n&&this.triggerChange({added:i,removed:s});else{if(!e&&0!==e)return void this.clear(n);if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){r.opts.element.val(e?r.id(e):""),r.updateSelection(e),r.setPlaceholder(),n&&r.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,i=!1;return 0===arguments.length?(n=this.selection.data("select2-data"),n==t&&(n=null),n):(arguments.length>1&&(i=arguments[1]),void(e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),i&&this.triggerChange({added:e,removed:n})):this.clear(i)))}}),E=L($,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return"select"===t.element.get(0).tagName.toLowerCase()?t.initSelection=function(e,t){var i=[];
e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){i.push(n.optionToData(t))}),t(i)}:"data"in t&&(t.initSelection=t.initSelection||function(n,i){var r=a(n.val(),t.separator),s=[];t.query({matcher:function(n,i,a){var l=e.grep(r,function(e){return o(e,t.id(a))}).length;return l&&s.push(a),l},callback:e.isFunction(i)?function(){for(var e=[],n=0;n<r.length;n++)for(var a=r[n],l=0;l<s.length;l++){var c=s[l];if(o(a,t.id(c))){e.push(c),s.splice(l,1);break}}i(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e)))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),C.call(this,"searchContainer","selection")},initContainer:function(){var t,n=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=t=this.container.find(n);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+N()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(this.isInterfaceEnabled()){++this.keydowns;var n=t.find(".select2-search-choice-focus"),i=n.prev(".select2-search-choice:not(.select2-locked)"),r=n.next(".select2-search-choice:not(.select2-locked)"),s=f(this.search);if(n.length&&(e.which==S.LEFT||e.which==S.RIGHT||e.which==S.BACKSPACE||e.which==S.DELETE||e.which==S.ENTER)){var o=n;return e.which==S.LEFT&&i.length?o=i:e.which==S.RIGHT?o=r.length?r:null:e.which===S.BACKSPACE?this.unselect(n.first())&&(this.search.width(10),o=i.length?i:r):e.which==S.DELETE?this.unselect(n.first())&&(this.search.width(10),o=r.length?r:null):e.which==S.ENTER&&(o=null),this.selectChoice(o),m(e),void(o&&o.length||this.open())}if((e.which===S.BACKSPACE&&1==this.keydowns||e.which==S.LEFT)&&0==s.offset&&!s.length)return this.selectChoice(t.find(".select2-search-choice:not(.select2-locked)").last()),void m(e);if(this.selectChoice(null),this.opened())switch(e.which){case S.UP:case S.DOWN:return this.moveHighlight(e.which===S.UP?-1:1),void m(e);case S.ENTER:return this.selectHighlighted(),void m(e);case S.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case S.ESC:return this.cancel(e),void m(e)}if(e.which!==S.TAB&&!S.isControl(e)&&!S.isFunctionKey(e)&&e.which!==S.BACKSPACE&&e.which!==S.ESC){if(e.which===S.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===S.PAGE_UP||e.which===S.PAGE_DOWN)&&m(e),e.which===S.ENTER&&m(e)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",n,this.bind(function(t){this.isInterfaceEnabled()&&(e(t.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()))})),this.container.on("focus",n,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var e=this;this.opts.initSelection.call(null,this.opts.element,function(n){n!==t&&null!==n&&(e.updateSelection(n),e.close(),e.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],i=[],s=this;e(t).each(function(){r(s.id(this),n)<0&&(n.push(s.id(this)),i.push(this))}),t=i,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){s.addSelectedChoice(this)}),s.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),null!=e&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){this.triggerSelect(e)&&""!==e.text&&(this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),n&&n.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var i,r,s=!n.locked,o=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),a=e("<li class='select2-search-choice select2-locked'><div></div></li>"),l=s?o:a,c=this.id(n),u=this.getVal();i=this.opts.formatSelection(n,l.find("div"),this.opts.escapeMarkup),i!=t&&l.find("div").replaceWith("<div>"+i+"</div>"),r=this.opts.formatSelectionCssClass(n,l.find("div")),r!=t&&l.addClass(r),s&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(t){this.isInterfaceEnabled()&&(this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(t),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",n),l.insertBefore(this.searchContainer),u.push(c),this.setVal(u)},unselect:function(t){var n,i,s=this.getVal();if(t=t.closest(".select2-search-choice"),0===t.length)throw"Invalid argument: "+t+". Must be .select2-search-choice";if(n=t.data("select2-data")){var o=e.Event("select2-removing");if(o.val=this.id(n),o.choice=n,this.opts.element.trigger(o),o.isDefaultPrevented())return!1;for(;(i=r(this.id(n),s))>=0;)s.splice(i,1),this.setVal(s),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}),!0}},postprocessResults:function(e,t,n){var i=this.getVal(),s=this.results.find(".select2-result"),o=this.results.find(".select2-result-with-children"),a=this;s.each2(function(e,t){var n=a.id(t.data("select2-data"));r(n,i)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),o.each2(function(e,t){t.is(".select2-result-selectable")||0!==t.find(".select2-result-selectable:not(.select2-selected)").length||t.addClass("select2-selected")}),-1==this.highlight()&&n!==!1&&a.highlight(0),!this.opts.createSearchChoice&&!s.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&0===this.results.find(".select2-no-results").length)&&M(a.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+T(a.opts.formatNoMatches,a.opts.element,a.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var e,t,n,i,r,s=l(this.search);e=v(this.search)+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,r=n-(t-i)-s,e>r&&(r=n-s),40>r&&(r=n-s),0>=r&&(r=e),this.search.width(Math.floor(r))},getVal:function(){var e;return this.select?(e=this.select.val(),null===e?[]:e):(e=this.opts.element.val(),a(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){r(this,n)<0&&n.push(this)}),this.opts.element.val(0===n.length?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){for(var t=t.slice(0),e=e.slice(0),n=0;n<t.length;n++)for(var i=0;i<e.length;i++)o(this.opts.id(t[n]),this.opts.id(e[i]))&&(t.splice(n,1),n>0&&n--,e.splice(i,1),i--);return{added:t,removed:e}},val:function(n,i){var r,s=this;if(0===arguments.length)return this.getVal();if(r=this.data(),r.length||(r=[]),!n&&0!==n)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(i&&this.triggerChange({added:this.data(),removed:r}));if(this.setVal(n),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),i&&this.triggerChange(this.buildChangeDetails(r,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),i&&s.triggerChange(s.buildChangeDetails(r,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var i,r,s=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get():(r=this.data(),t||(t=[]),i=e.map(t,function(e){return s.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(r,this.data())),void 0)}}),e.fn.select2=function(){var n,i,s,o,a,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],u=["opened","isFocused","container","dropdown"],d=["val","data"],p={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])n=0===l.length?{}:e.extend({},l[0]),n.element=e(this),"select"===n.element.get(0).tagName.toLowerCase()?a=n.element.prop("multiple"):(a=n.multiple||!1,"tags"in n&&(n.multiple=a=!0)),i=a?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(n);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(r(l[0],c)<0)throw"Unknown method: "+l[0];if(o=t,i=e(this).data("select2"),i===t)return;if(s=l[0],"container"===s?o=i.container:"dropdown"===s?o=i.dropdown:(p[s]&&(s=p[s]),o=i[s].apply(i,l.slice(1))),r(l[0],u)>=0||r(l[0],d)>=0&&1==l.length)return!1}}),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,i){var r=[];return y(e.text,n.term,r,i),r.join("")},formatSelection:function(e,n,i){return e?i(e.text):t},sortResults:function(e){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return i(""+t).toUpperCase().indexOf(i(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:j,escapeMarkup:_,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t&&e.opts.minimumResultsForSearch<0?!1:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return 1===e?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(1==n?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(1==n?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(1==e?"":"s")},formatLoadMore:function(){return"Loading more results"},formatSearching:function(){return"Searching"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:w,local:x,tags:D},util:{debounce:d,markMatch:y,escapeMarkup:_,stripDiacritics:i},"class":{"abstract":$,single:O,multi:E}}}}(e)}).call(t,n(6))},function(e,t,n){(function(e){+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.affix"),s="object"==typeof t&&t;r||i.data("bs.affix",r=new n(this,s)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.1",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>r?"top":!1;if("bottom"==this.affixed)return null!=n?r+this.unpin<=s.top?!1:"bottom":e-i>=r+o?!1:"bottom";var a=null==this.affixed,l=a?r:s.top,c=a?o:t;return null!=n&&n>=l?"top":null!=i&&l+c>=e-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,r=i.top,s=i.bottom,o=e("body").height();"object"!=typeof i&&(s=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof s&&(s=i.bottom(this.$element));var a=this.getState(o,t,r,s);if(this.affixed!=a){null!=this.unpin&&this.$element.css("top","");var l="affix"+(a?"-"+a:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=a,this.unpin="bottom"==a?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==a&&this.$element.offset({top:o-t-s})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(e),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof t&&r[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.1",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var r=e(this),s=r.attr("data-target");s||(s=r.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=e(s);t&&t.preventDefault(),o.length||(o=r.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(e),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.button"),s="object"==typeof t&&t;r||i.data("bs.button",r=new n(this,s)),"toggle"==t?r.toggle():t&&r.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.1",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",s=i.data();t+="Text",null==s.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy(function(){i[r](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(e),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),s=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;r||i.data("bs.carousel",r=new n(this,s)),"number"==typeof t?r.to(t):o?r[o]():s.interval&&r.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.1",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n="prev"==e?-1:1,i=this.getItemIndex(t),r=(i+n)%this.$items.length;return this.$items.eq(r)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var r=this.$element.find(".item.active"),s=i||this.getItemForDirection(t,r),o=this.interval,a="next"==t?"left":"right",l="next"==t?"first":"last",c=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[l]()}if(s.hasClass("active"))return this.sliding=!1;var u=s[0],d=e.Event("slide.bs.carousel",{relatedTarget:u,direction:a});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:u,direction:a});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,r.addClass(a),s.addClass(a),r.one("bsTransitionEnd",function(){s.removeClass([t,a].join(" ")).addClass("active"),r.removeClass(["active",a].join(" ")),c.sliding=!1,setTimeout(function(){c.$element.trigger(h)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(h)),o&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(n){var i,r=e(this),s=e(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),r.data()),a=r.attr("data-slide-to");a&&(o.interval=!1),t.call(s,o),a&&s.data("bs.carousel").to(a),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(e),+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),s=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!r&&s.toggle&&"show"==t&&(s.toggle=!1),r||n.data("bs.collapse",r=new i(this,s)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e(this.options.trigger).filter('[href="#'+t.id+'"], [data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.1",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),t||r.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return a.call(this);var l=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(a,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[o](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var r=e(i);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=e(this);r.attr("data-target")||i.preventDefault();var s=t(r),o=s.data("bs.collapse"),a=o?"toggle":e.extend({},r.data(),{trigger:this});n.call(s,a)})}(e),+function(e){"use strict";function t(t){t&&3===t.which||(e(r).remove(),e(s).each(function(){var i=e(this),r=n(i),s={relatedTarget:this};r.hasClass("open")&&(r.trigger(t=e.Event("hide.bs.dropdown",s)),t.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",s)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new o(this)),"string"==typeof t&&i[t].call(n)})}var r=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.1",o.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var s=n(r),o=s.hasClass("open");if(t(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var a={relatedTarget:this};if(s.trigger(i=e.Event("show.bs.dropdown",a)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),o=r.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&r.find(s).trigger("focus"),i.trigger("click");var a=" li:not(.divider):visible a",l=r.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var c=l.index(t.target);38==t.which&&c>0&&c--,40==t.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var a=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=a,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',o.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',o.prototype.keydown)}(e),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof t&&r[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(s),t.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var a=e(i);this.activate(t.closest("li"),n),this.activate(a,a.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(t,i,r){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu")&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var o=i.find("> .active"),a=r&&e.support.transition&&(o.length&&o.hasClass("fade")||!!i.find("> .fade").length);o.length&&a?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),o.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(e),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0
});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(e),+function(e){"use strict";function t(n,i){var r=e.proxy(this.process,this);this.$body=e("body"),this.$scrollElement=e(e(n).is("body")?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),s="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,s)),"string"==typeof n&&r[n]()})}t.VERSION="3.3.1",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t="offset",n=0;e.isWindow(this.$scrollElement[0])||(t="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=e(this),r=i.data("target")||i.attr("href"),s=/^#./.test(r)&&e(r);return s&&s.length&&s.is(":visible")&&[[s[t]().top+n,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)o!=s[e]&&t>=r[e]&&(!r[e+1]||t<=r[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(e),+function(e){"use strict";function t(t,i){return this.each(function(){var r=e(this),s=r.data("bs.modal"),o=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);s||r.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](i):o.show&&s.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.1",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.options.backdrop&&i.adjustBackdrop(),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});r?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&r;if(this.$backdrop=e('<div class="modal-backdrop '+r+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",e.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),r=i.attr("href"),s=e(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},s.data(),i.data());i.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(s,o,this)})}(e),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),s="object"==typeof t&&t,o=s&&s.selector;(r||"destroy"!=t)&&(o?(r||i.data("bs.tooltip",r={}),r[o]||(r[o]=new n(this,s))):r||i.data("bs.tooltip",r=new n(this,s)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),s=r.length;s--;){var o=r[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var a="hover"==o?"mouseenter":"focusin",l="hover"==o?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var r=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(a);c&&(a=a.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var u=this.getPosition(),d=s[0].offsetWidth,p=s[0].offsetHeight;if(c){var h=a,f=this.options.container?e(this.options.container):this.$element.parent(),m=this.getPosition(f);a="bottom"==a&&u.bottom+p>m.bottom?"top":"top"==a&&u.top-p<m.top?"bottom":"right"==a&&u.right+d>m.width?"left":"left"==a&&u.left-d<m.left?"right":a,s.removeClass(h).addClass(a)}var g=this.getCalculatedOffset(a,u,d,p);this.applyPlacement(g,a);var v=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,s=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(a)&&(a=0),t.top=t.top+o,t.left=t.left+a,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=s&&(t.top=t.top+s-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),p=d?2*u.left-r+l:2*u.top-s+c,h=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=r.hoverState&&s.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,s=this.tip(),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var s=i?{top:0,left:0}:t.offset(),o={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},a=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,o,a,s)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var a=t.top-s-o.scroll,l=t.top+s-o.scroll+i;a<o.top?r.top=o.top-a:l>o.top+o.height&&(r.top=o.top+o.height-l)}else{var c=t.left-s,u=t.left+s+n;c<o.left?r.left=o.left-c:u>o.width&&(r.left=o.left+o.width-u)}return r},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(e),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.popover"),s="object"==typeof t&&t,o=s&&s.selector;(r||"destroy"!=t)&&(o?(r||i.data("bs.popover",r={}),r[o]||(r[o]=new n(this,s))):r||i.data("bs.popover",r=new n(this,s)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.1",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=e(this.options.template)),this.$tip};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(e)}).call(t,n(6))},function(e,t,n){{var i=n(13),r=i.Route,s=(i.DefaultRoute,i.Routes),o=i.Redirect,a=n(247),l=n(252),c=n(99),u=n(270),d=n(101),p=n(102),h=n(267),f=(n(100),n(72));f.ListingDeleteConfirmation}e.exports=s(null,r({handler:a},r({path:"home",name:"home",handler:l}),r({path:"user-management",name:"user-management",handler:u},r({path:"my-listings",name:"my-listings",handler:d}),r({path:"recent-activity",name:"recent-activity",handler:p})),r({name:"edit",path:"edit/?:listingId?",handler:c}),r({path:"mall-management",name:"mall-management",handler:h},r({path:"categories",name:"categories",handler:h.Categories}),r({path:"contact-types",name:"contact-types",handler:h.ContactTypes}),r({path:"intents",name:"intents",handler:h.Intents}),r({path:"organizations",name:"organizations",handler:h.Organizations}),r({path:"stewards",name:"stewards",handler:h.Stewards})),o({to:"home"})))},function(e,t,n){"use strict";var i=n(2),r=(n(4),n(7)),s=n(60),o=n(57),a=o.fetchLibrary,l=n(278),c=(n(99),n(100)),u=n(72),d=u.ListingDeleteConfirmation,p=i.createClass({displayName:"App",mixins:[s],render:function(){return i.DOM.div({id:"App"},this.props.activeRouteHandler(Object.assign({},r.pick(this.state,"system","currentUser"))),this.renderModal())},renderModal:function(){var e=this.props.query,t=e.listing,n=e.tab,i=e.action;if(t){if(n){var r="preview"===i;return l({listingId:t,tab:n,preview:r,system:this.state.system,currentUser:this.state.currentUser})}if("feedback"===i)return c({listing:t});if("delete"===i)return d({listing:t})}},componentWillMount:function(){a()}});e.exports=p},function(e,t,n){"use strict";var i=n(2),r=n(13),s=r.Navigation,o=n(48),a=i.createClass({displayName:"FeaturedListingTile",mixins:[s,o],render:function(){var e=this.props.listing,t=e.imageXlargeUrl,n=this.makeHref(this.getActiveRoutePath(),null,{listing:e.id,action:"view",tab:"overview"});return this.transferPropsTo(i.DOM.li({className:"listing listing-tile listing-tile-featured"},i.DOM.a({href:n},i.DOM.img({src:t}))))}});e.exports=a},function(e,t,n){"use strict";var i=n(2),r=n(70),s=n(248);e.exports=i.createClass({displayName:"exports",propTypes:{options:i.PropTypes.object},getDefaultProps:function(){return{options:{auto:!1,scroll:{easing:"quadratic",items:1,duration:1e3},width:"100%",items:{visible:3,start:-1}}}},render:function(){var e=this.props.listings.map(function(e){return s({key:e.id,listing:e})});return i.DOM.section(null,i.DOM.h4(null,"Featured"),r({ref:"carousel",className:"featured-listings-carousel",options:this.props.options},e))}})},function(e,t,n){"use strict";var i=n(2),r=n(13),s=(r.Link,r.Navigation),o=r.CurrentPath,a=n(48),l=(n(7),n(59)),c=n(62),u=n(21),d=u.launch,p=u.addToLibrary,h=u.removeFromLibrary,f=i.createClass({displayName:"ListingTile",mixins:[s,o,a],render:function(){var e=this.props.listing,t=e.title,n=e.descriptionShort&&e.descriptionShort.substr(0,140),r=(e.launchUrl,e.imageLargeUrl),s=(e.totalVotes,e.avgRate),o=e.company,a=this.makeHref(this.getActiveRoutePath(),null,{listing:e.id,action:"view",tab:"overview"});return this.transferPropsTo(i.DOM.li({className:"listing listing-tile"},i.DOM.a({href:a},i.DOM.img({src:r}),i.DOM.section({className:"slide-up"},i.DOM.p({className:"title"},t),l({className:"icon-rating",viewOnly:!0,currentRating:s,toggledClassName:"fa fa-star",untoggledClassName:"fa fa-star-o",halfClassName:"fa fa-star-half-o"}),o&&i.DOM.span({className:"company"},o),i.DOM.p({className:"description"},n),this.renderActions()))))},renderActions:function(){var e=i.addons.classSet({"btn btn-default":!0,active:c.isListingInLibrary(this.props.listing.uuid)});return i.DOM.div({className:"btn-group actions"},i.DOM.button({type:"button",className:"btn btn-default",onClick:this.launch},i.DOM.i({className:"fa fa-external-link"})),i.DOM.button({type:"button",className:e,onClick:this.addToLibrary},i.DOM.i({className:"fa fa-bookmark"})))},launch:function(){d(this.props.listing)},addToLibrary:function(e){e.preventDefault(),e.stopPropagation(),c.isListingInLibrary(this.props.listing.uuid)?h(this.props.listing):p(this.props.listing)}});e.exports=f},function(e,t,n){"use strict";var i=n(2),r=n(7),s=i.createClass({displayName:"Sidebar",propTypes:{isSearching:i.PropTypes.bool.isRequired,config:i.PropTypes.shape({categories:i.PropTypes.array.isRequired,types:i.PropTypes.array.isRequired,organizations:i.PropTypes.array.isRequired}),onGoHome:i.PropTypes.func.isRequired,onFilterChange:i.PropTypes.func.isRequired},getInitialState:function(){return{selectedFilters:this.state&&this.state.selectedFilters||{}}},render:function(){var e=this.props.isSearching||this.areFiltersApplied(),t=i.addons.classSet({active:!e,"facet-group-item":!0});return this.transferPropsTo(i.DOM.aside({className:"sidebar"},i.DOM.ul({className:"list-unstyled facet-group"},i.DOM.li({className:t,onClick:this.clearFilters},"Home")),i.DOM.ul({className:"list-unstyled facet-group"},i.DOM.li(null,i.DOM.span(null,"Categories"),i.DOM.ul({className:"list-unstyled"},this.renderFacets(this.props.system.categories,"categories"))),i.DOM.li(null,i.DOM.span(null,"Types"),i.DOM.ul({className:"list-unstyled"},this.renderFacets(this.props.system.types,"type"))),i.DOM.li(null,i.DOM.span(null,"Organizations"),i.DOM.ul({className:"list-unstyled"},this.renderFacets(this.props.system.organizations,"agency"))))))},renderFacets:function(e,t){var n=this;return e.map(function(e){var s=i.addons.classSet({active:r.contains(n.state.selectedFilters[t],e.title),"facet-group-item":!0});return i.DOM.li({className:s,onClick:n.handleFilterToggle.bind(null,t,e)},e.title)})},areFiltersApplied:function(){var e=!1;return r.forOwn(this.state.selectedFilters,function(t){e=e||t.length}),e},clearFilters:function(){var e=this.state.selectedFilters;r.forOwn(e,function(t,n){e[n].length=0}),this.setState({selectedFilters:e}),this.props.onGoHome()},handleFilterToggle:function(e,t){var n=this.state.selectedFilters[e]||(this.state.selectedFilters[e]=[]),i=t.title;r.contains(n,i)?this.state.selectedFilters[e]=r.without(n,i):n.push(i),this.setState({selectedFilters:this.state.selectedFilters}),this.props.onFilterChange()}});e.exports=s},function(e,t,n){"use strict";var i=n(2),r=n(4),s=n(7),o=n(21),a=n(58),l=n(251),c=n(250),u=n(249),d=n(70),p=n(282),h=i.createClass({displayName:"Discovery",mixins:[r.ListenerMixin],getInitialState:function(){return{featured:p.getFeatured(),newArrivals:p.getNewArrivals(),mostPopular:p.getMostPopular(),searchResults:p.getSearchResults()}},componentWillMount:function(){this.listenTo(p,this.onStoreChange),o.fetchFeatured(),o.fetchNewArrivals(),o.fetchMostPopular()},render:function(){var e=this.isSearching(),t=this.isBrowsing();return i.DOM.div(null,a(null,i.DOM.form({className:"navbar-form navbar-left",role:"search"},i.DOM.div({className:"form-group"},i.DOM.i({className:"fa fa-search"}),i.DOM.input({ref:"search",type:"text",className:"form-control",placeholder:"Search...",value:this.state.query,onChange:this.onSearchInputChange})))),i.DOM.div({id:"discovery"},l({ref:"sidebar",isSearching:e,system:this.props.system,onGoHome:this.reset,onFilterChange:this.search}),i.DOM.section(null,t?this.renderSearchResults():[this.renderFeaturedListings(),this.renderNewArrivals(),this.renderMostPopular()]),i.DOM.div({className:"clearfix"})),this.props.activeRouteHandler())},onStoreChange:function(){this.setState(this.getInitialState())},onSearchInputChange:function(){this.setState({queryString:this.refs.search.getDOMNode().value}),this.search()},isSearching:function(){return!!this.state.queryString},isBrowsing:function(){var e=this.refs.sidebar;return this.isSearching()||e&&e.areFiltersApplied()},reset:function(){this.setState({queryString:""}),this.search()},search:function(){o.search(s.assign({queryString:this.refs.search.getDOMNode().value},this.refs.sidebar.state.selectedFilters))},renderFeaturedListings:function(){return this.state.featured.length?u({listings:this.state.featured}):void 0},renderNewArrivals:function(){return this.state.newArrivals.length?i.DOM.section({className:"Discovery__NewArrivals"},i.DOM.h4(null,"New Arrivals"),d({className:"new-arrival-listings"},this._renderListings(this.state.newArrivals))):void 0},renderMostPopular:function(){return this.state.mostPopular.length?i.DOM.section({className:"Discovery__MostPopular"},i.DOM.h4(null,"Most Popular"),d({className:"most-popular-listings"},this._renderListings(this.state.mostPopular))):void 0},renderSearchResults:function(){return i.DOM.section({className:"Discovery__SearchResults"},i.DOM.h4(null,"Search Results"),i.DOM.ul({className:"list-unstyled listings-search-results"},this._renderListings(this.state.searchResults)))},_renderListings:function(e){return e.map(function(e){return c({key:e.id,listing:e})})}});e.exports=h},function(e,t,n){"use strict";var i=n(2),r=i.addons,s=r.classSet,o=n(7),a=i.createClass({displayName:"ListInput",render:function(){var e=this.props.value||[],t=e.map(function(e,t){var n=o.pick(this.props,["requestChange","messages","errors","warnings","forceError"]),i=Object.assign(n,{value:e,removeHandler:this.onDelete.bind(null,t),key:t,path:this.props.path.concat(t)});return this.props.itemForm(Object.assign({},i))},this),n=s({"input-optional":this.props.optional});return i.DOM.div(null,i.DOM.div({className:this.getClasses()},i.DOM.label({className:n},this.props.label),i.DOM.p({className:"small"},this.props.description),i.DOM.p({className:"help-block small"},this.props.help)),i.DOM.div(null,t),i.DOM.button({className:"btn btn-sm btn-primary",onClick:this.handleNew},"Add"))},onDelete:function(e,t){t.preventDefault();var n=this.props.value;n.splice(e,1),this.props.setter(n)},getClasses:function(){return s({"form-group":!0,"has-error":this.showError()})},showError:function(){return this.props.error&&this.props.forceError},handleNew:function(e){e.preventDefault();var t=this.props.value||[];t.push({}),this.props.setter(t)}});e.exports=a},function(e,t,n){"use strict";var i=n(2),r=n(45),s=n(71),o=i.createClass({displayName:"Select2Input",mixins:[r,s],renderInput:function(){return i.DOM.input(null)},getSelect2Options:function(){return{data:this.props.options||[],multiple:!!this.props.multiple}}});e.exports=o},function(e,t,n){"use strict";var i=n(2),r=n(45),s=n(71),o=i.createClass({displayName:"Select2TagInput",mixins:[r,s],renderInput:function(){return i.DOM.input({type:"text"})},getSelect2Options:function(){return{locked:this.props.locked,tags:[],tokenSeparators:[","," "]}}});e.exports=o},function(e,t,n){"use strict";var i=n(2),r=n(45),s=i.createClass({displayName:"TextAreaInput",mixins:[r],renderInput:function(){return i.DOM.textarea({rows:this.props.rows||"3"})},getValue:function(e){return e||""}});e.exports=s},function(e,t,n){"use strict";var i=n(2),r=n(45),s=i.createClass({displayName:"TextInput",mixins:[r],renderInput:function(){return i.DOM.input({type:"text"})}});e.exports=s},function(e){"use strict";var t={getFormComponentProps:function(e){var t=this.props.messages||{},n=(this.props.path||[]).concat(e).join("."),i=n.replace(/\.\d\./,".");return{setter:this.props.requestChange.bind(null,(this.props.path||[]).concat(e)),value:this.props.value[e],label:t["label."+i],description:t["description."+i],"data-placeholder":t["placeholder."+i],help:t["help."+i],error:(this.props.errors||{})[n],warning:(this.props.warnings||{})[n],forceError:this.props.forceError,id:"inputElement."+n}},getSubFormProps:function(e){return Object.assign(this.getFormComponentProps(e),{errors:this.props.errors,messages:this.props.messages,warnings:this.props.warnings,requestChange:this.props.requestChange,path:(this.props.path||[]).concat(e)})}};e.exports=t},function(e,t,n){e.exports={InputMixin:n(45),ListInput:n(253),Select2Input:n(254),Select2Mixin:n(71),Select2TagInput:n(255),TextAreaInput:n(256),TextInput:n(257),ValidatedFormMixin:n(258)}},function(e,t,n){"use strict";var i=n(2),r="./images/appsmall-logo.png",s=i.createClass({displayName:"Logo",render:function(){return i.DOM.div({id:"logo-container"},i.DOM.a({href:"#home",id:"appsmall-logo-link"},i.DOM.img({src:r})))}});e.exports=s},function(e,t,n){"use strict";var i=n(2),r=n(60),s=i.createClass({displayName:"UserMenu",mixins:[r],render:function(){return i.DOM.div({id:"user-menu",className:"dropdown navbar-right"},i.DOM.a({className:"btn dropdown-toggle","data-toggle":"dropdown",href:"#"},i.DOM.i({className:"fa fa-bars"})),i.DOM.ul({className:"dropdown-menu",role:"menu"},i.DOM.li(null,i.DOM.a({href:"#edit"},i.DOM.i({className:"fa fa-plus"})," Create Listing")),i.DOM.li(null,i.DOM.a({href:"#user-management/my-listings"},i.DOM.i({className:"fa fa-list"})," My Listings")),this.state.currentUser.isAdmin&&i.DOM.li(null,i.DOM.a({href:"#mall-management/categories"},i.DOM.i({className:"fa fa-wrench"})," AppsMall Management")),i.DOM.li(null,i.DOM.a({href:"../hud-ui/logout.html"},i.DOM.i({className:"fa fa-sign-out"})," Logout"))))}});e.exports=s},function(e,t,n){"use strict";var i=n(2),r=n(34),s=r,o=s.Str,a=s.struct,l=s.subtype,c=s.maybe,u=n(46),d=a({title:l(o,function(e){return e.length<=50}),description:c(l(o,function(e){return e.length<=255}))}),p=i.createClass({displayName:"Categories",getDefaultProps:function(){return{title:"Category",url:"https://www.owfgoss.org/ng/dev/mp/api/category",Schema:d,getDisplayName:function(e){return e.title},form:{fields:{title:{help:"Max. 50 characters"},description:{type:"textarea",help:"Max. 255 characters"}}},grid:{columns:[{field:"title",caption:"Title",size:"50%"},{field:"description",caption:"Description",size:"50%"}]}}},render:function(){return this.transferPropsTo(u(null))}});e.exports=p},function(e,t,n){"use strict";var i=n(2),r=n(34),s=r,o=s.Str,a=s.struct,l=s.subtype,c=(s.maybe,s.Bool),u=n(46),d=a({title:l(o,function(e){return e.length<=50}),required:c}),p=i.createClass({displayName:"ContactTypes",getDefaultProps:function(){return{title:"Contact Type",url:"https://www.owfgoss.org/ng/dev/mp/api/contactType",Schema:d,getDisplayName:function(e){return e.title
},form:{fields:{title:{help:"Max. 50 characters"}}},grid:{columns:[{field:"title",caption:"Title",size:"50%"},{field:"required",caption:"Required",size:"50%"}]}}},render:function(){return this.transferPropsTo(u(null))}});e.exports=p},function(e,t,n){"use strict";var i=n(2),r=n(34),s=r,o=s.Str,a=s.struct,l=s.subtype,c=s.maybe,u=n(9),d=u.URL_REGEX,p=n(46),h=a({label:c(l(o,function(e){return e.length<=255})),action:l(o,function(e){return e.length<=64}),type:l(o,function(e){return e.length<=129}),icon:c(l(o,function(e){return e.length<=2083&&d.test(e)}))}),f=i.createClass({displayName:"Intents",getDefaultProps:function(){return{title:"Intent",url:"https://www.owfgoss.org/ng/dev/mp/api/intent",Schema:h,getDisplayName:function(e){return e.action+"/"+e.type},form:function(e){return{fields:{label:{help:"Max. 255 characters"},action:{help:"Max. 64 characters",disabled:e?!0:!1},type:{disabled:e?!0:!1,help:"Max. 64 characters/Max. 64 characters. Ex: application/json, application/custom-type, etc."},icon:{help:"Max. 2083 characters"}}}},grid:{columns:[{field:"label",caption:"Label",size:"10%"},{field:"action",caption:"Action",size:"45%"},{field:"type",caption:"Type",size:"45%"},{field:"icon",caption:"Icon",size:"50px",render:function(e){return e.icon?'<img style="width:24px;height:24px;" src='+e.icon+" >":""}}]}}},render:function(){return this.transferPropsTo(p(null))}});e.exports=f},function(e,t,n){"use strict";var i=n(2),r=n(34),s=r,o=s.Str,a=s.struct,l=s.subtype,c=n(46),u=a({title:l(o,function(e){return e.length<=255}),shortName:l(o,function(e){return e.length<=8})}),d=i.createClass({displayName:"Categories",getDefaultProps:function(){return{title:"Organization",url:"https://www.owfgoss.org/ng/dev/mp/api/agency",Schema:u,getDisplayName:function(e){return e.title},form:{fields:{title:{help:"Max. 255 characters"},shortName:{label:"Acronym or Abbreviation",help:"Max. 8 characters"}}},grid:{columns:[{field:"title",caption:"Title",size:"50%"},{field:"shortName",caption:"Acronym",size:"50%"}]}}},render:function(){return this.transferPropsTo(c(null))}});e.exports=d},function(e,t,n){"use strict";var i=n(2),r=n(34),s=r,o=s.Str,a=s.struct,l=s.subtype,c=(s.maybe,s.enums),u=s.list,d=n(9),p=(d.URL_REGEX,n(46)),h=i.createClass({displayName:"Stewards",mixins:[n(60)],getDefaultProps:function(){return{title:"Steward",url:"https://www.owfgoss.org/ng/dev/mp/api/profile?role=ORG_STEWARD",getDisplayName:function(e){return e.displayName},form:{fields:{username:{disabled:!0},displayName:{disabled:!0},stewardedOrganizations:{disableOrder:!0}}},grid:{columns:[{field:"displayName",caption:"Display Name",size:"34%"},{field:"username",caption:"Username",size:"33%"},{field:"stewardedOrganizations",caption:"Steward Organizations",size:"33%"}],show:{toolbar:!0,toolbarAdd:!1,toolbarEdit:!0,toolbarDelete:!1,toolbarSearch:!1,toolbarReload:!1,toolbarColumns:!1}}}},getSchema:function(){var e=this.state.system.organizations.map(function(e){return e.title});return a({displayName:l(o,function(e){return e.length<=255}),stewardedOrganizations:u(c.of(e))})},render:function(){return this.transferPropsTo(p({Schema:this.getSchema()}))}});e.exports=h},function(e,t,n){"use strict";var i=n(2),r=n(13),s=r.Navigation,o=n(73),a=n(280),l=n(74),c=n(58),u=i.createClass({displayName:"MallManagement",mixins:[o,s,a],statics:{willTransitionFrom:function(){l.loadSystem()}},getDefaultProps:function(){return{tabs:[{to:"categories",name:"Categories"},{to:"contact-types",name:"Contact Types"},{to:"intents",name:"Intents"},{to:"organizations",name:"Organizations"},{to:"stewards",name:"Stewards"}]}},render:function(){return i.DOM.div({className:"MallManagement"},c(null),i.DOM.div({className:"MallManagement__body"},i.DOM.h1(null,"AppsMall Management"),i.DOM.div({className:"MallManagement__TabContainer"},this.renderTabs(this.props.tabs),i.DOM.div({className:"tab-content"},this.props.activeRouteHandler(null)))))}});e.exports=u,e.exports.Categories=n(262),e.exports.ContactTypes=n(263),e.exports.Organizations=n(265),e.exports.Intents=n(264),e.exports.Stewards=n(266)},function(e,t,n){"use strict";var i=n(2),r=n(1),s=n(13),o=s.Link,a=s.Navigation,l=(s.CurrentPath,n(48)),c=i.createClass({displayName:"ActionMenu",mixins:[a,l],render:function(){var e,t=this.props.listing,n=this.getActiveRoutePath(),r=this.makeHref(n,null,{listing:t.id,action:"view",tab:"overview"}),s=(this.makeHref(n,null,{listing:t.id,action:"edit"}),this.makeHref(n,null,{listing:t.id,action:"delete"})),a=this.makeHref(n,null,{listing:t.id,action:"feedback"}),l={listingId:t.id},c=(i.DOM.li(null,i.DOM.a({href:"review"},"Review")),i.DOM.li(null,o({to:"edit",params:l},"Edit"))),u=i.DOM.li(null,i.DOM.a({href:r},"Preview")),d=i.DOM.li(null,i.DOM.a({href:s},"Delete")),p=i.DOM.li(null,i.DOM.a({href:r},"View")),h=i.DOM.li(null,i.DOM.a({href:"disable"},"Disable")),f=i.DOM.li(null,i.DOM.a({href:a},"Read Feedback")),m=t.approvalStatus;switch(m){case"APPROVED":e=[c,p,h,d];break;case"PENDING":e=[c,u,d];break;case"REJECTED":e=[c,f,u,d];break;case"DRAFT":default:e=[c,u,d]}return i.DOM.label({className:"MyListingTile__actionMenu"},i.DOM.input({type:"checkbox"}),i.DOM.span({className:"MyListingTile__actionMenuButton"}),i.DOM.ul(null,e))}}),u=i.createClass({displayName:"ListingStatus",render:function(){return i.DOM.span({className:"MyListingTile__approvalStatus"})}}),d=i.createClass({displayName:"ApprovalDate",render:function(){var e=this.props.listing.approvalDate,t=r(e).format("MM/DD/YY");return i.DOM.span({className:"MyListingTile__approvalDate"},t)}}),p=i.createClass({displayName:"InfoBar",render:function(){var e=this.props.listing;return i.DOM.h5({className:"MyListingTile__infoBar"},i.DOM.span({className:"title"},e.title),u({listing:e}),d({listing:e}))}});e.exports=i.createClass({displayName:"exports",mixins:[a,l],render:function(){var e=this.props.listing,t=this.makeHref(this.getActiveRoutePath(),null,{listing:e.id,action:"view",tab:"overview"}),n=e.approvalStatus,r=i.addons.classSet({draft:"IN_PROGRESS"===n,pending:"PENDING"===n,"needs-action":"REJECTED"===n,published:"APPROVED"===n,MyListingTile:!0});return i.DOM.li({className:r},c({listing:e}),i.DOM.a({href:t},i.DOM.img({className:"MyListingTile__img",src:e.imageLargeUrl})),p({listing:e}))}})},function(e,t,n){"use strict";var i=n(2),r=(n(4),n(241)),s=i.createClass({displayName:"MyListingsSidebar",handleChange:function(e){this.props.onFilterChanged(e.target.value)},render:function(){var e=this.props.listings.reduce(function(e,t){return e[t.approvalStatus]++,e},{APPROVED:0,REJECTED:0,PENDING:0,IN_PROGRESS:0});return i.DOM.form({className:"MyListings__approvalStatusFilter"},i.DOM.h3(null,"Filter By State"),r({name:"approval-status",value:this.props.value,onChange:this.handleChange},i.DOM.input({id:"my-listings-filter-all",type:"radio",value:"all"}),i.DOM.label({htmlFor:"my-listings-filter-all",className:"label-all"},"All",i.DOM.strong({className:"count"},this.props.listings.length)),i.DOM.input({id:"my-listings-filter-published",type:"radio",value:"published"}),i.DOM.label({htmlFor:"my-listings-filter-published",className:"label-published"},"Published",i.DOM.strong({className:"count"},e.APPROVED)),i.DOM.input({id:"my-listings-filter-needs-action",type:"radio",value:"needs-action"}),i.DOM.label({htmlFor:"my-listings-filter-needs-action",className:"label-needs-action"},"Needs action",i.DOM.strong({className:"count"},e.REJECTED)),i.DOM.input({id:"my-listings-filter-pending",type:"radio",value:"pending"}),i.DOM.label({htmlFor:"my-listings-filter-pending",className:"label-pending"},"Pending",i.DOM.strong({className:"count"},e.PENDING)),i.DOM.input({id:"my-listings-filter-draft",type:"radio",value:"draft"}),i.DOM.label({htmlFor:"my-listings-filter-draft",className:"label-draft"},"Draft",i.DOM.strong({className:"count"},e.IN_PROGRESS))))}});e.exports=s},function(e,t,n){"use strict";var i=n(2),r=n(73),s=n(58),o=i.createClass({displayName:"ListingManagement",mixins:[r],getDefaultProps:function(){return{tabs:[{to:"recent-activity",name:"Recent Activity"},{to:"my-listings",name:"My Listings"}]}},render:function(){var e=this.props.activeRouteHandler();return i.DOM.div({className:"ListingManagement"},s(null),i.DOM.div({className:"ListingManagement__body"},i.DOM.h1(null,"Listing Management"),i.DOM.div({className:"ListingManagement__TabContainer"},this.renderTabs(this.props.tabs),i.DOM.div({className:"tab-content"},e))))}});e.exports=o,e.exports.MyListings=n(101),e.exports.RecentActivity=n(102)},function(e,t,n){"use strict";var i=n(2),r=n(272),s=n(21),o=s.fetchChangeLogs,a=(s.save,s.reject),l=s.enable,c=s.disable,u=s.approve,d=n(9).approvalStatus,p=n(9),h=p.UserRole,f=i.createClass({displayName:"EnabledControl",propTypes:{listing:i.PropTypes.object},render:function(){var e=this.props.listing,t=e.isEnabled;return i.DOM.section(null,i.DOM.h5(null,t?"Enabled":"Disabled"),i.DOM.hr(null),i.DOM.p(null,"This listing is ",t?"":"not"," visible to users"),i.DOM.label({className:"switch"},"Enabled:",i.DOM.input({type:"checkbox",ref:"checkbox",className:"ios brand-success",checked:t,onChange:t?c.bind(null,e):l.bind(null,e)}),i.DOM.div({className:"track"},i.DOM.div({className:"knob"}))))}}),m=i.createClass({displayName:"AdministrationTab",propTypes:{listing:i.PropTypes.object.isRequired},getInitialState:function(){return{editingRejection:!1}},componentWillReceiveProps:function(e){this.props.listing.id!==e.listing.id&&o(e.listing.id)},componentWillMount:function(){this.props.listing.id&&o(this.props.listing.id)},render:function(){return i.DOM.div({className:"tab-pane active Quickview__Changelog row"},this.renderStatus(),i.DOM.div({className:"col-md-8 col-right"},i.DOM.section(null,i.DOM.h5(null,"Listing Changes"),i.DOM.hr(null),r({changeLogs:this.props.listing.changeLogs,showListingName:!1}))))},renderStatus:function(){var e,t,n=this.props.listing,r=d[n.approvalStatus],s=r,o=h[this.props.currentUser.highestRole]>=h.ADMIN;switch(r){case"Published":e=f({listing:this.props.listing}),t="label-published";break;case"Pending":s+=", "+n.agency,e=o?this.renderReviewSection():"",t="label-pending";break;case"Returned to Owner":t="label-needs-action",e="";break;case"Draft":t="label-draft",e=""}return i.DOM.div({className:"col-md-4 col-left"},i.DOM.section(null,i.DOM.h5(null,"Listing Status"),i.DOM.hr(null),i.DOM.p({className:t},s)),e)},renderReviewSection:function(){{var e=this.state.editingRejection;this.props.listing}return e?i.DOM.section(null,i.DOM.h5(null,"Return to Owner Feedback"),i.DOM.hr(null),i.DOM.p(null,"Please provide feedback for the listing owner about what they should do to make this listing ready for publication"),i.DOM.textarea({ref:"justification"}),i.DOM.button({type:"button",className:"btn",onClick:this.cancelRejection},"Cancel"),i.DOM.button({type:"button",className:"btn btn-warning",onClick:this.returnToOwner},"Return to Owner")):i.DOM.section(null,i.DOM.h5(null,"Review Listing"),i.DOM.hr(null),i.DOM.button({type:"button",className:"btn btn-success",onClick:this.approve},"Approve"),i.DOM.button({type:"button",className:"btn btn-warning",onClick:this.editRejection},"Return to Owner"))},editRejection:function(e){e.preventDefault(),this.setState({editingRejection:!0})},returnToOwner:function(e){e.preventDefault();var t=this.refs.justification.getDOMNode().value;a(this.props.listing.id,t),this.setState({editingRejection:!1})},cancelRejection:function(e){e.preventDefault(),this.setState({editingRejection:!1})},approve:function(e){e.preventDefault(),u(this.props.listing)}});e.exports=m},function(e,t,n){(function(t){"use strict";var i=n(2),r=n(9).listingActions,s=n(284),o=n(106),a=n(9).listingFieldName,l=i.createClass({displayName:"ChangeLogs",propTypes:{changeLogs:i.PropTypes.array,showListingName:i.PropTypes.bool},getDefaultProps:function(){return{changeLogs:[],showListingName:!0}},render:function(){return i.DOM.ul({className:"list-unstyled RecentActivity"},this.renderChangeLogs())},renderChangeLogs:function(){var e=this;return this.props.changeLogs.map(function(t,n){var r=s(t.activityDate),o=e.getListingChange(t,n);return[i.DOM.li(null,i.DOM.div({className:"row"},i.DOM.div({className:"col-md-3"},i.DOM.em(null,r)),i.DOM.div({className:"col-md-9"},o))),i.DOM.br(null)]})},getListingChange:function(e,t){var n=e.action.toLowerCase(),i=e.author.displayName,s=this.props.showListingName?e.serviceItem.title:"the listing";switch(n){case r.MODIFIED:i=this.renderModifiedLog(e,t,s);break;case r.ADD_RELATED_TO_ITEM:i+=" added "+s+" as a requirement to "+this.getRelatedItemsAsString(e);break;case r.REMOVE_RELATED_TO_ITEM:i+=" removed "+s+" as a requirement to "+this.getRelatedItemsAsString(e);break;case r.ADD_RELATED_ITEMS:i+=" added "+this.getRelatedItemsAsString(e)+" as a requirement to "+s;break;case r.REMOVE_RELATED_ITEMS:i+=" removed "+this.getRelatedItemsAsString(e)+" as a requirement to "+s;break;case r.OUTSIDE:case r.INSIDE:i+=i+=" set "+s+" to "+n;break;case r.REJECTED:i=this.renderRejectedLog(e,t,s);break;case r.APPROVED:case r.SUBMITTED:case r.ENABLED:case r.DISABLED:case r.CREATED:i+=" "+n+" "+s;break;case r.TAG_CREATED:i+=" added tag "+e.changeDetails[0].newValue+" to "+s;break;case r.TAG_DELETED:i+=" removed tag "+e.changeDetails[0].newValue+" from "+s;break;case r.REVIEW_EDITED:i+=" edited "+e.changeDetails[0].fieldName+" in "+s;break;case r.REVIEW_DELETED:i+=" removed "+e.changeDetails[0].newValue+"'s review from "+s;break;case r.LOCAL_SCORECARD_QUESTION_UPDATED:i+=" updated local scorecard question in "+s;break;case r.EMS_INCLUDED:case r.CLOUD_HOST_INCLUDED:case r.SECURITY_SERVICES_INCLUDED:case r.SCALE_INCLUDED:case r.LICENSE_FREE_INCLUDED:case r.CLOUD_STORAGE_INCLUDED:case r.BROWSER_INCLUDED:i+=" included "+e.action.description.split(" Included")[0]+" in "+s;break;case r.EMS_NOT_INCLUDED:case r.CLOUD_HOST_NOT_INCLUDED:case r.SECURITY_SERVICES_NOT_INCLUDED:case r.SCALE_NOT_INCLUDED:case r.LICENSE_FREE_NOT_INCLUDED:case r.CLOUD_STORAGE_NOT_INCLUDED:case r.BROWSER_NOT_INCLUDED:i+=" did not include "+e.action.description.split(" Not Included")[0]+" in "+s}return i},renderModifiedLog:function(e,t,n){var r=[],s=[];if(e.changeDetails.forEach(function(t,n){var o=a[t.fieldName];r[n]=n===e.changeDetails.length-1&&0!==n?"and "+o:o,s[n]=i.DOM.li(null,o," changed from",i.DOM.span({className:"OldValue"},t.oldValue),"to",i.DOM.span({className:"NewValue"},t.newValue))}),r.length){r=r.join(", ");var l=o();return this.props.showListingName&&(r+=" in "+n),[i.DOM.div(null,e.author.displayName," modified ",r),i.DOM.a({href:"javascript:;","data-toggle":"collapse","data-target":"#"+l,onClick:this.toggleIcon},i.DOM.i({className:"fa fa-plus"})," Changes"),i.DOM.ul({id:l,className:"collapse list-unstyled ListingActivity__Changes"},s)]}return e.author.displayName+" modified "+n},renderRejectedLog:function(e,t,n){var r="Details: "+e.rejectionDescription,s=o();return[i.DOM.div(null,e.author.displayName," rejected ",n),i.DOM.a({href:"javascript:;","data-toggle":"collapse","data-target":"#"+s,onClick:this.toggleIcon},i.DOM.i({className:"fa fa-plus"})," Feedback"),i.DOM.ul({id:s,className:"collapse list-unstyled ListingActivity__Changes"},i.DOM.li(null,r))]},getRelatedItemsAsString:function(e){return e.relatedItems.map(function(t,n){return n===e.relatedItems.length-1&&0!==n?"and "+t.title:t.title}).join(", ")},toggleIcon:function(e){t(e.currentTarget).children("i").toggleClass("fa-minus fa-plus")}});e.exports=l}).call(t,n(6))},function(e,t,n){"use strict";var i=n(2),r=n(103),s=i.createClass({displayName:"DetailsTab",propTypes:{listing:i.PropTypes.object},render:function(){var e=this.props.listing.whatIsNew,t=this.props.listing.agency,n=this.props.listing.type,s=this.props.listing.launchUrl,o=this.props.listing.editedDate,a=this.props.listing.releaseDate,l=this.props.listing.categories.join(", "),c=this.props.listing.tags.join(", ");return i.DOM.div({className:"tab-pane active quickview-details row"},i.DOM.div({className:"col-md-6 col-left"},i.DOM.section(null,i.DOM.h5(null,"Whats New"),i.DOM.hr(null),e?i.DOM.p(null,e):r(null)),i.DOM.section(null,i.DOM.h5(null,"Ownership Information"),i.DOM.hr(null),i.DOM.label(null,"Owner(s):"),this.renderOwners(),i.DOM.br(null),i.DOM.label(null,"Associated Organization"),i.DOM.p({className:"col-md-offset-1"},t),this.renderGovSponser())),i.DOM.div({className:"col-md-6 col-right"},i.DOM.section(null,i.DOM.h5(null,"Listing Details"),i.DOM.hr(null),i.DOM.p(null,i.DOM.label(null,"Type:"),i.DOM.span(null," ",n)),i.DOM.p(null,i.DOM.label(null,"URL:"),i.DOM.span(null," ",s)),i.DOM.p(null,i.DOM.label(null,"Categories:"),i.DOM.span(null," ",l?l:r({inline:!0}))),i.DOM.p(null,i.DOM.label(null,"Tags:"),i.DOM.span(null," ",c?c:r({inline:!0}))),i.DOM.p(null,i.DOM.label(null,"Last Updated:"),i.DOM.span(null," ",o)),i.DOM.p(null,i.DOM.label(null,"Original Release Date:"),i.DOM.span(null," ",a?a:r({inline:!0})))),this.renderIntents()))},renderOwners:function(){var e=this.props.listing.owners;return e.map(function(e){return i.DOM.span({className:"listing-owner"}," ",e.displayName)})},renderIntents:function(){var e=this.props.listing.intents,t=this.props.listing.intents.map(function(e){var t=e.split("/");return i.DOM.p(null,i.DOM.label(null,t[2],": "),i.DOM.span(null," ",t[0]+"/"+t[1]))});return i.DOM.section(null,i.DOM.h5(null,"Ozone Properties"),i.DOM.hr(null),i.DOM.label(null,"Intents:"),i.DOM.div({className:"col-md-offset-1"},e.length?t:r(null)))},renderGovSponser:function(){return this.props.listing.contacts.map(function(e){return e.type.indexOf("Government Sponser")>=0?[i.DOM.label(null,"Government Sponser "),i.DOM.div({className:"col-md-offset-1"},i.DOM.p(null,i.DOM.label(null,"Name:"),i.DOM.span(null," ",e.name)),i.DOM.p(null,i.DOM.label(null,"Email:"),i.DOM.span(null," ",e.email)),i.DOM.p(null,i.DOM.label(null,"Unsecure Phone:"),i.DOM.span(null," ",e.unsecurePhone)),i.DOM.p(null,i.DOM.label(null,"Secure Phone:"),i.DOM.span(null," ",e.securePhone)))]:void 0})}});e.exports=s},function(e,t,n){"use strict";var i=n(2),r=n(59),s=n(62),o=n(21),a=o.launch,l=o.addToLibrary,c=o.removeFromLibrary,u=n(9),d=u.UserRole,p=i.createClass({displayName:"QuickviewHeader",propTypes:{listing:i.PropTypes.object,onCancel:i.PropTypes.func.isRequired},render:function(){{var e=this.props.listing,t=e.title,n=e.avgRate,o=e.imageMediumUrl;s.isListingInLibrary(e.uuid)}return i.DOM.div({className:"quickview-header"},i.DOM.div({className:"quickview-header-info"},i.DOM.button({type:"button",className:"close","aria-hidden":"true",onClick:this.props.onCancel},""),i.DOM.img({className:"listing-icon",src:o,"data-fallback":"/store/images/types/3"}),i.DOM.h3({className:"listing-title",title:t},t),r({className:"icon-rating",viewOnly:!0,currentRating:n,toggledClassName:"fa fa-star",untoggledClassName:"fa fa-star-o",halfClassName:"fa fa-star-half-o"})),!this.props.preview&&this.renderActions())},renderActions:function(){var e=this.props.currentUser,t=this.props.listing.owners.some(function(t){return t.username===e.username}),n=d[e.highestRole]>=d.ADMIN,r=n||t,o=i.addons.classSet({"btn btn-default":!0,active:s.isListingInLibrary(this.props.listing.uuid)});return i.DOM.div({className:"btn-group quickview-header-actions"},i.DOM.button({type:"button",className:"btn btn-default",onClick:this.launch},i.DOM.i({className:"fa fa-external-link"})),i.DOM.button({type:"button",className:o,onClick:this.addToLibrary},i.DOM.i({className:"fa fa-bookmark"})),r&&i.DOM.button({type:"button",className:"btn btn-primary",onClick:this.props.onEdit},i.DOM.i({className:"fa fa-edit"})))},launch:function(){a(this.props.listing)},addToLibrary:function(e){e.preventDefault(),e.stopPropagation(),s.isListingInLibrary(this.props.listing.uuid)?c(this.props.listing):l(this.props.listing)}});e.exports=p},function(e,t,n){(function(t){"use strict";n(6),n(243);var i=n(2),r=n(70),s=i.createClass({displayName:"OverviewTab",propTypes:{shown:i.PropTypes.bool,listing:i.PropTypes.object},getDefaultProps:function(){return{shown:!1}},render:function(){var e=this.props.listing.description||"No description provided!",t=i.addons.classSet({"text-muted":!this.props.listing.description});return i.DOM.div({className:"tab-pane active row quickview-overview"},this.renderScreenshots(),i.DOM.div({className:"col-md-4"},i.DOM.p({className:t},e)))},renderScreenshots:function(){var e=this,t=this.props.shown,n=this.props.listing.screenshots;if(!n.length)return i.DOM.p({className:"text-muted col-md-8"},"No screenshots provided!");var s=n.map(function(t,n){return i.DOM.img({src:t.smallImageUrl,onClick:e.showLargeScreenshots.bind(e,n)})});return r({autoInit:t,className:"col-md-8"},s)},showLargeScreenshots:function(e){var n=this.props.listing.screenshots.map(function(e){return{src:e.largeImageUrl||e.smallImageUrl}});t.magnificPopup.open({type:"image",gallery:{enabled:!0},items:n},e)}});e.exports=s}).call(t,n(6))},function(e,t,n){"use strict";var i=n(2),r=n(103),s=n(7),o=i.createClass({displayName:"ResourcesTab",propTypes:{listing:i.PropTypes.object},render:function(){return i.DOM.div({className:"tab-pane active quickview-resources row"},i.DOM.div({className:"col-md-6 col-left"},i.DOM.section({className:"documentation"},i.DOM.h5(null,"Documentation"),i.DOM.hr(null),this.renderUserGuide(),this.renderApiDoc()),i.DOM.section({className:"resources"},i.DOM.h5(null,"Other Resources"),i.DOM.hr(null),this.renderOtherResources())),i.DOM.div({className:"col-md-6 col-right"},i.DOM.section({className:"tpoc"},i.DOM.h5(null,"Technical Support Contact Information"),i.DOM.hr(null),this.renderTechSuppot())))},renderUserGuide:function(){var e=s.find(this.props.listing.docUrls,{name:"User Manual"});return e?i.DOM.p(null,i.DOM.a({target:"_blank",href:e.url},e.name)):r({text:"User guide unavailable"})},renderApiDoc:function(){var e=s.find(this.props.listing.docUrls,{name:"API Documentation"});return e?i.DOM.p(null,i.DOM.a({target:"_blank",href:e.url},e.name)):r({text:"API documentation unavailable"})},renderOtherResources:function(){var e=s.compact(this.props.listing.docUrls.map(function(e){return"User Manual"!==e.name&&"API Documentation"!==e.name?i.DOM.p(null,i.DOM.a({target:"_blank",href:e.url},e.name)):void 0}));return e.length?e:r({text:"None available"})},renderTechSuppot:function(){var e=this.props.listing.contacts.map(function(e){return e.type.indexOf("Technical Support")>-1?e:void 0});return s.compact(e),e.length?e.map(function(e,t){return i.DOM.div(null,i.DOM.p(null,i.DOM.label(null,"Technical Support Point of Contact ",t+1)),i.DOM.div({className:"col-md-offset-1"},i.DOM.p(null,i.DOM.label(null,"Name:"),i.DOM.span(null," ",e.name)),i.DOM.p(null,i.DOM.label(null,"Email:"),i.DOM.span(null," ",e.email)),i.DOM.p(null,i.DOM.label(null,"Unsecure Phone:"),i.DOM.span(null," ",e.unsecurePhone)),i.DOM.p(null,i.DOM.label(null,"Secure Phone:"),i.DOM.span(null," ",e.securePhone))))}):r({text:"None available"})}});e.exports=o},function(e,t,n){"use strict";var i=n(2),r=n(59),s={rows:[{date:"2014-08-25T15:57:31Z",displayName:"Test Admin 1",id:3,serviceItemRateStats:{avgRate:4,totalRate1:0,totalRate2:0,totalRate3:0,totalRate4:1,totalRate5:0,totalVotes:1},text:"I really like this listing. Super fast and responsive.",userId:2,userRate:5,username:"AMLtestadmin"}],success:!0,totalCount:1},o=i.createClass({displayName:"UserReview",propTypes:{review:i.PropTypes.shape({id:i.PropTypes.number.isRequired,displayName:i.PropTypes.string.isRequired,username:i.PropTypes.string.isRequired,date:i.PropTypes.string.isRequired,userRate:i.PropTypes.number.isRequired,text:i.PropTypes.string.isRequired})},getInitialState:function(){return{editing:!1}},edit:function(){},save:function(){},cancel:function(){this.setState({editing:!1})},remove:function(){},render:function(){var e=this.props.review,t=i.addons.classSet,n=t({review:!0,hidden:this.state.editing});return i.DOM.li({className:"user-review"},r({currentRating:e.userRate,viewOnly:!0}),i.DOM.label({className:"author"},e.displayName),i.DOM.span({className:"date"},e.date),i.DOM.p({className:n,onClick:this.edit},e.text),this.state.editing&&i.DOM.section({className:"user-review-editing clearfix"},i.DOM.textarea({rows:"3",ref:"review"},e.text),i.DOM.div({className:"btn-group pull-right"},i.DOM.button({type:"button",className:"btn btn-default btn-sm",onClick:this.save},i.DOM.i({className:"fa fa-floppy-o"})),i.DOM.button({type:"button",className:"btn btn-default btn-sm",onClick:this.cancel},i.DOM.i({className:"fa fa-times"})),i.DOM.button({type:"button",className:"btn btn-danger btn-sm",onClick:this.remove},i.DOM.i({className:"fa fa-trash-o"})))))}}),a=i.createClass({displayName:"ReviewsTab",getInitialState:function(){return{currentUserRating:0}},onRatingChange:function(e){this.setState({currentUserRating:e})},onSubmit:function(){console.log("save review...")},render:function(){var e=this.state.currentUserRating;return i.DOM.div({className:"tab-pane active quickview-reviews row"},i.DOM.section({className:"col-md-3 col-left"},this.renderReviewFilters()),i.DOM.section({className:"col-md-6"},this.renderUserReviews()),i.DOM.section({className:"col-md-3 col-right"},i.DOM.p(null,"Review this listing:"),i.DOM.p({className:"text-danger"},"Warning: Data entered must NOT be above System High!"),r({currentRating:e,onChange:this.onRatingChange}),i.DOM.textarea({placeholder:"Warning: Data entered must NOT be above System High!"}),i.DOM.button({className:"btn btn-block btn-primary",onClick:this.onSubmit},"Submit Review")))},renderReviewFilters:function(){var e=this.props.listing,t=s.rows.length,n=[5,4,3,2,1],r=n.map(function(n){var r=e["totalRate"+n],s=0===t?0:Math.round(100*r/t).toFixed(2),o={width:s+"%"};return i.DOM.div({className:"star-rating"},i.DOM.a({href:"javascript:;"},n," stars"),i.DOM.div({className:"progress"},i.DOM.div({className:"progress-bar",role:"progressbar","aria-valuenow":"60","aria-valuemin":"0","aria-valuemax":"100",style:o})),i.DOM.span({className:"count"},"(",r,")"))});return i.DOM.div({className:"review-filters"},r)},renderUserReviews:function(){var e=s.rows.map(function(e){return o({review:e})});return i.DOM.ul({className:"list-unstyled list-reviews"},e)}});e.exports=a},function(e,t,n){(function(t){"use strict";var i=n(2),r=(n(4),n(13)),s=(r.Link,r.Navigation),o=r.CurrentPath,a=n(48),l=(n(73),n(7)),c=n(47),u=(n(59),n(274)),d=n(9),p=(d.UserRole,n(105)),h=n(44),f=h.loadListing,m=n(275),g=n(277),v=n(273),b=n(276),y=n(271),_={overview:m,reviews:g,details:v,resources:b,administration:y},w=i.createClass({displayName:"Quickview",mixins:[p,o,s,a],getDefaultProps:function(){return{tabs:[{to:"overview",name:"Overview"},{to:"details",name:"Details"},{to:"resources",name:"Resources"}]}},getInitialState:function(){return{shown:!1}},render:function(){var e,t,n=this.props.currentUser,r=this.state,s=r.shown,o=r.listing,a=this.getActiveRouteHandler();o&&(t=l.cloneDeep(this.props.tabs),e=o.owners.map(function(e){return e.username}),this.props.preview||(t.splice(1,0,{to:"reviews",name:"Reviews"}),(n.isAdmin||l.contains(e,n.username))&&t.push({to:"administration",name:"Administration"})));var d={listing:o,onCancel:this.close,onEdit:this.edit,currentUser:n,preview:this.props.preview};return this.transferPropsTo(c({ref:"modal",className:"quickview",onShown:this.onShown,onHidden:this.onHidden},o?[u(Object.assign({},d)),i.DOM.div({className:"tabs-container"},this.renderTabs(t,o.id),i.DOM.div({className:"tab-content"},a({currentUser:n,listing:o,shown:s})))]:i.DOM.p(null,"Loading...")))},getActiveRouteHandler:function(){var e=_[this.props.tab];if(!e)throw new Error("Unknown tab.");return e},renderTabs:function(e,t){var n=this,r=e.map(function(e){var r=e.to===n.props.tab?"active":"",s=n.makeHref(n.getActiveRoutePath(),n.getActiveParams(),{listing:t,action:n.props.preview?"preview":"view",tab:e.to});return i.DOM.li({className:r,key:e.to},i.DOM.a({href:s},e.name))});return i.DOM.ul({className:"nav nav-tabs",role:"tablist"},r)},componentWillMount:function(){this.props.preview||f(this.props.listingId)},componentWillReceiveProps:function(e){this.props.preview||this.props.listingId===e.listingId||f(e.listingId)},onShown:function(){t(document).off("focusin.bs.modal"),this.setState({shown:!0})},onHidden:function(){this.state.toEdit||this.transitionTo(this.getActiveRoutePath(),this.getActiveParams())},close:function(){this.refs.modal.close()},edit:function(){var e=this.state.listing;this.setState({toEdit:!0}),this.transitionTo("edit",{listingId:e.id}),this.close()}});e.exports=w,e.exports.OverviewTab=m,e.exports.ReviewsTab=g,e.exports.DetailsTab=v,e.exports.ResourcesTab=b,e.exports.AdministrationTab=y}).call(t,n(6))},function(e){var t={"label.title":"Name","label.type":"Listing Type","label.description":"Full Description","label.descriptionShort":"Short Description","label.tags":"Tags","label.imageSmallUrl":"Small Icon","label.imageMediumUrl":"Large Icon","label.imageLargeUrl":"Small Banner","label.imageXlargeUrl":"Large Banner","label.versionName":"Version Number","label.intents":"Intents","label.contacts":"Contacts","label.whatIsNew":"What's New","label.requirements":"Usage Requirements","label.agency":"Associated Organization","label.screenshots":"Screenshots","label.owners":"Owners","label.docUrls":"Resources","label.launchUrl":"Listing URL","label.categories":"Categories","label.contacts.type":"Contact Type","label.contacts.name":"Name","label.contacts.organization":"Organization","label.contacts.email":"Email","label.contacts.securePhone":"Secure Phone","label.contacts.unsecurePhone":"Unsecure Phone","label.screenshots.largeImageUrl":"Full Size Image","label.screenshots.smallImageUrl":"Preview Image","label.docUrls.name":"Type of Resource","label.docUrls.url":"URL","placeholder.tags":"Enter One or More Tags","placeholder.owners":"Select One or More Owners","placeholder.agency":"Select an Organization","placeholder.categories":"Select One or More Categories","placeholder.type":"Select a Type","placeholder.contacts.type":"Select a Contact Type","description.title":"Title of the listing","description.descriptionShort":"A brief overview describing the listing. It will appear in the mouseover listing view.","description.description":"An overview describing the listing, discussing the available features and its purpose. It will appear in the detailed listing view.","description.tags":"Keywords that describe the listing which can be used when searching.","description.imageSmallUrl":"Must be at least 16px wide x 16px tall.","description.imageMediumUrl":"Must be 30px wide x 30px tall.","description.imageLargeUrl":"Must be at least 220px wide x 137px tall.","description.imageXlargeUrl":"Must be at least 600px wide x 375px tall.","description.versionName":"Numerical identification of what the release version is","description.launchUrl":"URL where this listing can be reached by users","description.requirements":'Details about what system, security, or other requirements must be met in order to use this listing. If none apply, write "None."',"description.whatIsNew":"Provide a description of what is new or different in this version.","description.agency":"Organization overseeing this listing","description.owners":"Person(s) responsible for this listing","description.contacts":"Point of Contact for users to seek technical support for this listing.","description.intents":"Intents are special instructions used for communicating between applications. If this application uses intents, list them here.","description.categories":"The category or categories in the existing AppsMall structure where this listing fits best.","help.title":"The title is required to both save a draft and submit the listing. It may consist of any combination of letters, numbers and symbols. It must be between 1 and 255 characters in length.","help.type":"The type is required to both save a draft and submit the listing.","help.description":"The description is required to submit the listing. It is not required to save a draft. It may consist of any combination of letters, numbers and symbols. It must be between 1 and 4000 characters in length.","help.descriptionShort":"The short description is required to submit the listing. It is not required to save a draft. It may consist of any combination of letters, numbers and symbols. It must be between 1 and 150 characters in length.","help.imageSmallUrl":"The small icon is required to submit the listing. It is not required to save a draft. It must be a valid URL.","help.imageMediumUrl":"The large icon is required to submit the listing. It is not required to save a draft. It must be a valid URL.","help.imageLargeUrl":"The small banner is required to submit the listing. It is not required to save a draft. It must be a valid URL.","help.imageXlargeUrl":"The featured banner is required to submit the listing. It is not required to save a draft. It must be a valid URL.","help.versionName":"The version is optional. It may consist of any combination of letters, numbers and symbols. It must be between 1 and 255 characters in length.","help.contacts":"Contacts are optional.","help.whatIsNew":"What's new is optional. It may consist of any combination of letters, numbers and symbols. It may be up to 255 characters in length.","help.requirements":"Usage requirements is required. It may consist of any combination of letters, numbers and symbols. It must be between 1 and 1000 characters in length.","help.agency":"Associated organization is required.","help.screenshots":"At least one screenshot is required to submit a listing. They are optional for a draft.","help.owners":"At least one owner is required.","help.tags":"At least one tag is required to submit a listing. They are optional for a draft. Tags may consist of any combination of letters, numbers and symbols. They may be up to 16 charcters in length.","help.launchUrl":"Launch URL is required to submit the listing. It is not required to save a draft. It must be a valid URL.","help.categories":"At least one category is required to submit a listing. They are optional for a draft.","help.contacts.type":"Type is required","help.contacts.name":"A name is required. It may consist of any combination of letters, numbers and symbols. It must be between 1 and 100 characters in length.","help.contacts.organization":"Organization is optional. It may consist of any combination of letters, numbers and symbols.  It may be up to 100 characters in length.","help.contacts.email":"A valid email address is required. It must be no more than 100 characters in length.","help.contacts.securePhone":"At least one valid phone number is required (e.g. 555-5555, 555-555-5555, 555.5555).","help.contacts.unsecurePhone":"At least one valid phone number is required (e.g. 555-5555, 555-555-5555, 555.5555).","help.screenshots.largeImageUrl":"Large Image is required. It must be a valid URL.","help.screenshots.smallImageUrl":"Small Image is required. It must be a valid URL.","help.docUrls.name":"The resource type is required. It may consist of any combination of letters, numbers and symbols. It must be between 1 and 255 characters in length.","help.docUrls.url":"A valid URL is required."};
e.exports={listingMessages:t}},function(e,t,n){"use strict";var i=n(62),r={statics:{willTransitionTo:function(e){i.getCurrentUser().isAdmin||(e.abort(),e.redirect("/"))}}};e.exports=r},function(e,t,n){"use strict";{var i=n(4),r=i.createStore,s=n(61),o=n(74),a=n(44),l=n(21),c=l.save,u=n(285),d=u.validateDraft,p=u.validateFull,h=n(279),f=h.listingMessages,m=n(49),g=m.Listing,v=n(9),b=v.approvalStatus,y=n(7),_=y.cloneDeep;y.assign}a.systemUpdated=o,a.cacheUpdated=s;var w=new g,x=o.getDefaultData().system,D=r({listenables:a,refreshListing:function(e){w=e;var t=this.doValidation();this.trigger({listing:w,isValid:!0,hasChanges:!1,errors:t.errors,warnings:t.warnings})},onListingCreated:function(e){this.refreshListing(_(e))},onLoadListing:function(e){this.refreshListing(e?_(s.getById(e))||new g({id:e}):new g)},onCacheUpdated:function(){if(w.id){var e=s.getById(w.id);e&&this.refreshListing(_(e))}},onUpdateListing:function(e,t){function n(e,i){1===i.length?e[i[0]]=t:n(e[i[0]],i.slice(1))}if(e.length<1||!Array.isArray(e))throw"propertyPath needs to be an array with non zero length";n(w,e);var i=this.doValidation();this.trigger({listing:w,hasChanges:!0,errors:i.errors,warnings:i.warnings})},onSubmit:function(){var e=w.approvalStatus;w.approvalStatus="PENDING";var t=this.doValidation();t.isValid?c(w):(w.approvalStatus=e,this.trigger(t))},onSave:function(){var e=this.doValidation();e.isValid?c(w):this.trigger(e)},doValidation:function(){var e=b[w.approvalStatus],t=!e||e===b.IN_PROGRESS;return t?this.getDraftValidation():this.getFullValidation()},getDraftValidation:function(){var e=d(w,x),t=e.errors,n=e.isValid;return{isValid:n,errors:t,warnings:p(w,x).errors}},getFullValidation:function(){var e=p(w,x),t=e.errors,n=e.isValid;return{errors:t,isValid:n,warnings:{}}},onSystemUpdated:function(e){e.system&&(x=e.system),this.trigger({messages:this.resolveMessages()})},resolveMessages:function(){var e=f,t=x.contactTypes.filter(function(e){return e.required}).map(function(e){return e.title});return t.length>0&&(e["help.contacts"]="Contacts are not required to save a draft. In order to submit the listing, at least one contact of each of the following types must be provided: "+t.join(", ")+"."),e},getDefaultData:function(){return{listing:w,errors:{},warnings:{},messages:f,isValid:!0,firstError:{}}}});e.exports=D},function(e,t,n){"use strict";var i=n(4),r=n(21),s=[],o=[],a=[],l=[],c=i.createStore({init:function(){this.listenTo(r.newArrivalsFetched,this.onNewArrivalsFetched),this.listenTo(r.mostPopularFetched,this.onMostPopularFetched),this.listenTo(r.featuredFetched,this.onFeaturedFetched),this.listenTo(r.searchCompleted,this.onSearchCompleted)},onNewArrivalsFetched:function(e){s=e,this.trigger()},getNewArrivals:function(){return s},onMostPopularFetched:function(e){o=e,this.trigger()},getMostPopular:function(){return o},onFeaturedFetched:function(e){a=e,this.trigger()},getFeatured:function(){return a},onSearchCompleted:function(e){l=e,this.trigger()},getSearchResults:function(){return l}});e.exports=c},function(e){"use strict";e.exports={capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},uncapitalize:function(e){return e.charAt(0).toLowerCase()+e.slice(1)}}},function(e){"use strict";e.exports=function(e){e=new Date(e).getTime();var t,n,i=(Date.now()-e)/1e3;return 60>i&&(n="second",t=i),i/=60,60>i&&!t&&(n="minute",t=i),i/=60,24>i&&!t&&(n="hour",t=i),i/=24,7>i&&!t&&(n="day",t=i),i/=7,4>i&&!t&&(n="week",t=i),i=i/52*12,11.5>i&&!t?(n="month",t=i):t||(n="year",t=i/12),t=Math.round(t),1===t?"a "+n+" ago":t+" "+n+"s ago"}},function(e,t,n){"use strict";function i(e){return e.filter(function(e){return e.required}).map(function(e){return e.title})}function r(e,t){return e.every(function(e){return t.some(function(t){return t.type===e})})}function s(e){return m({title:L(255),type:L(50),categories:f(g(L(50)),function(e){return e.length>0}),tags:f(d,function(e){return e.length>0&&e.every(function(e){return e.length>0&&e.length<17})}),description:L(4e3),descriptionShort:L(150),versionName:L(255),launchUrl:$,requirements:L(1e3),whatIsNew:h(C(250)),intents:g(L(127)),docUrls:g(Y),imageXlargeUrl:$,imageLargeUrl:$,imageMediumUrl:$,imageSmallUrl:$,screenshots:f(g(I),function(e){return e.length>0}),contacts:f(g(P),r.bind(null,e)),owners:f(g(N),function(e){return e.length>0}),agency:L(255),height:h(b),width:h(b)})}function o(e,t,n){var i=c.validate(e,n),r={};i.errors&&i.errors.forEach(function(e){var t=e.path.join(".");r[t]=!0});var s=i.firstError()?i.firstError().path.join("."):"";return{isValid:i.isValid(),errors:r,firstError:s}}function a(e,t){var n=o(e,t,A);return e.contacts.forEach(function(e,t){n.errors["contacts."+t+".securePhone"]=!R(e),n.errors["contacts."+t+".unsecurePhone"]=!R(e)}),n}function l(e,t){var n=i((t||{}).contactTypes||[]),a=o(e,t,s(n));return e.contacts.forEach(function(e,t){a.errors["contacts."+t+".securePhone"]=!R(e),a.errors["contacts."+t+".unsecurePhone"]=!R(e)}),a.errors.contacts=!r(n,e.contacts),a}var c=n(34),u=c,d=u.Arr,p=u.Str,h=u.maybe,f=(u.Bool,u.subtype),m=u.struct,g=u.list,v=u.union,b=u.Num,y=n(9),_=y.EMAIL_REGEX,w=y.PHONE_REGEX,x=y.URL_REGEX,D=function(e){return w.test(e)},M=function(e){return x.test(e)},T=function(e){return _.test(e)},k=function(e){return 0===e.length},j=function(e){return!!e},C=function(e){return f(p,function(t){return t.length<=e})},L=function(e){return f(C(e),j)},S=f(p,k),$=f(C(2083),M),O=f(C(50),D),E=f(C(100),T),N=m({username:L(100)}),I=m({smallImageUrl:$,largeImageUrl:$}),Y=m({name:L(255),url:$}),R=function(e){return[e.securePhone,e.unsecurePhone].some(O.is)},P=f(m({name:L(100),securePhone:h(v([S,O])),unsecurePhone:h(v([S,O])),email:E,organization:h(C(100)),type:L(50)}),R),A=(m({title:L(255)}),m({title:L(255),type:L(50),categories:g(L(50)),tags:f(d,function(e){return e.every(function(e){return e.length>0&&e.length<17})}),description:h(C(4e3)),descriptionShort:h(C(150)),versionName:h(C(255)),launchUrl:h(v([$,S])),requirements:h(C(1e3)),whatIsNew:h(C(250)),intents:g(L(127)),docUrls:g(Y),imageXlargeUrl:h(v([$,S])),imageLargeUrl:h(v([$,S])),imageMediumUrl:h(v([$,S])),imageSmallUrl:h(v([$,S])),screenshots:g(I),contacts:g(P),owners:g(N),agency:h(C(255)),height:h(b),width:h(b)}));e.exports={validateFull:l,validateDraft:a}},function(e,t,n){"use strict";function i(e){var t=e._embedded&&e._embedded.item||e.data||e;return[].concat(t)}var r=n(6),s={getTypes:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/type").pipe(i)},getCategories:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/category").pipe(i)},getIntents:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/intent").pipe(i)},getContactTypes:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/contactType").pipe(i)},getOrganizations:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/agency").pipe(i)},getUsers:function(){return r.getJSON("https://www.owfgoss.org/ng/dev/mp/api/profile").pipe(i)}};e.exports=s},function(e,t){var n,i;n=[],i=function(){function e(e){for(var t=-1,n=e?e.length:0,i=[];++t<n;){var r=e[t];r&&i.push(r)}return i}return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(50)],r=function(e){function t(t,n,i){var r=-1,s=t?t.length:0;for(n=e(n,i,3);++r<s;)if(n(t[r],r,t))return r;return-1}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(50),n(24)],r=function(e,t){function n(n,s,o){var a=0,l=n?n.length:0;if("number"!=typeof s&&null!=s){var c=l;for(s=e(s,o,3);c--&&s(n[c],c,n);)a++}else if(a=s,null==a||o)return n?n[l-1]:i;return t(n,r(0,l-a))}var i,r=Math.max;return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(302),n(24)],r=function(e,t){function n(n){return e(n,t(arguments,1))}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(63)],r=function(e){function t(t,n){var i=-1,r=t?t.length:0,s={};for(n||!r||e(t[0])||(n=[]);++i<r;){var o=t[i];n?s[o]=n[i]:o&&(s[o[0]]=o[1])}return s}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(75),n(37),n(63),n(316)],r=function(e,t,n,i){function r(r,o,a){var l=-1,c=e,u=r?r.length:0,d=!1;return a=(0>a?s(0,u+a):a)||0,n(r)?d=c(r,o,a)>-1:"number"==typeof u?d=(i(r)?r.indexOf(o,a):c(r,o,a))>-1:t(r,function(e){return++l>=a?!(d=e===o):void 0}),d}var s=Math.max;return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(50),n(37)],r=function(e,t){function n(n,i,r){i=e(i,r,3);var s=-1,o=n?n.length:0;if("number"!=typeof o){var a;return t(n,function(e,t,n){return i(e,t,n)?(a=e,!1):void 0}),a}for(;++s<o;){var l=n[s];if(i(l,s,n))return l}}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(35),n(37)],r=function(e,t){function n(n,i,r){var s=-1,o=n?n.length:0;if(i=i&&"undefined"==typeof r?i:e(i,r,3),"number"==typeof o)for(;++s<o&&i(n[s],s,n)!==!1;);else t(n,i);return n}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(50),n(37)],r=function(e,t){function n(n,i,r){var s=-1,o=n?n.length:0;if(i=e(i,r,3),"number"==typeof o)for(var a=Array(o);++s<o;)a[s]=i(n[s],s,n);else a=[],t(n,function(e,t,n){a[++s]=i(e,t,n)});return a}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(110),n(24)],r=function(e,t){function n(n,i){return arguments.length>2?e(n,17,t(arguments,2),null,i):e(n,1,null,null,i)}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(64)],r=function(e){function t(t){var n,i;if(!e(t))throw new TypeError;return function(){return n?i:(n=!0,i=t.apply(this,arguments),t=null,i)}}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(110),n(24)],r=function(e,t){function n(n){return e(n,16,t(arguments,1))}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(109),n(27),n(76),n(24)],r=function(e,t,n,i){function r(r){function s(){if(l){var n=i(l);o.apply(n,arguments)}if(this instanceof s){var r=e(a.prototype),u=a.apply(r,n||arguments);return t(u)?u:r}return a.apply(c,n||arguments)}var a=r[0],l=r[2],c=r[4];return n(s,r),s}var s=[],o=s.push;return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(313),n(294),n(37),n(111),n(63),n(27),n(116),n(24)],r=function(e,t,n,i,r,s,o,a){function l(u,d,f,g,_){if(f){var M=f(u);if("undefined"!=typeof M)return M}var T=s(u);if(!T)return u;var k=w.call(u);if(!y[k])return u;var j=D[k];switch(k){case p:case h:return new j(+u);case m:case b:return new j(u);case v:return M=j(u.source,c.exec(u)),M.lastIndex=u.lastIndex,M}var C=r(u);if(d){var L=!g;g||(g=i()),_||(_=i());for(var S=g.length;S--;)if(g[S]==u)return _[S];M=C?j(u.length):{}}else M=C?a(u):e({},u);return C&&(x.call(u,"index")&&(M.index=u.index),x.call(u,"input")&&(M.input=u.input)),d?(g.push(u),_.push(M),(C?t:n)(u,function(e,t){M[t]=l(e,d,f,g,_)}),L&&(o(g),o(_)),M):M}var c=/\w*$/,u="[object Arguments]",d="[object Array]",p="[object Boolean]",h="[object Date]",f="[object Function]",m="[object Number]",g="[object Object]",v="[object RegExp]",b="[object String]",y={};y[f]=!1,y[u]=y[d]=y[p]=y[h]=y[m]=y[g]=y[v]=y[b]=!0;var _=Object.prototype,w=_.toString,x=_.hasOwnProperty,D={};return D[d]=Array,D[p]=Boolean,D[h]=Date,D[f]=Function,D[g]=Object,D[m]=Number,D[v]=RegExp,D[b]=String,l}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(109),n(27),n(76),n(24)],r=function(e,t,n,i){function r(s){function a(){var n=f?p:this;if(u){var s=i(u);o.apply(s,arguments)}if((d||g)&&(s||(s=i(arguments)),d&&o.apply(s,d),g&&s.length<h))return c|=16,r([l,v?c:-4&c,s,null,p,h]);if(s||(s=arguments),m&&(l=n[b]),this instanceof a){n=e(l.prototype);var y=l.apply(n,s);return t(y)?y:n}return l.apply(n,s)}var l=s[0],c=s[1],u=s[2],d=s[3],p=s[4],h=s[5],f=1&c,m=2&c,g=4&c,v=8&c,b=l;return n(a,s),a}var s=[],o=s.push;return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(75),n(305),n(307),n(310),n(117)],r=function(e,t,n,i,r){function s(s,o){var a=-1,l=e,c=s?s.length:0,u=c>=i,d=[];if(u){var p=n(o);p?(l=t,o=p):u=!1}for(;++a<c;){var h=s[a];l(o,h)<0&&d.push(h)}return u&&r(o),d}return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(315),n(63)],r=function(e,t){function n(i,r,s,o){for(var a=(o||0)-1,l=i?i.length:0,c=[];++a<l;){var u=i[a];if(u&&"object"==typeof u&&"number"==typeof u.length&&(t(u)||e(u))){r||(u=n(u,r,s));var d=-1,p=u.length,h=c.length;for(c.length+=p;++d<p;)c[h++]=u[d]}else s||c.push(u)}return c}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(118),n(111),n(64),n(36),n(116)],r=function(e,t,n,i,r){function s(f,v,b,y,_,w){if(b){var x=b(f,v);if("undefined"!=typeof x)return!!x}if(f===v)return 0!==f||1/f==1/v;var D=typeof f,M=typeof v;if(!(f!==f||f&&i[D]||v&&i[M]))return!1;if(null==f||null==v)return f===v;var T=m.call(f),k=m.call(v);if(T==o&&(T=d),k==o&&(k=d),T!=k)return!1;switch(T){case l:case c:return+f==+v;case u:return f!=+f?v!=+v:0==f?1/f==1/v:f==+v;case p:case h:return f==String(v)}var j=T==a;if(!j){var C=g.call(f,"__wrapped__"),L=g.call(v,"__wrapped__");if(C||L)return s(C?f.__wrapped__:f,L?v.__wrapped__:v,b,y,_,w);if(T!=d)return!1;var S=f.constructor,$=v.constructor;if(S!=$&&!(n(S)&&S instanceof S&&n($)&&$ instanceof $)&&"constructor"in f&&"constructor"in v)return!1}var O=!_;_||(_=t()),w||(w=t());for(var E=_.length;E--;)if(_[E]==f)return w[E]==v;var N=0;if(x=!0,_.push(f),w.push(v),j){if(E=f.length,N=v.length,x=N==E,x||y)for(;N--;){var I=E,Y=v[N];if(y)for(;I--&&!(x=s(f[I],Y,b,y,_,w)););else if(!(x=s(f[N],Y,b,y,_,w)))break}}else e(v,function(e,t,n){return g.call(n,t)?(N++,x=g.call(f,t)&&s(f[t],e,b,y,_,w)):void 0}),x&&!y&&e(f,function(e,t,n){return g.call(n,t)?x=--N>-1:void 0});return _.pop(),w.pop(),O&&(r(_),r(w)),x}var o="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Number]",d="[object Object]",p="[object RegExp]",h="[object String]",f=Object.prototype,m=f.toString,g=f.hasOwnProperty;return s}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(75),n(113)],r=function(e,t){function n(n,i){var r=typeof i;if(n=n.cache,"boolean"==r||null==i)return n[i]?0:-1;"number"!=r&&"string"!=r&&(r="object");var s="number"==r?i:t+i;return n=(n=n[r])&&n[s],"object"==r?n&&e(n,i)>-1?0:-1:n?0:-1}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(113)],r=function(e){function t(t){var n=this.cache,i=typeof t;if("boolean"==i||null==t)n[t]=!0;else{"number"!=i&&"string"!=i&&(i="object");var r="number"==i?t:e+t,s=n[i]||(n[i]={});"object"==i?(s[r]||(s[r]=[])).push(t):s[r]=!0}}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(306),n(309),n(117)],r=function(e,t){function n(n){var i=-1,r=n.length,s=n[0],o=n[r/2|0],a=n[r-1];if(s&&"object"==typeof s&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var l=t();l["false"]=l["null"]=l["true"]=l.undefined=!1;var c=t();for(c.array=n,c.cache=l,c.push=e;++i<r;)c.push(n[i]);return c}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(112)],r=function(e){function t(t){return e[t]}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(115)],r=function(e){function t(){return e.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}return t}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){var e=75;return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(112),n(52)],r=function(e,t){var n=RegExp("["+t(e).join("")+"]","g");return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(36)],r=function(e){var t=Object.prototype,n=t.hasOwnProperty,i=function(t){var i,r=t,s=[];if(!r)return s;if(!e[typeof t])return s;for(i in r)n.call(r,i)&&s.push(i);return s};return i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(35),n(52),n(36)],r=function(e,t,n){var i=function(i,r,s){var o,a=i,l=a;if(!a)return l;var c=arguments,u=0,d="number"==typeof s?2:c.length;if(d>3&&"function"==typeof c[d-2])var p=e(c[--d-1],c[d--],2);else d>2&&"function"==typeof c[d-1]&&(p=c[--d]);for(;++u<d;)if(a=c[u],a&&n[typeof a])for(var h=-1,f=n[typeof a]&&t(a),m=f?f.length:0;++h<m;)o=f[h],l[o]=p?p(l[o],a[o]):a[o];return l};return i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(300),n(35)],r=function(e,t){function n(n,i,r){return e(n,!0,"function"==typeof i&&t(i,r,1))}return n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){function e(e){return e&&"object"==typeof e&&"number"==typeof e.length&&i.call(e)==t||!1}var t="[object Arguments]",n=Object.prototype,i=n.toString;return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){var n,i;n=[],i=function(){function e(e){return"string"==typeof e||e&&"object"==typeof e&&i.call(e)==t||!1}var t="[object String]",n=Object.prototype,i=n.toString;return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t,n){var i,r;i=[n(303),n(50),n(118),n(27)],r=function(e,t,n,i){function r(r,s,o){var a={};if("function"!=typeof s)for(var l=-1,c=e(arguments,!0,!1,1),u=i(r)?c.length:0;++l<u;){var d=c[l];d in r&&(a[d]=r[d])}else s=t(s,o,3),n(r,function(e,t,n){s(e,t,n)&&(a[t]=e)});return a}return r}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(51)],r=function(e){var t=/\bthis\b/,n={};return n.funcDecomp=!e(window.WinRTError)&&t.test(function(){return this}),n.funcNames="string"==typeof Function.name,n}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t,n){var i,r;i=[n(308),n(52),n(311)],r=function(e,t,n){function i(t){return null==t?"":String(t).replace(n,e)}return i}.apply(t,i),!(void 0!==r&&(e.exports=r))},function(e,t){var n,i;n=[],i=function(){function e(e){return e}return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e,t){var n,i;n=[],i=function(){function e(e){return function(t){return t[e]}}return e}.apply(t,n),!(void 0!==i&&(e.exports=i))},function(e){"use strict";function t(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=Object.assign||function(e){for(var n,i,r,s=t(e),o=1;o<arguments.length;o++){i=arguments[o],r=Object.keys(Object(i));for(var a=0;a<r.length;a++)try{s[r[a]]=i[r[a]]}catch(l){void 0===n&&(n=l)}}if(n)throw n;return s}},function(e,t,n){var i=n(2),r=i.createClass({displayName:"Icon",render:function(){var e={cursor:"pointer"},t=this.props.toggled?this.props.toggledClassName:this.props.untoggledClassName;return i.DOM.i({className:t,onMouseMove:this.props.onMouseEnter,style:e,onClick:this.props.onClickRating})}}),s=i.createClass({displayName:"IconRating",getInitialState:function(){return{currentRating:this.props.currentRating||0,max:this.props.max||5,currentRating_hover:0,hovering:!1}},onMouseEnter:function(e,t){var n=e;t.nativeEvent.clientX<t.target.offsetLeft+t.target.offsetWidth/2&&(n-=.5),this.setState({currentRating_hover:n,hovering:!0})},onMouseLeave:function(){this.setState({hovering:!1})},onClickRating:function(e){this.setState({currentRating:this.state.currentRating_hover}),this.props.onChange&&this.props.onChange(e)},render:function(){for(var e,t,n=[],s=!1,o=function(){},a=this.props.viewOnly?o:this.onMouseEnter,l=this.props.viewOnly?o:this.onClickRating,c=1;c<=this.state.max;++c)e=this.state["currentRating"+(this.state.hovering?"_hover":"")],s=c<=Math.round(e)?!0:!1,t=null,this.props.halfClassName&&Math.round(e)==c&&Math.floor(e)!=e&&(t=this.props.halfClassName),n.push(r({key:c,toggledClassName:t||this.props.toggledClassName,untoggledClassName:this.props.untoggledClassName,onMouseEnter:a.bind(this,c),onClickRating:l.bind(this,c),toggled:s}));return i.DOM.div({onMouseLeave:this.onMouseLeave},n)}});e.exports=s},function(e,t,n){var i=n(65),r={updateScrollPosition:function(e,t){switch(t){case i.PUSH:case i.REPLACE:window.scrollTo(0,0);break;case i.POP:e?window.scrollTo(e.x,e.y):window.scrollTo(0,0)}}};e.exports=r},function(e){var t={updateScrollPosition:function(){window.scrollTo(0,0)}};e.exports=t},function(e,t,n){function i(e){return s(r(e,{path:null,isDefault:!0}))}var r=n(8),s=n(53);e.exports=i},function(e,t,n){function i(e){return 0===e.button}function r(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var s=n(2),o=n(89),a=n(8),l=n(199),c=n(200),u=s.createClass({displayName:"Link",mixins:[l,c],propTypes:{activeClassName:s.PropTypes.string.isRequired,to:s.PropTypes.string.isRequired,params:s.PropTypes.object,query:s.PropTypes.object,onClick:s.PropTypes.func},getDefaultProps:function(){return{activeClassName:"active"}},handleClick:function(e){var t,n=!0;this.props.onClick&&(t=this.props.onClick(e)),!r(e)&&i(e)&&((t===!1||e.defaultPrevented===!0)&&(n=!1),e.preventDefault(),n&&this.transitionTo(this.props.to,this.props.params,this.props.query))},getHref:function(){return this.makeHref(this.props.to,this.props.params,this.props.query)},getClassName:function(){var e={};return this.props.className&&(e[this.props.className]=!0),this.isActive(this.props.to,this.props.params,this.props.query)&&(e[this.props.activeClassName]=!0),o(e)},render:function(){var e=a(this.props,{href:this.getHref(),className:this.getClassName(),onClick:this.handleClick});return s.DOM.a(e,this.props.children)}});e.exports=u},function(e,t,n){function i(e){return s(r(e,{path:null,catchAll:!0}))}var r=n(8),s=n(53);e.exports=i},function(e,t,n){function i(e,t,n){return s.createClass({statics:{willTransitionTo:function(i,r,s){i.redirect(e,t||r,n||s)}},render:function(){return null}})}function r(e){return o({name:e.name,path:e.from||e.path||"*",handler:i(e.to,e.params,e.query)})}var s=n(2),o=n(53);e.exports=r},function(e,t,n){function i(e,t){return{route:e,params:t}}function r(e){return e[e.length-1]}function s(e,t,n,o){for(var a,l,c=null,u=0,d=t.length;d>u;++u){if(a=t[u],c=s(e,a.props.children,a.props.defaultRoute,a.props.notFoundRoute),null!=c){var p=r(c).params;return l=a.props.paramNames.reduce(function(e,t){return e[t]=p[t],e},{}),c.unshift(i(a,l)),c}if(l=L.extractParams(a.props.path,e))return[i(a,l)]}return n&&(l=L.extractParams(n.props.path,e))?[i(n,l)]:o&&(l=L.extractParams(o.props.path,e))?[i(o,l)]:c}function o(e,t){return e.some(function(e){if(e.route!==t.route)return!1;for(var n in e.params)if(e.params[n]!==t.params[n])return!1;return!0})}function a(e,t,n){var i=k(e).map(function(e){return function(){var n=e.route.props.handler;if(!t.isAborted&&n.willTransitionFrom)return n.willTransitionFrom(t,e.component);var i=t.promise;return delete t.promise,i}});c(i,n)}function l(e,t,n,i){var r=e.map(function(e){return function(){var i=e.route.props.handler;!t.isAborted&&i.willTransitionTo&&i.willTransitionTo(t,e.params,n);var r=t.promise;return delete t.promise,r}});c(r,i)}function c(e,t){try{var n=e.reduce(function(e,t){return e?e.then(t):t()},null)}catch(i){return t(i)}n?n.then(function(){setTimeout(t)},function(e){setTimeout(function(){t(e)})}):t()}function u(e,t){for(var n,i=0,r=e.length;r>i&&(n=e[i],n.component=t.__activeRoute__,null!=n.component);++i)t=n.component.refs}function d(e,t){var n=e.filter(function(e){return-1!==t.indexOf(e)});return!n.some(function(e){return e.route.props.ignoreScrollBehavior})}function p(){return null}function h(e,t){return e.some(function(e){return e.props.name===t})}function f(e,t){for(var n in t)if(String(e[n])!==String(t[n]))return!1;return!0}function m(e,t){for(var n in t)if(String(e[n])!==String(t[n]))return!1;return!0}function g(e){throw e}var v=n(2),b=n(12),y=n(3),_=n(43),w=n(198),x=n(333),D=n(335),M=n(336),T=n(337),k=n(341),j=n(340),C=n(202),L=n(201),S=n(53),$=v.createClass({displayName:"Routes",mixins:[M,x,D,T],propTypes:{initialPath:v.PropTypes.string,initialMatches:v.PropTypes.array,onChange:v.PropTypes.func,onError:v.PropTypes.func.isRequired},getDefaultProps:function(){return{initialPath:null,initialMatches:[],onError:g}},getInitialState:function(){return{path:this.props.initialPath,matches:this.props.initialMatches}},componentDidMount:function(){b(null==this._owner,"<Routes> should be rendered directly using React.renderComponent, not inside some other component's render method"),this._handleStateChange()},componentDidUpdate:function(){this._handleStateChange()},match:function(e){var t=this.getRoutes();return s(L.withoutQuery(e),t,this.props.defaultRoute,this.props.notFoundRoute)},updateLocation:function(e,t){this.state.path!==e&&(this.state.path&&this.recordScroll(this.state.path),this.dispatch(e,function(n,i,r){n?this.props.onError.call(this,n):i instanceof C?this.replaceWith(i.to,i.params,i.query):i?this.goBack():(this._nextStateChangeHandler=this._finishTransitionTo.bind(this,e,t,this.state.matches),this.setState(r))}))},_handleStateChange:function(){this._nextStateChangeHandler&&(this._nextStateChangeHandler(),delete this._nextStateChangeHandler)},_finishTransitionTo:function(e,t,n){var i=this.state.matches;u(i,this.refs),d(i,n)&&this.updateScroll(e,t),this.props.onChange&&this.props.onChange.call(this)},dispatch:function(e,t){var n=new j(this,e),i=this.state?this.state.matches:[],s=this.match(e)||[];b(s.length,'No route matches path "%s". Make sure you have <Route path="%s"> somewhere in your <Routes>',e,e);var c,u;i.length?(c=i.filter(function(e){return!o(s,e)}),u=s.filter(function(e){return!o(i,e)})):(c=[],u=s);var d=this,p=L.extractQuery(e)||{};a(c,n,function(s){return s||n.isAborted?t.call(d,s,n.abortReason):void l(u,n,p,function(s){if(s||n.isAborted)return t.call(d,s,n.abortReason);var o=i.slice(0,i.length-c.length).concat(u),a=r(o),l=a&&a.params||{},h=o.map(function(e){return e.route});t.call(d,null,null,{path:e,matches:o,activeRoutes:h,activeParams:l,activeQuery:p})})})},getHandlerProps:function(){var e=this.state.matches,t=this.state.activeQuery,n=p,i={ref:null,params:null,query:null,activeRouteHandler:n,key:null};return k(e).forEach(function(e){var r=e.route;i=S.getUnreservedProps(r.props),i.ref="__activeRoute__",i.params=e.params,i.query=t,i.activeRouteHandler=n,r.props.addHandlerKey&&(i.key=L.injectParams(r.props.path,e.params)),n=function(e,t){if(arguments.length>2&&"undefined"!=typeof arguments[2])throw new Error("Passing children to a route handler is not supported");return r.props.handler(_(e,t))}.bind(this,i)}),i},getActiveComponent:function(){return this.refs.__activeRoute__},getCurrentPath:function(){return this.state.path},makePath:function(e,t,n){var i;if(L.isAbsolute(e))i=L.normalize(e);else{var r=this.getNamedRoutes(),s=r[e];y(s,'Unable to find a route named "%s". Make sure you have <Route name="%s"> somewhere in your <Routes>',e,e),i=s.props.path}return L.withQuery(L.injectParams(i,t),n)},makeHref:function(e,t,n){var i=this.makePath(e,t,n);return this.getLocation()===w?"#"+i:i},transitionTo:function(e,t,n){var i=this.getLocation();y(i,"You cannot use transitionTo without a location"),i.push(this.makePath(e,t,n))},replaceWith:function(e,t,n){var i=this.getLocation();y(i,"You cannot use replaceWith without a location"),i.replace(this.makePath(e,t,n))},goBack:function(){var e=this.getLocation();y(e,"You cannot use goBack without a location"),e.pop()},isActive:function(e,t,n){return L.isAbsolute(e)?e===this.getCurrentPath():h(this.getActiveRoutes(),e)&&f(this.getActiveParams(),t)&&(null==n||m(this.getActiveQuery(),n))},render:function(){var e=this.state.matches[0];return null==e?null:e.route.props.handler(this.getHandlerProps())},childContextTypes:{currentPath:v.PropTypes.string,makePath:v.PropTypes.func.isRequired,makeHref:v.PropTypes.func.isRequired,transitionTo:v.PropTypes.func.isRequired,replaceWith:v.PropTypes.func.isRequired,goBack:v.PropTypes.func.isRequired,isActive:v.PropTypes.func.isRequired},getChildContext:function(){return{currentPath:this.getCurrentPath(),makePath:this.makePath,makeHref:this.makeHref,transitionTo:this.transitionTo,replaceWith:this.replaceWith,goBack:this.goBack,isActive:this.isActive}}});e.exports=$},function(e,t,n){function i(){r({type:s.POP,path:o()})}var r,s=n(65),o=n(77),a={setup:function(e){r=e,window.addEventListener?window.addEventListener("popstate",i,!1):window.attachEvent("popstate",i)},teardown:function(){window.removeEventListener?window.removeEventListener("popstate",i,!1):window.detachEvent("popstate",i)},push:function(e){window.history.pushState({path:e},"",e),r({type:s.PUSH,path:o()})},replace:function(e){window.history.replaceState({path:e},"",e),r({type:s.REPLACE,path:o()})},pop:function(){window.history.back()},getCurrentPath:o,toString:function(){return"<HistoryLocation>"}};e.exports=a},function(e,t,n){var i=n(77),r={push:function(e){window.location=e},replace:function(e){window.location.replace(e)},pop:function(){window.history.back()},getCurrentPath:i,toString:function(){return"<RefreshLocation>"}};e.exports=r},function(e,t,n){var i=n(2),r=n(43),s={propTypes:{initialActiveRoutes:i.PropTypes.array.isRequired,initialActiveParams:i.PropTypes.object.isRequired,initialActiveQuery:i.PropTypes.object.isRequired},getDefaultProps:function(){return{initialActiveRoutes:[],initialActiveParams:{},initialActiveQuery:{}}},getInitialState:function(){return{activeRoutes:this.props.initialActiveRoutes,activeParams:this.props.initialActiveParams,activeQuery:this.props.initialActiveQuery}},getActiveRoutes:function(){return this.state.activeRoutes.slice(0)},getActiveParams:function(){return r({},this.state.activeParams)},getActiveQuery:function(){return r({},this.state.activeQuery)},childContextTypes:{activeRoutes:i.PropTypes.array.isRequired,activeParams:i.PropTypes.object.isRequired,activeQuery:i.PropTypes.object.isRequired},getChildContext:function(){return{activeRoutes:this.getActiveRoutes(),activeParams:this.getActiveParams(),activeQuery:this.getActiveQuery()}}};e.exports=s},function(e,t,n){var i=n(2),r={contextTypes:{currentPath:i.PropTypes.string.isRequired},getCurrentPath:function(){return this.context.currentPath}};e.exports=r},function(e,t,n){var i=n(2),r=n(3),s=n(5).canUseDOM,o=n(198),a=n(331),l=n(332),c=n(338),u=n(342),d={none:null,hash:o,history:a,refresh:l},p={propTypes:{location:function(e,t,n){var i=e[t];return"string"!=typeof i||i in d?void 0:new Error('Unknown location "'+i+'", see '+n)}},getDefaultProps:function(){return{location:s?o:null}},componentWillMount:function(){var e=this.getLocation();r(null==e||s,"Cannot use location without a DOM"),e&&(c.setup(e),c.addChangeListener(this.handlePathChange),this.updateLocation&&this.updateLocation(c.getCurrentPath(),c.getCurrentActionType()))},componentWillUnmount:function(){this.getLocation()&&c.removeChangeListener(this.handlePathChange)},handlePathChange:function(){this.updateLocation&&this.updateLocation(c.getCurrentPath(),c.getCurrentActionType())},getLocation:function(){if(null==this._location){var e=this.props.location;"string"==typeof e&&(e=d[e]),e!==a||u()||(e=l),this._location=e}return this._location},childContextTypes:{location:i.PropTypes.object},getChildContext:function(){return{location:this.getLocation()}}};e.exports=p},function(e,t,n){function i(e,t,n){var i=e.props;o(s.isValidClass(i.handler),'The handler for the "%s" route must be a valid React class',i.name||i.path);var l=t&&t.props.path||"/";if(!i.path&&!i.name||i.isDefault||i.catchAll)i.path=l,i.catchAll&&(i.path+="*");else{var c=i.path||i.name;a.isAbsolute(c)||(c=a.join(l,c)),i.path=a.normalize(c)}if(i.paramNames=a.extractParamNames(i.path),t&&Array.isArray(t.props.paramNames)&&t.props.paramNames.forEach(function(e){o(-1!==i.paramNames.indexOf(e),'The nested route path "%s" is missing the "%s" parameter of its parent path "%s"',i.path,e,t.props.path)}),i.name){var u=n[i.name];o(!u||e===u,'You cannot use the name "%s" for more than one route',i.name),n[i.name]=e}return i.catchAll?(o(t,"<NotFoundRoute> must have a parent <Route>"),o(null==t.props.notFoundRoute,"You may not have more than one <NotFoundRoute> per <Route>"),t.props.notFoundRoute=e,null):i.isDefault?(o(t,"<DefaultRoute> must have a parent <Route>"),o(null==t.props.defaultRoute,"You may not have more than one <DefaultRoute> per <Route>"),t.props.defaultRoute=e,null):(i.children=r(i.children,e,n),e)
}function r(e,t,n){var r=[];return s.Children.forEach(e,function(e){(e=i(e,t,n))&&r.push(e)}),r}var s=n(2),o=n(3),a=n(201),l={_processRoutes:function(){this._namedRoutes={},this._routes=r(this.props.children,this,this._namedRoutes)},getRoutes:function(){return null==this._routes&&this._processRoutes(),this._routes},getNamedRoutes:function(){return null==this._namedRoutes&&this._processRoutes(),this._namedRoutes},getRouteByName:function(e){var t=this.getNamedRoutes();return t[e]||null},childContextTypes:{routes:s.PropTypes.array.isRequired,namedRoutes:s.PropTypes.object.isRequired},getChildContext:function(){return{routes:this.getRoutes(),namedRoutes:this.getNamedRoutes()}}};e.exports=l},function(e,t,n){function i(){return s(o,"Cannot get current scroll position without a DOM"),{x:window.scrollX,y:window.scrollY}}var r=n(2),s=n(3),o=n(5).canUseDOM,a=n(324),l=n(325),c={none:null,browser:a,imitateBrowser:a,scrollToTop:l},u={propTypes:{scrollBehavior:function(e,t,n){var i=e[t];return"string"!=typeof i||i in c?void 0:new Error('Unknown scroll behavior "'+i+'", see '+n)}},getDefaultProps:function(){return{scrollBehavior:o?a:null}},componentWillMount:function(){s(null==this.getScrollBehavior()||o,"Cannot use scroll behavior without a DOM")},recordScroll:function(e){var t=this.getScrollPositions();t[e]=i()},updateScroll:function(e,t){var n=this.getScrollBehavior(),i=this.getScrollPosition(e)||null;n&&n.updateScrollPosition(i,t)},getScrollBehavior:function(){if(null==this._scrollBehavior){var e=this.props.scrollBehavior;"string"==typeof e&&(e=c[e]),this._scrollBehavior=e}return this._scrollBehavior},getScrollPositions:function(){return null==this._scrollPositions&&(this._scrollPositions={}),this._scrollPositions},getScrollPosition:function(e){var t=this.getScrollPositions();return t[e]},childContextTypes:{scrollBehavior:r.PropTypes.object},getChildContext:function(){return{scrollBehavior:this.getScrollBehavior()}}};e.exports=u},function(e,t,n){function i(){u.emit(c)}function r(e){d!==e.path&&(d=e.path,o=e.type,i())}var s,o,a=n(3),l=n(344).EventEmitter,c=(n(65),"change"),u=new l,d="/",p={addChangeListener:function(e){u.addListener(c,e)},removeChangeListener:function(e){u.removeListener(c,e)},removeAllChangeListeners:function(){u.removeAllListeners(c)},setup:function(e){a(null==s||s===e,"You cannot use %s and %s on the same page",s,e),s!==e&&(e.setup&&e.setup(r),d=e.getCurrentPath()),s=e},teardown:function(){s&&s.teardown&&s.teardown(),s=o=null,d="/",p.removeAllChangeListeners()},getCurrentPath:function(){return d},getCurrentActionType:function(){return o}};e.exports=p},function(e,t,n){var i=n(349);e.exports=i},function(e,t,n){function i(e,t){this.routesComponent=e,this.path=t,this.abortReason=null,this.isAborted=!1}var r=n(16),s=n(339),o=n(202);r(i,{abort:function(e){this.abortReason=e,this.isAborted=!0},redirect:function(e,t,n){this.abort(new o(e,t,n))},wait:function(e){this.promise=s.resolve(e)},retry:function(){this.routesComponent.replaceWith(this.path)}}),e.exports=i},function(e){function t(e){return e.slice(0).reverse()}e.exports=t},function(e){function t(){/*! taken from modernizr
	   * https://github.com/Modernizr/Modernizr/blob/master/LICENSE
	   * https://github.com/Modernizr/Modernizr/blob/master/feature-detects/history.js
	   */
var e=navigator.userAgent;return-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")?window.history&&"pushState"in window.history:!1}e.exports=t},function(e){function t(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&!t[i]&&(n[i]=e[i]);return n}e.exports=t},function(e){function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function r(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,i,o,a,l,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||r(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(i=this._events[e],s(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(o=arguments.length,a=new Array(o-1),l=1;o>l;l++)a[l-1]=arguments[l];i.apply(this,a)}else if(r(i)){for(o=arguments.length,a=new Array(o-1),l=1;o>l;l++)a[l-1]=arguments[l];for(c=i.slice(),o=c.length,l=0;o>l;l++)c[l].apply(this,a)}return!0},t.prototype.addListener=function(e,i){var o;if(!n(i))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(i.listener)?i.listener:i),this._events[e]?r(this._events[e])?this._events[e].push(i):this._events[e]=[this._events[e],i]:this._events[e]=i,r(this._events[e])&&!this._events[e].warned){var o;o=s(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function i(){this.removeListener(e,i),r||(r=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var r=!1;return i.listener=t,this.on(e,i),this},t.prototype.removeListener=function(e,t){var i,s,o,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],o=i.length,s=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(r(i)){for(a=o;a-->0;)if(i[a]===t||i[a].listener&&i[a].listener===t){s=a;break}if(0>s)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],n(i))this.removeListener(e,i);else for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.listenerCount=function(e,t){var i;return i=e._events&&e._events[t]?n(e._events[t])?1:e._events[t].length:0}},function(e,t,n){e.exports=n(346)},function(e,t,n){var i=n(348),r=n(347);e.exports={stringify:i,parse:r}},function(e,t,n){var i=n(78),r={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3};r.parseValues=function(e,t){for(var n={},r=e.split(t.delimiter,1/0===t.parameterLimit?void 0:t.parameterLimit),s=0,o=r.length;o>s;++s){var a=r[s],l=-1===a.indexOf("]=")?a.indexOf("="):a.indexOf("]=")+1;if(-1===l)n[i.decode(a)]="";else{var c=i.decode(a.slice(0,l)),u=i.decode(a.slice(l+1));n[c]=n[c]?[].concat(n[c]).concat(u):u}}return n},r.parseObject=function(e,t,n){if(!e.length)return t;var i=e.shift(),s={};if("[]"===i)s=[],s=s.concat(r.parseObject(e,t,n));else{var o="["===i[0]&&"]"===i[i.length-1]?i.slice(1,i.length-1):i,a=parseInt(o,10);!isNaN(a)&&i!==o&&a<=n.arrayLimit?(s=[],s[a]=r.parseObject(e,t,n)):s[o]=r.parseObject(e,t,n)}return s},r.parseKeys=function(e,t,n){if(e){var i=/^([^\[\]]*)/,s=/(\[[^\[\]]*\])/g,o=i.exec(e);if(!Object.prototype.hasOwnProperty(o[1])){var a=[];o[1]&&a.push(o[1]);for(var l=0;null!==(o=s.exec(e))&&l<n.depth;)++l,Object.prototype.hasOwnProperty(o[1].replace(/\[|\]/g,""))||a.push(o[1]);return o&&a.push("["+e.slice(o.index)+"]"),r.parseObject(a,t,n)}}},e.exports=function(e,t){if(""===e||null===e||"undefined"==typeof e)return{};t=t||{},t.delimiter="string"==typeof t.delimiter||i.isRegExp(t.delimiter)?t.delimiter:r.delimiter,t.depth="number"==typeof t.depth?t.depth:r.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:r.arrayLimit,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:r.parameterLimit;for(var n="string"==typeof e?r.parseValues(e,t):e,s={},o=Object.keys(n),a=0,l=o.length;l>a;++a){var c=o[a],u=r.parseKeys(c,n[c],t);s=i.merge(s,u)}return i.compact(s)}},function(e,t,n){var i=n(78),r={delimiter:"&"};r.stringify=function(e,t){if(i.isBuffer(e)?e=e.toString():e instanceof Date?e=e.toISOString():null===e&&(e=""),"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return[encodeURIComponent(t)+"="+encodeURIComponent(e)];var n=[];for(var s in e)e.hasOwnProperty(s)&&(n=n.concat(r.stringify(e[s],t+"["+s+"]")));return n},e.exports=function(e,t){t=t||{};var n="undefined"==typeof t.delimiter?r.delimiter:t.delimiter,i=[];for(var s in e)e.hasOwnProperty(s)&&(i=i.concat(r.stringify(e[s],s)));return i.join(n)}},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(){"use strict";i=function(){var e=n(353),t=n(351),i=n(352);return e({scheduler:new t(i)})}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(n(56))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(){"use strict";i=function(){function e(e){this.head=this.tail=this.length=0,this.buffer=new Array(1<<e)}return e.prototype.push=function(e){return this.length===this.buffer.length&&this._ensureCapacity(2*this.length),this.buffer[this.tail]=e,this.tail=this.tail+1&this.buffer.length-1,++this.length,this.length},e.prototype.shift=function(){var e=this.buffer[this.head];return this.buffer[this.head]=void 0,this.head=this.head+1&this.buffer.length-1,--this.length,e},e.prototype._ensureCapacity=function(e){var t,n=this.head,i=this.buffer,r=new Array(e),s=0;if(0===n)for(t=this.length;t>s;++s)r[s]=i[s];else{for(e=i.length,t=this.tail;e>n;++s,++n)r[s]=i[n];for(n=0;t>n;++s,++n)r[s]=i[n]}this.buffer=r,this.head=0,this.tail=this.length},e}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(n(56))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(){"use strict";i=function(){function e(e){this._async=e,this._queue=new i(15),this._afterQueue=new i(5),this._running=!1;var t=this;this.drain=function(){t._drain()}}function t(e){for(;e.length>0;)e.shift().run()}var i=n(350);return e.prototype.enqueue=function(e){this._add(this._queue,e)},e.prototype.afterQueue=function(e){this._add(this._afterQueue,e)},e.prototype._drain=function(){t(this._queue),this._running=!1,t(this._afterQueue)},e.prototype._add=function(e,t){e.push(t),this._running||(this._running=!0,this._async(this.drain))},e}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(n(56))},function(e,t,n){var i;(function(r){/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(){"use strict";i=function(e){var t,i;return t="undefined"!=typeof r&&null!==r&&"function"==typeof r.nextTick?function(e){r.nextTick(e)}:(i="function"==typeof MutationObserver&&MutationObserver||"function"==typeof WebKitMutationObserver&&WebKitMutationObserver)?function(e,t){function n(){var e=i;i=void 0,e()}var i,r=e.createElement("div"),s=new t(n);return s.observe(r,{attributes:!0}),function(e){i=e,r.setAttribute("class","x")}}(document,i):function(){var e;try{e=n(444)}catch(t){}if(e){if("function"==typeof e.runOnLoop)return e.runOnLoop;if("function"==typeof e.runOnContext)return e.runOnContext}var i=setTimeout;return function(e){i(e,0)}}(e)}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(n(56))}).call(t,n(439))},function(e,t,n){var i;/** @license MIT License (c) copyright 2010-2014 original author or authors */
!function(){"use strict";i=function(){return function(e){function t(e,t){this._handler=e===h?t:n(e)}function n(e){function t(e){r.resolve(e)}function n(e){r.reject(e)}function i(e){r.notify(e)}var r=new m;try{e(t,n,i)}catch(s){n(s)}return r}function i(e){return j(e)?e:new t(h,new g(u(e)))}function r(e){return new t(h,new g(new y(e)))}function s(){return H}function o(){return new t(h,new m)}function a(e){function n(e,t,n){this[e]=t,0===--c&&n.become(new b(this))}var i,r,s,o,a=new m,c=e.length>>>0,u=new Array(c);for(i=0;i<e.length;++i)if(s=e[i],void 0!==s||i in e)if(C(s))if(r=d(s),o=r.state(),0===o)r.fold(n,i,u,a);else{if(!(o>0)){l(e,i+1,r),a.become(r);break}u[i]=r.value,--c}else u[i]=s,--c;else--c;return 0===c&&a.become(new b(u)),new t(h,a)}function l(e,t,n){var i,r,s;for(i=t;i<e.length;++i)s=e[i],C(s)&&(r=d(s),r!==n&&r.visit(r,void 0,r._unreport))}function c(e){if(Object(e)===e&&0===e.length)return s();var n,i,r=new m;for(n=0;n<e.length;++n)i=e[n],void 0!==i&&n in e&&u(i).visit(r,r.resolve,r.reject);return new t(h,r)}function u(e){return j(e)?e._handler.join():C(e)?p(e):new b(e)}function d(e){return j(e)?e._handler.join():p(e)}function p(e){try{var t=e.then;return"function"==typeof t?new v(t,e):new b(e)}catch(n){return new y(n)}}function h(){}function f(){}function m(e,n){t.createContext(this,n),this.consumers=void 0,this.receiver=e,this.handler=void 0,this.resolved=!1}function g(e){this.handler=e}function v(e,t){m.call(this),R.enqueue(new T(e,t,this))}function b(e){t.createContext(this),this.value=e}function y(e){t.createContext(this),this.id=++z,this.value=e,this.handled=!1,this.reported=!1,this._report()}function _(e,t){this.rejection=e,this.context=t}function w(e){this.rejection=e}function x(){return new y(new TypeError("Promise cycle"))}function D(e,t){this.continuation=e,this.handler=t}function M(e,t){this.handler=t,this.value=e}function T(e,t,n){this._then=e,this.thenable=t,this.resolver=n}function k(e,t,n,i,r){try{e.call(t,n,i,r)}catch(s){i(s)}}function j(e){return e instanceof t}function C(e){return("object"==typeof e||"function"==typeof e)&&null!==e}function L(e,n,i,r){return"function"!=typeof e?r.become(n):(t.enterContext(n),O(e,n.value,i,r),void t.exitContext())}function S(e,n,i,r,s){return"function"!=typeof e?s.become(i):(t.enterContext(i),E(e,n,i.value,r,s),void t.exitContext())}function $(e,n,i,r,s){return"function"!=typeof e?s.notify(n):(t.enterContext(i),N(e,n,r,s),void t.exitContext())}function O(e,t,n,i){try{i.become(u(e.call(n,t)))}catch(r){i.become(new y(r))}}function E(e,t,n,i,r){try{e.call(i,t,n,r)}catch(s){r.become(new y(s))}}function N(e,t,n,i){try{i.notify(e.call(n,t))}catch(r){i.notify(r)}}function I(e,t){t.prototype=P(e.prototype),t.prototype.constructor=t}function Y(){}var R=e.scheduler,P=Object.create||function(e){function t(){}return t.prototype=e,new t};t.resolve=i,t.reject=r,t.never=s,t._defer=o,t._handler=u,t.prototype.then=function(e,t){var n=this._handler,i=n.join().state();if("function"!=typeof e&&i>0||"function"!=typeof t&&0>i)return new this.constructor(h,n);var r=this._beget(),s=r._handler;return n.chain(s,n.receiver,e,t,arguments.length>2?arguments[2]:void 0),r},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype._beget=function(){var e=this._handler,t=new m(e.receiver,e.join().context);return new this.constructor(h,t)},t.all=a,t.race=c,h.prototype.when=h.prototype.become=h.prototype.notify=h.prototype.fail=h.prototype._unreport=h.prototype._report=Y,h.prototype._state=0,h.prototype.state=function(){return this._state},h.prototype.join=function(){for(var e=this;void 0!==e.handler;)e=e.handler;return e},h.prototype.chain=function(e,t,n,i,r){this.when({resolver:e,receiver:t,fulfilled:n,rejected:i,progress:r})},h.prototype.visit=function(e,t,n,i){this.chain(A,e,t,n,i)},h.prototype.fold=function(e,t,n,i){this.visit(i,function(i){e.call(n,t,i,this)},i.reject,i.notify)},I(h,f),f.prototype.become=function(e){e.fail()};var A=new f;I(h,m),m.prototype._state=0,m.prototype.resolve=function(e){this.become(u(e))},m.prototype.reject=function(e){this.resolved||this.become(new y(e))},m.prototype.join=function(){if(!this.resolved)return this;for(var e=this;void 0!==e.handler;)if(e=e.handler,e===this)return this.handler=x();return e},m.prototype.run=function(){var e=this.consumers,t=this.join();this.consumers=void 0;for(var n=0;n<e.length;++n)t.when(e[n])},m.prototype.become=function(e){this.resolved||(this.resolved=!0,this.handler=e,void 0!==this.consumers&&R.enqueue(this),void 0!==this.context&&e._report(this.context))},m.prototype.when=function(e){this.resolved?R.enqueue(new D(e,this.handler)):void 0===this.consumers?this.consumers=[e]:this.consumers.push(e)},m.prototype.notify=function(e){this.resolved||R.enqueue(new M(e,this))},m.prototype.fail=function(e){var t="undefined"==typeof e?this.context:e;this.resolved&&this.handler.join().fail(t)},m.prototype._report=function(e){this.resolved&&this.handler.join()._report(e)},m.prototype._unreport=function(){this.resolved&&this.handler.join()._unreport()},I(h,g),g.prototype.when=function(e){R.enqueue(new D(e,this))},g.prototype._report=function(e){this.join()._report(e)},g.prototype._unreport=function(){this.join()._unreport()},I(m,v),I(h,b),b.prototype._state=1,b.prototype.fold=function(e,t,n,i){S(e,t,this,n,i)},b.prototype.when=function(e){L(e.fulfilled,this,e.receiver,e.resolver)};var z=0;I(h,y),y.prototype._state=-1,y.prototype.fold=function(e,t,n,i){i.become(this)},y.prototype.when=function(e){"function"==typeof e.rejected&&this._unreport(),L(e.rejected,this,e.receiver,e.resolver)},y.prototype._report=function(e){R.afterQueue(new _(this,e))},y.prototype._unreport=function(){this.handled=!0,R.afterQueue(new w(this))},y.prototype.fail=function(e){t.onFatalRejection(this,void 0===e?this.context:e)},_.prototype.run=function(){this.rejection.handled||(this.rejection.reported=!0,t.onPotentiallyUnhandledRejection(this.rejection,this.context))},w.prototype.run=function(){this.rejection.reported&&t.onPotentiallyUnhandledRejectionHandled(this.rejection)},t.createContext=t.enterContext=t.exitContext=t.onPotentiallyUnhandledRejection=t.onPotentiallyUnhandledRejectionHandled=t.onFatalRejection=Y;var F=new h,H=new t(h,F);return D.prototype.run=function(){this.handler.join().when(this.continuation)},M.prototype.run=function(){var e=this.handler.consumers;if(void 0!==e)for(var t,n=0;n<e.length;++n)t=e[n],$(t.progress,this.value,this.handler,t.receiver,t.resolver)},T.prototype.run=function(){function e(e){i.resolve(e)}function t(e){i.reject(e)}function n(e){i.notify(e)}var i=this.resolver;k(this._then,this.thenable,e,t,n)},t}}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(n(56))},function(e,t,n){"use strict";function i(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}var s=n(10),o=n(29),a=n(5),l=n(403),c=n(20),u=a.canUseDOM&&"TextEvent"in window&&!("documentMode"in document||i()),d=32,p=String.fromCharCode(d),h=s.topLevelTypes,f={beforeInput:{phasedRegistrationNames:{bubbled:c({onBeforeInput:null}),captured:c({onBeforeInputCapture:null})},dependencies:[h.topCompositionEnd,h.topKeyPress,h.topTextInput,h.topPaste]}},m=null,g={eventTypes:f,extractEvents:function(e,t,n,i){var s;if(u)switch(e){case h.topKeyPress:var a=i.which;if(a!==d)return;s=String.fromCharCode(a);break;case h.topTextInput:if(s=i.data,s===p)return;break;default:return}else{switch(e){case h.topPaste:m=null;break;case h.topKeyPress:i.which&&!r(i)&&(m=String.fromCharCode(i.which));break;case h.topCompositionEnd:m=i.data}if(null===m)return;s=m}if(s){var c=l.getPooled(f.beforeInput,n,i);return c.data=s,m=null,o.accumulateTwoPhaseDispatches(c),c}}};e.exports=g},function(e,t,n){var i=n(3),r={addClass:function(e,t){return i(!/\s/.test(t),'CSSCore.addClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.add(t):r.hasClass(e,t)||(e.className=e.className+" "+t)),e},removeClass:function(e,t){return i(!/\s/.test(t),'CSSCore.removeClass takes only a single class name. "%s" contains multiple classes.',t),t&&(e.classList?e.classList.remove(t):r.hasClass(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e},conditionClass:function(e,t,n){return(n?r.addClass:r.removeClass)(e,t)},hasClass:function(e,t){return i(!/\s/.test(t),"CSS.hasClass takes only a single class name."),e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}};e.exports=r},function(e,t,n){"use strict";function i(e){return"SELECT"===e.nodeName||"INPUT"===e.nodeName&&"file"===e.type}function r(e){var t=D.getPooled(C.change,S,e);_.accumulateTwoPhaseDispatches(t),x.batchedUpdates(s,t)}function s(e){y.enqueueEvents(e),y.processEventQueue()}function o(e,t){L=e,S=t,L.attachEvent("onchange",r)}function a(){L&&(L.detachEvent("onchange",r),L=null,S=null)}function l(e,t,n){return e===j.topChange?n:void 0}function c(e,t,n){e===j.topFocus?(a(),o(t,n)):e===j.topBlur&&a()}function u(e,t){L=e,S=t,$=e.value,O=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(L,"value",I),L.attachEvent("onpropertychange",p)}function d(){L&&(delete L.value,L.detachEvent("onpropertychange",p),L=null,S=null,$=null,O=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==$&&($=t,r(e))}}function h(e,t,n){return e===j.topInput?n:void 0}function f(e,t,n){e===j.topFocus?(d(),u(t,n)):e===j.topBlur&&d()}function m(e){return e!==j.topSelectionChange&&e!==j.topKeyUp&&e!==j.topKeyDown||!L||L.value===$?void 0:($=L.value,S)}function g(e){return"INPUT"===e.nodeName&&("checkbox"===e.type||"radio"===e.type)}function v(e,t,n){return e===j.topClick?n:void 0}var b=n(10),y=n(39),_=n(29),w=n(5),x=n(32),D=n(26),M=n(95),T=n(230),k=n(20),j=b.topLevelTypes,C={change:{phasedRegistrationNames:{bubbled:k({onChange:null}),captured:k({onChangeCapture:null})},dependencies:[j.topBlur,j.topChange,j.topClick,j.topFocus,j.topInput,j.topKeyDown,j.topKeyUp,j.topSelectionChange]}},L=null,S=null,$=null,O=null,E=!1;w.canUseDOM&&(E=M("change")&&(!("documentMode"in document)||document.documentMode>8));var N=!1;w.canUseDOM&&(N=M("input")&&(!("documentMode"in document)||document.documentMode>9));var I={get:function(){return O.get.call(this)},set:function(e){$=""+e,O.set.call(this,e)}},Y={eventTypes:C,extractEvents:function(e,t,n,r){var s,o;if(i(t)?E?s=l:o=c:T(t)?N?s=h:(s=m,o=f):g(t)&&(s=v),s){var a=s(e,t,n);if(a){var u=D.getPooled(C.change,a,r);return _.accumulateTwoPhaseDispatches(u),u}}o&&o(e,t,n)}};e.exports=Y},function(e){"use strict";var t=0,n={createReactRootIndex:function(){return t++}};e.exports=n},function(e,t,n){"use strict";function i(e){switch(e){case b.topCompositionStart:return _.compositionStart;case b.topCompositionEnd:return _.compositionEnd;case b.topCompositionUpdate:return _.compositionUpdate}}function r(e,t){return e===b.topKeyDown&&t.keyCode===m}function s(e,t){switch(e){case b.topKeyUp:return-1!==f.indexOf(t.keyCode);case b.topKeyDown:return t.keyCode!==m;case b.topKeyPress:case b.topMouseDown:case b.topBlur:return!0;default:return!1}}function o(e){this.root=e,this.startSelection=u.getSelection(e),this.startValue=this.getText()}var a=n(10),l=n(29),c=n(5),u=n(84),d=n(400),p=n(94),h=n(20),f=[9,13,27,32],m=229,g=c.canUseDOM&&"CompositionEvent"in window,v=!g||"documentMode"in document&&document.documentMode>8&&document.documentMode<=11,b=a.topLevelTypes,y=null,_={compositionEnd:{phasedRegistrationNames:{bubbled:h({onCompositionEnd:null}),captured:h({onCompositionEndCapture:null})},dependencies:[b.topBlur,b.topCompositionEnd,b.topKeyDown,b.topKeyPress,b.topKeyUp,b.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:h({onCompositionStart:null}),captured:h({onCompositionStartCapture:null})},dependencies:[b.topBlur,b.topCompositionStart,b.topKeyDown,b.topKeyPress,b.topKeyUp,b.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:h({onCompositionUpdate:null}),captured:h({onCompositionUpdateCapture:null})},dependencies:[b.topBlur,b.topCompositionUpdate,b.topKeyDown,b.topKeyPress,b.topKeyUp,b.topMouseDown]}};o.prototype.getText=function(){return this.root.value||this.root[p()]},o.prototype.getData=function(){var e=this.getText(),t=this.startSelection.start,n=this.startValue.length-this.startSelection.end;return e.substr(t,e.length-n-t)};var w={eventTypes:_,extractEvents:function(e,t,n,a){var c,u;if(g?c=i(e):y?s(e,a)&&(c=_.compositionEnd):r(e,a)&&(c=_.compositionStart),v&&(y||c!==_.compositionStart?c===_.compositionEnd&&y&&(u=y.getData(),y=null):y=new o(t)),c){var p=d.getPooled(c,n,a);return u&&(p.data=u),l.accumulateTwoPhaseDispatches(p),p}}};e.exports=w},function(e,t,n){"use strict";function i(e,t,n){e.insertBefore(t,e.childNodes[n]||null)}var r,s=n(360),o=n(213),a=n(94),l=n(3),c=a();r="textContent"===c?function(e,t){e.textContent=t}:function(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);if(t){var n=e.ownerDocument||document;e.appendChild(n.createTextNode(t))}};var u={dangerouslyReplaceNodeWithMarkup:s.dangerouslyReplaceNodeWithMarkup,updateTextContent:r,processUpdates:function(e,t){for(var n,a=null,c=null,u=0;n=e[u];u++)if(n.type===o.MOVE_EXISTING||n.type===o.REMOVE_NODE){var d=n.fromIndex,p=n.parentNode.childNodes[d],h=n.parentID;l(p,"processUpdates(): Unable to find child %s of element. This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting <p> or <a> tags, or using non-SVG elements in an <svg> parent. Try inspecting the child nodes of the element with React ID `%s`.",d,h),a=a||{},a[h]=a[h]||[],a[h][d]=p,c=c||[],c.push(p)}var f=s.dangerouslyRenderMarkup(t);if(c)for(var m=0;m<c.length;m++)c[m].parentNode.removeChild(c[m]);for(var g=0;n=e[g];g++)switch(n.type){case o.INSERT_MARKUP:i(n.parentNode,f[n.markupIndex],n.toIndex);break;case o.MOVE_EXISTING:i(n.parentNode,a[n.parentID][n.fromIndex],n.toIndex);break;case o.TEXT_CONTENT:r(n.parentNode,n.textContent);break;case o.REMOVE_NODE:}}};e.exports=u},function(e,t,n){"use strict";function i(e){return e.substring(1,e.indexOf(" "))}var r=n(5),s=n(410),o=n(19),a=n(227),l=n(3),c=/^(<[^ \/>]+)/,u="data-danger-index",d={dangerouslyRenderMarkup:function(e){l(r.canUseDOM,"dangerouslyRenderMarkup(...): Cannot render markup in a Worker thread. This is likely a bug in the framework. Please report immediately.");for(var t,n={},d=0;d<e.length;d++)l(e[d],"dangerouslyRenderMarkup(...): Missing markup."),t=i(e[d]),t=a(t)?t:"*",n[t]=n[t]||[],n[t][d]=e[d];var p=[],h=0;for(t in n)if(n.hasOwnProperty(t)){var f=n[t];for(var m in f)if(f.hasOwnProperty(m)){var g=f[m];f[m]=g.replace(c,"$1 "+u+'="'+m+'" ')}var v=s(f.join(""),o);for(d=0;d<v.length;++d){var b=v[d];b.hasAttribute&&b.hasAttribute(u)?(m=+b.getAttribute(u),b.removeAttribute(u),l(!p.hasOwnProperty(m),"Danger: Assigning to an already-occupied result index."),p[m]=b,h+=1):console.error("Danger: Discarding unexpected node:",b)}}return l(h===p.length,"Danger: Did not assign to every index of resultList."),l(p.length===e.length,"Danger: Expected markup to render %s nodes, but rendered %s.",e.length,p.length),p},dangerouslyReplaceNodeWithMarkup:function(e,t){l(r.canUseDOM,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. This is likely a bug in the framework. Please report immediately."),l(t,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."),l("html"!==e.tagName.toLowerCase(),"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See renderComponentToString().");var n=s(t,o)[0];e.parentNode.replaceChild(n,e)}};e.exports=d},function(e,t,n){"use strict";var i=n(20),r=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({CompositionEventPlugin:null}),i({BeforeInputEventPlugin:null}),i({AnalyticsEventPlugin:null}),i({MobileSafariClickEventPlugin:null})];e.exports=r},function(e,t,n){"use strict";var i=n(10),r=n(29),s=n(67),o=n(15),a=n(20),l=i.topLevelTypes,c=o.getFirstReactDOM,u={mouseEnter:{registrationName:a({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:a({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},d=[null,null],p={eventTypes:u,extractEvents:function(e,t,n,i){if(e===l.topMouseOver&&(i.relatedTarget||i.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var a;if(t.window===t)a=t;else{var p=t.ownerDocument;a=p?p.defaultView||p.parentWindow:window}var h,f;if(e===l.topMouseOut?(h=t,f=c(i.relatedTarget||i.toElement)||a):(h=a,f=t),h===f)return null;var m=h?o.getID(h):"",g=f?o.getID(f):"",v=s.getPooled(u.mouseLeave,m,i);v.type="mouseleave",v.target=h,v.relatedTarget=f;var b=s.getPooled(u.mouseEnter,g,i);return b.type="mouseenter",b.target=f,b.relatedTarget=h,r.accumulateEnterLeaveDispatches(v,b,m,g),d[0]=v,d[1]=b,d}};e.exports=p},function(e,t,n){var i=n(19),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):(console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:i})},registerDefault:function(){}};e.exports=r},function(e,t,n){"use strict";var i,r=n(28),s=n(5),o=r.injection.MUST_USE_ATTRIBUTE,a=r.injection.MUST_USE_PROPERTY,l=r.injection.HAS_BOOLEAN_VALUE,c=r.injection.HAS_SIDE_EFFECTS,u=r.injection.HAS_NUMERIC_VALUE,d=r.injection.HAS_POSITIVE_NUMERIC_VALUE,p=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE;if(s.canUseDOM){var h=document.implementation;i=h&&h.hasFeature&&h.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var f={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,accessKey:null,action:null,allowFullScreen:o|l,allowTransparency:o,alt:null,async:l,autoComplete:null,autoPlay:l,cellPadding:null,cellSpacing:null,charSet:o,checked:a|l,className:i?o:a,cols:o|d,colSpan:null,content:null,contentEditable:null,contextMenu:o,controls:a|l,coords:null,crossOrigin:null,data:null,dateTime:o,defer:l,dir:null,disabled:o|l,download:p,draggable:null,encType:null,form:o,formNoValidate:l,frameBorder:o,height:o,hidden:o|l,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:a,label:null,lang:null,list:null,loop:a|l,max:null,maxLength:o,media:o,mediaGroup:null,method:null,min:null,multiple:a|l,muted:a|l,name:null,noValidate:l,open:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:a|l,rel:null,required:l,role:o,rows:o|d,rowSpan:null,sandbox:null,scope:null,scrollLeft:a,scrolling:null,scrollTop:a,seamless:o|l,selected:a|l,shape:null,size:o|d,sizes:o,span:d,spellCheck:null,src:null,srcDoc:a,srcSet:o,start:u,step:null,style:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:a|c,width:o,wmode:o,autoCapitalize:null,autoCorrect:null,itemProp:o,itemScope:o|l,itemType:o,property:null},DOMAttributeNames:{className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoCapitalize:"autocapitalize",autoComplete:"autocomplete",autoCorrect:"autocorrect",autoFocus:"autofocus",autoPlay:"autoplay",encType:"enctype",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};e.exports=f},function(e,t,n){"use strict";var i=n(387),r=n(390),s={linkState:function(e){return new i(this.state[e],r.createStateKeySetter(this,e))}};e.exports=s},function(e,t,n){"use strict";var i=n(10),r=n(19),s=i.topLevelTypes,o={eventTypes:null,extractEvents:function(e,t,n,i){if(e===s.topTouchStart){var o=i.target;o&&!o.onclick&&(o.onclick=r)}}};e.exports=o},function(e,t,n){"use strict";var i=n(40),r=n(222),s=n(368),o=i.createClass({displayName:"ReactCSSTransitionGroup",propTypes:{transitionName:i.PropTypes.string.isRequired,transitionEnter:i.PropTypes.bool,transitionLeave:i.PropTypes.bool},getDefaultProps:function(){return{transitionEnter:!0,transitionLeave:!0}},_wrapChild:function(e){return s({name:this.props.transitionName,enter:this.props.transitionEnter,leave:this.props.transitionLeave},e)},render:function(){return this.transferPropsTo(r({childFactory:this._wrapChild},this.props.children))}});e.exports=o},function(e,t,n){"use strict";var i=n(40),r=n(355),s=n(393),o=n(233),a=17,l=5e3,c=null;c=function(){console.warn("transition(): tried to perform an animation without an animationend or transitionend event after timeout ("+l+"ms). You should either disable this transition in JS or add a CSS animation/transition.")};var u=i.createClass({displayName:"ReactCSSTransitionGroupChild",transition:function(e,t){var n=this.getDOMNode(),i=this.props.name+"-"+e,o=i+"-active",a=null,u=function(){clearTimeout(a),r.removeClass(n,i),r.removeClass(n,o),s.removeEndEventListener(n,u),t&&t()};s.addEndEventListener(n,u),r.addClass(n,i),this.queueClass(o),a=setTimeout(c,l)},queueClass:function(e){this.classNameQueue.push(e),this.timeout||(this.timeout=setTimeout(this.flushClassNameQueue,a))},flushClassNameQueue:function(){this.isMounted()&&this.classNameQueue.forEach(r.addClass.bind(r,this.getDOMNode())),this.classNameQueue.length=0,this.timeout=null},componentWillMount:function(){this.classNameQueue=[]},componentWillUnmount:function(){this.timeout&&clearTimeout(this.timeout)},componentWillEnter:function(e){this.props.enter?this.transition("enter",e):e()},componentWillLeave:function(e){this.props.leave?this.transition("leave",e):e()},render:function(){return o(this.props.children)}});e.exports=u},function(e,t,n){"use strict";var i=n(373),r=n(85),s=n(15),o=n(22),a=n(388),l=n(228),c=n(3),u=n(234),d=1,p=9,h={ReactReconcileTransaction:a,BackendIDOperations:i,unmountIDFromEnvironment:function(e){s.purgeID(e)},mountImageIntoNode:o.measure("ReactComponentBrowserEnvironment","mountImageIntoNode",function(e,t,n){if(c(t&&(t.nodeType===d||t.nodeType===p),"mountComponentIntoNode(...): Target container is not valid."),n){if(r.canReuseMarkup(e,l(t)))return;c(t.nodeType!==p,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side."),console.warn("React attempted to use reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server.")}c(t.nodeType!==p,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See renderComponentToString() for server rendering."),u(t,e)})};e.exports=h},function(e,t,n){"use strict";var i=n(235),r={shouldComponentUpdate:function(e,t){return!i(this.props,e)||!i(this.state,t)}};e.exports=r},function(e,t,n){"use strict";var i=n(66),r=n(17),s=n(18),o=n(14),a=n(33),l=o.button,c=a({onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0}),u=s.createClass({displayName:"ReactDOMButton",mixins:[i,r],render:function(){var e={};for(var t in this.props)!this.props.hasOwnProperty(t)||this.props.disabled&&c[t]||(e[t]=this.props[t]);return l(e,this.props.children)}});e.exports=u},function(e,t,n){"use strict";var i=n(10),r=n(207),s=n(17),o=n(18),a=n(14),l=a.form,c=o.createClass({displayName:"ReactDOMForm",mixins:[s,r],render:function(){return this.transferPropsTo(l(null,this.props.children))},componentDidMount:function(){this.trapBubbledEvent(i.topLevelTypes.topReset,"reset"),this.trapBubbledEvent(i.topLevelTypes.topSubmit,"submit")}});e.exports=c},function(e,t,n){"use strict";var i=n(205),r=n(359),s=n(38),o=n(15),a=n(22),l=n(3),c=n(234),u={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},d={updatePropertyByID:a.measure("ReactDOMIDOperations","updatePropertyByID",function(e,t,n){var i=o.getNode(e);l(!u.hasOwnProperty(t),"updatePropertyByID(...): %s",u[t]),null!=n?s.setValueForProperty(i,t,n):s.deleteValueForProperty(i,t)}),deletePropertyByID:a.measure("ReactDOMIDOperations","deletePropertyByID",function(e,t,n){var i=o.getNode(e);l(!u.hasOwnProperty(t),"updatePropertyByID(...): %s",u[t]),s.deleteValueForProperty(i,t,n)}),updateStylesByID:a.measure("ReactDOMIDOperations","updateStylesByID",function(e,t){var n=o.getNode(e);i.setValueForStyles(n,t)}),updateInnerHTMLByID:a.measure("ReactDOMIDOperations","updateInnerHTMLByID",function(e,t){var n=o.getNode(e);c(n,t)}),updateTextContentByID:a.measure("ReactDOMIDOperations","updateTextContentByID",function(e,t){var n=o.getNode(e);r.updateTextContent(n,t)}),dangerouslyReplaceNodeWithMarkupByID:a.measure("ReactDOMIDOperations","dangerouslyReplaceNodeWithMarkupByID",function(e,t){var n=o.getNode(e);r.dangerouslyReplaceNodeWithMarkup(n,t)}),dangerouslyProcessChildrenUpdates:a.measure("ReactDOMIDOperations","dangerouslyProcessChildrenUpdates",function(e,t){for(var n=0;n<e.length;n++)e[n].parentNode=o.getNode(e[n].parentID);r.processUpdates(e,t)})};e.exports=d},function(e,t,n){"use strict";var i=n(10),r=n(207),s=n(17),o=n(18),a=n(14),l=a.img,c=o.createClass({displayName:"ReactDOMImg",tagName:"IMG",mixins:[s,r],render:function(){return l(this.props)},componentDidMount:function(){this.trapBubbledEvent(i.topLevelTypes.topLoad,"load"),this.trapBubbledEvent(i.topLevelTypes.topError,"error")}});e.exports=c},function(e,t,n){"use strict";var i=n(66),r=n(38),s=n(81),o=n(17),a=n(18),l=n(14),c=n(15),u=n(3),d=n(8),p=l.input,h={},f=a.createClass({displayName:"ReactDOMInput",mixins:[i,s.Mixin,o],getInitialState:function(){var e=this.props.defaultValue;return{checked:this.props.defaultChecked||!1,value:null!=e?e:null}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=d(this.props);e.defaultChecked=null,e.defaultValue=null;var t=s.getValue(this);e.value=null!=t?t:this.state.value;var n=s.getChecked(this);return e.checked=null!=n?n:this.state.checked,e.onChange=this._handleChange,p(e,this.props.children)},componentDidMount:function(){var e=c.getID(this.getDOMNode());h[e]=this},componentWillUnmount:function(){var e=this.getDOMNode(),t=c.getID(e);delete h[t]},componentDidUpdate:function(){var e=this.getDOMNode();null!=this.props.checked&&r.setValueForProperty(e,"checked",this.props.checked||!1);var t=s.getValue(this);null!=t&&r.setValueForProperty(e,"value",""+t)},_handleChange:function(e){var t,n=s.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({checked:e.target.checked,value:e.target.value});var i=this.props.name;if("radio"===this.props.type&&null!=i){for(var r=this.getDOMNode(),o=r;o.parentNode;)o=o.parentNode;for(var a=o.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),l=0,d=a.length;d>l;l++){var p=a[l];if(p!==r&&p.form===r.form){var f=c.getID(p);u(f,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported.");var m=h[f];u(m,"ReactDOMInput: Unknown radio button ID %s.",f),m.setState({checked:!1})}}}return t}});e.exports=f},function(e,t,n){"use strict";var i=n(17),r=n(18),s=n(14),o=n(12),a=s.option,l=r.createClass({displayName:"ReactDOMOption",mixins:[i],componentWillMount:function(){o(null==this.props.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.")},render:function(){return a(this.props,this.props.children)}});e.exports=l},function(e,t,n){"use strict";function i(e,t){if(null!=e[t])if(e.multiple){if(!Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be an array if `multiple` is true.")}else if(Array.isArray(e[t]))return new Error("The `"+t+"` prop supplied to <select> must be a scalar value if `multiple` is false.")}function r(e,t){var n,i,r,s=e.props.multiple,o=null!=t?t:e.state.value,a=e.getDOMNode().options;if(s)for(n={},i=0,r=o.length;r>i;++i)n[""+o[i]]=!0;else n=""+o;for(i=0,r=a.length;r>i;i++){var l=s?n.hasOwnProperty(a[i].value):a[i].value===n;l!==a[i].selected&&(a[i].selected=l)}}var s=n(66),o=n(81),a=n(17),l=n(18),c=n(14),u=n(8),d=c.select,p=l.createClass({displayName:"ReactDOMSelect",mixins:[s,o.Mixin,a],propTypes:{defaultValue:i,value:i},getInitialState:function(){return{value:this.props.defaultValue||(this.props.multiple?[]:"")}},componentWillReceiveProps:function(e){!this.props.multiple&&e.multiple?this.setState({value:[this.state.value]}):this.props.multiple&&!e.multiple&&this.setState({value:this.state.value[0]})},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=u(this.props);return e.onChange=this._handleChange,e.value=null,d(e,this.props.children)},componentDidMount:function(){r(this,o.getValue(this))},componentDidUpdate:function(e){var t=o.getValue(this),n=!!e.multiple,i=!!this.props.multiple;(null!=t||n!==i)&&r(this,t)},_handleChange:function(e){var t,n=o.getOnChange(this);n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1);var i;if(this.props.multiple){i=[];for(var r=e.target.options,s=0,a=r.length;a>s;s++)r[s].selected&&i.push(r[s].value)}else i=e.target.value;return this.setState({value:i}),t}});e.exports=p},function(e,t,n){"use strict";function i(e,t,n,i){return e===n&&t===i}function r(e){var t=document.selection,n=t.createRange(),i=n.text.length,r=n.duplicate();r.moveToElementText(e),r.setEndPoint("EndToStart",n);var s=r.text.length,o=s+i;return{start:s,end:o}}function s(e){var t=window.getSelection();if(0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,s=t.focusNode,o=t.focusOffset,a=t.getRangeAt(0),l=i(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),c=l?0:a.toString().length,u=a.cloneRange();u.selectNodeContents(e),u.setEnd(a.startContainer,a.startOffset);var d=i(u.startContainer,u.startOffset,u.endContainer,u.endOffset),p=d?0:u.toString().length,h=p+c,f=document.createRange();f.setStart(n,r),f.setEnd(s,o);var m=f.collapsed;return f.detach(),{start:m?h:p,end:m?p:h}}function o(e,t){var n,i,r=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,i=n):t.start>t.end?(n=t.end,i=t.start):(n=t.start,i=t.end),r.moveToElementText(e),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}function a(e,t){var n=window.getSelection(),i=e[u()].length,r=Math.min(t.start,i),s="undefined"==typeof t.end?r:Math.min(t.end,i);if(!n.extend&&r>s){var o=s;s=r,r=o}var a=c(e,r),l=c(e,s);if(a&&l){var d=document.createRange();d.setStart(a.node,a.offset),n.removeAllRanges(),r>s?(n.addRange(d),n.extend(l.node,l.offset)):(d.setEnd(l.node,l.offset),n.addRange(d)),d.detach()}}var l=n(5),c=n(415),u=n(94),d=l.canUseDOM&&document.selection,p={getOffsets:d?r:s,setOffsets:d?o:a};e.exports=p},function(e,t,n){"use strict";var i=n(66),r=n(38),s=n(81),o=n(17),a=n(18),l=n(14),c=n(3),u=n(8),d=n(12),p=l.textarea,h=a.createClass({displayName:"ReactDOMTextarea",mixins:[i,s.Mixin,o],getInitialState:function(){var e=this.props.defaultValue,t=this.props.children;
null!=t&&(d(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),c(null==e,"If you supply `defaultValue` on a <textarea>, do not pass children."),Array.isArray(t)&&(c(t.length<=1,"<textarea> can only have at most one child."),t=t[0]),e=""+t),null==e&&(e="");var n=s.getValue(this);return{initialValue:""+(null!=n?n:e)}},shouldComponentUpdate:function(){return!this._isChanging},render:function(){var e=u(this.props);return c(null==e.dangerouslySetInnerHTML,"`dangerouslySetInnerHTML` does not make sense on <textarea>."),e.defaultValue=null,e.value=null,e.onChange=this._handleChange,p(e,this.state.initialValue)},componentDidUpdate:function(){var e=s.getValue(this);if(null!=e){var t=this.getDOMNode();r.setValueForProperty(t,"value",""+e)}},_handleChange:function(e){var t,n=s.getOnChange(this);return n&&(this._isChanging=!0,t=n.call(this,e),this._isChanging=!1),this.setState({value:e.target.value}),t}});e.exports=h},function(e,t,n){"use strict";function i(){this.reinitializeTransaction()}var r=n(32),s=n(68),o=n(19),a=n(16),l={initialize:o,close:function(){p.isBatchingUpdates=!1}},c={initialize:o,close:r.flushBatchedUpdates.bind(r)},u=[c,l];a(i,s.Mixin),a(i,{getTransactionWrappers:function(){return u}});var d=new i,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n){var i=p.isBatchingUpdates;p.isBatchingUpdates=!0,i?e(t,n):d.perform(e,null,t,n)}};e.exports=p},function(e,t,n){"use strict";function i(){T.EventEmitter.injectReactEventListener(M),T.EventPluginHub.injectEventPluginOrder(l),T.EventPluginHub.injectInstanceHandle(k),T.EventPluginHub.injectMount(j),T.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:S,EnterLeaveEventPlugin:c,ChangeEventPlugin:s,CompositionEventPlugin:a,MobileSafariClickEventPlugin:p,SelectEventPlugin:C,BeforeInputEventPlugin:r}),T.DOM.injectComponentClasses({button:v,form:b,img:y,input:_,option:w,select:x,textarea:D,html:O(g.html),head:O(g.head),body:O(g.body)}),T.CompositeComponent.injectMixin(h),T.DOMProperty.injectDOMPropertyConfig(d),T.DOMProperty.injectDOMPropertyConfig($),T.EmptyComponent.injectEmptyComponent(g.noscript),T.Updates.injectReconcileTransaction(f.ReactReconcileTransaction),T.Updates.injectBatchingStrategy(m),T.RootIndex.injectCreateReactRootIndex(u.canUseDOM?o.createReactRootIndex:L.createReactRootIndex),T.Component.injectEnvironment(f);var e=u.canUseDOM&&window.location.href||"";if(/[?&]react_perf\b/.test(e)){var t=n(210);t.start()}}var r=n(354),s=n(356),o=n(357),a=n(358),l=n(361),c=n(362),u=n(5),d=n(364),p=n(366),h=n(17),f=n(369),m=n(380),g=n(14),v=n(371),b=n(372),y=n(374),_=n(375),w=n(376),x=n(377),D=n(379),M=n(385),T=n(386),k=n(31),j=n(15),C=n(396),L=n(397),S=n(398),$=n(395),O=n(409);e.exports={inject:i}},function(e,t,n){function i(e){for(var t=0,n=0;n<e.length;n++){var i=e[n];t+=i.totalTime}return t}function r(e){for(var t=[],n=0;n<e.length;n++){var i,r=e[n];for(i in r.writes)r.writes[i].forEach(function(e){t.push({id:i,type:u[e.type]||e.type,args:e.args})})}return t}function s(e){for(var t,n={},i=0;i<e.length;i++){var r=e[i],s=l(r.exclusive,r.inclusive);for(var o in s)t=r.displayNames[o].current,n[t]=n[t]||{componentName:t,inclusive:0,exclusive:0,render:0,count:0},r.render[o]&&(n[t].render+=r.render[o]),r.exclusive[o]&&(n[t].exclusive+=r.exclusive[o]),r.inclusive[o]&&(n[t].inclusive+=r.inclusive[o]),r.counts[o]&&(n[t].count+=r.counts[o])}var a=[];for(t in n)n[t].exclusive>=c&&a.push(n[t]);return a.sort(function(e,t){return t.exclusive-e.exclusive}),a}function o(e,t){for(var n,i={},r=0;r<e.length;r++){var s,o=e[r],u=l(o.exclusive,o.inclusive);t&&(s=a(o));for(var d in u)if(!t||s[d]){var p=o.displayNames[d];n=p.owner+" > "+p.current,i[n]=i[n]||{componentName:n,time:0,count:0},o.inclusive[d]&&(i[n].time+=o.inclusive[d]),o.counts[d]&&(i[n].count+=o.counts[d])}}var h=[];for(n in i)i[n].time>=c&&h.push(i[n]);return h.sort(function(e,t){return t.time-e.time}),h}function a(e){var t={},n=Object.keys(e.writes),i=l(e.exclusive,e.inclusive);for(var r in i){for(var s=!1,o=0;o<n.length;o++)if(0===n[o].indexOf(r)){s=!0;break}!s&&e.counts[r]>0&&(t[r]=!0)}return t}var l=n(8),c=1.2,u={mountImageIntoNode:"set innerHTML",INSERT_MARKUP:"set innerHTML",MOVE_EXISTING:"move",REMOVE_NODE:"remove",TEXT_CONTENT:"set textContent",updatePropertyByID:"update attribute",deletePropertyByID:"delete attribute",updateStylesByID:"update styles",updateInnerHTMLByID:"set innerHTML",dangerouslyReplaceNodeWithMarkupByID:"replace"},d={getExclusiveSummary:s,getInclusiveSummary:o,getDOMSummary:r,getTotalTime:i};e.exports=d},function(e){"use strict";var t={guard:function(e){return e}};e.exports=t},function(e,t,n){"use strict";function i(e){r.enqueueEvents(e),r.processEventQueue()}var r=n(39),s={handleTopLevel:function(e,t,n,s){var o=r.extractEvents(e,t,n,s);i(o)}};e.exports=s},function(e,t,n){"use strict";function i(e){var t=d.getID(e),n=u.getReactRootIDFromNodeID(t),i=d.findReactContainerForID(n),r=d.getFirstReactDOM(i);return r}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function s(e){for(var t=d.getFirstReactDOM(h(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=i(n);for(var r=0,s=e.ancestors.length;s>r;r++){t=e.ancestors[r];var o=d.getID(t)||"";g._handleTopLevel(e.topLevelType,t,o,e.nativeEvent)}}function o(e){var t=f(window);e(t)}var a=n(363),l=n(5),c=n(25),u=n(31),d=n(15),p=n(32),h=n(93),f=n(229),m=n(16);m(r,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(r,c.twoArgumentPooler);var g={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:l.canUseDOM?window:null,setHandleTopLevel:function(e){g._handleTopLevel=e},setEnabled:function(e){g._enabled=!!e},isEnabled:function(){return g._enabled},trapBubbledEvent:function(e,t,n){var i=n;if(i)return a.listen(i,t,g.dispatchEvent.bind(null,e))},trapCapturedEvent:function(e,t,n){var i=n;if(i)return a.capture(i,t,g.dispatchEvent.bind(null,e))},monitorScrollValue:function(e){var t=o.bind(null,e);a.listen(window,"scroll",t),a.listen(window,"resize",t)},dispatchEvent:function(e,t){if(g._enabled){var n=r.getPooled(e,t);try{p.batchedUpdates(s,n)}finally{r.release(n)}}}};e.exports=g},function(e,t,n){"use strict";var i=n(28),r=n(39),s=n(41),o=n(18),a=n(14),l=n(83),c=n(30),u=n(22),d=n(220),p=n(32),h={Component:s.injection,CompositeComponent:o.injection,DOMProperty:i.injection,EmptyComponent:l.injection,EventPluginHub:r.injection,DOM:a.injection,EventEmitter:c.injection,Perf:u.injection,RootIndex:d.injection,Updates:p.injection};e.exports=h},function(e,t,n){"use strict";function i(e,t){this.value=e,this.requestChange=t}function r(e){var t={value:"undefined"==typeof e?s.PropTypes.any.isRequired:e.isRequired,requestChange:s.PropTypes.func.isRequired};return s.PropTypes.shape(t)}var s=n(40);i.PropTypes={link:r},e.exports=i},function(e,t,n){"use strict";function i(){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=r.getPooled(null),this.putListenerQueue=l.getPooled()}var r=n(79),s=n(25),o=n(30),a=n(84),l=n(219),c=n(68),u=n(16),d={initialize:a.getSelectionInformation,close:a.restoreSelection},p={initialize:function(){var e=o.isEnabled();return o.setEnabled(!1),e},close:function(e){o.setEnabled(e)}},h={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},f={initialize:function(){this.putListenerQueue.reset()},close:function(){this.putListenerQueue.putListeners()}},m=[f,d,p,h],g={getTransactionWrappers:function(){return m},getReactMountReady:function(){return this.reactMountReady},getPutListenerQueue:function(){return this.putListenerQueue},destructor:function(){r.release(this.reactMountReady),this.reactMountReady=null,l.release(this.putListenerQueue),this.putListenerQueue=null}};u(i,c.Mixin),u(i,g),s.addPoolingTo(i),e.exports=i},function(e,t,n){"use strict";function i(e){u(s.isValidDescriptor(e),"renderComponentToString(): You must pass a valid ReactComponent."),u(!(2===arguments.length&&"function"==typeof arguments[1]),"renderComponentToString(): This function became synchronous and now returns the generated markup. Please remove the second parameter.");var t;try{var n=o.createReactRootID();return t=l.getPooled(!1),t.perform(function(){var i=c(e),r=i.mountComponent(n,t,0);return a.addChecksumToMarkup(r)},null)}finally{l.release(t)}}function r(e){u(s.isValidDescriptor(e),"renderComponentToStaticMarkup(): You must pass a valid ReactComponent.");var t;try{var n=o.createReactRootID();return t=l.getPooled(!0),t.perform(function(){var i=c(e);return i.mountComponent(n,t,0)},null)}finally{l.release(t)}}var s=n(11),o=n(31),a=n(85),l=n(221),c=n(55),u=n(3);e.exports={renderComponentToString:i,renderComponentToStaticMarkup:r}},function(e){"use strict";function t(e,t){var n={};return function(i){n[t]=i,e.setState(n)}}var n={createStateSetter:function(e,t){return function(n,i,r,s,o,a){var l=t.call(e,n,i,r,s,o,a);l&&e.setState(l)}},createStateKeySetter:function(e,n){var i=e.__keySetters||(e.__keySetters={});return i[n]||(i[n]=t(e,n))}};n.Mixin={createStateSetter:function(e){return n.createStateSetter(this,e)},createStateKeySetter:function(e){return n.createStateKeySetter(this,e)}},e.exports=n},function(e,t,n){"use strict";function i(){}function r(e){return function(t,n){var r;w.isDOMComponent(t)?r=t.getDOMNode():t.tagName&&(r=t);var s=new i;s.target=r;var o=new v(h.eventNameDispatchConfigs[e],f.getID(r),s);b(o,n),c.accumulateTwoPhaseDispatches(o),g.batchedUpdates(function(){l.enqueueEvents(o),l.processEventQueue()})}}function s(){w.Simulate={};var e;for(e in h.eventNameDispatchConfigs)w.Simulate[e]=r(e)}function o(e){return function(t,n){var r=new i(e);b(r,n),w.isDOMComponent(t)?w.simulateNativeEventOnDOMComponent(e,t,r):t.tagName&&w.simulateNativeEventOnNode(e,t,r)}}var a=n(10),l=n(39),c=n(29),u=n(40),d=n(11),p=n(14),h=n(30),f=n(15),m=n(86),g=n(32),v=n(26),b=n(69),y=n(43),_=a.topLevelTypes,w={renderIntoDocument:function(e){var t=document.createElement("div");return u.renderComponent(e,t)},isDescriptor:function(e){return d.isValidDescriptor(e)},isDescriptorOfType:function(e,t){return d.isValidDescriptor(e)&&e.type===t.type},isDOMComponent:function(e){return!!(e&&e.mountComponent&&e.tagName)},isDOMComponentDescriptor:function(e){return!!(e&&d.isValidDescriptor(e)&&e.tagName)},isCompositeComponent:function(e){return"function"==typeof e.render&&"function"==typeof e.setState},isCompositeComponentWithType:function(e,t){return!(!w.isCompositeComponent(e)||e.constructor!==t.type)},isCompositeComponentDescriptor:function(e){if(!d.isValidDescriptor(e))return!1;var t=e.type.prototype;return"function"==typeof t.render&&"function"==typeof t.setState},isCompositeComponentDescriptorWithType:function(e,t){return!(!w.isCompositeComponentDescriptor(e)||e.constructor!==t)},isTextComponent:function(e){return e instanceof m.type},findAllInRenderedTree:function(e,t){if(!e)return[];var n=t(e)?[e]:[];if(w.isDOMComponent(e)){var i,r=e._renderedChildren;for(i in r)r.hasOwnProperty(i)&&(n=n.concat(w.findAllInRenderedTree(r[i],t)))}else w.isCompositeComponent(e)&&(n=n.concat(w.findAllInRenderedTree(e._renderedComponent,t)));return n},scryRenderedDOMComponentsWithClass:function(e,t){return w.findAllInRenderedTree(e,function(e){var n=e.props.className;return w.isDOMComponent(e)&&n&&-1!==(" "+n+" ").indexOf(" "+t+" ")})},findRenderedDOMComponentWithClass:function(e,t){var n=w.scryRenderedDOMComponentsWithClass(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for class:"+t);return n[0]},scryRenderedDOMComponentsWithTag:function(e,t){return w.findAllInRenderedTree(e,function(e){return w.isDOMComponent(e)&&e.tagName===t.toUpperCase()})},findRenderedDOMComponentWithTag:function(e,t){var n=w.scryRenderedDOMComponentsWithTag(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for tag:"+t);return n[0]},scryRenderedComponentsWithType:function(e,t){return w.findAllInRenderedTree(e,function(e){return w.isCompositeComponentWithType(e,t)})},findRenderedComponentWithType:function(e,t){var n=w.scryRenderedComponentsWithType(e,t);if(1!==n.length)throw new Error("Did not find exactly one match for componentType:"+t);return n[0]},mockComponent:function(e){var t=u.createClass({displayName:"ConvenienceConstructor",render:function(){var t=t||e.mockTagName||"div";return p[t](null,this.props.children)}});return y(e,t),e.mockImplementation(t),this},simulateNativeEventOnNode:function(e,t,n){n.target=t,h.ReactEventListener.dispatchEvent(e,n)},simulateNativeEventOnDOMComponent:function(e,t,n){w.simulateNativeEventOnNode(e,t.getDOMNode(),n)},nativeTouchData:function(e,t){return{touches:[{pageX:e,pageY:t}]}},Simulate:null,SimulateNative:{}},x=l.injection.injectEventPluginOrder;l.injection.injectEventPluginOrder=function(){x.apply(this,arguments),s()};var D=l.injection.injectEventPluginsByName;l.injection.injectEventPluginsByName=function(){D.apply(this,arguments),s()},s();var M;for(M in _){var T=0===M.indexOf("top")?M.charAt(3).toLowerCase()+M.substr(4):M;w.SimulateNative[T]=o(M)}e.exports=w},function(e,t,n){"use strict";var i=n(208),r={getChildMapping:function(e){return i.map(e,function(e){return e})},mergeChildMappings:function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var i={},r=[];for(var s in e)t.hasOwnProperty(s)?r.length&&(i[s]=r,r=[]):r.push(s);var o,a={};for(var l in t){if(i.hasOwnProperty(l))for(o=0;o<i[l].length;o++){var c=i[l][o];a[i[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<r.length;o++)a[r[o]]=n(r[o]);return a}};e.exports=r},function(e,t,n){"use strict";function i(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete a.animationend.animation,"TransitionEvent"in window||delete a.transitionend.transition;for(var n in a){var i=a[n];for(var r in i)if(r in t){l.push(i[r]);break}}}function r(e,t,n){e.addEventListener(t,n,!1)}function s(e,t,n){e.removeEventListener(t,n,!1)}var o=n(5),a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},l=[];o.canUseDOM&&i();var c={addEndEventListener:function(e,t){return 0===l.length?void window.setTimeout(t,0):void l.forEach(function(n){r(e,n,t)})},removeEndEventListener:function(e,t){0!==l.length&&l.forEach(function(n){s(e,n,t)})}};e.exports=c},function(e,t,n){"use strict";var i=n(365),r=n(40),s=n(370),o=n(367),a=n(222),l=n(89),c=n(88),u=n(425);r.addons={CSSTransitionGroup:o,LinkedStateMixin:i,PureRenderMixin:s,TransitionGroup:a,classSet:l,cloneWithProps:c,update:u},r.addons.Perf=n(210),r.addons.TestUtils=n(391),e.exports=r},function(e,t,n){"use strict";var i=n(28),r=i.injection.MUST_USE_ATTRIBUTE,s={Properties:{cx:r,cy:r,d:r,dx:r,dy:r,fill:r,fillOpacity:r,fontFamily:r,fontSize:r,fx:r,fy:r,gradientTransform:r,gradientUnits:r,markerEnd:r,markerMid:r,markerStart:r,offset:r,opacity:r,patternContentUnits:r,patternUnits:r,points:r,preserveAspectRatio:r,r:r,rx:r,ry:r,spreadMethod:r,stopColor:r,stopOpacity:r,stroke:r,strokeDasharray:r,strokeLinecap:r,strokeOpacity:r,strokeWidth:r,textAnchor:r,transform:r,version:r,viewBox:r,x1:r,x2:r,x:r,y1:r,y2:r,y:r},DOMAttributeNames:{fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox"}};e.exports=s},function(e,t,n){"use strict";function i(e){if("selectionStart"in e&&a.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(document.selection){var t=document.selection.createRange();return{parentElement:t.parentElement(),text:t.text,top:t.boundingTop,left:t.boundingLeft}}var n=window.getSelection();return{anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}}function r(e){if(!b&&null!=m&&m==c()){var t=i(m);if(!v||!p(v,t)){v=t;var n=l.getPooled(f.select,g,e);return n.type="select",n.target=m,o.accumulateTwoPhaseDispatches(n),n}}}var s=n(10),o=n(29),a=n(84),l=n(26),c=n(226),u=n(230),d=n(20),p=n(235),h=s.topLevelTypes,f={select:{phasedRegistrationNames:{bubbled:d({onSelect:null}),captured:d({onSelectCapture:null})},dependencies:[h.topBlur,h.topContextMenu,h.topFocus,h.topKeyDown,h.topMouseDown,h.topMouseUp,h.topSelectionChange]}},m=null,g=null,v=null,b=!1,y={eventTypes:f,extractEvents:function(e,t,n,i){switch(e){case h.topFocus:(u(t)||"true"===t.contentEditable)&&(m=t,g=n,v=null);break;case h.topBlur:m=null,g=null,v=null;break;case h.topMouseDown:b=!0;break;case h.topContextMenu:case h.topMouseUp:return b=!1,r(i);case h.topSelectionChange:case h.topKeyDown:case h.topKeyUp:return r(i)}}};e.exports=y},function(e){"use strict";var t=Math.pow(2,53),n={createReactRootIndex:function(){return Math.ceil(Math.random()*t)}};e.exports=n},function(e,t,n){"use strict";var i=n(10),r=n(80),s=n(29),o=n(399),a=n(26),l=n(402),c=n(404),u=n(67),d=n(401),p=n(405),h=n(54),f=n(406),m=n(3),g=n(20),v=i.topLevelTypes,b={blur:{phasedRegistrationNames:{bubbled:g({onBlur:!0}),captured:g({onBlurCapture:!0})}},click:{phasedRegistrationNames:{bubbled:g({onClick:!0}),captured:g({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:g({onContextMenu:!0}),captured:g({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:g({onCopy:!0}),captured:g({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:g({onCut:!0}),captured:g({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:g({onDoubleClick:!0}),captured:g({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:g({onDrag:!0}),captured:g({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:g({onDragEnd:!0}),captured:g({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:g({onDragEnter:!0}),captured:g({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:g({onDragExit:!0}),captured:g({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:g({onDragLeave:!0}),captured:g({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:g({onDragOver:!0}),captured:g({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:g({onDragStart:!0}),captured:g({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:g({onDrop:!0}),captured:g({onDropCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:g({onFocus:!0}),captured:g({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:g({onInput:!0}),captured:g({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:g({onKeyDown:!0}),captured:g({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:g({onKeyPress:!0}),captured:g({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:g({onKeyUp:!0}),captured:g({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:g({onLoad:!0}),captured:g({onLoadCapture:!0})}},error:{phasedRegistrationNames:{bubbled:g({onError:!0}),captured:g({onErrorCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:g({onMouseDown:!0}),captured:g({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:g({onMouseMove:!0}),captured:g({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:g({onMouseOut:!0}),captured:g({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:g({onMouseOver:!0}),captured:g({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:g({onMouseUp:!0}),captured:g({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:g({onPaste:!0}),captured:g({onPasteCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:g({onReset:!0}),captured:g({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:g({onScroll:!0}),captured:g({onScrollCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:g({onSubmit:!0}),captured:g({onSubmitCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:g({onTouchCancel:!0}),captured:g({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:g({onTouchEnd:!0}),captured:g({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:g({onTouchMove:!0}),captured:g({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:g({onTouchStart:!0}),captured:g({onTouchStartCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:g({onWheel:!0}),captured:g({onWheelCapture:!0})}}},y={topBlur:b.blur,topClick:b.click,topContextMenu:b.contextMenu,topCopy:b.copy,topCut:b.cut,topDoubleClick:b.doubleClick,topDrag:b.drag,topDragEnd:b.dragEnd,topDragEnter:b.dragEnter,topDragExit:b.dragExit,topDragLeave:b.dragLeave,topDragOver:b.dragOver,topDragStart:b.dragStart,topDrop:b.drop,topError:b.error,topFocus:b.focus,topInput:b.input,topKeyDown:b.keyDown,topKeyPress:b.keyPress,topKeyUp:b.keyUp,topLoad:b.load,topMouseDown:b.mouseDown,topMouseMove:b.mouseMove,topMouseOut:b.mouseOut,topMouseOver:b.mouseOver,topMouseUp:b.mouseUp,topPaste:b.paste,topReset:b.reset,topScroll:b.scroll,topSubmit:b.submit,topTouchCancel:b.touchCancel,topTouchEnd:b.touchEnd,topTouchMove:b.touchMove,topTouchStart:b.touchStart,topWheel:b.wheel};for(var _ in y)y[_].dependencies=[_];var w={eventTypes:b,executeDispatch:function(e,t,n){var i=r.executeDispatch(e,t,n);i===!1&&(e.stopPropagation(),e.preventDefault())},extractEvents:function(e,t,n,i){var r=y[e];if(!r)return null;var g;switch(e){case v.topInput:case v.topLoad:case v.topError:case v.topReset:case v.topSubmit:g=a;break;case v.topKeyPress:if(0===i.charCode)return null;case v.topKeyDown:case v.topKeyUp:g=c;break;case v.topBlur:case v.topFocus:g=l;break;case v.topClick:if(2===i.button)return null;case v.topContextMenu:case v.topDoubleClick:case v.topMouseDown:case v.topMouseMove:case v.topMouseOut:case v.topMouseOver:case v.topMouseUp:g=u;break;case v.topDrag:case v.topDragEnd:case v.topDragEnter:case v.topDragExit:case v.topDragLeave:case v.topDragOver:case v.topDragStart:case v.topDrop:g=d;break;case v.topTouchCancel:case v.topTouchEnd:case v.topTouchMove:case v.topTouchStart:g=p;break;case v.topScroll:g=h;break;case v.topWheel:g=f;break;case v.topCopy:case v.topCut:case v.topPaste:g=o}m(g,"SimpleEventPlugin: Unhandled event type, `%s`.",e);var b=g.getPooled(r,n,i);return s.accumulateTwoPhaseDispatches(b),b}};e.exports=w},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(26),s={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(26),s={data:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(67),s={dataTransfer:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(54),s={relatedTarget:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(26),s={data:null};r.augmentClass(i,s),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(54),s=n(414),o=n(92),a={key:s,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:o,charCode:function(e){return"keypress"===e.type?"charCode"in e?e.charCode:e.keyCode:0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return e.keyCode||e.charCode}};r.augmentClass(i,a),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(54),s=n(92),o={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:s};r.augmentClass(i,o),e.exports=i},function(e,t,n){"use strict";function i(e,t,n){r.call(this,e,t,n)}var r=n(67),s={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(i,s),e.exports=i},function(e){"use strict";function t(e){for(var t=1,i=0,r=0;r<e.length;r++)t=(t+e.charCodeAt(r))%n,i=(i+t)%n;return t|i<<16}var n=65521;e.exports=t},function(e,t,n){function i(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function r(e){return i(e)?Array.isArray(e)?e.slice():s(e):[e]}var s=n(424);e.exports=r},function(e,t,n){"use strict";function i(e){var t=r.createClass({displayName:"ReactFullPageComponent"+(e.type.displayName||""),componentWillUnmount:function(){s(!1,"%s tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this.constructor.displayName)},render:function(){return this.transferPropsTo(e(null,this.props.children))}});return t}var r=n(18),s=n(3);e.exports=i},function(e,t,n){function i(e){var t=e.match(u);return t&&t[1].toLowerCase()}function r(e,t){var n=c;l(!!c,"createNodesFromMarkup dummy not initialized");var r=i(e),s=r&&a(r);if(s){n.innerHTML=s[1]+e+s[2];for(var u=s[0];u--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(l(t,"createNodesFromMarkup(...): Unexpected <script> element rendered."),o(d).forEach(t));for(var p=o(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var s=n(5),o=n(408),a=n(227),l=n(3),c=s.canUseDOM?document.createElement("div"):null,u=/^\s*<(\w+)/;e.exports=r},function(e,t,n){"use strict";function i(e,t){var n=null==t||"boolean"==typeof t||""===t;if(n)return"";var i=isNaN(t);return i||0===t||s.hasOwnProperty(e)&&s[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var r=n(204),s=r.isUnitlessNumber;e.exports=i},function(e){"use strict";var t={};Object.freeze(t),e.exports=t},function(e,t,n){"use strict";function i(e,t,n){var i=e,r=!i.hasOwnProperty(n);o(r,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.",n),r&&null!=t&&(i[n]=t)}function r(e){if(null==e)return e;var t={};return s(e,i,t),t}var s=n(236),o=n(12);e.exports=r},function(e,t,n){"use strict";function i(e){if(e.key){var t=s[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n="charCode"in e?e.charCode:e.keyCode;return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?o[e.keyCode]||"Unidentified":void r(!1,"Unexpected keyboard event type: %s",e.type)}var r=n(3),s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=i},function(e){"use strict";function t(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function n(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function i(e,i){for(var r=t(e),s=0,o=0;r;){if(3==r.nodeType){if(o=s+r.textContent.length,i>=s&&o>=i)return{node:r,offset:i-s};s=o}r=t(n(r))}}e.exports=i},function(e){function t(e){return e.replace(n,"-$1").toLowerCase()}var n=/([A-Z])/g;e.exports=t},function(e,t,n){"use strict";function i(e){return r(e).replace(s,"-ms-")}var r=n(416),s=/^ms-/;e.exports=i},function(e){function t(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}e.exports=t},function(e,t,n){function i(e){return r(e)&&3==e.nodeType}var r=n(418);e.exports=i},function(e){"use strict";function t(e){e||(e="");var t,n=arguments.length;if(n>1)for(var i=1;n>i;i++)t=arguments[i],t&&(e+=" "+t);return e}e.exports=t},function(e,t,n){"use strict";var i=n(3),r=n(33),s=36,o=function(e){return"object"!=typeof e||null===e},a={MAX_MERGE_DEPTH:s,isTerminal:o,normalizeMergeArg:function(e){return void 0===e||null===e?{}:e},checkMergeArrayArgs:function(e,t){i(Array.isArray(e)&&Array.isArray(t),"Tried to merge arrays, instead got %s and %s.",e,t)},checkMergeObjectArgs:function(e,t){a.checkMergeObjectArg(e),a.checkMergeObjectArg(t)},checkMergeObjectArg:function(e){i(!o(e)&&!Array.isArray(e),"Tried to merge an object, instead got %s.",e)},checkMergeIntoObjectArg:function(e){i(!(o(e)&&"function"!=typeof e||Array.isArray(e)),"Tried to merge into an object, instead got %s.",e)},checkMergeLevel:function(e){i(s>e,"Maximum deep merge depth exceeded. You may be attempting to merge circular structures in an unsupported way.")},checkArrayStrategy:function(e){i(void 0===e||e in a.ArrayStrategies,"You must provide an array strategy to deep merge functions to instruct the deep merge how to resolve merging two arrays.")},ArrayStrategies:r({Clobber:!0,IndexByIndex:!0})};e.exports=a},function(e,t,n){"use strict";var i,r=n(5);r.canUseDOM&&(i=window.performance||window.msPerformance||window.webkitPerformance),e.exports=i||{}},function(e,t,n){var i=n(422);i&&i.now||(i=Date);var r=i.now.bind(i);e.exports=r},function(e,t,n){function i(e){var t=e.length;if(r(!Array.isArray(e)&&("object"==typeof e||"function"==typeof e),"toArray: Array-like object expected"),r("number"==typeof t,"toArray: Object needs a length property"),r(0===t||t-1 in e,"toArray: Object should have keys for indices"),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(n){}for(var i=Array(t),s=0;t>s;s++)i[s]=e[s];return i}var r=n(3);e.exports=i},function(e,t,n){"use strict";function i(e){return Array.isArray(e)?e.concat():e&&"object"==typeof e?o(new e.constructor,e):e}function r(e,t,n){l(Array.isArray(e),"update(): expected target of %s to be an array; got %s.",n,e);var i=t[n];l(Array.isArray(i),"update(): expected spec of %s to be an array; got %s. Did you forget to wrap your parameter in an array?",n,i)}function s(e,t){if(l("object"==typeof t,"update(): You provided a key path to update() that did not contain one of %s. Did you forget to include {%s: ...}?",m.join(", "),p),t.hasOwnProperty(p))return l(1===Object.keys(t).length,"Cannot have more than one key in an object with %s",p),t[p];var n=i(e);if(t.hasOwnProperty(h)){var a=t[h];l(a&&"object"==typeof a,"update(): %s expects a spec of type 'object'; got %s",h,a),l(n&&"object"==typeof n,"update(): %s expects a target of type 'object'; got %s",h,n),o(n,t[h])}t.hasOwnProperty(c)&&(r(e,t,c),t[c].forEach(function(e){n.push(e)})),t.hasOwnProperty(u)&&(r(e,t,u),t[u].forEach(function(e){n.unshift(e)})),t.hasOwnProperty(d)&&(l(Array.isArray(e),"Expected %s target to be an array; got %s",d,e),l(Array.isArray(t[d]),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",d,t[d]),t[d].forEach(function(e){l(Array.isArray(e),"update(): expected spec of %s to be an array of arrays; got %s. Did you forget to wrap your parameters in an array?",d,t[d]),n.splice.apply(n,e)})),t.hasOwnProperty(f)&&(l("function"==typeof t[f],"update(): expected spec of %s to be a function; got %s.",f,t[f]),n=t[f](n));for(var v in t)g.hasOwnProperty(v)&&g[v]||(n[v]=s(e[v],t[v]));
return n}var o=n(43),a=n(20),l=n(3),c=a({$push:null}),u=a({$unshift:null}),d=a({$splice:null}),p=a({$set:null}),h=a({$merge:null}),f=a({$apply:null}),m=[c,u,d,p,h,f],g={};m.forEach(function(e){g[e]=!0}),e.exports=s},function(e){"use strict";function t(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function n(){}n.prototype._events=void 0,n.prototype.listeners=function(e){if(!this._events||!this._events[e])return[];if(this._events[e].fn)return[this._events[e].fn];for(var t=0,n=this._events[e].length,i=new Array(n);n>t;t++)i[t]=this._events[e][t].fn;return i},n.prototype.emit=function(e,t,n,i,r,s){if(!this._events||!this._events[e])return!1;var o,a,l=this._events[e],c=arguments.length;if("function"==typeof l.fn){switch(l.once&&this.removeListener(e,l.fn,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,r),!0;case 6:return l.fn.call(l.context,t,n,i,r,s),!0}for(a=1,o=new Array(c-1);c>a;a++)o[a-1]=arguments[a];l.fn.apply(l.context,o)}else{var u,d=l.length;for(a=0;d>a;a++)switch(l[a].once&&this.removeListener(e,l[a].fn,!0),c){case 1:l[a].fn.call(l[a].context);break;case 2:l[a].fn.call(l[a].context,t);break;case 3:l[a].fn.call(l[a].context,t,n);break;default:if(!o)for(u=1,o=new Array(c-1);c>u;u++)o[u-1]=arguments[u];l[a].fn.apply(l[a].context,o)}}return!0},n.prototype.on=function(e,n,i){var r=new t(n,i||this);return this._events||(this._events={}),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],r]:this._events[e].push(r):this._events[e]=r,this},n.prototype.once=function(e,n,i){var r=new t(n,i||this,!0);return this._events||(this._events={}),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],r]:this._events[e].push(r):this._events[e]=r,this},n.prototype.removeListener=function(e,t,n){if(!this._events||!this._events[e])return this;var i=this._events[e],r=[];if(t&&(i.fn&&(i.fn!==t||n&&!i.once)&&r.push(i),!i.fn))for(var s=0,o=i.length;o>s;s++)(i[s].fn!==t||n&&!i[s].once)&&r.push(i[s]);return r.length?this._events[e]=1===r.length?r[0]:r:delete this._events[e],this},n.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[e]:this._events={},this):this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.EventEmitter=n,n.EventEmitter2=n,n.EventEmitter3=n,e.exports=n},function(e,t,n){var i=n(23),r=n(237);e.exports=i.extend({componentWillUnmount:r.stopListeningToAll},r)},function(e,t,n){var i=n(23);e.exports={preEmit:function(){},shouldEmit:function(){return!0},listen:function(e,t){var n=function(n){e.apply(t,n)},i=this;return this.emitter.addListener(this.eventLabel,n),function(){i.emitter.removeListener(i.eventLabel,n)}},trigger:function(){var e=arguments,t=this.preEmit.apply(this,e);e=void 0===t?e:i.isArguments(t)?t:[].concat(t),this.shouldEmit.apply(this,e)&&this.emitter.emit(this.eventLabel,e)},triggerAsync:function(){var e=arguments,t=this;i.nextTick(function(){t.trigger.apply(t,e)})}}},function(e,t,n){var i=n(4),r=n(23);e.exports=function(e,t){return{componentDidMount:function(){for(var n in i.ListenerMethods)if(this[n]!==i.ListenerMethods[n]){if(this[n])throw"Can't have other property '"+n+"' when using Reflux.listenTo!";this[n]=i.ListenerMethods[n]}var s=this,o=void 0===t?this.setState:function(e){s.setState(r.object([t],[e]))};this.listenTo(e,o,o)},componentWillUnmount:i.ListenerMixin.componentWillUnmount}}},function(e,t,n){var i=n(23),r=n(4),s=n(98),o={preEmit:1,shouldEmit:1};e.exports=function(e){e=e||{};for(var t in e)if(!o[t]&&r.PublisherMethods[t])throw new Error("Cannot override API method "+t+" in action creation. Use another method name or override it on Reflux.PublisherMethods instead.");var n=i.extend({eventLabel:"action",emitter:new i.EventEmitter,_isAction:!0},r.PublisherMethods,e),a=function(){a[a.sync?"trigger":"triggerAsync"].apply(a,arguments)};return i.extend(a,n),s.createdActions.push(a),a}},function(e,t,n){var i=n(4);e.exports=function(e,t,n){return{componentDidMount:function(){for(var r in i.ListenerMethods)if(this[r]!==i.ListenerMethods[r]){if(this[r])throw"Can't have other property '"+r+"' when using Reflux.listenTo!";this[r]=i.ListenerMethods[r]}this.listenTo(e,t,n)},componentWillUnmount:i.ListenerMethods.stopListeningToAll}}},function(e,t,n){var i=n(4);e.exports=function(e){return{componentDidMount:function(){for(var t in i.ListenerMethods)if(this[t]!==i.ListenerMethods[t]){if(this[t])throw"Can't have other property '"+t+"' when using Reflux.listenToMany!";this[t]=i.ListenerMethods[t]}this.listenToMany(e)},componentWillUnmount:i.ListenerMethods.stopListeningToAll}}},function(e,t,n){var i,r,s;!function(o,a){"use strict";r=[n(434)],i=a,s="function"==typeof i?i.apply(t,r):i,!(void 0!==s&&(e.exports=s))}(this,function(e){"use strict";function t(e){return e.map(function(e){return"["+JSON.stringify(e)+"]"}).join("")}function n(e,t){for(var n in t)t.hasOwnProperty(n)&&(e=e.replace(new RegExp(":"+n,"gim"),t[n]));return e}function i(e,i){var r={path:i.path.join(".")||"value",jsonpath:t(i.path)||"value",actual:JSON.stringify(i.actual),expected:k(i.expected)},s=new Error(n(e,r));return j(s,i),new C({errors:[s]})}function r(e,t,n){return y.is(e)&&e.hasOwnProperty(t)?e[t]:v.is(e)?e:n}function s(e,t,n){if(!t.is(e)){var r=n.messages||":jsonpath is `:actual`, should be a `:expected`";return i(r,{path:n.path,actual:e,expected:t})}return L}function o(e,t,n){if(t.is(e))return L;var s=y.is(e);if(!s){var o=r(n.messages,":input",":jsonpath is `:actual`, should be an `:expected`");return i(o,{path:n.path,actual:e,expected:y})}var a=[],l=t.meta.props;for(var c in l)if(l.hasOwnProperty(c)){var u=h(e[c],l[c],{path:n.path.concat([c]),messages:r(n.messages,c)});u.isValid()||(s=!1,a=a.concat(u.errors))}return s?L:new C({errors:a})}function a(e,t,n){return T(M.is(t)&&"maybe"===t.meta.kind),m.is(e)?L:h(e,t.meta.type,n)}function l(e,t,n){var s=h(e,t.meta.type,{path:n.path,messages:r(n.messages,":type")});if(!s.isValid())return s;var o=t.meta.predicate;if(!o(e)){var a=r(n.messages,":predicate",":jsonpath is `:actual`, should be a `:expected`");return i(a,{path:n.path,actual:e,expected:t})}return L}function c(e,t,n){var s=b.is(e);if(!s){var o=r(n.messages,":input",":jsonpath is `:actual`, should be a `:expected`");return i(o,{path:n.path,actual:e,expected:b})}for(var a=[],l=0,c=e.length;c>l;l++){var u=h(e[l],t.meta.type,{path:n.path.concat([l]),messages:r(n.messages,":type")});u.isValid()||(s=!1,a=a.concat(u.errors))}return s?L:new C({errors:a})}function u(e,t,n){T(_.is(t.dispatch),"unimplemented %s.dispatch()",k(t));var s=t.dispatch(e);if(!_.is(s)){var o=r(n.messages,":dispatch",":jsonpath is `:actual`, should be a `:expected`");return i(o,{path:n.path,actual:e,expected:t})}var a=t.meta.types.indexOf(s),l=h(e,s,{path:n.path,messages:r(n.messages,a)});return l.isValid()?L:l}function d(e,t,n){var s=t.meta.types,o=s.length,a=b.is(e)&&e.length===o;if(!a){var l=r(n.messages,":input",":jsonpath is `:actual`, should be a `:expected`");return i(l,{path:n.path,actual:e,expected:t})}for(var c=[],u=0;o>u;u++){var d=h(e[u],s[u],{path:n.path.concat([u]),messages:r(n.messages,u)});d.isValid()||(a=!1,c=c.concat(d.errors))}return a?L:new C({errors:c})}function p(e,t,n){var s=y.is(e);if(!s){var o=r(n.messages,":input",":jsonpath is `:actual`, should be a `:expected`");return i(o,{path:n.path,actual:e,expected:y})}var a=[];for(var l in e)if(e.hasOwnProperty(l)){var c=h(l,t.meta.domain,{path:n.path.concat([l]),messages:r(n.messages,":domain")});c.isValid()||(s=!1,a=a.concat(c.errors)),c=h(e[l],t.meta.codomain,{path:n.path.concat([l]),messages:r(n.messages,":codomain")}),c.isValid()||(s=!1,a=a.concat(c.errors))}return s?L:new C({errors:a})}function h(t,n,i){var r=e.util.getKind(n);switch(r){case"irriducible":case"enums":return s(t,n,i);case"struct":return o(t,n,i);case"maybe":return a(t,n,i);case"list":return c(t,n,i);case"subtype":return l(t,n,i);case"union":return u(t,n,i);case"tuple":return d(t,n,i);case"dict":return p(t,n,i);default:e.fail("Invalid kind")}}function f(e,t,n){return n=n||{},T(M.is(t),"Invalid argument `type` of value `%j` supplied to `validate`, expected a type",t),T(x(b).is(n.path),"Invalid argument `opts.path` of value `%j` supplied to `validate`, expected an `Arr`",n.path),n.path=n.path||[],h(e,t,n)}var m=e.Nil,g=e.Err,v=e.Str,b=e.Arr,y=e.Obj,_=e.Func,w=e.struct,x=e.maybe,D=e.list,M=e.Type,T=e.assert,k=e.util.getName,j=e.util.mixin,C=w({errors:x(D(g))},"Result");C.prototype.isValid=function(){return!(this.errors&&this.errors.length)},C.prototype.firstError=function(){return this.isValid()?null:this.errors[0]};var L=new C({errors:null});return f.Ok=L,f.Result=C,e.validate=f,e})},function(e,t){var n,i,r;!function(s,o){"use strict";i=[],n=o,r="function"==typeof n?n.apply(t,i):n,!(void 0!==r&&(e.exports=r))}(this,function(){"use strict";function e(e){throw w=!0,new Error(e)}function t(e){x.onFail(e)}function n(e){if(e!==!0){var n=D.call(arguments,1),i=n[0]?r.apply(null,n):"assert failed";t(i)}}function i(e,t,i){if(T.is(t))return e;for(var r in t)t.hasOwnProperty(r)&&(i!==!0&&n(!e.hasOwnProperty(r),"cannot overwrite property %s",r),e[r]=t[r]);return e}function r(){function e(e,s){if("%%"===e)return"%";if(i>=n)return e;var o=r.formatters[s];return o?o(t[i++]):e}var t=D.call(arguments),n=t.length,i=1,s=t[0],o=s.replace(/%([a-z%])/g,e);return n>i&&(o+=" "+t.slice(i).join(" ")),o}function s(e,t){return"function"==typeof t?r("Func",t.name):t}function o(e){return n(I.is(e),"Invalid argument `type` of value `%j` supplied to `getName()`, expected a type.",e),e.meta.name}function a(e){return n(I.is(e),"Invalid argument `type` of value `%j` supplied to `geKind()`, expected a type.",e),e.meta.kind}function l(e,t){n(!(e instanceof t),"Operator `new` is forbidden for `%s`",o(t))}function c(e){return L.is(e)?e.concat():S.is(e)?i({},e):e}function u(e,t){n(S.is(t));var i=c(e);for(var r in t)if(t.hasOwnProperty(r)){if(u.commands.hasOwnProperty(r))return n(1===Object.keys(t).length),u.commands[r](t[r],i);i[r]=u(i[r],t[r])}return i}function d(e,t){function i(r){return l(this,i),n(t(r),"Invalid `%s` supplied to `%s`",r,e),r}return n("string"==typeof e,"Invalid argument `name` supplied to `irriducible()`"),n("function"==typeof t,"Invalid argument `is` supplied to `irriducible()`"),i.meta={kind:"irriducible",name:e},i.displayName=e,i.is=t,i}function p(e,t){function r(i,s){if(r.is(i))return i;if(n(S.is(i),"Invalid `%s` supplied to `%s`, expected an `Obj`",i,t),!(this instanceof r))return new r(i,s);for(var o in e)if(e.hasOwnProperty(o)){var a=e[o],l=i[o];this[o]=a(l,s)}s!==!0&&Object.freeze(this)}return n(y(k,I).is(e),"Invalid argument `props` supplied to `struct()`"),n(f(k).is(t),"Invalid argument `name` supplied to `struct()`"),t=t||"struct",r.meta={kind:"struct",props:e,name:t},r.displayName=t,r.is=function(e){return e instanceof r},r.update=function(e,t,n){return new r(u(e,t,n))},r.extend=function(t,n){var s=p([e].concat(t).reduce(i,{}),n);return i(s.prototype,r.prototype),s},r}function h(e,t){function i(e,r){l(this,i),n($.is(i.dispatch),"unimplemented %s.dispatch()",t);var s=i.dispatch(e);return n(I.is(s),"%s.dispatch() returns no type",t),s(e,r)}n(b(I).is(e),"Invalid argument `types` supplied to `union()`");var s=e.length;return n(s>=2,"Invalid argument `types` supplied to `union()`"),n(f(k).is(t),"Invalid argument `name` supplied to `union()`"),t=t||r("union([%s])",e.map(o).join(", ")),i.meta={kind:"union",types:e,name:t},i.displayName=t,i.is=function(t){return e.some(function(e){return e.is(t)})},i.dispatch=function(t){for(var n=0,i=e.length;i>n;n++)if(e[n].is(t))return e[n]},i}function f(e,t){function i(t,n){return l(this,i),T.is(t)?null:e(t,n)}return n(I.is(e),"Invalid argument `type` supplied to `maybe()`"),"maybe"===a(e)?e:(n(T.is(t)||k.is(t),"Invalid argument `name` supplied to `maybe()`"),t=t||r("maybe(%s)",o(e)),i.meta={kind:"maybe",type:e,name:t},i.displayName=t,i.is=function(t){return T.is(t)||e.is(t)},i)}function m(e,t){function i(e){return l(this,i),n(i.is(e),"Invalid `%s` supplied to `%s`, expected one of %j",e,t,r),e}n(S.is(e),"Invalid argument `map` supplied to `enums()`"),n(f(k).is(t),"Invalid argument `name` supplied to `enums()`"),t=t||"enums";var r=Object.keys(e);return i.meta={kind:"enums",map:e,name:t},i.displayName=t,i.is=function(t){return k.is(t)&&e.hasOwnProperty(t)},i}function g(e,t){function i(r,o){if(n(L.is(r)&&r.length===s,"Invalid `%s` supplied to `%s`, expected an `Arr` of length `%s`",r,t,s),i.isTuple(r))return r;for(var a=[],l=0;s>l;l++){var c=e[l],u=r[l];a.push(c(u,o))}return o!==!0&&Object.freeze(a),a}n(b(I).is(e),"Invalid argument `types` supplied to `tuple()`");var s=e.length;return n(f(k).is(t),"Invalid argument `name` supplied to `tuple()`"),t=t||r("tuple([%s])",e.map(o).join(", ")),i.meta={kind:"tuple",types:e,length:s,name:t},i.displayName=t,i.isTuple=function(t){return e.every(function(e,n){return e.is(t[n])})},i.is=function(e){return L.is(e)&&e.length===s&&i.isTuple(e)},i.update=function(e,t,n){return i(u(e,t,n))},i}function v(e,t,i){function s(r,o){l(this,s);var c=e(r,o);return n(t(c),"Invalid `%s` supplied to `%s`, %s",r,i,a),c}n(I.is(e),"Invalid argument `type` supplied to `subtype()`"),n($.is(t),"Invalid argument `predicate` supplied to `subtype()`"),n(f(k).is(i),"Invalid argument `name` supplied to `subtype()`"),i=i||r("subtype(%s)",o(e));var a=t.__doc__||r("insert a valid value for %s",t.name||"the subtype");return s.meta={kind:"subtype",type:e,predicate:t,name:i},s.displayName=i,s.is=function(n){return e.is(n)&&t(n)},s.update=function(e,t,n){return s(u(e,t,n))},s}function b(e,t){function i(r,s){if(n(L.is(r),"Invalid `%s` supplied to `%s`, expected an `Arr`",r,t),i.isList(r))return r;for(var o=[],a=0,l=r.length;l>a;a++){var c=r[a];o.push(e(c,s))}return s!==!0&&Object.freeze(o),o}return n(I.is(e),"Invalid argument `type` supplied to `list()`"),n(f(k).is(t),"Invalid argument `name` supplied to `list()`"),t=t||r("list(%s)",o(e)),i.meta={kind:"list",type:e,name:t},i.displayName=t,i.isList=function(t){return t.every(e.is)},i.is=function(e){return L.is(e)&&i.isList(e)},i.update=function(e,t,n){return i(u(e,t,n))},i}function y(e,t,i){function s(r,o){if(n(S.is(r),"Invalid `%s` supplied to `%s`, expected an `Obj`",r,i),s.isDict(r))return r;var a={};for(var l in r)if(r.hasOwnProperty(l)){l=e(l);var c=r[l];a[l]=t(c,o)}return o!==!0&&Object.freeze(a),a}return n(I.is(e),"Invalid argument `domain` supplied to `dict()`"),n(I.is(t),"Invalid argument `codomain` supplied to `dict()`"),n(f(k).is(i),"Invalid argument `name` supplied to `dict()`"),i=i||r("dict(%s, %s)",o(e),o(t)),s.meta={kind:"dict",domain:e,codomain:t,name:i},s.displayName=i,s.isDict=function(n){for(var i in n)if(n.hasOwnProperty(i)&&(!e.is(i)||!t.is(n[i])))return!1;return!0},s.is=function(e){return S.is(e)&&s.isDict(e)},s.update=function(e,t,n){return s(u(e,t,n))},s}function _(e,t,i){function s(e){return _.is(e)||(e=s.of(e)),n(s.is(e),"Invalid `%s` supplied to `%s`",e,i),e}e=L.is(e)?e:[e],n(b(I).is(e),"Invalid argument `domain` supplied to `func()`"),n(I.is(t),"Invalid argument `codomain` supplied to `func()`"),i=i||r("func([%s], %s)",e.map(o).join(", "),o(t));var a=e.length;return s.meta={kind:"func",domain:e,codomain:t,name:i},s.displayName=i,s.is=function(n){return _.is(n)&&n.func.domain.length===e.length&&n.func.domain.every(function(t,n){return t===e[n]})&&n.func.codomain===t},s.of=function(i){function r(){var n=D.call(arguments),r=Math.min(n.length,a);if(n=g(e.slice(0,r))(n),r===a){var s=i.apply(this,n);return s=t(s)}var o=Function.prototype.bind.apply(i,[this].concat(n)),l=_(e.slice(r),t);return l.of(o)}return n("function"==typeof i),s.is(i)?i:(r.func={domain:e,codomain:t,f:i},r)},s}var w=!1,x={onFail:e},D=Array.prototype.slice;r.formatters={s:function(e){return String(e)},j:function(e){return JSON.stringify(e,s)}},u.commands={$apply:function(e,t){return n($.is(e)),e(t)},$push:function(e,t){return n(L.is(e)),n(L.is(t)),t.concat(e)},$remove:function(e,t){n(L.is(e)),n(S.is(t));for(var i=0,r=e.length;r>i;i++)delete t[e[i]];return t},$set:function(e){return e},$splice:function(e,t){return n(b(L).is(e)),n(L.is(t)),e.reduce(function(e,t){return e.splice.apply(e,t),e},t)},$swap:function(e,t){n(S.is(e)),n(j.is(e.from)),n(j.is(e.to)),n(L.is(t));var i=t[e.to];return t[e.to]=t[e.from],t[e.from]=i,t},$unshift:function(e,t){return n(L.is(e)),n(L.is(t)),e.concat(t)}};var M=d("Any",function(){return!0}),T=d("Nil",function(e){return null===e||void 0===e}),k=d("Str",function(e){return"string"==typeof e}),j=d("Num",function(e){return"number"==typeof e&&isFinite(e)&&!isNaN(e)}),C=d("Bool",function(e){return e===!0||e===!1}),L=d("Arr",function(e){return e instanceof Array}),S=d("Obj",function(e){return!T.is(e)&&"object"==typeof e&&!L.is(e)}),$=d("Func",function(e){return"function"==typeof e}),O=d("Err",function(e){return e instanceof Error}),E=d("Re",function(e){return e instanceof RegExp}),N=d("Dat",function(e){return e instanceof Date}),I=d("Type",function(e){return $.is(e)&&S.is(e.meta)});return m.of=function(e,t){e=k.is(e)?e.split(" "):e;var n={};return e.forEach(function(e){n[e]=e}),m(n,t)},_.is=function(e){return $.is(e)&&S.is(e.func)},{util:{mixin:i,format:r,getName:o,getKind:a,slice:D,shallowCopy:c,update:u},options:x,assert:n,fail:t,Any:M,Nil:T,Str:k,Num:j,Bool:C,Arr:L,Obj:S,Func:$,Err:O,Re:E,Dat:N,Type:I,irriducible:d,struct:p,enums:m,union:h,maybe:f,tuple:g,subtype:v,list:b,dict:y,func:_}})},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===o?62:t===a?63:l>t?-1:l+10>t?t-l+26+26:u+26>t?t-u:c+26>t?t-c+26:void 0}function i(e){function n(e){c[d++]=e}var i,r,o,a,l,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=e.length;l="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0,c=new s(3*e.length/4-l),o=l>0?e.length-4:e.length;var d=0;for(i=0,r=0;o>i;i+=4,r+=3)a=t(e.charAt(i))<<18|t(e.charAt(i+1))<<12|t(e.charAt(i+2))<<6|t(e.charAt(i+3)),n((16711680&a)>>16),n((65280&a)>>8),n(255&a);return 2===l?(a=t(e.charAt(i))<<2|t(e.charAt(i+1))>>4,n(255&a)):1===l&&(a=t(e.charAt(i))<<10|t(e.charAt(i+1))<<4|t(e.charAt(i+2))>>2,n(a>>8&255),n(255&a)),c}function r(e){function t(e){return n.charAt(e)}function i(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var r,s,o,a=e.length%3,l="";for(r=0,o=e.length-a;o>r;r+=3)s=(e[r]<<16)+(e[r+1]<<8)+e[r+2],l+=i(s);switch(a){case 1:s=e[e.length-1],l+=t(s>>2),l+=t(s<<4&63),l+="==";break;case 2:s=(e[e.length-2]<<8)+e[e.length-1],l+=t(s>>10),l+=t(s>>4&63),l+=t(s<<2&63),l+="="}return l}var s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="+".charCodeAt(0),a="/".charCodeAt(0),l="0".charCodeAt(0),c="a".charCodeAt(0),u="A".charCodeAt(0);e.toByteArray=i,e.fromByteArray=r}("undefined"==typeof t?this.base64js={}:t)},function(e,t){t.read=function(e,t,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?r-1:0,p=n?-1:1,h=e[t+d];for(d+=p,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=256*s+e[t+d],d+=p,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+e[t+d],d+=p,u-=8);if(0===s)s=1-c;else{if(s===l)return o?0/0:1/0*(h?-1:1);o+=Math.pow(2,i),s-=c}return(h?-1:1)*o*Math.pow(2,s-i)},t.write=function(e,t,n,i,r,s){var o,a,l,c=8*s-r-1,u=(1<<c)-1,d=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:s-1,f=i?1:-1,m=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),t+=o+d>=1?p/l:p*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*l-1)*Math.pow(2,r),o+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[n+h]=255&a,h+=f,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;e[n+h]=255&o,h+=f,o/=256,c-=8);e[n+h-f]|=128*m}},function(e){var t=Array.isArray,n=Object.prototype.toString;e.exports=t||function(e){return!!e&&"[object Array]"==n.call(e)}},function(e){function t(){}var n=e.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};var i=[];if(t){var r=document.createElement("div"),s=new MutationObserver(function(){var e=i.slice();i.length=0,e.forEach(function(e){e()})});return s.observe(r,{attributes:!0}),function(e){i.length||r.setAttribute("yes","no"),i.push(e)}}return n?(window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),i.length>0)){var n=i.shift();n()}},!0),function(e){i.push(e),window.postMessage("process-tick","*")}):function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=t,n.addListener=t,n.once=t,n.off=t,n.removeListener=t,n.removeAllListeners=t,n.emit=t,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},function(e,t,n){function i(e){return n(r(e))}function r(e){return s[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var s={"./af":120,"./af.js":120,"./ar":123,"./ar-ma":121,"./ar-ma.js":121,"./ar-sa":122,"./ar-sa.js":122,"./ar.js":123,"./az":124,"./az.js":124,"./be":125,"./be.js":125,"./bg":126,"./bg.js":126,"./bn":127,"./bn.js":127,"./bo":128,"./bo.js":128,"./br":129,"./br.js":129,"./bs":130,"./bs.js":130,"./ca":131,"./ca.js":131,"./cs":132,"./cs.js":132,"./cv":133,"./cv.js":133,"./cy":134,"./cy.js":134,"./da":135,"./da.js":135,"./de":137,"./de-at":136,"./de-at.js":136,"./de.js":137,"./el":138,"./el.js":138,"./en-au":139,"./en-au.js":139,"./en-ca":140,"./en-ca.js":140,"./en-gb":141,"./en-gb.js":141,"./eo":142,"./eo.js":142,"./es":143,"./es.js":143,"./et":144,"./et.js":144,"./eu":145,"./eu.js":145,"./fa":146,"./fa.js":146,"./fi":147,"./fi.js":147,"./fo":148,"./fo.js":148,"./fr":150,"./fr-ca":149,"./fr-ca.js":149,"./fr.js":150,"./gl":151,"./gl.js":151,"./he":152,"./he.js":152,"./hi":153,"./hi.js":153,"./hr":154,"./hr.js":154,"./hu":155,"./hu.js":155,"./hy-am":156,"./hy-am.js":156,"./id":157,"./id.js":157,"./is":158,"./is.js":158,"./it":159,"./it.js":159,"./ja":160,"./ja.js":160,"./ka":161,"./ka.js":161,"./km":162,"./km.js":162,"./ko":163,"./ko.js":163,"./lb":164,"./lb.js":164,"./lt":165,"./lt.js":165,"./lv":166,"./lv.js":166,"./mk":167,"./mk.js":167,"./ml":168,"./ml.js":168,"./mr":169,"./mr.js":169,"./ms-my":170,"./ms-my.js":170,"./my":171,"./my.js":171,"./nb":172,"./nb.js":172,"./ne":173,"./ne.js":173,"./nl":174,"./nl.js":174,"./nn":175,"./nn.js":175,"./pl":176,"./pl.js":176,"./pt":178,"./pt-br":177,"./pt-br.js":177,"./pt.js":178,"./ro":179,"./ro.js":179,"./ru":180,"./ru.js":180,"./sk":181,"./sk.js":181,"./sl":182,"./sl.js":182,"./sq":183,"./sq.js":183,"./sr":185,"./sr-cyrl":184,"./sr-cyrl.js":184,"./sr.js":185,"./sv":186,"./sv.js":186,"./ta":187,"./ta.js":187,"./th":188,"./th.js":188,"./tl-ph":189,"./tl-ph.js":189,"./tr":190,"./tr.js":190,"./tzm":192,"./tzm-latn":191,"./tzm-latn.js":191,"./tzm.js":192,"./uk":193,"./uk.js":193,"./uz":194,"./uz.js":194,"./vi":195,"./vi.js":195,"./zh-cn":196,"./zh-cn.js":196,"./zh-tw":197,"./zh-tw.js":197};i.keys=function(){return Object.keys(s)},i.resolve=r,e.exports=i,i.id=440},function(e){e.exports=function(e){window.execScript?window.execScript(e):eval.call(null,e)}},function(e,t,n){n(441)(n(443)+"\n\n// SCRIPT-LOADER FOOTER\n//# sourceURL=script:///Users/nish/Development/nextgen/center-ui/node_modules/jsx-loader/index.js%3Fharmony=true&insertPragma=React.DOM!/Users/nish/Development/nextgen/center-ui/node_modules/w2ui/dist/w2ui.js")},function(e){e.exports="/** @jsx React.DOM *//* w2ui 1.5.x (nightly) (c) http://w2ui.com, vitmalina@gmail.com */\nvar w2ui  = w2ui  || {};\nvar w2obj = w2obj || {}; // expose object to be able to overwrite default functions\n\n/************************************************\n*  Library: Web 2.0 UI for jQuery\n*  - Following objects are defines\n*        - w2ui             - object that will contain all widgets\n*        - w2obj            - object with widget prototypes\n*        - w2utils          - basic utilities\n*        - $().w2render     - common render\n*        - $().w2destroy    - common destroy\n*        - $().w2marker     - marker plugin\n*        - $().w2tag        - tag plugin\n*        - $().w2overlay    - overlay plugin\n*        - $().w2menu       - menu plugin\n*        - w2utils.event    - generic event object\n*        - w2utils.keyboard - object for keyboard navigation\n*  - Dependencies: jQuery\n*\n* == NICE TO HAVE ==\n*   - overlay should be displayed where more space (on top or on bottom)\n*   - write and article how to replace certain framework functions\n*   - add maxHeight for the w2menu\n*   - isTime should support seconds\n*   - add time zone\n*   - TEST On IOS\n*   - $().w2marker() -- only unmarks first instance\n*   - subitems for w2menus()\n*\n* == 1.5 changes\n*   - date has problems in FF new Date('yyyy-mm-dd') breaks\n*   - bug: w2utils.formatDate('2011-31-01', 'yyyy-dd-mm'); - wrong foratter\n*   - format date and time is buggy\n*   - added decimalSymbol\n*   - renamed size() -> formatSize()\n*   - added cssPrefix()\n*   - added w2utils.settings.weekStarts\n*   - onComplete should pass widget as context (this)\n*   - hidden and disabled in menus\n*   - added menu.item.hint for overlay menues\n*   - added w2tag options.id, options.left, options.top\n*\n************************************************/\n\nvar w2utils = (function () {\n    var tmp = {}; // for some temp variables\n    var obj = {\n        version  : '1.5.x',\n        settings : {\n            \"locale\"            : \"en-us\",\n            \"date_format\"       : \"m/d/yyyy\",\n            \"date_display\"      : \"Mon d, yyyy\",\n            \"time_format\"       : \"hh:mi pm\",\n            \"currencyPrefix\"    : \"$\",\n            \"currencySuffix\"    : \"\",\n            \"currencyPrecision\" : 2,\n            \"groupSymbol\"       : \",\",\n            \"decimalSymbol\"     : \".\",\n            \"shortmonths\"       : [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\n            \"fullmonths\"        : [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n            \"shortdays\"         : [\"M\", \"T\", \"W\", \"T\", \"F\", \"S\", \"S\"],\n            \"fulldays\"          : [\"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\n            \"weekStarts\"        : \"M\",      // can be \"M\" for Monday or \"S\" for Sunday\n            \"dataType\"          : 'HTTP',   // can be HTTP, RESTFULL, JSON (case sensative)\n            \"phrases\"           : {}        // empty object for english phrases\n        },\n        isInt           : isInt,\n        isFloat         : isFloat,\n        isMoney         : isMoney,\n        isHex           : isHex,\n        isAlphaNumeric  : isAlphaNumeric,\n        isEmail         : isEmail,\n        isDate          : isDate,\n        isTime          : isTime,\n        age             : age,\n        date            : date,\n        formatSize      : formatSize,\n        formatNumber    : formatNumber,\n        formatDate      : formatDate,\n        formatTime      : formatTime,\n        formatDateTime  : formatDateTime,\n        stripTags       : stripTags,\n        encodeTags      : encodeTags,\n        escapeId        : escapeId,\n        base64encode    : base64encode,\n        base64decode    : base64decode,\n        transition      : transition,\n        lock            : lock,\n        unlock          : unlock,\n        lang            : lang,\n        locale          : locale,\n        getSize         : getSize,\n        scrollBarSize   : scrollBarSize,\n        checkName       : checkName,\n        checkUniqueId   : checkUniqueId,\n        parseRoute      : parseRoute,\n        cssPrefix       : cssPrefix,\n        // some internal variables\n        isIOS : ((navigator.userAgent.toLowerCase().indexOf('iphone') != -1 ||\n                 navigator.userAgent.toLowerCase().indexOf('ipod') != -1 ||\n                 navigator.userAgent.toLowerCase().indexOf('ipad') != -1) \n                 ? true : false),\n        isIE : ((navigator.userAgent.toLowerCase().indexOf('msie') != -1 ||\n                 navigator.userAgent.toLowerCase().indexOf('trident') != -1 )\n                 ? true : false)\n    };\n    return obj;\n\n    function isInt (val) {\n        var re = /^[-+]?[0-9]+$/;\n        return re.test(val);\n    }\n\n    function isFloat (val) {\n        if (typeof val == 'string') val = val.replace(w2utils.settings.decimalSymbol, '.');\n        return (typeof val === 'number' || (typeof val === 'string' && val !== '')) && !isNaN(Number(val));\n    }\n\n    function isMoney (val) {\n        var se = w2utils.settings;\n        var re = new RegExp('^'+ (se.currencyPrefix ? '\\\\' + se.currencyPrefix + '?' : '') +'[-+]?[0-9]*[\\\\'+ se.decimalSymbol +']?[0-9]+'+ (se.currencySuffix ? '\\\\' + se.currencySuffix + '?' : '') +'$', 'i');\n        if (typeof val === 'string') {\n            val = val.replace(new RegExp(se.groupSymbol, 'g'), '');\n        }\n        if (typeof val === 'object' || val === '') return false;\n        return re.test(val);\n    }\n\n    function isHex (val) {\n        var re = /^[a-fA-F0-9]+$/;\n        return re.test(val);\n    }\n\n    function isAlphaNumeric (val) {\n        var re = /^[a-zA-Z0-9_-]+$/;\n        return re.test(val);\n    }\n\n    function isEmail (val) {\n        var email = /^[a-zA-Z0-9._%-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n        return email.test(val);\n    }\n\n    function isDate (val, format, retDate) {\n        if (!val) return false;\n\n        var dt   = 'Invalid Date';\n        var month, day, year;\n\n        if (format == null) format = w2utils.settings.date_format;\n\n        if (typeof val.getUTCFullYear === 'function' && typeof val.getUTCMonth === 'function' && typeof val.getUTCDate === 'function') {\n            year = val.getUTCFullYear();\n            month = val.getUTCMonth();\n            day = val.getUTCDate();\n        } else if (typeof val.getFullYear === 'function' && typeof val.getMonth === 'function' && typeof val.getDate === 'function') {\n            year = val.getFullYear();\n            month = val.getMonth();\n            day = val.getDate();\n        } else {\n            val = String(val);\n            // convert month formats\n            if (new RegExp('mon', 'ig').test(format)) {\n                format = format.replace(/month/ig, 'm').replace(/mon/ig, 'm').replace(/dd/ig, 'd').replace(/[, ]/ig, '/').replace(/\\/\\//g, '/').toLowerCase();\n                val    = val.replace(/[, ]/ig, '/').replace(/\\/\\//g, '/').toLowerCase();\n                for (var m = 0, len = w2utils.settings.fullmonths.length; m < len; m++) {\n                    var t = w2utils.settings.fullmonths[m];\n                    val = val.replace(new RegExp(t, 'ig'), (parseInt(m) + 1)).replace(new RegExp(t.substr(0, 3), 'ig'), (parseInt(m) + 1));\n                }\n            }\n            // format date\n            var tmp  = val.replace(/-/g, '/').replace(/\\./g, '/').toLowerCase().split('/');\n            var tmp2 = format.replace(/-/g, '/').replace(/\\./g, '/').toLowerCase();\n            if (tmp2 === 'mm/dd/yyyy') { month = tmp[0]; day = tmp[1]; year = tmp[2]; }\n            if (tmp2 === 'm/d/yyyy')   { month = tmp[0]; day = tmp[1]; year = tmp[2]; }\n            if (tmp2 === 'dd/mm/yyyy') { month = tmp[1]; day = tmp[0]; year = tmp[2]; }\n            if (tmp2 === 'd/m/yyyy')   { month = tmp[1]; day = tmp[0]; year = tmp[2]; }\n            if (tmp2 === 'yyyy/dd/mm') { month = tmp[2]; day = tmp[1]; year = tmp[0]; }\n            if (tmp2 === 'yyyy/d/m')   { month = tmp[2]; day = tmp[1]; year = tmp[0]; }\n            if (tmp2 === 'yyyy/mm/dd') { month = tmp[1]; day = tmp[2]; year = tmp[0]; }\n            if (tmp2 === 'yyyy/m/d')   { month = tmp[1]; day = tmp[2]; year = tmp[0]; }\n            if (tmp2 === 'mm/dd/yy')   { month = tmp[0]; day = tmp[1]; year = tmp[2]; }\n            if (tmp2 === 'm/d/yy')     { month = tmp[0]; day = tmp[1]; year = parseInt(tmp[2]) + 1900; }\n            if (tmp2 === 'dd/mm/yy')   { month = tmp[1]; day = tmp[0]; year = parseInt(tmp[2]) + 1900; }\n            if (tmp2 === 'd/m/yy')     { month = tmp[1]; day = tmp[0]; year = parseInt(tmp[2]) + 1900; }\n            if (tmp2 === 'yy/dd/mm')   { month = tmp[2]; day = tmp[1]; year = parseInt(tmp[0]) + 1900; }\n            if (tmp2 === 'yy/d/m')     { month = tmp[2]; day = tmp[1]; year = parseInt(tmp[0]) + 1900; }\n            if (tmp2 === 'yy/mm/dd')   { month = tmp[1]; day = tmp[2]; year = parseInt(tmp[0]) + 1900; }\n            if (tmp2 === 'yy/m/d')     { month = tmp[1]; day = tmp[2]; year = parseInt(tmp[0]) + 1900; }\n        }\n        if (!isInt(year)) return false;\n        if (!isInt(month)) return false;\n        if (!isInt(day)) return false;\n        year = +year;\n        month = +month;\n        day = +day;\n        dt = new Date(year, month - 1, day);\n        // do checks\n        if (month == null) return false;\n        if (String(dt) == 'Invalid Date') return false;\n        if ((dt.getMonth() + 1 !== month) || (dt.getDate() !== day) || (dt.getFullYear() !== year)) return false;\n        if (retDate === true) return dt; else return true;\n    }\n\n    function isTime (val, retTime) {\n        // Both formats 10:20pm and 22:20\n        if (val == null) return false;\n        var max, pm;\n        // -- process american format\n        val = String(val);\n        val = val.toUpperCase();\n        pm = val.indexOf('PM') >= 0;\n        var ampm = (pm || val.indexOf('AM') >= 0);\n        if (ampm) max = 12; else max = 24;\n        val = val.replace('AM', '').replace('PM', '');\n        val = $.trim(val);\n        // ---\n        var tmp = val.split(':');\n        var h = parseInt(tmp[0] || 0), m = parseInt(tmp[1] || 0);\n        // accept edge case: 3PM is a good timestamp, but 3 (without AM or PM) is NOT:\n        if ((!ampm || tmp.length !== 1) && tmp.length !== 2) { return false; }\n        if (tmp[0] === '' || h < 0 || h > max || !this.isInt(tmp[0]) || tmp[0].length > 2) { return false; }\n        if (tmp.length === 2 && (tmp[1] === '' || m < 0 || m > 59 || !this.isInt(tmp[1]) || tmp[1].length !== 2)) { return false; }\n        // check the edge cases: 12:01AM is ok, as is 12:01PM, but 24:01 is NOT ok while 24:00 is (midnight; equivalent to 00:00).\n        // meanwhile, there is 00:00 which is ok, but 0AM nor 0PM are okay, while 0:01AM and 0:00AM are.\n        if (!ampm && max === h && m !== 0) { return false; }\n        if (ampm && tmp.length === 1 && h === 0) { return false; }\n\n        if (retTime === true) {\n            if (pm) h += 12;\n            return {\n                hours: h,\n                minutes: m\n            };\n        }\n        return true;\n    }\n\n    function age (dateStr) {\n        if (dateStr === '' || dateStr == null || (typeof dateStr == 'object' && !dateStr.getMonth)) return '';\n        var d1 = new Date(dateStr);\n        if (w2utils.isInt(dateStr)) d1 = new Date(Number(dateStr)); // for unix timestamps\n        if (String(d1) == 'Invalid Date') return '';\n\n        var d2  = new Date();\n        var sec = (d2.getTime() - d1.getTime()) / 1000;\n        var amount = '';\n        var type   = '';\n        if (sec < 0) {\n            amount = '<span style=\"color: #aaa\">0 sec</span>';\n            type   = '';\n        } else if (sec < 60) {\n            amount = Math.floor(sec);\n            type   = 'sec';\n            if (sec < 0) { amount = 0; type = 'sec'; }\n        } else if (sec < 60*60) {\n            amount = Math.floor(sec/60);\n            type   = 'min';\n        } else if (sec < 24*60*60) {\n            amount = Math.floor(sec/60/60);\n            type   = 'hour';\n        } else if (sec < 30*24*60*60) {\n            amount = Math.floor(sec/24/60/60);\n            type   = 'day';\n        } else if (sec < 365*24*60*60) {\n            amount = Math.floor(sec/30/24/60/60*10)/10;\n            type   = 'month';\n        } else if (sec < 365*4*24*60*60) {\n            amount = Math.floor(sec/365/24/60/60*10)/10;\n            type   = 'year';\n        } else if (sec >= 365*4*24*60*60) {\n            // factor in leap year shift (only older then 4 years)\n            amount = Math.floor(sec/365.25/24/60/60*10)/10;\n            type   = 'year';\n        }\n        return amount + ' ' + type + (amount > 1 ? 's' : '');\n    }\n\n    function date (dateStr) {\n        if (dateStr === '' || dateStr == null || (typeof dateStr == 'object' && !dateStr.getMonth)) return '';\n        var d1 = new Date(dateStr);\n        if (w2utils.isInt(dateStr)) d1 = new Date(Number(dateStr)); // for unix timestamps\n        if (String(d1) == 'Invalid Date') return '';\n\n        var months = w2utils.settings.shortmonths;\n        var d2   = new Date(); // today\n        var d3   = new Date();\n        d3.setTime(d3.getTime() - 86400000); // yesterday\n\n        var dd1  = months[d1.getMonth()] + ' ' + d1.getDate() + ', ' + d1.getFullYear();\n        var dd2  = months[d2.getMonth()] + ' ' + d2.getDate() + ', ' + d2.getFullYear();\n        var dd3  = months[d3.getMonth()] + ' ' + d3.getDate() + ', ' + d3.getFullYear();\n\n        var time = (d1.getHours() - (d1.getHours() > 12 ? 12 :0)) + ':' + (d1.getMinutes() < 10 ? '0' : '') + d1.getMinutes() + ' ' + (d1.getHours() >= 12 ? 'pm' : 'am');\n        var time2= (d1.getHours() - (d1.getHours() > 12 ? 12 :0)) + ':' + (d1.getMinutes() < 10 ? '0' : '') + d1.getMinutes() + ':' + (d1.getSeconds() < 10 ? '0' : '') + d1.getSeconds() + ' ' + (d1.getHours() >= 12 ? 'pm' : 'am');\n        var dsp = dd1;\n        if (dd1 === dd2) dsp = time;\n        if (dd1 === dd3) dsp = w2utils.lang('Yesterday');\n\n        return '<span title=\"'+ dd1 +' ' + time2 +'\">'+ dsp +'</span>';\n    }\n\n    function formatSize (sizeStr) {\n        if (!w2utils.isFloat(sizeStr) || sizeStr === '') return '';\n        sizeStr = parseFloat(sizeStr);\n        if (sizeStr === 0) return 0;\n        var sizes = ['Bt', 'KB', 'MB', 'GB', 'TB'];\n        var i = parseInt( Math.floor( Math.log(sizeStr) / Math.log(1024) ) );\n        return (Math.floor(sizeStr / Math.pow(1024, i) * 10) / 10).toFixed(i === 0 ? 0 : 1) + ' ' + sizes[i];\n    }\n\n    function formatNumber (val, groupSymbol, decimalSymbol) {\n        var ret = '';\n        if (groupSymbol == null) groupSymbol = w2utils.settings.groupSymbol || ',';\n        if (decimalSymbol == null) decimalSymbol = w2utils.settings.decimalSymbol || '.';\n        // check if this is a number\n        if (w2utils.isFloat(val) || w2utils.isInt(val) || w2utils.isMoney(val)) {\n            tmp = String(val).split('.');\n            ret = String(tmp[0]).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1\" + groupSymbol);\n            if (tmp[1] != null) ret += decimalSymbol + tmp[1];\n        }\n        return ret;\n    }\n\n    function formatDate (dateStr, format) { // IMPORTANT dateStr HAS TO BE valid JavaScript Date String\n        if (!format) format = this.settings.date_format;\n        if (dateStr === '' || dateStr == null || (typeof dateStr == 'object' && !dateStr.getMonth)) return '';\n\n        var dt = new Date(dateStr);\n        if (w2utils.isInt(dateStr)) dt = new Date(Number(dateStr)); // for unix timestamps\n        if (String(dt) == 'Invalid Date') return '';\n\n        var year  = dt.getFullYear();\n        var month = dt.getMonth();\n        var date  = dt.getDate();\n        return format.toLowerCase()\n            .replace('month', w2utils.settings.fullmonths[month])\n            .replace('mon', w2utils.settings.shortmonths[month])\n            .replace(/yyyy/g, year)\n            .replace(/yyy/g, year)\n            .replace(/yy/g, year > 2000 ? 100 + parseInt(String(year).substr(2)) : String(year).substr(2))\n            .replace(/(^|[^a-z$])y/g, '$1' + year)            // only y's that are not preceeded by a letter\n            .replace(/mm/g, (month + 1 < 10 ? '0' : '') + (month + 1))\n            .replace(/dd/g, (date < 10 ? '0' : '') + date)\n            .replace(/th/g, (date == 1 ? 'st' : 'th'))\n            .replace(/th/g, (date == 2 ? 'nd' : 'th'))\n            .replace(/th/g, (date == 3 ? 'rd' : 'th'))\n            .replace(/(^|[^a-z$])m/g, '$1' + (month + 1))     // only y's that are not preceeded by a letter\n            .replace(/(^|[^a-z$])d/g, '$1' + date);           // only y's that are not preceeded by a letter\n    }\n\n    function formatTime (dateStr, format) { // IMPORTANT dateStr HAS TO BE valid JavaScript Date String\n        var months = w2utils.settings.shortmonths;\n        var fullMonths = w2utils.settings.fullmonths;\n        if (!format) format = this.settings.time_format;\n        if (dateStr === '' || dateStr == null || (typeof dateStr == 'object' && !dateStr.getMonth)) return '';\n\n        var dt = new Date(dateStr);\n        if (w2utils.isInt(dateStr)) dt  = new Date(Number(dateStr)); // for unix timestamps\n        if (w2utils.isTime(dateStr)) {\n            var tmp = w2utils.isTime(dateStr, true);\n            dt = new Date();\n            dt.setHours(tmp.hours);\n            dt.setMinutes(tmp.minutes);\n        }\n        if (String(dt) == 'Invalid Date') return '';\n\n        var type = 'am';\n        var hour = dt.getHours();\n        var h24  = dt.getHours();\n        var min  = dt.getMinutes();\n        var sec  = dt.getSeconds();\n        if (min < 10) min = '0' + min;\n        if (sec < 10) sec = '0' + sec;\n        if (format.indexOf('am') !== -1 || format.indexOf('pm') !== -1) {\n            if (hour >= 12) type = 'pm';\n            if (hour > 12)  hour = hour - 12;\n        }\n        return format.toLowerCase()\n            .replace('am', type)\n            .replace('pm', type)\n            .replace('hhh', (hour < 10 ? '0' + hour : hour))\n            .replace('hh24', (h24 < 10 ? '0' + h24 : h24))\n            .replace('h24', h24)\n            .replace('hh', hour)\n            .replace('mm', min)\n            .replace('mi', min)\n            .replace('ss', sec)\n            .replace(/(^|[^a-z$])h/g, '$1' + hour)    // only y's that are not preceeded by a letter\n            .replace(/(^|[^a-z$])m/g, '$1' + min)     // only y's that are not preceeded by a letter\n            .replace(/(^|[^a-z$])s/g, '$1' + sec);    // only y's that are not preceeded by a letter\n    }\n\n    function formatDateTime(dateStr, format) {\n        var fmt;\n        if (dateStr === '' || dateStr == null || (typeof dateStr == 'object' && !dateStr.getMonth)) return '';\n        if (typeof format !== 'string') {\n            fmt = [this.settings.date_format, this.settings.time_format];\n        } else {\n            fmt = format.split('|');\n        }\n        return this.formatDate(dateStr, fmt[0]) + ' ' + this.formatTime(dateStr, fmt[1]);\n    }\n\n    function stripTags (html) {\n        if (html === null) return html;\n        switch (typeof html) {\n            case 'number':\n                break;\n            case 'string':\n                html = $.trim(String(html).replace(/(<([^>]+)>)/ig, \"\"));\n                break;\n            case 'object':\n                for (var a in html) html[a] = this.stripTags(html[a]);\n                break;\n        }\n        return html;\n    }\n\n    function encodeTags (html) {\n        if (html === null) return html;\n        switch (typeof html) {\n            case 'number':\n                break;\n            case 'string':\n                html = String(html).replace(/&/g, \"&amp;\").replace(/>/g, \"&gt;\").replace(/</g, \"&lt;\").replace(/\"/g, \"&quot;\");\n                break;\n            case 'object':\n                for (var a in html) html[a] = this.encodeTags(html[a]);\n                break;\n        }\n        return html;\n    }\n\n    function escapeId (id) {\n        if (id === '' || id == null) return '';\n        return String(id).replace(/([;&,\\.\\+\\*\\~'`:\"\\!\\^#$%@\\[\\]\\(\\)=<>\\|\\/? {}\\\\])/g, '\\\\$1');\n    }\n\n    function base64encode (input) {\n        var output = \"\";\n        var chr1, chr2, chr3, enc1, enc2, enc3, enc4;\n        var i = 0;\n        var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n        input = utf8_encode(input);\n\n        while (i < input.length) {\n            chr1 = input.charCodeAt(i++);\n            chr2 = input.charCodeAt(i++);\n            chr3 = input.charCodeAt(i++);\n            enc1 = chr1 >> 2;\n            enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n            enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n            enc4 = chr3 & 63;\n            if (isNaN(chr2)) {\n                enc3 = enc4 = 64;\n            } else if (isNaN(chr3)) {\n                enc4 = 64;\n            }\n            output = output + keyStr.charAt(enc1) + keyStr.charAt(enc2) + keyStr.charAt(enc3) + keyStr.charAt(enc4);\n        }\n\n        function utf8_encode (string) {\n            string = String(string).replace(/\\r\\n/g,\"\\n\");\n            var utftext = \"\";\n\n            for (var n = 0; n < string.length; n++) {\n                var c = string.charCodeAt(n);\n                if (c < 128) {\n                    utftext += String.fromCharCode(c);\n                }\n                else if((c > 127) && (c < 2048)) {\n                    utftext += String.fromCharCode((c >> 6) | 192);\n                    utftext += String.fromCharCode((c & 63) | 128);\n                }\n                else {\n                    utftext += String.fromCharCode((c >> 12) | 224);\n                    utftext += String.fromCharCode(((c >> 6) & 63) | 128);\n                    utftext += String.fromCharCode((c & 63) | 128);\n                }\n            }\n            return utftext;\n        }\n\n        return output;\n    }\n\n    function base64decode (input) {\n        var output = \"\";\n        var chr1, chr2, chr3;\n        var enc1, enc2, enc3, enc4;\n        var i = 0;\n        var keyStr = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\";\n        input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\");\n\n        while (i < input.length) {\n            enc1 = keyStr.indexOf(input.charAt(i++));\n            enc2 = keyStr.indexOf(input.charAt(i++));\n            enc3 = keyStr.indexOf(input.charAt(i++));\n            enc4 = keyStr.indexOf(input.charAt(i++));\n            chr1 = (enc1 << 2) | (enc2 >> 4);\n            chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n            chr3 = ((enc3 & 3) << 6) | enc4;\n            output = output + String.fromCharCode(chr1);\n            if (enc3 !== 64) {\n                output = output + String.fromCharCode(chr2);\n            }\n            if (enc4 !== 64) {\n                output = output + String.fromCharCode(chr3);\n            }\n        }\n        output = utf8_decode(output);\n\n        function utf8_decode (utftext) {\n            var string = \"\";\n            var i = 0;\n            var c = 0, c2, c3;\n\n            while ( i < utftext.length ) {\n                c = utftext.charCodeAt(i);\n                if (c < 128) {\n                    string += String.fromCharCode(c);\n                    i++;\n                }\n                else if((c > 191) && (c < 224)) {\n                    c2 = utftext.charCodeAt(i+1);\n                    string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n                    i += 2;\n                }\n                else {\n                    c2 = utftext.charCodeAt(i+1);\n                    c3 = utftext.charCodeAt(i+2);\n                    string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n                    i += 3;\n                }\n            }\n\n            return string;\n        }\n\n        return output;\n    }\n\n    function transition (div_old, div_new, type, callBack) {\n        var width  = $(div_old).width();\n        var height = $(div_old).height();\n        var time   = 0.5;\n\n        if (!div_old || !div_new) {\n            console.log('ERROR: Cannot do transition when one of the divs is null');\n            return;\n        }\n\n        div_old.parentNode.style.cssText += cross('perspective', '700px') +'; overflow: hidden;';\n        div_old.style.cssText += '; position: absolute; z-index: 1019; '+ cross('backface-visibility', 'hidden');\n        div_new.style.cssText += '; position: absolute; z-index: 1020; '+ cross('backface-visibility', 'hidden');\n\n        switch (type) {\n            case 'slide-left':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d('+ width + 'px, 0, 0)', 'translate('+ width +'px, 0)');\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +';'+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                    div_old.style.cssText += cross('transition', time+'s') +';'+ cross('transform', 'translate3d(-'+ width +'px, 0, 0)', 'translate(-'+ width +'px, 0)');\n                }, 1);\n                break;\n\n            case 'slide-right':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(-'+ width +'px, 0, 0)', 'translate(-'+ width +'px, 0)');\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'translate3d(0px, 0, 0)', 'translate(0px, 0)');\n                    div_old.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'translate3d('+ width +'px, 0, 0)', 'translate('+ width +'px, 0)');\n                }, 1);\n                break;\n\n            case 'slide-down':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; z-index: 1; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                div_new.style.cssText += 'overflow: hidden; z-index: 0; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                    div_old.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'translate3d(0, '+ height +'px, 0)', 'translate(0, '+ height +'px)');\n                }, 1);\n                break;\n\n            case 'slide-up':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, '+ height +'px, 0)', 'translate(0, '+ height +'px)');\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                    div_old.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                }, 1);\n                break;\n\n            case 'flip-left':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'rotateY(0deg)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'rotateY(-180deg)');\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'rotateY(0deg)');\n                    div_old.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'rotateY(180deg)');\n                }, 1);\n                break;\n\n            case 'flip-right':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'rotateY(0deg)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'rotateY(180deg)');\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'rotateY(0deg)');\n                    div_old.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'rotateY(-180deg)');\n                }, 1);\n                break;\n\n            case 'flip-down':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'rotateX(0deg)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'rotateX(180deg)');\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'rotateX(0deg)');\n                    div_old.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'rotateX(-180deg)');\n                }, 1);\n                break;\n\n            case 'flip-up':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'rotateX(0deg)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'rotateX(-180deg)');\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'rotateX(0deg)');\n                    div_old.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'rotateX(180deg)');\n                }, 1);\n                break;\n\n            case 'pop-in':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)') + '; '+ cross('transform', 'scale(.8)') + '; opacity: 0;';\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'scale(1)') +'; opacity: 1;';\n                    div_old.style.cssText += cross('transition', time+'s') +';';\n                }, 1);\n                break;\n\n            case 'pop-out':\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)') +'; '+ cross('transform', 'scale(1)') +'; opacity: 1;';\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)') +'; opacity: 0;';\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time+'s') +'; opacity: 1;';\n                    div_old.style.cssText += cross('transition', time+'s') +'; '+ cross('transform', 'scale(1.7)') +'; opacity: 0;';\n                }, 1);\n                break;\n\n            default:\n                // init divs\n                div_old.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)');\n                div_new.style.cssText += 'overflow: hidden; '+ cross('transform', 'translate3d(0, 0, 0)', 'translate(0, 0)') +'; opacity: 0;';\n                $(div_new).show();\n                // -- need a timing function because otherwise not working\n                window.setTimeout(function() {\n                    div_new.style.cssText += cross('transition', time +'s') +'; opacity: 1;';\n                    div_old.style.cssText += cross('transition', time +'s');\n                }, 1);\n                break;\n        }\n\n        setTimeout(function () {\n            if (type === 'slide-down') {\n                $(div_old).css('z-index', '1019');\n                $(div_new).css('z-index', '1020');\n            }\n            if (div_new) {\n                $(div_new).css({ 'opacity': '1' }).css(w2utils.cssPrefix({\n                    'transition': '',\n                    'transform' : '',\n                    'backface-visibility': ''  \n                }));\n            }\n            if (div_old) {\n                $(div_old).css({ 'opacity': '1' }).css(w2utils.cssPrefix({\n                    'transition': '',\n                    'transform' : '',\n                    'backface-visibility': ''  \n                }));\n                if (div_old.parentNode) $(div_old.parentNode).css(w2utils.cssPrefix('perspective', ''));\n            }\n            if (typeof callBack === 'function') callBack();\n        }, time * 1000);\n\n        function cross(property, value, none_webkit_value) {\n            var isWebkit=!!window.webkitURL; // jQuery no longer supports $.browser - RR\n            if (!isWebkit && typeof none_webkit_value !== 'undefined') value = none_webkit_value;\n            return ';'+ property +': '+ value +'; -webkit-'+ property +': '+ value +'; -moz-'+ property +': '+ value +'; '+\n                '-ms-'+ property +': '+ value +'; -o-'+ property +': '+ value +';';\n        }\n    }\n\n    function lock (box, msg, spinner) {\n        var options = {};\n        if (typeof msg === 'object') {\n            options = msg;\n        } else {\n            options.msg     = msg;\n            options.spinner = spinner;\n        }\n        if (!options.msg && options.msg !== 0) options.msg = '';\n        w2utils.unlock(box);\n        $(box).prepend(\n            '<div class=\"w2ui-lock\"></div>'+\n            '<div class=\"w2ui-lock-msg\"></div>'\n        );\n        var $lock = $(box).find('.w2ui-lock');\n        var mess = $(box).find('.w2ui-lock-msg');\n        if (!options.msg) mess.css({ 'background-color': 'transparent', 'border': '0px' });\n        if (options.spinner === true) options.msg = '<div class=\"w2ui-spinner\" '+ (!options.msg ? 'style=\"width: 35px; height: 35px\"' : '') +'></div>' + options.msg;\n        if (options.opacity != null) $lock.css('opacity', options.opacity);\n        if (typeof $lock.fadeIn == 'function') {\n            $lock.fadeIn(200);\n            mess.html(options.msg).fadeIn(200);\n        } else {\n            $lock.show();\n            mess.html(options.msg).show(0);            \n        }\n        // hide all tags (do not hide overlays as the form can be in overlay)\n        $().w2tag();\n    }\n\n    function unlock (box, speed) {\n        if (isInt(speed)) {\n            $(box).find('.w2ui-lock').fadeOut(speed);\n            setTimeout(function () {\n                $(box).find('.w2ui-lock').remove();\n                $(box).find('.w2ui-lock-msg').remove();\n            }, speed);\n        } else {\n            $(box).find('.w2ui-lock').remove();\n            $(box).find('.w2ui-lock-msg').remove();            \n        }\n    }\n\n    function getSize (el, type) {\n        var $el = $(el);\n        var bwidth = {\n            left    : parseInt($el.css('border-left-width')) || 0,\n            right   : parseInt($el.css('border-right-width')) || 0,\n            top     : parseInt($el.css('border-top-width')) || 0,\n            bottom  : parseInt($el.css('border-bottom-width')) || 0\n        };\n        var mwidth = {\n            left    : parseInt($el.css('margin-left')) || 0,\n            right   : parseInt($el.css('margin-right')) || 0,\n            top     : parseInt($el.css('margin-top')) || 0,\n            bottom  : parseInt($el.css('margin-bottom')) || 0\n        };\n        var pwidth = {\n            left    : parseInt($el.css('padding-left')) || 0,\n            right   : parseInt($el.css('padding-right')) || 0,\n            top     : parseInt($el.css('padding-top')) || 0,\n            bottom  : parseInt($el.css('padding-bottom')) || 0\n        };\n        switch (type) {\n            case 'top'      : return bwidth.top + mwidth.top + pwidth.top;\n            case 'bottom'   : return bwidth.bottom + mwidth.bottom + pwidth.bottom;\n            case 'left'     : return bwidth.left + mwidth.left + pwidth.left;\n            case 'right'    : return bwidth.right + mwidth.right + pwidth.right;\n            case 'width'    : return bwidth.left + bwidth.right + mwidth.left + mwidth.right + pwidth.left + pwidth.right + parseInt($el.width());\n            case 'height'   : return bwidth.top + bwidth.bottom + mwidth.top + mwidth.bottom + pwidth.top + pwidth.bottom + parseInt($el.height());\n            case '+width'   : return bwidth.left + bwidth.right + mwidth.left + mwidth.right + pwidth.left + pwidth.right;\n            case '+height'  : return bwidth.top + bwidth.bottom + mwidth.top + mwidth.bottom + pwidth.top + pwidth.bottom;\n        }\n        return 0;\n    }\n\n    function lang (phrase) {\n        var translation = this.settings.phrases[phrase];\n        if (translation == null) return phrase; else return translation;\n    }\n\n    function locale (locale) {\n        if (!locale) locale = 'en-us';\n        if (locale.length === 5) locale = 'locale/'+ locale +'.json';\n        \n        // clear phrases from language before\n        w2utils.settings.phrases = {};\n\n        // load from the file\n        $.ajax({\n            url      : locale,\n            type     : \"GET\",\n            dataType : \"JSON\",\n            async    : false,\n            cache    : false,\n            success  : function (data, status, xhr) {\n                w2utils.settings = $.extend(true, w2utils.settings, data);\n                // apply translation to some prototype functions\n                var p = w2obj.grid.prototype;\n                for (var b in p.buttons) { // buttons is an object\n                    p.buttons[b].caption = w2utils.lang(p.buttons[b].caption);\n                    p.buttons[b].hint    = w2utils.lang(p.buttons[b].hint);\n                }\n                p.msgDelete  = w2utils.lang(p.msgDelete);\n                p.msgNotJSON = w2utils.lang(p.msgNotJSON);\n                p.msgRefresh = w2utils.lang(p.msgRefresh);\n            },\n            error    : function (xhr, status, msg) {\n                console.log('ERROR: Cannot load locale '+ locale);\n            }\n        });\n    }\n\n    function scrollBarSize () {\n        if (tmp.scrollBarSize) return tmp.scrollBarSize;\n        var html =\n            '<div id=\"_scrollbar_width\" style=\"position: absolute; top: -300px; width: 100px; height: 100px; overflow-y: scroll;\">'+\n            '    <div style=\"height: 120px\">1</div>'+\n            '</div>';\n        $('body').append(html);\n        tmp.scrollBarSize = 100 - $('#_scrollbar_width > div').width();\n        $('#_scrollbar_width').remove();\n        if (String(navigator.userAgent).indexOf('MSIE') >= 0) tmp.scrollBarSize  = tmp.scrollBarSize / 2; // need this for IE9+\n        return tmp.scrollBarSize;\n    }\n\n\n    function checkName (params, component) { // was w2checkNameParam\n        if (!params || typeof params.name === 'undefined') {\n            console.log('ERROR: The parameter \"name\" is required but not supplied in $().'+ component +'().');\n            return false;\n        }\n        if (typeof w2ui[params.name] !== 'undefined') {\n            console.log('ERROR: The parameter \"name\" is not unique. There are other objects already created with the same name (obj: '+ params.name +').');\n            return false;\n        }\n        if (!w2utils.isAlphaNumeric(params.name)) {\n            console.log('ERROR: The parameter \"name\" has to be alpha-numeric (a-z, 0-9, dash and underscore). ');\n            return false;\n        }\n        return true;\n    }\n\n    function checkUniqueId (id, items, itemsDecription, objName) { // was w2checkUniqueId\n        if (!$.isArray(items)) items = [items];\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].id === id) {\n                console.log('ERROR: The parameter \"id='+ id +'\" is not unique within the current '+ itemsDecription +'. (obj: '+ objName +')');\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function parseRoute(route) {\n        var keys = [];\n        var path = route\n            .replace(/\\/\\(/g, '(?:/')\n            .replace(/\\+/g, '__plus__')\n            .replace(/(\\/)?(\\.)?:(\\w+)(?:(\\(.*?\\)))?(\\?)?/g, function(_, slash, format, key, capture, optional) {\n                keys.push({ name: key, optional: !! optional });\n                slash = slash || '';\n                return '' + (optional ? '' : slash) + '(?:' + (optional ? slash : '') + (format || '') + (capture || (format && '([^/.]+?)' || '([^/]+?)')) + ')' + (optional || '');\n            })\n            .replace(/([\\/.])/g, '\\\\$1')\n            .replace(/__plus__/g, '(.+)')\n            .replace(/\\*/g, '(.*)');\n        return {\n            path  : new RegExp('^' + path + '$', 'i'),\n            keys  : keys\n        };\n    }\n\n    function cssPrefix(field, value, returnString) {\n        var css    = {};\n        var newCSS = {};\n        var ret    = '';\n        if (!$.isPlainObject(field)) {\n            css[field] = value;\n        } else {\n            css = field;\n            if (value === true) returnString = true;\n        }\n        for (var c in css) {\n            newCSS[c] = css[c];\n            newCSS['-webkit-'+c] = css[c];\n            newCSS['-moz-'+c]    = css[c].replace('-webkit-', '-moz-');\n            newCSS['-ms-'+c]     = css[c].replace('-webkit-', '-ms-');\n            newCSS['-o-'+c]      = css[c].replace('-webkit-', '-o-');\n        }\n        if (returnString === true) {\n            for (var c in newCSS) {\n                ret += c + ': ' + newCSS[c] + '; ';\n            }\n        } else {\n            ret = newCSS;\n        }\n        return ret;\n    } \n\n})();\n\n/***********************************************************\n*  Generic Event Object\n*  --- This object is reused across all other\n*  --- widgets in w2ui.\n*\n*********************************************************/\n\nw2utils.event = {\n\n    on: function (eventData, handler) {\n        if (!$.isPlainObject(eventData)) eventData = { type: eventData };\n        eventData = $.extend({ type: null, execute: 'before', target: null, onComplete: null }, eventData);\n\n        if (!eventData.type) { console.log('ERROR: You must specify event type when calling .on() method of '+ this.name); return; }\n        if (!handler) { console.log('ERROR: You must specify event handler function when calling .on() method of '+ this.name); return; }\n        if (!$.isArray(this.handlers)) this.handlers = [];\n        this.handlers.push({ event: eventData, handler: handler });\n    },\n\n    off: function (eventData, handler) {\n        if (!$.isPlainObject(eventData)) eventData = { type: eventData };\n        eventData = $.extend({}, { type: null, execute: 'before', target: null, onComplete: null }, eventData);\n\n        if (!eventData.type) { console.log('ERROR: You must specify event type when calling .off() method of '+ this.name); return; }\n        if (!handler) { handler = null; }\n        // remove handlers\n        var newHandlers = [];\n        for (var h = 0, len = this.handlers.length; h < len; h++) {\n            var t = this.handlers[h];\n            if ((t.event.type === eventData.type || eventData.type === '*') &&\n                (t.event.target === eventData.target || eventData.target === null) &&\n                (t.handler === handler || handler === null))\n            {\n                // match\n            } else {\n                newHandlers.push(t);\n            }\n        }\n        this.handlers = newHandlers;\n    },\n\n    trigger: function (eventData) {\n        var eventData = $.extend({ type: null, phase: 'before', target: null }, eventData, {\n            isStopped: false, isCancelled: false,\n            preventDefault  : function () { this.isCancelled = true; },\n            stopPropagation : function () { this.isStopped   = true; }\n        });\n        if (eventData.phase === 'before') eventData.onComplete = null;\n        var args, fun, tmp;\n        if (eventData.target == null) eventData.target = null;\n        if (!$.isArray(this.handlers)) this.handlers = [];\n        // process events in REVERSE order\n        for (var h = this.handlers.length-1; h >= 0; h--) {\n            var item = this.handlers[h];\n            if ((item.event.type === eventData.type || item.event.type === '*') &&\n                (item.event.target === eventData.target || item.event.target === null) &&\n                (item.event.execute === eventData.phase || item.event.execute === '*' || item.event.phase === '*'))\n            {\n                eventData = $.extend({}, item.event, eventData);\n                // check handler arguments\n                args = [];\n                tmp  = new RegExp(/\\((.*?)\\)/).exec(item.handler);\n                if (tmp) args = tmp[1].split(/\\s*,\\s*/);\n                if (args.length === 2) {\n                    item.handler.call(this, eventData.target, eventData); // old way for back compatibility\n                } else {\n                    item.handler.call(this, eventData); // new way\n                }\n                if (eventData.isStopped === true || eventData.stop === true) return eventData; // back compatibility eventData.stop === true\n            }\n        }\n        // main object events\n        var funName = 'on' + eventData.type.substr(0,1).toUpperCase() + eventData.type.substr(1);\n        if (eventData.phase === 'before' && typeof this[funName] === 'function') {\n            fun = this[funName];\n            // check handler arguments\n            args = [];\n            tmp  = new RegExp(/\\((.*?)\\)/).exec(fun);\n            if (tmp) args = tmp[1].split(/\\s*,\\s*/);\n            if (args.length === 2) {\n                fun.call(this, eventData.target, eventData); // old way for back compatibility\n            } else {\n                fun.call(this, eventData); // new way\n            }\n            if (eventData.isStopped === true || eventData.stop === true) return eventData; // back compatibility eventData.stop === true\n        }\n        // item object events\n        if (eventData.object != null && eventData.phase === 'before' &&\n            typeof eventData.object[funName] === 'function')\n        {\n            fun = eventData.object[funName];\n            // check handler arguments\n            args = [];\n            tmp  = new RegExp(/\\((.*?)\\)/).exec(fun);\n            if (tmp) args = tmp[1].split(/\\s*,\\s*/);\n            if (args.length === 2) {\n                fun.call(this, eventData.target, eventData); // old way for back compatibility\n            } else {\n                fun.call(this, eventData); // new way\n            }\n            if (eventData.isStopped === true || eventData.stop === true) return eventData;\n        }\n        // execute onComplete\n        if (eventData.phase === 'after' && typeof eventData.onComplete === 'function') eventData.onComplete.call(this, eventData);\n\n        return eventData;\n    }\n};\n\n/***********************************************************\n*  Common Keyboard Handler. Supported in\n*  - grid\n*  - sidebar\n*  - popup\n*\n*********************************************************/\n\nw2utils.keyboard = (function (obj) {\n    // private scope\n    var w2ui_name = null;\n\n    obj.active    = active;\n    obj.clear     = clear;\n\n    init();\n    return obj;\n\n    function init() {\n        $(document).on('keydown', keydown);\n        $(document).on('mousedown', mousedown);\n    }\n\n    function keydown (event) {\n        var tag = event.target.tagName;\n        if ($.inArray(tag, ['INPUT', 'SELECT', 'TEXTAREA']) !== -1) return;\n        if ($(event.target).prop('contenteditable') === 'true') return;\n        if (!w2ui_name) return;\n        // pass to appropriate widget\n        if (w2ui[w2ui_name] && typeof w2ui[w2ui_name].keydown === 'function') {\n            w2ui[w2ui_name].keydown.call(w2ui[w2ui_name], event);\n        }\n    }\n\n    function mousedown (event) {\n        var tag = event.target.tagName;\n        var els = $(event.target).parents('.w2ui-grid, .w2ui-sidebar, .w2ui-popup');\n        if (els.length > 0) {\n            var name = els.attr('name');\n            var obj = w2ui[name];\n            if (name != w2ui_name) {\n                if (clear(event) === false) return; // event cancelled\n                if (active(name) === false) return; // event cancelled\n            }\n            if (obj && obj.keyboard) w2ui_name = name;\n        } else {\n            clear(event);\n        }\n    }\n\n    function active (new_w2ui_name) {\n        if (new_w2ui_name == null) return w2ui_name;\n        var obj = w2ui[new_w2ui_name];\n        if (obj && obj.focus) {\n            if (obj.focus.call(obj, event) === false) return false;\n        }\n        w2ui_name = new_w2ui_name;\n        return true;\n    }\n\n    function clear (event) {\n        if (w2ui_name != null && w2ui[w2ui_name].blur) {\n            if (w2ui[w2ui_name].blur.call(w2ui[w2ui_name], event) === false) return false;\n        }\n        w2ui_name = null;\n        return true;\n    }\n\n})({});\n\n/***********************************************************\n*  Commonly used plugins\n*  --- used primarily in grid and form\n*\n*********************************************************/\n\n(function () {\n\n    $.fn.w2render = function (name) {\n        if ($(this).length > 0) {\n            if (typeof name === 'string' && w2ui[name]) w2ui[name].render($(this)[0]);\n            if (typeof name === 'object') name.render($(this)[0]);\n        }\n    };\n\n    $.fn.w2destroy = function (name) {\n        if (!name && this.length > 0) name = this.attr('name');\n        if (typeof name === 'string' && w2ui[name]) w2ui[name].destroy();\n        if (typeof name === 'object') name.destroy();\n    };\n\n    $.fn.w2marker = function () {\n        var str = Array.prototype.slice.call(arguments, 0);\n        if (str.length == 0 || !str[0]) { // remove marker\n            return $(this).each(clearMarkedText);\n        } else { // add marker\n            return $(this).each(function (index, el) {\n                clearMarkedText(index, el);\n                for (var s = 0; s < str.length; s++) {\n                    var tmp = str[s];\n                    if (typeof tmp !== 'string') tmp = String(tmp);\n                    // escape regex special chars\n                    tmp = tmp.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, \"\\\\$&\").replace(/&/g, '&amp;').replace(/</g, '&gt;').replace(/>/g, '&lt;');\n                    var regex = new RegExp(tmp + '(?!([^<]+)?>)', \"gi\"); // only outside tags\n                    el.innerHTML = el.innerHTML.replace(regex, replaceValue);\n                }\n                function replaceValue(matched) { // mark new\n                    return '<span class=\"w2ui-marker\">' + matched + '</span>';\n                }\n            });\n        }\n\n        function clearMarkedText(index, el) {\n            while (el.innerHTML.indexOf('<span class=\"w2ui-marker\">') != -1) {\n                el.innerHTML = el.innerHTML.replace(/\\<span class=\\\"w2ui\\-marker\\\"\\>(.*)\\<\\/span\\>/ig, '$1'); // unmark\n            }\n        }\n    };\n\n    // -- w2tag - appears on the right side from element, there can be multiple on screen at a time\n\n    $.fn.w2tag = function (text, options) {\n        if (!$.isPlainObject(options)) options = {};\n        if (!$.isPlainObject(options.css)) options.css = {};\n        if (typeof options['class'] === 'undefined') options['class'] = '';\n        // remove all tags\n        if ($(this).length === 0) {\n            $('.w2ui-tag').each(function (index, elem) {\n                var opt = $(elem).data('options');\n                if (opt == null) opt = {};\n                $($(elem).data('taged-el')).removeClass( opt['class'] );\n                clearInterval($(elem).data('timer'));\n                $(elem).remove();\n            });\n            return;\n        }\n        return $(this).each(function (index, el) {\n            // show or hide tag\n            var tagOrigID = (options.id ? options.id : el.id);\n            var tagID = w2utils.escapeId(tagOrigID);\n            if (text === '' || text == null) {\n                $('#w2ui-tag-'+tagID).css('opacity', 0);\n                // remmove element\n                clearInterval($('#w2ui-tag-'+tagID).data('timer'));\n                $('#w2ui-tag-'+tagID).remove();\n            } else {\n                // remove elements\n                clearInterval($('#w2ui-tag-'+tagID).data('timer'));\n                $('#w2ui-tag-'+tagID).remove();\n                // insert\n                $('body').append(\n                    '<div id=\"w2ui-tag-'+ tagOrigID +'\" class=\"w2ui-tag '+ ($(el).parents('.w2ui-popup').length > 0 ? 'w2ui-tag-popup' : '') +\n                    '\" style=\"\"></div>');\n\n                var timer = setInterval(function () {\n                    // monitor if destroyed\n                    if ($(el).length === 0 || ($(el).offset().left === 0 && $(el).offset().top === 0)) {\n                        clearInterval($('#w2ui-tag-'+tagID).data('timer'));\n                        tmp_hide();\n                        return;\n                    }\n                    // monitor if moved\n                    if ($('#w2ui-tag-'+tagID).data('position') !== ($(el).offset().left + el.offsetWidth) + 'x' + $(el).offset().top) {\n                        $('#w2ui-tag-'+tagID).css(w2utils.cssPrefix({ 'transition': '.2s' })).css({\n                            left: ($(el).offset().left + el.offsetWidth + (options.left ? options.left : 0)) + 'px',\n                            top : ($(el).offset().top + (options.top ? options.top : 0)) + 'px'\n                        }).data('position', ($(el).offset().left + el.offsetWidth) + 'x' + $(el).offset().top);\n                    }\n                }, 100);\n                setTimeout(function () {\n                    if (!$(el).offset()) return;\n                    $('#w2ui-tag-'+tagID).css({\n                        opacity: '1',\n                        left: ($(el).offset().left + el.offsetWidth + (options.left ? options.left : 0)) + 'px',\n                        top : ($(el).offset().top + (options.top ? options.top : 0)) + 'px'\n                    }).html('<div style=\"margin-top: -2px 0px 0px -2px; white-space: nowrap;\"> <div class=\"w2ui-tag-body\">'+ text +'</div> </div>')\n                    .data('text', text)\n                    .data('taged-el', el)\n                    .data('options', options)\n                    .data('position', ($(el).offset().left + el.offsetWidth) + 'x' + $(el).offset().top)\n                    .data('timer', timer);\n                    $(el).off('keypress', tmp_hide).on('keypress', tmp_hide).off('change', tmp_hide).on('change', tmp_hide)\n                        .css(options.css).addClass(options['class']);\n                    if (typeof options.onShow === 'function') options.onShow();\n                }, 1);\n                var originalCSS = '';\n                if ($(el).length > 0) originalCSS = $(el)[0].style.cssText;\n                // bind event to hide it\n                function tmp_hide() {\n                    $tag = $('#w2ui-tag-'+tagID);\n                    if ($tag.length <= 0) return;\n                    clearInterval($tag.data('timer'));\n                    $tag.remove();\n                    $(el).off('keypress', tmp_hide).removeClass(options['class']);\n                    if ($(el).length > 0) $(el)[0].style.cssText = originalCSS;\n                    if (typeof options.onHide === 'function') options.onHide();\n                }\n            }\n        });\n    };\n\n    // w2overlay - appears under the element, there can be only one at a time\n\n    $.fn.w2overlay = function (html, options) {\n        var obj  = this;\n        var name = '';\n        var defaults = {\n            name      : null,      // it not null, then allows multiple concurent overlays\n            html      : '',        // html text to display\n            align     : 'none',    // can be none, left, right, both\n            left      : 0,         // offset left\n            top       : 0,         // offset top\n            tipLeft   : 30,        // tip offset left\n            width     : 0,         // fixed width\n            height    : 0,         // fixed height\n            maxWidth  : null,      // max width if any\n            maxHeight : null,      // max height if any\n            style     : '',        // additional style for main div\n            'class'   : '',        // additional class name for main div\n            onShow    : null,      // event on show\n            onHide    : null,      // event on hide\n            openAbove : false,     // show abover control\n            tmp       : {}\n        };\n        if (arguments.length == 1) {\n            if (typeof html == 'object') {\n                options = html; \n            } else {\n                options = { html: html };\n            }\n        }\n        if (arguments.length == 2) options.html = html;\n        if (!$.isPlainObject(options)) options = {};\n        options = $.extend({}, defaults, options);\n        if (options.name) name = '-' + options.name;\n        // if empty then hide\n        var tmp_hide;\n        if (this.length === 0 || options.html === '' || options.html == null) {\n            if ($('#w2ui-overlay'+ name).length > 0) {\n                tmp_hide = $('#w2ui-overlay'+ name)[0].hide;\n                if (typeof tmp_hide === 'function') tmp_hide();\n            } else {\n            $('#w2ui-overlay'+ name).remove();\n            }\n            return $(this);\n        }\n        if ($('#w2ui-overlay'+ name).length > 0) {\n            tmp_hide = $('#w2ui-overlay'+ name)[0].hide;\n            $(document).off('click', tmp_hide);\n            if (typeof tmp_hide === 'function') tmp_hide();\n        }\n        $('body').append(\n            '<div id=\"w2ui-overlay'+ name +'\" style=\"display: none\"'+\n            '        class=\"w2ui-reset w2ui-overlay '+ ($(this).parents('.w2ui-popup, .w2ui-overlay-popup').length > 0 ? 'w2ui-overlay-popup' : '') +'\">'+\n            '    <style></style>'+\n            '    <div style=\"'+ options.style +'\" class=\"'+ options['class'] +'\"></div>'+\n            '</div>'\n        );\n        // init\n        var div1 = $('#w2ui-overlay'+ name);\n        var div2 = div1.find(' > div');\n        div2.html(options.html);\n        // pick bg color of first div\n        var bc  = div2.css('background-color');\n        if (bc != null && bc !== 'rgba(0, 0, 0, 0)' && bc !== 'transparent') div1.css('background-color', bc);\n\n        div1.data('element', obj.length > 0 ? obj[0] : null)\n            .data('options', options)\n            .data('position', $(obj).offset().left + 'x' + $(obj).offset().top)\n            .fadeIn('fast')\n            .on('click', function (event) {\n                // if there is label for input, it will produce 2 click events\n                if (event.target.tagName == 'LABEL') event.stopPropagation();\n            })\n            .on('mousedown', function (event) {\n                $('#w2ui-overlay'+ name).data('keepOpen', true);\n                if (['INPUT', 'TEXTAREA', 'SELECT'].indexOf(event.target.tagName) == -1) event.preventDefault();\n            });\n        div1[0].hide   = hide;\n        div1[0].resize = resize;\n\n        // need time to display\n        resize();\n        setTimeout(function () {\n            resize();\n            $(document).off('click', hide).on('click', hide);\n            if (typeof options.onShow === 'function') options.onShow();\n        }, 10);\n\n        monitor();\n        return $(this);\n\n        // monitor position\n        function monitor() {\n            var tmp = $('#w2ui-overlay'+ name);\n            if (tmp.data('element') !== obj[0]) return; // it if it different overlay\n            if (tmp.length === 0) return;\n            var pos = $(obj).offset().left + 'x' + $(obj).offset().top;\n            if (tmp.data('position') !== pos) {\n                hide();\n            } else {\n                setTimeout(monitor, 250);\n            }\n        }\n\n        // click anywhere else hides the drop down\n        function hide () {\n            var div1 = $('#w2ui-overlay'+ name);\n            if (div1.data('keepOpen') === true) {\n                div1.removeData('keepOpen');\n                return;\n            }\n            var result;\n            if (typeof options.onHide === 'function') result = options.onHide();\n            if (result === false) return;\n            div1.remove();\n            $(document).off('click', hide);\n            clearInterval(div1.data('timer'));\n        }\n\n        function resize () {\n            var div1 = $('#w2ui-overlay'+ name);\n            var div2 = div1.find(' > div');\n            // if goes over the screen, limit height and width\n            if (div1.length > 0) {\n                div2.height('auto').width('auto');\n                // width/height\n                var overflowX = false;\n                var overflowY = false;\n                var h = div2.height();\n                var w = div2.width();\n                if (options.width && options.width < w) w = options.width;\n                if (w < 30) w = 30;\n                // if content of specific height\n                if (options.tmp.contentHeight) {\n                    h = parseInt(options.tmp.contentHeight);\n                    div2.height(h);\n                    setTimeout(function () {\n                        if (h > div2.find('div.menu > table').height()) {\n                            div2.find('div.menu').css('overflow-y', 'hidden');\n                        }\n                    }, 1);\n                    setTimeout(function () { div2.find('div.menu').css('overflow-y', 'auto'); }, 10);\n                }\n                if (options.tmp.contentWidth) {\n                    w = parseInt(options.tmp.contentWidth);\n                    div2.width(w);\n                    setTimeout(function () {\n                        if (w > div2.find('div.menu > table').width()) {\n                            div2.find('div.menu').css('overflow-x', 'hidden');\n                        }\n                    }, 1);\n                    setTimeout(function () { div2.find('div.menu').css('overflow-x', 'auto'); }, 10);\n                }\n                // alignment\n                switch (options.align) {\n                    case 'both':\n                        options.left = 17;\n                        if (options.width === 0) options.width = w2utils.getSize($(obj), 'width');\n                        break;\n                    case 'left':\n                        options.left = 17;\n                        break;\n                    case 'right':\n                        options.tipLeft = w - 45;\n                        options.left = w2utils.getSize($(obj), 'width') - w + 10;\n                        break;\n                }\n                // adjust position\n                var tmp = (w - 17) / 2;\n                var boxLeft  = options.left;\n                var boxWidth = options.width;\n                var tipLeft  = options.tipLeft;\n                if (w === 30 && !boxWidth) boxWidth = 30; else boxWidth = (options.width ? options.width : 'auto');\n                if (tmp < 25) {\n                    boxLeft = 25 - tmp;\n                    tipLeft = Math.floor(tmp);\n                }\n                // Y coord\n                div1.css({\n                    top         : (obj.offset().top + w2utils.getSize(obj, 'height') + options.top + 7) + 'px',\n                    left        : ((obj.offset().left > 25 ? obj.offset().left : 25) + boxLeft) + 'px',\n                    'min-width' : boxWidth,\n                    'min-height': (options.height ? options.height : 'auto')\n                });\n                // $(window).height() - has a problem in FF20\n                var maxHeight = window.innerHeight + $(document).scrollTop() - div2.offset().top - 7;\n                var maxWidth  = window.innerWidth + $(document).scrollLeft() - div2.offset().left - 7;\n                if ((maxHeight > -50 && maxHeight < 210) || options.openAbove === true) {\n                    // show on top\n                    maxHeight = div2.offset().top - $(document).scrollTop() - 7;\n                    if (options.maxHeight && maxHeight > options.maxHeight) maxHeight = options.maxHeight;\n                    if (h > maxHeight) {\n                        overflowY = true;\n                        div2.height(maxHeight).width(w).css({ 'overflow-y': 'auto' });\n                        h = maxHeight;\n                    }\n                    div1.css('top', ($(obj).offset().top - h - 24 + options.top) + 'px');\n                    div1.find('>style').html(\n                        '#w2ui-overlay'+ name +':before { display: none; margin-left: '+ parseInt(tipLeft) +'px; }'+\n                        '#w2ui-overlay'+ name +':after { display: block; margin-left: '+ parseInt(tipLeft) +'px; }'\n                    );\n                } else {\n                    // show under\n                    if (options.maxHeight && maxHeight > options.maxHeight) maxHeight = options.maxHeight;\n                    if (h > maxHeight) {\n                        overflowY = true;\n                        div2.height(maxHeight).width(w).css({ 'overflow-y': 'auto' });\n                    }\n                    div1.find('>style').html(\n                        '#w2ui-overlay'+ name +':before { display: block; margin-left: '+ parseInt(tipLeft) +'px; }'+\n                        '#w2ui-overlay'+ name +':after { display: none; margin-left: '+ parseInt(tipLeft) +'px; }'\n                    );\n                }\n                // check width\n                w = div2.width();\n                maxWidth = window.innerWidth + $(document).scrollLeft() - div2.offset().left - 7;\n                if (options.maxWidth && maxWidth > options.maxWidth) maxWidth = options.maxWidth;\n                if (w > maxWidth && options.align !== 'both') {\n                    options.align = 'right';\n                    setTimeout(function () { resize(); }, 1);\n                }\n                // check scroll bar\n                if (overflowY && overflowX) div2.width(w + w2utils.scrollBarSize() + 2);\n            }\n        }\n    };\n\n    $.fn.w2menu = function (menu, options) {\n        /*\n        ITEM STRUCTURE\n            item : {\n                id       : null,\n                text     : '',\n                style    : '',\n                img      : '',\n                icon     : '',\n                count    : '',\n                hidden   : false,\n                disabled : false\n                ...\n            }\n        */\n        var defaults = {\n            index      : null,        // current selected\n            items      : [],\n            render     : null,\n            msgNoItems : 'No items',\n            onSelect   : null,\n            tmp        : {}\n        };\n        var obj  = this;\n        var name = '';\n        if (menu === 'refresh') {\n            // if not show - call blur\n            if ($('#w2ui-overlay'+ name).length > 0) {\n                options = $.extend($.fn.w2menuOptions, options);\n                var scrTop = $('#w2ui-overlay'+ name +' div.menu').scrollTop();\n                $('#w2ui-overlay'+ name +' div.menu').html(getMenuHTML());\n                $('#w2ui-overlay'+ name +' div.menu').scrollTop(scrTop);\n                setTimeout(function () { mresize(); }, 1);\n            } else {\n                $(this).w2menu(options);\n            }\n        } else if (menu === 'refresh-index') {\n            var $menu  = $('#w2ui-overlay'+ name +' div.menu');\n            var cur    = $menu.find('tr[index='+ options.index +']');\n            var scrTop = $menu.scrollTop();\n            $menu.find('tr.w2ui-selected').removeClass('w2ui-selected'); // clear all\n            cur.addClass('w2ui-selected'); // select current\n            // scroll into view\n            if (cur.length > 0) {\n                var top    = cur[0].offsetTop - 5; // 5 is margin top\n                var height = $menu.height();\n                $menu.scrollTop(scrTop);\n                if (top < scrTop || top + cur.height() > scrTop + height) {\n                    $menu.animate({ 'scrollTop': top - (height - cur.height() * 2) / 2 }, 200, 'linear');\n                }\n            }\n            return;\n        } else {\n            if (arguments.length === 1) options = menu; else options.items = menu;\n            if (typeof options !== 'object') options = {};\n            options = $.extend({}, defaults, options);\n            $.fn.w2menuOptions = options;\n            if (options.name) name = '-' + options.name;\n            if (typeof options.select === 'function' && typeof options.onSelect !== 'function') options.onSelect = options.select;\n            if (typeof options.onRender === 'function' && typeof options.render !== 'function') options.render = options.onRender;\n            // since only one overlay can exist at a time\n            $.fn.w2menuHandler = function (event, index) {\n                if (typeof options.onSelect === 'function') {\n                    // need time so that menu first hides\n                    setTimeout(function () {\n                        options.onSelect({\n                            index : index,\n                            item  : options.items[index],\n                            originalEvent: event\n                        });\n                    }, 10);\n                }\n                // do not uncomment (or enum search type is not working in grid)\n                // setTimeout(function () { $(document).click(); }, 50);\n            };\n            var html = '';\n            if (options.search) {\n                html +=\n                    '<div style=\"position: absolute; top: 0px; height: 40px; left: 0px; right: 0px; border-bottom: 1px solid silver; background-color: #ECECEC; padding: 8px 5px;\">'+\n                    '    <div class=\"w2ui-icon icon-search\" style=\"position: absolute; margin-top: 4px; margin-left: 6px; width: 11px; background-position: left !important;\"></div>'+\n                    '    <input id=\"menu-search\" type=\"text\" style=\"width: 100%; outline: none; padding-left: 20px;\" onclick=\"event.stopPropagation();\">'+\n                    '</div>';\n                options.style += ';background-color: #ECECEC';\n                options.index = 0;\n                for (var i = 0; i < options.items.length; i++) options.items[i].hidden = false;\n            }\n            html += '<div class=\"menu\" style=\"position: absolute; top: '+ (options.search ? 40 : 0) + 'px; bottom: 0px; width: 100%; overflow: auto;\">' +\n                        getMenuHTML() +\n                    '</div>';\n            var ret = $(this).w2overlay(html, options);\n            setTimeout(function () {\n                $('#w2ui-overlay'+ name +' #menu-search')\n                    .on('keyup', change)\n                    .on('keydown', function (event) {\n                        // cancel tab key\n                        if (event.keyCode === 9) { event.stopPropagation(); event.preventDefault(); }\n                    });\n                if (options.search) {\n                    if (['text', 'password'].indexOf($(obj)[0].type) != -1 || $(obj)[0].tagName == 'texarea') return;\n                    $('#w2ui-overlay'+ name +' #menu-search').focus();                    \n                }\n            }, 200);\n            mresize();\n            return ret;\n        }\n\n        function mresize() {\n            setTimeout(function () {\n                // show selected\n                $('#w2ui-overlay'+ name +' tr.w2ui-selected').removeClass('w2ui-selected');\n                var cur    = $('#w2ui-overlay'+ name +' tr[index='+ options.index +']');\n                var scrTop = $('#w2ui-overlay'+ name +' div.menu').scrollTop();\n                cur.addClass('w2ui-selected');\n                if (options.tmp) options.tmp.contentHeight = $('#w2ui-overlay'+ name +' table').height() + (options.search ? 50 : 10);\n                if (options.tmp) options.tmp.contentWidth  = $('#w2ui-overlay'+ name +' table').width();\n                if ($('#w2ui-overlay'+ name).length > 0) $('#w2ui-overlay'+ name)[0].resize();\n                // scroll into view\n                if (cur.length > 0) {\n                    var top    = cur[0].offsetTop - 5; // 5 is margin top\n                    var el     = $('#w2ui-overlay'+ name +' div.menu');\n                    var height = el.height();\n                    $('#w2ui-overlay'+ name +' div.menu').scrollTop(scrTop);\n                    if (top < scrTop || top + cur.height() > scrTop + height) {\n                        $('#w2ui-overlay'+ name +' div.menu').animate({ 'scrollTop': top - (height - cur.height() * 2) / 2 }, 200, 'linear');\n                    }\n                }\n            }, 1);\n        }\n\n        function change(event) {\n            var search  = this.value;\n            var key     = event.keyCode;\n            var cancel  = false;\n            switch (key) {\n                case 13: // enter\n                    $('#w2ui-overlay'+ name).remove();\n                    $.fn.w2menuHandler(event, options.index);\n                    break;\n                case 9:  // tab\n                case 27: // escape\n                    $('#w2ui-overlay'+ name).remove();\n                    $.fn.w2menuHandler(event, -1);\n                    break;\n                case 38: // up\n                    options.index = w2utils.isInt(options.index) ? parseInt(options.index) : 0;\n                    options.index--;\n                    while (options.index > 0 && options.items[options.index].hidden) options.index--;\n                    if (options.index === 0 && options.items[options.index].hidden) {\n                        while (options.items[options.index] && options.items[options.index].hidden) options.index++;\n                    }\n                    if (options.index < 0) options.index = 0;\n                    cancel = true;\n                    break;\n                case 40: // down\n                    options.index = w2utils.isInt(options.index) ? parseInt(options.index) : 0;\n                    options.index++;\n                    while (options.index < options.items.length-1 && options.items[options.index].hidden) options.index++;\n                    if (options.index === options.items.length-1 && options.items[options.index].hidden) {\n                        while (options.items[options.index] && options.items[options.index].hidden) options.index--;\n                    }\n                    if (options.index >= options.items.length) options.index = options.items.length - 1;\n                    cancel = true;\n                    break;\n            }\n            // filter\n            if (!cancel) {\n                var shown  = 0;\n                for (var i = 0; i < options.items.length; i++) {\n                    var item = options.items[i];\n                    var prefix = '';\n                    var suffix = '';\n                    if (['is', 'begins with'].indexOf(options.match) !== -1) prefix = '^';\n                    if (['is', 'ends with'].indexOf(options.match) !== -1) suffix = '$';\n                    try {\n                        var re = new RegExp(prefix + search + suffix, 'i');\n                        if (re.test(item.text) || item.text === '...') item.hidden = false; else item.hidden = true;\n                    } catch (e) {}\n                    // do not show selected items\n                    if (obj.type === 'enum' && $.inArray(item.id, ids) !== -1) item.hidden = true;\n                    if (item.hidden !== true) shown++;\n                }\n                options.index = 0;\n                while (options.index < options.items.length-1 && options.items[options.index].hidden) options.index++;\n                if (shown <= 0) options.index = -1;\n            }\n            $(obj).w2menu('refresh', options);\n            mresize();\n        }\n\n        function getMenuHTML () {\n            if (options.spinner) {\n                return  '<table class=\"w2ui-drop-menu\"><tr><td style=\"padding: 5px 10px 10px 10px; text-align: center\">'+\n                        '    <div class=\"w2ui-spinner\" style=\"width: 18px; height: 18px; position: relative; top: 5px;\"></div> '+\n                        '    <div style=\"display: inline-block; padding: 3px; color: #999;\">'+ w2utils.lang('Loading...') +'</div>'+\n                        '</td></tr></table>';\n            }\n            var count        = 0;\n            var menu_html    = '<table cellspacing=\"0\" cellpadding=\"0\" class=\"w2ui-drop-menu\">';\n            var img = null, icon = null;\n            for (var f = 0; f < options.items.length; f++) {\n                var mitem = options.items[f];\n                if (typeof mitem === 'string') {\n                    mitem = { id: mitem, text: mitem };\n                } else {\n                    if (mitem.text != null && mitem.id == null) mitem.id = mitem.text;\n                    if (mitem.text == null && mitem.id != null) mitem.text = mitem.id;\n                    if (mitem.caption != null) mitem.text = mitem.caption;\n                    img  = mitem.img;\n                    icon = mitem.icon;\n                    if (img  == null) img  = null;\n                    if (icon == null) icon = null;\n                }\n                if (mitem.hidden !== true) {\n                    var imgd = '';\n                    var txt = mitem.text;\n                    if (typeof options.render === 'function') txt = options.render(mitem, options);\n                    if (img)  imgd = '<td class=\"menu-icon\"><div class=\"w2ui-tb-image w2ui-icon '+ img +'\"></div></td>';\n                    if (icon) imgd = '<td class=\"menu-icon\" align=\"center\"><span class=\"w2ui-icon '+ icon +'\"></span></td>';\n                    // render only if non-empty\n                    if (typeof txt !== 'undefined' && txt !== '' && !(/^-+$/.test(txt))) {\n                        var bg = (count % 2 === 0 ? 'w2ui-item-even' : 'w2ui-item-odd');\n                        if (options.altRows !== true) bg = '';\n                        var colspan = 1;\n                        if (imgd == '') colspan++;\n                        if (mitem.count == null) colspan++;\n                        menu_html +=\n                            '<tr index=\"'+ f + '\" style=\"'+ (mitem.style ? mitem.style : '') +'\" '+ (mitem.hint ? 'title=\"'+ mitem.hint +'\"' : '') +\n                            '        class=\"'+ bg +' '+ (options.index === f ? 'w2ui-selected' : '') + ' ' + (mitem.disabled === true ? 'w2ui-disabled' : '') +'\"'+\n                            '        onmousedown=\"$(this).parent().find(\\'tr\\').removeClass(\\'w2ui-selected\\'); $(this).addClass(\\'w2ui-selected\\');\"'+\n                            '        onclick=\"event.stopPropagation(); '+\n                            '               if ('+ (mitem.disabled === true ? 'true' : 'false') + ') return;'+\n                            '               $(\\'#w2ui-overlay'+ name +'\\').remove(); '+\n                            '               $.fn.w2menuHandler(event, \\''+ f +'\\');\">'+\n                                imgd +\n                            '   <td class=\"menu-text\" colspan=\"'+ colspan +'\">'+ txt +'</td>'+\n                            '   <td class=\"menu-count\">'+ (mitem.count != null ? '<span>' + mitem.count + '</span>' : '') + '</td>' +\n                            '</tr>';\n                        count++;\n                    } else {\n                        // horizontal line\n                        menu_html += '<tr><td colspan=\"2\" style=\"padding: 6px; pointer-events: none\"><div style=\"border-top: 1px solid silver;\"></div></td></tr>';\n                    }\n                }\n                options.items[f] = mitem;\n            }\n            if (count === 0) {\n                menu_html += '<tr><td style=\"padding: 13px; color: #999; text-align: center\">'+ options.msgNoItems +'</div></td></tr>';\n            }\n            menu_html += \"</table>\";\n            return menu_html;\n        }\n    };\n})();\n\n\n/************************************************************************\n*   Library: Web 2.0 UI for jQuery (using prototypical inheritance)\n*   - Following objects defined\n*        - w2grid        - grid widget\n*        - $().w2grid    - jQuery wrapper\n*   - Dependencies: jQuery, w2utils, w2toolbar, w2fields, w2alert, w2confirm\n*\n* == NICE TO HAVE == \n*   - frozen columns\n*   - add colspans\n*   - allow this.total to be unknown (-1)\n*   - column autosize based on largest content\n*   - easy bubbles in the grid\n*   - More than 2 layers of header groups\n*   - reorder columns/records\n*   - hidden searches could not be clearned by the user\n*   - problem with .set() and arrays, array get extended too, but should be replaced\n*   - move events into prototype\n*   - add grid.focus()\n*   - after edit stay on the same record option\n*   - allow render: function to be filters\n*   - if supplied array of ids, get should return array of records\n*   - row drag and drop has bugs\n*   - header filtration\n*   - allow functions in routeData (also add routeData to list/enum)\n*   - implement global routeData and all elements read from there\n*   - send parsed URL to the event if there is parseData\n*   - if you set searchData or sortData and call refresh() it should work\n*   - bug: vs_start = 100 and more then 500 records, when scrolling empty sets\n*   - use column field for style: { 1: 'color: red' }\n*   - unselect fires too many times (if many is unselected, one event should fire)\n*   - add selectType: 'none' so that no selection can be make but with mouse\n*   - send parsed URL to the event if there is routeData\n*\n* == 1.5 changes\n*   - $('#grid').w2grid() - if called w/o argument then it returns grid object\n*   - added statusRange     : true,\n*           statusBuffered  : false,\n*           statusRecordID  : true,\n*           statusSelection : true,\n*           statusResponse  : true,\n*           statusSort      : true,\n*           statusSearch    : true,\n*   - change selectAll() and selectNone() - return time it took\n*   - added vs_start and vs_extra\n*   - added update() - updates only data in the grid\n*   - add to docs onColumnDragStart, onColumnDragEnd\n*   - onSelect and onSelect should fire 1 time for selects with shift or selectAll(), selectNone()\n*   - record.style[field_name]\n*   - added focus(), blur(), onFocus, onBlur\n*   - added search.operator\n*   - refactor reorderRow (not finished)\n*\n************************************************************************/\n\n(function () {\n    var w2grid = function(options) {\n\n        // public properties\n        this.name         = null;\n        this.box          = null;     // HTML element that hold this element\n        this.header       = '';\n        this.url          = '';\n        this.routeData    = {};       // data for dynamic routes\n        this.columns      = [];       // { field, caption, size, attr, render, hidden, gridMinWidth, editable }\n        this.columnGroups = [];       // { span: int, caption: 'string', master: true/false }\n        this.records      = [];       // { recid: int(requied), field1: 'value1', ... fieldN: 'valueN', style: 'string', editable: true/false, summary: true/false, changes: object }\n        this.summary      = [];       // arry of summary records, same structure as records array\n        this.searches     = [];       // { type, caption, field, inTag, outTag, hidden }\n        this.searchData   = [];\n        this.sortData     = [];\n        this.postData     = {};\n        this.toolbar      = {};       // if not empty object; then it is toolbar object\n\n        this.show = {\n            header          : false,\n            toolbar         : false,\n            footer          : false,\n            columnHeaders   : true,\n            lineNumbers     : false,\n            expandColumn    : false,\n            selectColumn    : false,\n            emptyRecords    : true,\n            toolbarReload   : true,\n            toolbarColumns  : true,\n            toolbarSearch   : true,\n            toolbarAdd      : false,\n            toolbarEdit     : false,\n            toolbarDelete   : false,\n            toolbarSave     : false,\n            statusRange     : true,\n            statusBuffered  : false,\n            statusRecordID  : true,\n            statusSelection : true,\n            statusResponse  : true,\n            statusSort      : true,\n            statusSearch    : true,\n            recordTitles    : true,\n            selectionBorder : true,\n            skipRecords     : true\n        };\n\n        this.autoLoad       = true;     // for infinite scroll\n        this.fixedBody      = true;     // if false; then grid grows with data\n        this.recordHeight   = 24;\n        this.vs_start       = 300;\n        this.vs_extra       = 15;\n        this.keyboard       = true;\n        this.selectType     = 'row';    // can be row|cell\n        this.multiSearch    = true;\n        this.multiSelect    = true;\n        this.multiSort      = true;\n        this.reorderColumns = false;\n        this.reorderRows    = false;\n        this.markSearch     = true;\n\n        this.total   = 0;     // server total\n        this.limit   = 100;\n        this.offset  = 0;     // how many records to skip (for infinite scroll) when pulling from server\n        this.style   = '';\n        this.ranges  = [];\n        this.menu    = [];\n        this.method  = null;         // if defined, then overwrited ajax method\n        this.recid   = null;\n        this.parser  = null;\n\n        // events\n        this.onAdd              = null;\n        this.onEdit             = null;\n        this.onRequest          = null;        // called on any server event\n        this.onLoad             = null;\n        this.onDelete           = null;\n        this.onDeleted          = null;\n        this.onSubmit           = null;\n        this.onSave             = null;\n        this.onSelect           = null;\n        this.onUnselect         = null;\n        this.onClick            = null;\n        this.onDblClick         = null;\n        this.onContextMenu      = null;\n        this.onMenuClick        = null;        // when context menu item selected\n        this.onColumnClick      = null;\n        this.onColumnResize     = null;\n        this.onSort             = null;\n        this.onSearch           = null;\n        this.onChange           = null;        // called when editable record is changed\n        this.onRestore          = null;        // called when editable record is restored\n        this.onExpand           = null;\n        this.onCollapse         = null;\n        this.onError            = null;\n        this.onKeydown          = null;\n        this.onToolbar          = null;     // all events from toolbar\n        this.onColumnOnOff      = null;\n        this.onCopy             = null;\n        this.onPaste            = null;\n        this.onSelectionExtend  = null;\n        this.onEditField        = null;\n        this.onRender           = null;\n        this.onRefresh          = null;\n        this.onReload           = null;\n        this.onResize           = null;\n        this.onDestroy          = null;\n        this.onStateSave        = null;\n        this.onStateRestore     = null;\n        this.onFocus            = null;\n        this.onBlur             = null;\n        this.onReorderRow       = null;\n\n        // internal\n        this.last = {\n            field     : 'all',\n            caption   : w2utils.lang('All Fields'),\n            logic     : 'OR',\n            search    : '',\n            searchIds : [],\n            selection : {\n                indexes : [],\n                columns : {}\n            },\n            multi       : false,\n            scrollTop   : 0,\n            scrollLeft  : 0,\n            sortData    : null,\n            sortCount   : 0,\n            xhr         : null,\n            range_start : null,\n            range_end   : null,\n            sel_ind     : null,\n            sel_col     : null,\n            sel_type    : null,\n            edit_col    : null\n        };\n\n        $.extend(true, this, w2obj.grid, options);\n    };\n\n    // ====================================================\n    // -- Registers as a jQuery plugin\n\n    $.fn.w2grid = function(method) {\n        if ($.isPlainObject(method)) {\n            // check name parameter\n            if (!w2utils.checkName(method, 'w2grid')) return;\n            // remember items\n            var columns      = method.columns;\n            var columnGroups = method.columnGroups;\n            var records      = method.records;\n            var searches     = method.searches;\n            var searchData   = method.searchData;\n            var sortData     = method.sortData;\n            var postData     = method.postData;\n            var toolbar      = method.toolbar;\n            // extend items\n            var object = new w2grid(method);\n            $.extend(object, { postData: {}, records: [], columns: [], searches: [], toolbar: {}, sortData: [], searchData: [], handlers: [] });\n            if (object.onExpand != null) object.show.expandColumn = true;\n            $.extend(true, object.toolbar, toolbar);\n            // reassign variables\n            if (columns)      for (var p = 0; p < columns.length; p++)      object.columns[p]       = $.extend(true, {}, columns[p]);\n            if (columnGroups) for (var p = 0; p < columnGroups.length; p++) object.columnGroups[p]  = $.extend(true, {}, columnGroups[p]);\n            if (searches)     for (var p = 0; p < searches.length; p++)     object.searches[p]      = $.extend(true, {}, searches[p]);\n            if (searchData)   for (var p = 0; p < searchData.length; p++)   object.searchData[p]    = $.extend(true, {}, searchData[p]);\n            if (sortData)     for (var p = 0; p < sortData.length; p++)     object.sortData[p]      = $.extend(true, {}, sortData[p]);\n            object.postData = $.extend(true, {}, postData);\n\n            // check if there are records without recid\n            if (records) for (var r = 0; r < records.length; r++) {\n                if (records[r].recid == null) {\n                    console.log('ERROR: Cannot add records without recid. (obj: '+ object.name +')');\n                    return;\n                }\n                object.records[r] = $.extend(true, {}, records[r]);\n            }\n            // add searches\n            for (var c in object.columns) {\n                var col = object.columns[c];\n                if (col.searchable == null || col.searchable === false || object.getSearch(col.field) != null) continue;\n                var stype = col.searchable;\n                var attr  = '';\n                if (col.searchable === true) { stype = 'text'; attr = 'size=\"20\"'; }\n                object.addSearch({ field: col.field, caption: col.caption, type: stype, attr: attr });\n            }\n            // init toolbar\n            object.initToolbar();\n            // render if necessary\n            if ($(this).length !== 0) {\n                object.render($(this)[0]);\n            }\n            // register new object\n            w2ui[object.name] = object;\n            return object;\n\n        } else {\n            var obj = w2ui[$(this).attr('name')];\n            if (!obj) return null;\n            if (arguments.length > 0) {\n                if (obj[method]) obj[method].apply(obj, Array.prototype.slice.call(arguments, 1));\n                return this;\n            } else {\n                return obj;\n            }\n        }\n    };\n\n    // ====================================================\n    // -- Implementation of core functionality\n\n    w2grid.prototype = {    \n        msgDelete       : w2utils.lang('Are you sure you want to delete selected records?'),\n        msgNotJSON      : w2utils.lang('Returned data is not in valid JSON format.'),\n        msgAJAXerror    : w2utils.lang('AJAX error. See console for more details.'),\n        msgRefresh      : w2utils.lang('Refreshing...'),\n        msgNeedReload   : w2utils.lang('Your remove data source record count has changed, reloading from the first record.'),\n\n        buttons: {\n            'reload'   : { type: 'button', id: 'w2ui-reload', icon: 'w2ui-icon-reload', hint: w2utils.lang('Reload data in the list') },\n            'columns'  : { type: 'drop', id: 'w2ui-column-on-off', icon: 'w2ui-icon-columns', hint: w2utils.lang('Show/hide columns'), arrow: false, html: '' },\n            'search'   : { type: 'html',   id: 'w2ui-search',\n                            html: '<div class=\"w2ui-icon icon-search-down w2ui-search-down\" title=\"'+ w2utils.lang('Select Search Field') +'\" '+\n                                  'onclick=\"var obj = w2ui[$(this).parents(\\'div.w2ui-grid\\').attr(\\'name\\')]; obj.searchShowFields();\"></div>'\n                          },\n            'search-go': { type: 'drop',  id: 'w2ui-search-advanced', icon: 'w2ui-icon-search', caption: w2utils.lang('Search'), hint: w2utils.lang('Open Search Fields') },\n            'add'      : { type: 'button', id: 'w2ui-add', caption: w2utils.lang('Add New'), hint: w2utils.lang('Add new record'), icon: 'w2ui-icon-plus' },\n            'edit'     : { type: 'button', id: 'w2ui-edit', caption: w2utils.lang('Edit'), hint: w2utils.lang('Edit selected record'), icon: 'w2ui-icon-pencil', disabled: true },\n            'delete'   : { type: 'button', id: 'w2ui-delete', caption: w2utils.lang('Delete'), hint: w2utils.lang('Delete selected records'), icon: 'w2ui-icon-cross', disabled: true },\n            'save'     : { type: 'button', id: 'w2ui-save', caption: w2utils.lang('Save'), hint: w2utils.lang('Save changed records'), icon: 'w2ui-icon-check' }\n        },\n\n        add: function (record) {\n            if (!$.isArray(record)) record = [record];\n            var added = 0;\n            for (var o in record) {\n                if (this.recid && typeof record[o].recid == 'undefined') record[o].recid = record[o][this.recid];\n                if (record[o].recid == null) {\n                    console.log('ERROR: Cannot add record without recid. (obj: '+ this.name +')');\n                    continue;\n                }\n                this.records.push(record[o]);\n                added++;\n            }\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (!url) {\n                this.total = this.records.length;\n                this.localSort();\n                this.localSearch();\n            }\n            this.refresh(); // ??  should it be reload?\n            return added;\n        },\n\n        find: function (obj, returnIndex) {\n            if (obj == null) obj = {};\n            var recs    = [];\n            var hasDots = false;\n            // check if property is nested - needed for speed\n            for (var o in obj) if (String(o).indexOf('.') != -1) hasDots = true;\n            // look for an item\n            for (var i = 0; i < this.records.length; i++) {\n                var match = true;\n                for (var o in obj) {\n                    var val = this.records[i][o];\n                    if (hasDots && String(o).indexOf('.') != -1) val = this.parseField(this.records[i], o);\n                    if (obj[o] != val) match = false;\n                }\n                if (match && returnIndex !== true) recs.push(this.records[i].recid);\n                if (match && returnIndex === true) recs.push(i);\n            }\n            return recs;\n        },\n\n        set: function (recid, record, noRefresh) { // does not delete existing, but overrides on top of it\n            if (typeof recid == 'object') {\n                noRefresh = record;\n                record    = recid;\n                recid     = null;\n            }\n            // update all records\n            if (recid == null) {\n                for (var r in this.records) {\n                    $.extend(true, this.records[r], record); // recid is the whole record\n                }\n                if (noRefresh !== true) this.refresh();\n            } else { // find record to update\n                var ind = this.get(recid, true);\n                if (ind == null) return false;\n                var isSummary = (this.records[ind] && this.records[ind].recid == recid ? false : true);\n                if (isSummary) {\n                    $.extend(true, this.summary[ind], record);\n                } else {\n                    $.extend(true, this.records[ind], record);\n                }\n                if (noRefresh !== true) this.refreshRow(recid); // refresh only that record\n            }\n            return true;\n        },\n\n        get: function (recid, returnIndex) {\n            // search records\n            for (var i = 0; i < this.records.length; i++) {\n                if (this.records[i].recid == recid) {\n                    if (returnIndex === true) return i; else return this.records[i];\n                }\n            }\n            // search summary\n            for (var i = 0; i < this.summary.length; i++) {\n                if (this.summary[i].recid == recid) {\n                    if (returnIndex === true) return i; else return this.summary[i];\n                }\n            }\n            return null;\n        },\n\n        remove: function () {\n            var removed = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.records.length-1; r >= 0; r--) {\n                    if (this.records[r].recid == arguments[a]) { this.records.splice(r, 1); removed++; }\n                }\n                for (var r = this.summary.length-1; r >= 0; r--) {\n                    if (this.summary[r].recid == arguments[a]) { this.summary.splice(r, 1); removed++; }\n                }\n            }\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (!url) {\n                this.localSort();\n                this.localSearch();\n            }\n            this.refresh();\n            return removed;\n        },\n\n        addColumn: function (before, columns) {\n            var added = 0;\n            if (arguments.length == 1) {\n                columns = before;\n                before  = this.columns.length;\n            } else {\n                if (typeof before == 'string') before = this.getColumn(before, true);\n                if (before === null) before = this.columns.length;\n            }\n            if (!$.isArray(columns)) columns = [columns];\n            for (var o in columns) {\n                this.columns.splice(before, 0, columns[o]);\n                // if column is searchable, add search field\n                if (columns[o].searchable) {\n                    var stype = columns[o].searchable;\n                    var attr  = '';\n                    if (columns[o].searchable === true) { stype = 'text'; attr = 'size=\"20\"'; }\n                    this.addSearch({ field: columns[o].field, caption: columns[o].caption, type: stype, attr: attr });\n                }\n                before++;\n                added++;\n            }\n            this.refresh();\n            return added;\n        },\n\n        removeColumn: function () {\n            var removed = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.columns.length-1; r >= 0; r--) {\n                    if (this.columns[r].field == arguments[a]) { \n                        if (this.columns[r].searchable) this.removeSearch(arguments[a]);\n                        this.columns.splice(r, 1);\n                        removed++; \n                    }\n                }\n            }\n            this.refresh();\n            return removed;\n        },\n\n        getColumn: function (field, returnIndex) {\n            for (var i = 0; i < this.columns.length; i++) {\n                if (this.columns[i].field == field) {\n                    if (returnIndex === true) return i; else return this.columns[i];\n                }\n            }\n            return null;\n        },\n\n        toggleColumn: function () {\n            var effected = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.columns.length-1; r >= 0; r--) {\n                    var col = this.columns[r];\n                    if (col.field == arguments[a]) {\n                        col.hidden = !col.hidden;\n                        effected++;\n                    }\n                }\n            }\n            this.refresh();\n            return effected;\n        },\n\n        showColumn: function () {\n            var shown = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.columns.length-1; r >= 0; r--) {\n                    var col = this.columns[r];\n                    if (col.gridMinWidth) delete col.gridMinWidth;\n                    if (col.field == arguments[a] && col.hidden !== false) {\n                        col.hidden = false;\n                        shown++;\n                    }\n                }\n            }\n            this.refresh();\n            return shown;\n        },\n\n        hideColumn: function () {\n            var hidden = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.columns.length-1; r >= 0; r--) {\n                    var col = this.columns[r];\n                    if (col.field == arguments[a] && col.hidden !== true) {\n                        col.hidden = true;\n                        hidden++;\n                    }\n                }\n            }\n            this.refresh();\n            return hidden;\n        },\n\n        addSearch: function (before, search) {\n            var added = 0;\n            if (arguments.length == 1) {\n                search = before;\n                before = this.searches.length;\n            } else {\n                if (typeof before == 'string') before = this.getSearch(before, true);\n                if (before === null) before = this.searches.length;\n            }\n            if (!$.isArray(search)) search = [search];\n            for (var o in search) {\n                this.searches.splice(before, 0, search[o]);\n                before++;\n                added++;\n            }\n            this.searchClose();\n            return added;\n        },\n\n        removeSearch: function () {\n            var removed = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.searches.length-1; r >= 0; r--) {\n                    if (this.searches[r].field == arguments[a]) { this.searches.splice(r, 1); removed++; }\n                }\n            }\n            this.searchClose();\n            return removed;\n        },\n\n        getSearch: function (field, returnIndex) {\n            for (var i = 0; i < this.searches.length; i++) {\n                if (this.searches[i].field == field) {\n                    if (returnIndex === true) return i; else return this.searches[i];\n                }\n            }\n            return null;\n        },\n\n        toggleSearch: function () {\n            var effected = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.searches.length-1; r >= 0; r--) {\n                    if (this.searches[r].field == arguments[a]) {\n                        this.searches[r].hidden = !this.searches[r].hidden;\n                        effected++;\n                    }\n                }\n            }\n            this.searchClose();\n            return effected;\n        },\n\n        showSearch: function () {\n            var shown = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.searches.length-1; r >= 0; r--) {\n                    if (this.searches[r].field == arguments[a] && this.searches[r].hidden !== false) {\n                        this.searches[r].hidden = false;\n                        shown++;\n                    }\n                }\n            }\n            this.searchClose();\n            return shown;\n        },\n\n        hideSearch: function () {\n            var hidden = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                for (var r = this.searches.length-1; r >= 0; r--) {\n                    if (this.searches[r].field == arguments[a] && this.searches[r].hidden !== true) {\n                        this.searches[r].hidden = true;\n                        hidden++;\n                    }\n                }\n            }\n            this.searchClose();\n            return hidden;\n        },\n\n        getSearchData: function (field) {\n            for (var s in this.searchData) {\n                if (this.searchData[s].field == field) return this.searchData[s];\n            }\n            return null;\n        },\n\n        localSort: function (silent) {\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (url) {\n                console.log('ERROR: grid.localSort can only be used on local data source, grid.url should be empty.');\n                return;\n            }\n            if ($.isEmptyObject(this.sortData)) return;\n            var time = (new Date()).getTime();\n            var obj = this;\n            // process date fields\n            obj.prepareData();\n            // process sortData\n            for (var s in this.sortData) {\n                var column = this.getColumn(this.sortData[s].field); \n                if (!column) return;\n                if (typeof column.render == 'string') {\n                    if (['date', 'age'].indexOf(column.render.split(':')[0]) != -1) {\n                        this.sortData[s]['field_'] = column.field + '_';\n                    }\n                    if (['time'].indexOf(column.render.split(':')[0]) != -1) {\n                        this.sortData[s]['field_'] = column.field + '_';\n                    }\n                }\n            }\n            // process sort\n            this.records.sort(function (a, b) {\n                var ret = 0;\n                for (var s in obj.sortData) {\n                    var fld = obj.sortData[s].field;\n                    if (obj.sortData[s].field_) fld = obj.sortData[s].field_;\n                    var aa = a[fld];\n                    var bb = b[fld];\n                    if (String(fld).indexOf('.') != -1) {\n                        aa = obj.parseField(a, fld);\n                        bb = obj.parseField(b, fld);\n                    }\n                    if (typeof aa == 'string') aa = $.trim(aa.toLowerCase());\n                    if (typeof bb == 'string') bb = $.trim(bb.toLowerCase());\n                    if (aa > bb) ret = (obj.sortData[s].direction == 'asc' ? 1 : -1);\n                    if (aa < bb) ret = (obj.sortData[s].direction == 'asc' ? -1 : 1);\n                    if (typeof aa != 'object' && typeof bb == 'object') ret = -1;\n                    if (typeof bb != 'object' && typeof aa == 'object') ret = 1;\n                    if (aa == null && bb != null) ret = 1;    // all nuls and undefined on bottom\n                    if (aa != null && bb == null) ret = -1;\n                    if (ret != 0) break;\n                }\n                return ret;\n            });\n            time = (new Date()).getTime() - time;\n            if (silent !== true && obj.show.statusSort) {\n                setTimeout(function () { \n                    obj.status(w2utils.lang('Sorting took') + ' ' + time/1000 + ' ' + w2utils.lang('sec')); \n                }, 10);\n            }\n            return time;\n        },\n\n        localSearch: function (silent) {\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (url) {\n                console.log('ERROR: grid.localSearch can only be used on local data source, grid.url should be empty.');\n                return;\n            }\n            var time = (new Date()).getTime();\n            var obj = this;\n            this.total = this.records.length;\n            // mark all records as shown\n            this.last.searchIds = [];\n            // prepare date/time fields\n            this.prepareData();\n            // hide records that did not match\n            if (this.searchData.length > 0 && !url) {\n                this.total = 0;\n                for (var r in this.records) {\n                    var rec = this.records[r];\n                    var fl  = 0;\n                    for (var s in this.searchData) {\n                        var sdata      = this.searchData[s];\n                        var search     = this.getSearch(sdata.field);\n                        if (sdata  == null) continue;\n                        if (search == null) search = { field: sdata.field, type: sdata.type };\n                        var val1b = obj.parseField(rec, search.field);\n                        var val1  = String(val1b).toLowerCase();\n                        if (typeof sdata.value != 'undefined') {\n                            if (!$.isArray(sdata.value)) {\n                                var val2 = String(sdata.value).toLowerCase();\n                            } else {\n                                var val2 = sdata.value[0];\n                                var val3 = sdata.value[1];\n                            }\n                        }\n                        switch (sdata.operator) {\n                            case 'is':\n                                 if (rec[search.field] == sdata.value) fl++; // do not hide record\n                                if (search.type == 'date') {\n                                    var tmp  = (rec[search.field + '_'] instanceof Date ? rec[search.field + '_'] : rec[search.field]);\n                                    var val1 = w2utils.formatDate(tmp, 'yyyy-mm-dd');\n                                    var val2 = w2utils.formatDate(val2, 'yyyy-mm-dd');\n                                    if (val1 == val2) fl++;\n                                }\n                                if (search.type == 'time') {\n                                    var tmp  = (rec[search.field + '_'] instanceof Date ? rec[search.field + '_'] : rec[search.field]);\n                                    var val1 = w2utils.formatTime(tmp, 'h24:mi');\n                                    var val2 = w2utils.formatTime(val2, 'h24:mi');\n                                    if (val1 == val2) fl++;\n                                }\n                                break;\n                            case 'between':\n                                if (['int', 'float', 'money', 'currency', 'percent'].indexOf(search.type) != -1) {\n                                    if (parseFloat(rec[search.field]) >= parseFloat(val2) && parseFloat(rec[search.field]) <= parseFloat(val3)) fl++;\n                                }\n                                if (search.type == 'date') {\n                                    var val1 = (rec[search.field + '_'] instanceof Date ? rec[search.field + '_'] : rec[search.field]);\n                                    var val2 = w2utils.isDate(val2, w2utils.settings.date_format, true);\n                                    var val3 = w2utils.isDate(val3, w2utils.settings.date_format, true);\n                                    if (val3 != null) val3 = new Date(val3.getTime() + 86400000); // 1 day\n                                    if (val1 >= val2 && val1 < val3) fl++;\n                                }\n                                if (search.type == 'time') {\n                                    var val1 = (rec[search.field + '_'] instanceof Date ? rec[search.field + '_'] : rec[search.field]);\n                                    var val2 = w2utils.isTime(val2, true);\n                                    var val3 = w2utils.isTime(val3, true);\n                                    val2 = (new Date()).setHours(val2.hours, val2.minutes, val2.seconds ? val2.seconds : 0, 0);\n                                    val3 = (new Date()).setHours(val3.hours, val3.minutes, val3.seconds ? val3.seconds : 0, 0);\n                                    if (val1 >= val2 && val1 < val3) fl++;\n                                }\n                                break;\n                            case 'in':\n                                var tmp = sdata.value;\n                                if (sdata.svalue) tmp = sdata.svalue;\n                                if (tmp.indexOf(w2utils.isFloat(val1) ? parseFloat(val1) : val1) !== -1) fl++;\n                                if (tmp.indexOf(w2utils.isFloat(val1b) ? parseFloat(val1b) : val1b) !== -1) fl++;\n                                break;\n                            case 'not in':\n                                var tmp = sdata.value;\n                                if (sdata.svalue) tmp = sdata.svalue;\n                                if (tmp.indexOf(w2utils.isFloat(val1) ? parseFloat(val1) : val1) == -1) fl++;\n                                if (tmp.indexOf(w2utils.isFloat(val1b) ? parseFloat(val1b) : val1b) == -1) fl++;\n                                break;\n                            case 'begins':\n                            case 'begins with': // need for back compatib.\n                                if (val1.indexOf(val2) == 0) fl++; // do not hide record\n                                break;\n                            case 'contains':\n                                if (val1.indexOf(val2) >= 0) fl++; // do not hide record\n                                break;\n                            case 'ends':\n                            case 'ends with': // need for back compatib.\n                                if (val1.indexOf(val2) == val1.length - val2.length) fl++; // do not hide record\n                                break;\n                        }\n                    }\n                    if ((this.last.logic == 'OR' && fl != 0) || (this.last.logic == 'AND' && fl == this.searchData.length)) this.last.searchIds.push(parseInt(r));\n                }\n                this.total = this.last.searchIds.length;\n            }\n            time = (new Date()).getTime() - time;\n            if (silent !== true && obj.show.statusSearch) {\n                setTimeout(function () { \n                    obj.status(w2utils.lang('Search took') + ' ' + time/1000 + ' ' + w2utils.lang('sec')); \n                }, 10);\n            }\n            return time;\n        },\n\n        getRangeData: function (range, extra) {\n            var rec1 = this.get(range[0].recid, true);\n            var rec2 = this.get(range[1].recid, true);\n            var col1 = range[0].column;\n            var col2 = range[1].column;\n\n            var res = [];\n            if (col1 == col2) { // one row\n                for (var r = rec1; r <= rec2; r++) {\n                    var record = this.records[r];\n                    var dt = record[this.columns[col1].field] || null;\n                    if (extra !== true) {\n                        res.push(dt);\n                    } else {\n                        res.push({ data: dt, column: col1, index: r, record: record });\n                    }\n                }\n            } else if (rec1 == rec2) { // one line\n                var record = this.records[rec1];\n                for (var i = col1; i <= col2; i++) {\n                    var dt = record[this.columns[i].field] || null;\n                    if (extra !== true) {\n                        res.push(dt);\n                    } else {\n                        res.push({ data: dt, column: i, index: rec1, record: record });\n                    }\n                }\n            } else {\n                for (var r = rec1; r <= rec2; r++) {\n                    var record = this.records[r];\n                    res.push([]);\n                    for (var i = col1; i <= col2; i++) {\n                        var dt = record[this.columns[i].field];\n                        if (extra !== true) {\n                            res[res.length-1].push(dt);\n                        } else {\n                            res[res.length-1].push({ data: dt, column: i, index: r, record: record });\n                        }\n                    }\n                }\n            }\n            return res;\n        },\n\n        addRange: function (ranges) {\n            var added = 0;\n            if (this.selectType == 'row') return added;\n            if (!$.isArray(ranges)) ranges = [ranges];\n            // if it is selection\n            for (var r in ranges) {\n                if (typeof ranges[r] != 'object') ranges[r] = { name: 'selection' };\n                if (ranges[r].name == 'selection') {\n                    if (this.show.selectionBorder === false) continue;\n                    var sel = this.getSelection();\n                    if (sel.length == 0) {\n                        this.removeRange(ranges[r].name);\n                        continue;\n                    } else {\n                        var first = sel[0];\n                        var last  = sel[sel.length-1];\n                    }\n                } else { // other range\n                    var first = ranges[r].range[0];\n                    var last  = ranges[r].range[1];\n                }\n                if (first) {\n                    var rg = {\n                        name: ranges[r].name,\n                        range: [{ recid: first.recid, column: first.column }, { recid: last.recid, column: last.column }],\n                        style: ranges[r].style || ''\n                    };\n                    // add range\n                    var ind = false;\n                    for (var t in this.ranges) if (this.ranges[t].name == ranges[r].name) { ind = r; break; }\n                    if (ind !== false) {\n                        this.ranges[ind] = rg;\n                    } else {\n                        this.ranges.push(rg);\n                    }\n                    added++\n                }\n            }\n            this.refreshRanges();\n            return added;\n        },\n\n        removeRange: function () {\n            var removed = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var name = arguments[a];\n                $('#grid_'+ this.name +'_'+ name).remove();\n                $('#grid_'+ this.name +'_f'+ name).remove();\n                for (var r = this.ranges.length-1; r >= 0; r--) {\n                    if (this.ranges[r].name == name) {\n                        this.ranges.splice(r, 1);\n                        removed++;\n                    }\n                }\n            }\n            return removed;\n        },\n\n        refreshRanges: function () {\n            var obj  = this;\n            var time = (new Date()).getTime();\n            var rec1 = $('#grid_'+ this.name +'_frecords');\n            var rec2 = $('#grid_'+ this.name +'_records');\n            for (var r in this.ranges) {\n                var rg    = this.ranges[r];\n                var first = rg.range[0];\n                var last  = rg.range[1];\n                var td1   = $('#grid_'+ this.name +'_rec_'+ first.recid + ' td[col='+ first.column +']');\n                var td2   = $('#grid_'+ this.name +'_rec_'+ last.recid + ' td[col='+ last.column +']');\n                var td1f  = $('#grid_'+ this.name +'_frec_'+ first.recid + ' td[col='+ first.column +']');\n                var td2f  = $('#grid_'+ this.name +'_frec_'+ last.recid + ' td[col='+ last.column +']');\n                var sel1  = $('#grid_'+ this.name +'_rec_top').next().find('td.w2ui-selected');\n                var sel2  = $('#grid_'+ this.name +'_rec_bottom').prev().find('td.w2ui-selected');\n                var sel1f = $('#grid_'+ this.name +'_frec_top').next().find('td.w2ui-selected');\n                var sel2f = $('#grid_'+ this.name +'_frec_bottom').prev().find('td.w2ui-selected');\n                // if virtual scrolling kicked in\n                if ((td1.length == 0 && td2.length != 0) || sel1.length > 0) {\n                    td1  = $('#grid_'+ this.name +'_rec_top').next().find('td[col='+ first.column +']');\n                }\n                if ((td2.length == 0 && td1.length != 0) || sel2.length > 0) {\n                    td2  = $('#grid_'+ this.name +'_rec_bottom').prev().find('td[col='+ last.column +']');\n                }\n                if ((td1f.length == 0 && td2f.length != 0) || sel1f.length > 0) { // frozen\n                    td1f = $('#grid_'+ this.name +'_frec_top').next().find('td[col='+ first.column +']');\n                }\n                if ((td2f.length == 0 && td1f.length != 0) || sel2f.length > 0) { // frozen\n                    td2f = $('#grid_'+ this.name +'_frec_bottom').prev().find('td[col='+ last.column +']');\n                }\n                // frozen regular columns range\n                var $range = $('#grid_'+ this.name +'_f'+ rg.name);\n                if (td1f.length > 0 || td2f.length > 0) {\n                    if ($range.length == 0) {\n                        rec1.append('<div id=\"grid_'+ this.name +'_f' + rg.name +'\" class=\"w2ui-selection\" style=\"'+ rg.style +'\">'+\n                                        (rg.name == 'selection' ?  '<div id=\"grid_'+ this.name +'_resizer\" class=\"w2ui-selection-resizer\"></div>' : '')+\n                                    '</div>');\n                        $range = $('#grid_'+ this.name +'_f'+ rg.name);\n                    } else {\n                        $range.attr('style', rg.style);\n                        $range.find('.w2ui-selection-resizer').show();\n                    }\n                    if (td2f.length == 0) {\n                        td2f  = $('#grid_'+ this.name +'_frec_'+ last.recid + ' td:last-child');\n                        if (td2f.length == 0) td2f = $('#grid_'+ this.name +'_frec_bottom td:first-child');\n                        $range.css('border-right', '0px');\n                        $range.find('.w2ui-selection-resizer').hide();\n                    }\n                    if (first.recid != null && last.recid != null) {\n                        $range.show().css({\n                            left    : (td1f.position().left - 1 + rec1.scrollLeft()) + 'px',\n                            top     : (td1f.position().top - 1 + rec1.scrollTop()) + 'px',\n                            width   : (td2f.position().left - td1f.position().left + td2f.width() + 3) + 'px',\n                            height  : (td2f.position().top - td1f.position().top + td2f.height() + 3) + 'px'\n                        });\n                    }\n                } else {\n                    $range.hide();                   \n                }\n                // regular columns range\n                var $range = $('#grid_'+ this.name +'_'+ rg.name);\n                if (td1.length > 0 || td2.length > 0) {\n                    if ($range.length == 0) {\n                        rec2.append('<div id=\"grid_'+ this.name +'_' + rg.name +'\" class=\"w2ui-selection\" style=\"'+ rg.style +'\">'+\n                                        (rg.name == 'selection' ?  '<div id=\"grid_'+ this.name +'_resizer\" class=\"w2ui-selection-resizer\"></div>' : '')+\n                                    '</div>');\n                        $range = $('#grid_'+ this.name +'_'+ rg.name);\n                    } else {\n                        $range.attr('style', rg.style);\n                    }\n                    if (td1.length == 0) {\n                        td1 = $('#grid_'+ this.name +'_rec_'+ first.recid + ' td:first-child');\n                        if (td1.length == 0) td1 = $('#grid_'+ this.name +'_rec_top td:first-child');\n                        $range.css('border-left', '0px');\n                    }\n                    if (first.recid != null && last.recid != null) {\n                        $range.show().css({\n                            left    : (td1.position().left - 1 + rec2.scrollLeft()) + 'px',\n                            top     : (td1.position().top - 1 + rec2.scrollTop()) + 'px',\n                            width   : (td2.position().left - td1.position().left + td2.width() + 3) + 'px',\n                            height  : (td2.position().top - td1.position().top + td2.height() + 3) + 'px'\n                        });\n                    }\n                } else {\n                    $range.hide();                   \n                }\n            }\n\n            // add resizer events\n            $(this.box).find('.w2ui-selection-resizer').off('mousedown').on('mousedown', mouseStart);\n            var eventData = { phase: 'before', type: 'selectionExtend', target: obj.name, originalRange: null, newRange: null };\n\n            function mouseStart (event) {\n                var sel = obj.getSelection();\n                obj.last.move = {\n                    type   : 'expand',\n                    x      : event.screenX,\n                    y      : event.screenY,\n                    divX   : 0,\n                    divY   : 0,\n                    recid  : sel[0].recid,\n                    column : sel[0].column,\n                    originalRange : [{ recid: sel[0].recid, column: sel[0].column }, { recid: sel[sel.length-1].recid, column: sel[sel.length-1].column }],\n                    newRange      : [{ recid: sel[0].recid, column: sel[0].column }, { recid: sel[sel.length-1].recid, column: sel[sel.length-1].column }]\n                };\n                $(document).off('mousemove', mouseMove).on('mousemove', mouseMove);\n                $(document).off('mouseup', mouseStop).on('mouseup', mouseStop);\n            }\n\n            function mouseMove (event) {\n                var mv = obj.last.move;\n                if (!mv || mv.type != 'expand') return;\n                mv.divX = (event.screenX - mv.x);\n                mv.divY = (event.screenY - mv.y);\n                // find new cell\n                var recid, column;\n                var tmp = event.originalEvent.target;\n                if (tmp.tagName != 'TD') tmp = $(tmp).parents('td')[0];\n                if (typeof $(tmp).attr('col') != 'undefined') column = parseInt($(tmp).attr('col'));\n                tmp = $(tmp).parents('tr')[0];\n                recid = $(tmp).attr('recid');\n                // new range\n                if (mv.newRange[1].recid == recid && mv.newRange[1].column == column) return;\n                var prevNewRange = $.extend({}, mv.newRange);\n                mv.newRange = [{ recid: mv.recid, column: mv.column }, { recid: recid, column: column }];\n                // event before\n                eventData = obj.trigger($.extend(eventData, { originalRange: mv.originalRange, newRange : mv.newRange }));\n                if (eventData.isCancelled === true) {\n                    mv.newRange        = prevNewRange;\n                    eventData.newRange = prevNewRange;\n                    return;\n                } else {\n                    // default behavior\n                    obj.removeRange('grid-selection-expand');\n                    obj.addRange({\n                        name  : 'grid-selection-expand',\n                        range : eventData.newRange,\n                        style : 'background-color: rgba(100,100,100,0.1); border: 2px dotted rgba(100,100,100,0.5);'\n                    });\n                }\n            }\n\n            function mouseStop (event) {\n                // default behavior\n                obj.removeRange('grid-selection-expand');\n                delete obj.last.move;\n                $(document).off('mousemove', mouseMove);\n                $(document).off('mouseup', mouseStop);\n                // event after\n                obj.trigger($.extend(eventData, { phase: 'after' }));\n            }\n\n            return (new Date()).getTime() - time;\n        },\n\n        select: function () {\n            if (arguments.length == 0) return 0;\n            var time = (new Date).getTime();\n            var selected = 0;\n            var sel = this.last.selection;\n            if (!this.multiSelect) this.selectNone();\n\n            // event before\n            var tmp = { phase: 'before', type: 'select', target: this.name };\n            if (arguments.length == 1) {\n                tmp.multiple = false;\n                if ($.isPlainObject(arguments[0])) {\n                    tmp.recid  = arguments[0].recid;\n                    tmp.column = arguments[0].column;\n                } else {\n                    tmp.recid = arguments[0];\n                }\n            } else {\n                tmp.multiple = true;\n                tmp.recids   = Array.prototype.slice.call(arguments, 0);\n            }\n            var eventData = this.trigger(tmp);\n            if (eventData.isCancelled === true) return 0;\n\n            // default action\n            if (this.selectType == 'row') {\n                for (var a = 0; a < arguments.length; a++) {\n                    var recid  = typeof arguments[a] == 'object' ? arguments[a].recid : arguments[a];\n                    var index = this.get(recid, true);\n                    if (index == null) continue;\n                    var recEl1 = null;\n                    var recEl2 = null;\n                    if (this.searchData.length !== 0 || (index + 1 >= this.last.range_start && index + 1 <= this.last.range_end)) {\n                        recEl1 = $('#grid_'+ this.name +'_frec_'+ w2utils.escapeId(recid));\n                        recEl2 = $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(recid));\n                    }\n                    if (this.selectType == 'row') {\n                        if (sel.indexes.indexOf(index) != -1) continue;\n                        sel.indexes.push(index);\n                        if (recEl1 && recEl2) {\n                            recEl1.addClass('w2ui-selected').data('selected', 'yes').find('.w2ui-col-number').addClass('w2ui-row-selected');\n                            recEl2.addClass('w2ui-selected').data('selected', 'yes').find('.w2ui-col-number').addClass('w2ui-row-selected');\n                            recEl1.find('.w2ui-grid-select-check').prop(\"checked\", true);\n                        }\n                        selected++;\n                    }\n                }              \n            } else {\n                // normalize for perforamce    \n                var new_sel = {};\n                for (var a = 0; a < arguments.length; a++) {\n                    var recid  = typeof arguments[a] == 'object' ? arguments[a].recid : arguments[a];\n                    var column = typeof arguments[a] == 'object' ? arguments[a].column : null;\n                    new_sel[recid] = new_sel[recid] || [];\n                    if (w2utils.isInt(column)) {\n                        new_sel[recid].push(column);    \n                    } else {\n                        for (var c in this.columns) { if (this.columns[c].hidden) continue; new_sel[recid].push(parseInt(c)); }\n                    }\n                }\n                // add all\n                var col_sel = [];\n                for (var recid in new_sel) {\n                    var index = this.get(recid, true);\n                    if (index == null) continue;\n                    var recEl1 = null;\n                    var recEl2 = null;\n                    if (index + 1 >= this.last.range_start && index + 1 <= this.last.range_end) {\n                        recEl1 = $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(recid));\n                        recEl2 = $('#grid_'+ this.name +'_frec_'+ w2utils.escapeId(recid));\n                    }\n                    var s = sel.columns[index] || [];\n                    // default action\n                    if (sel.indexes.indexOf(index) == -1) {\n                        sel.indexes.push(index);\n                    }\n                    // anly only those that are new\n                    for (var t = 0; t < new_sel[recid].length; t++) {\n                        if (s.indexOf(new_sel[recid][t]) == -1) s.push(new_sel[recid][t]);\n                    }\n                    s.sort(function(a, b) { return a-b }); // sort function must be for numerical sort\n                    for (var t = 0; t < new_sel[recid].length; t++) {\n                        var col = new_sel[recid][t];\n                        if (col_sel.indexOf(col) == -1) col_sel.push(col);\n                        if (recEl1) {\n                            recEl1.find('#grid_'+ this.name +'_data_'+ index +'_'+ col).addClass('w2ui-selected');\n                            recEl1.find('.w2ui-col-number').addClass('w2ui-row-selected');\n                            recEl1.data('selected', 'yes');\n                            recEl1.find('.w2ui-grid-select-check').prop(\"checked\", true);\n                        }\n                        if (recEl2) {\n                            recEl2.find('#grid_'+ this.name +'_data_'+ index +'_'+ col).addClass('w2ui-selected');\n                            recEl2.find('.w2ui-col-number').addClass('w2ui-row-selected');\n                            recEl2.data('selected', 'yes');\n                            recEl2.find('.w2ui-grid-select-check').prop(\"checked\", true);\n                        }\n                        selected++;\n                    }\n                    // save back to selection object\n                    sel.columns[index] = s;\n                }\n                // select columns (need here for speed)\n                for (var c = 0; c < col_sel.length; c++) {\n                    $(this.box).find('#grid_'+ this.name +'_column_'+ col_sel[c] +' .w2ui-col-header').addClass('w2ui-col-selected');\n                }\n            }\n            // need to sort new selection for speed\n            sel.indexes.sort(function(a, b) { return a-b });\n            // all selected?\n            if (sel.indexes.length == this.records.length || (this.searchData.length !== 0 && sel.indexes.length == this.last.searchIds.length)) {\n                $('#grid_'+ this.name +'_check_all').prop('checked', true);\n            } else {\n                $('#grid_'+ this.name +'_check_all').prop('checked', false);\n            }\n            this.status();\n            this.addRange('selection');\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return selected;\n        },\n\n        unselect: function () {\n            var unselected = 0;\n            var sel = this.last.selection;\n            for (var a = 0; a < arguments.length; a++) {\n                var recid  = typeof arguments[a] == 'object' ? arguments[a].recid : arguments[a];\n                var record = this.get(recid);\n                if (record == null) continue;\n                var index  = this.get(record.recid, true);\n                var recEl1 = $('#grid_'+ this.name +'_frec_'+ w2utils.escapeId(recid));\n                var recEl2 = $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(recid));\n                if (this.selectType == 'row') {\n                    if (sel.indexes.indexOf(index) == -1) continue;\n                    // event before\n                    var eventData = this.trigger({ phase: 'before', type: 'unselect', target: this.name, recid: recid, index: index });\n                    if (eventData.isCancelled === true) continue;\n                    // default action\n                    sel.indexes.splice(sel.indexes.indexOf(index), 1);\n                    recEl1.removeClass('w2ui-selected').removeData('selected').find('.w2ui-col-number').removeClass('w2ui-row-selected');\n                    recEl2.removeClass('w2ui-selected').removeData('selected').find('.w2ui-col-number').removeClass('w2ui-row-selected');\n                    if (recEl1.length != 0) {\n                        recEl1[0].style.cssText = 'height: '+ this.recordHeight +'px; ' + recEl1.attr('custom_style');\n                        recEl2[0].style.cssText = 'height: '+ this.recordHeight +'px; ' + recEl2.attr('custom_style');\n                    }\n                    recEl1.find('.w2ui-grid-select-check').prop(\"checked\", false);\n                    unselected++;\n                } else {\n                    var col  = arguments[a].column;\n                    if (!w2utils.isInt(col)) { // unselect all columns\n                        var cols = [];\n                        for (var c in this.columns) { if (this.columns[c].hidden) continue; cols.push({ recid: recid, column: parseInt(c) }); }\n                        return this.unselect.apply(this, cols);\n                    }\n                    var s = sel.columns[index];\n                    if (!$.isArray(s) || s.indexOf(col) == -1) continue;\n                    // event before\n                    var eventData = this.trigger({ phase: 'before', type: 'unselect', target: this.name, recid: recid, column: col });\n                    if (eventData.isCancelled === true) continue;\n                    // default action\n                    s.splice(s.indexOf(col), 1);\n                    $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(recid)).find(' > td[col='+ col +']').removeClass('w2ui-selected');\n                    $('#grid_'+ this.name +'_frec_'+ w2utils.escapeId(recid)).find(' > td[col='+ col +']').removeClass('w2ui-selected');\n                    // check if any row/column still selected\n                    var isColSelected = false;\n                    var isRowSelected = false;\n                    var tmp = this.getSelection();\n                    for (var t in tmp) {\n                        if (tmp[t].column == col) isColSelected = true; \n                        if (tmp[t].recid == recid) isRowSelected = true;\n                    }\n                    if (!isColSelected) {\n                       $(this.box).find('.w2ui-grid-columns td[col='+ col +'] .w2ui-col-header').removeClass('w2ui-col-selected');\n                    }\n                    if (!isRowSelected) {\n                        $('#grid_'+ this.name +'_frec_'+ w2utils.escapeId(recid)).find('.w2ui-col-number').removeClass('w2ui-row-selected');\n                    }\n                    unselected++;\n                    if (s.length == 0) {\n                        delete sel.columns[index];\n                        sel.indexes.splice(sel.indexes.indexOf(index), 1);\n                        recEl1.removeData('selected');\n                        recEl1.find('.w2ui-grid-select-check').prop(\"checked\", false);\n                        recEl2.removeData('selected');\n                    }\n                }\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n            }\n            // all selected?\n            if (sel.indexes.length == this.records.length || (this.searchData.length !== 0 && sel.indexes.length == this.last.searchIds.length)) {\n                $('#grid_'+ this.name +'_check_all').prop('checked', true);\n            } else {\n                $('#grid_'+ this.name +'_check_all').prop('checked', false);\n            }\n            // show number of selected\n            this.status();\n            this.addRange('selection');\n            return unselected;\n        },\n\n        selectAll: function () {\n            var time = (new Date()).getTime();\n            if (this.multiSelect === false) return;\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'select', target: this.name, all: true });\n            if (eventData.isCancelled === true) return;\n            // default action\n            var url  = (typeof this.url != 'object' ? this.url : this.url.get);\n            var sel  = this.last.selection;\n            var cols = [];\n            for (var c in this.columns) cols.push(parseInt(c));\n            // if local data source and searched\n            sel.indexes = [];\n            if (!url && this.searchData.length !== 0) {\n                // local search applied\n                for (var i = 0; i < this.last.searchIds.length; i++) {\n                    sel.indexes.push(this.last.searchIds[i]);\n                    if (this.selectType != 'row') sel.columns[this.last.searchIds[i]] = cols.slice(); // .slice makes copy of the array\n                }\n            } else {\n                var buffered = this.records.length;\n                if (this.searchData.length != 0 && !this.url) buffered = this.last.searchIds.length;\n                for (var i = 0; i < buffered; i++) {\n                    sel.indexes.push(i);\n                    if (this.selectType != 'row') sel.columns[i] = cols.slice(); // .slice makes copy of the array\n                }\n            }\n            // add selected class\n            if (this.selectType == 'row') {\n                $(this.box).find('.w2ui-grid-records tr').not('.w2ui-empty-record')\n                    .addClass('w2ui-selected').data('selected', 'yes').find('.w2ui-col-number').addClass('w2ui-row-selected');\n                $(this.box).find('.w2ui-grid-frecords tr').not('.w2ui-empty-record')\n                    .addClass('w2ui-selected').data('selected', 'yes').find('.w2ui-col-number').addClass('w2ui-row-selected');\n                $(this.box).find('input.w2ui-grid-select-check').prop('checked', true);\n            } else {\n                $(this.box).find('.w2ui-grid-columns td .w2ui-col-header').addClass('w2ui-col-selected');\n                $(this.box).find('.w2ui-grid-records tr .w2ui-col-number').addClass('w2ui-row-selected')\n                $(this.box).find('.w2ui-grid-records tr').not('.w2ui-empty-record')\n                    .find('.w2ui-grid-data').not('.w2ui-col-select').addClass('w2ui-selected').data('selected', 'yes');\n                $(this.box).find('.w2ui-grid-frecords tr .w2ui-col-number').addClass('w2ui-row-selected')\n                $(this.box).find('.w2ui-grid-frecords tr').not('.w2ui-empty-record')\n                    .find('.w2ui-grid-data').not('.w2ui-col-select').addClass('w2ui-selected').data('selected', 'yes');\n                $(this.box).find('input.w2ui-grid-select-check').prop('checked', true);\n            }\n            // enable/disable toolbar buttons\n            var sel = this.getSelection();\n            if (sel.length == 1) this.toolbar.enable('w2ui-edit'); else this.toolbar.disable('w2ui-edit');\n            if (sel.length >= 1) this.toolbar.enable('w2ui-delete'); else this.toolbar.disable('w2ui-delete');\n            this.addRange('selection');\n            $('#grid_'+ this.name +'_check_all').prop('checked', true);\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        selectNone: function () {\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'unselect', target: this.name, all: true });\n            if (eventData.isCancelled === true) return;\n            // default action\n            var sel = this.last.selection;\n            // remove selected class\n            if (this.selectType == 'row') {\n                $(this.box).find('.w2ui-grid-records tr.w2ui-selected').removeClass('w2ui-selected').removeData('selected')\n                    .find('.w2ui-col-number').removeClass('w2ui-row-selected');\n                $(this.box).find('.w2ui-grid-frecords tr.w2ui-selected').removeClass('w2ui-selected').removeData('selected')\n                    .find('.w2ui-col-number').removeClass('w2ui-row-selected');\n                $(this.box).find('input.w2ui-grid-select-check').prop('checked', false);\n            } else {\n                $(this.box).find('.w2ui-grid-columns td .w2ui-col-header').removeClass('w2ui-col-selected');\n                $(this.box).find('.w2ui-grid-records tr .w2ui-col-number').removeClass('w2ui-row-selected');\n                $(this.box).find('.w2ui-grid-frecords tr .w2ui-col-number').removeClass('w2ui-row-selected');\n                $(this.box).find('.w2ui-grid-data.w2ui-selected').removeClass('w2ui-selected').removeData('selected');\n                $(this.box).find('input.w2ui-grid-select-check').prop('checked', false);\n            }\n            sel.indexes = [];\n            sel.columns = {};\n            this.toolbar.disable('w2ui-edit', 'w2ui-delete');\n            this.removeRange('selection');\n            $('#grid_'+ this.name +'_check_all').prop('checked', false);\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        getSelection: function (returnIndex) {\n            var ret = [];\n            var sel = this.last.selection;\n            if (this.selectType == 'row') {\n                for (var s in sel.indexes) {\n                    if (!this.records[sel.indexes[s]]) continue;\n                    if (returnIndex === true) ret.push(sel.indexes[s]); else ret.push(this.records[sel.indexes[s]].recid);\n                }\n                return ret;\n            } else {\n                for (var s in sel.indexes) {\n                    var cols = sel.columns[sel.indexes[s]];\n                    if (!this.records[sel.indexes[s]]) continue;\n                    for (var c in cols) {\n                        ret.push({ recid: this.records[sel.indexes[s]].recid, index: parseInt(sel.indexes[s]), column: cols[c] });\n                    }\n                }\n                return ret;\n            }\n        },\n\n        search: function (field, value) {\n            var obj         = this;\n            var url         = (typeof this.url != 'object' ? this.url : this.url.get);\n            var searchData  = [];\n            var last_multi  = this.last.multi;\n            var last_logic  = this.last.logic;\n            var last_field  = this.last.field;\n            var last_search = this.last.search;\n            // 1: search() - advanced search (reads from popup)\n            if (arguments.length == 0) {\n                last_search = '';\n                // advanced search\n                for (var s in this.searches) {\n                    var search   = this.searches[s];\n                    var operator = $('#grid_'+ this.name + '_operator_'+ s).val();\n                    var field1   = $('#grid_'+ this.name + '_field_'+ s);\n                    var field2   = $('#grid_'+ this.name + '_field2_'+ s);\n                    var value1   = field1.val();\n                    var value2   = field2.val();\n                    var svalue   = null;\n                    if (['int', 'float', 'money', 'currency', 'percent'].indexOf(search.type) != -1) {\n                        var fld1 = field1.data('w2field');\n                        var fld2 = field2.data('w2field');\n                        if (fld1) value1 = fld1.clean(value1);\n                        if (fld2) value2 = fld2.clean(value2);\n                    }\n                    if (['list', 'enum'].indexOf(search.type) != -1) {\n                        value1 = field1.data('selected') || {};\n                        if ($.isArray(value1)) {\n                            svalue = [];\n                            for (var v in value1) {\n                                svalue.push(w2utils.isFloat(value1[v].id) ? parseFloat(value1[v].id) : String(value1[v].id).toLowerCase());\n                                delete value1[v].hidden;\n                            }\n                        } else {\n                            value1 = value1.id || '';\n                        }\n                        if ($.isEmptyObject(value1)) value1 = '';\n                    }\n                    if ((value1 !== '' && value1 != null) || (typeof value2 != 'undefined' && value2 !== '')) {\n                        var tmp = {\n                            field    : search.field,\n                            type     : search.type,\n                            operator : operator\n                        }\n                        if (operator == 'between') {\n                            $.extend(tmp, { value: [value1, value2] });\n                        } else if (operator == 'in' && typeof value1 == 'string') {\n                            $.extend(tmp, { value: value1.split(',') });\n                        } else if (operator == 'not in' && typeof value1 == 'string') {\n                            $.extend(tmp, { value: value1.split(',') });\n                        } else {\n                            $.extend(tmp, { value: value1 });\n                        }\n                        if (svalue) $.extend(tmp, { svalue: svalue });\n                        // conver date to unix time\n                        try {\n                            if (search.type == 'date' && operator == 'between') {\n                                tmp.value[0] = value1; // w2utils.isDate(value1, w2utils.settings.date_format, true).getTime();\n                                tmp.value[1] = value2; // w2utils.isDate(value2, w2utils.settings.date_format, true).getTime();\n                            }\n                            if (search.type == 'date' && operator == 'is') {\n                                tmp.value = value1; // w2utils.isDate(value1, w2utils.settings.date_format, true).getTime();\n                            }\n                        } catch (e) {\n\n                        }\n                        searchData.push(tmp);\n                    }\n                }\n                if (searchData.length > 0 && !url) {\n                    last_multi = true;\n                    last_logic = 'AND';\n                } else {\n                    last_multi = true;\n                    last_logic = 'AND';\n                }\n            }\n            // 2: search(field, value) - regular search\n            if (typeof field == 'string') {\n                last_field  = field;\n                last_search = value;\n                last_multi  = false;\n                last_logic  = 'OR';\n                // loop through all searches and see if it applies\n                if (typeof value != 'undefined') {\n                    if (field.toLowerCase() == 'all') {\n                        // if there are search fields loop thru them\n                        if (this.searches.length > 0) {\n                            for (var s in this.searches) {\n                                var search = this.searches[s];\n                                if (search.type == 'text' || (search.type == 'alphanumeric' && w2utils.isAlphaNumeric(value))\n                                        || (search.type == 'int' && w2utils.isInt(value)) || (search.type == 'float' && w2utils.isFloat(value))\n                                        || (search.type == 'percent' && w2utils.isFloat(value)) || (search.type == 'hex' && w2utils.isHex(value))\n                                        || (search.type == 'currency' && w2utils.isMoney(value)) || (search.type == 'money' && w2utils.isMoney(value))\n                                        || (search.type == 'date' && w2utils.isDate(value)) ) {\n                                    var tmp = {\n                                        field    : search.field,\n                                        type     : search.type,\n                                        operator : (search.type == 'text' ? 'contains' : 'is'),\n                                        value    : value\n                                    };\n                                    if ($.trim(value) != '') searchData.push(tmp);\n                                }\n                                // range in global search box\n                                if (['int', 'float', 'money', 'currency', 'percent'].indexOf(search.type) != -1 && $.trim(String(value)).split('-').length == 2) {\n                                    var t = $.trim(String(value)).split('-');\n                                    var tmp = {\n                                        field    : search.field,\n                                        type     : search.type,\n                                        operator : 'between',\n                                        value    : [t[0], t[1]]\n                                    };\n                                    searchData.push(tmp);\n                                }\n                                // lists fiels\n                                if (['list', 'enum'].indexOf(search.type) != -1) {\n                                    var new_values = [];\n                                    for (var key in search.options.items) {\n                                        var tmp = search.options.items[key];\n                                        try {\n                                            var re = new RegExp(value, 'i');\n                                            if (re.test(tmp)) new_values.push(key);\n                                            if (tmp.text && re.test(tmp.text)) new_values.push(tmp.id);\n                                        } catch (e) {}\n                                    }\n                                    if (new_values.length > 0) {\n                                        var tmp = {\n                                            field    : search.field,\n                                            type     : search.type,\n                                            operator : 'in',\n                                            value    : new_values\n                                        };\n                                        searchData.push(tmp);\n                                    }\n                                }\n                            }\n                        } else {\n                            // no search fields, loop thru columns\n                            for (var c in this.columns) {\n                                var tmp = {\n                                    field    : this.columns[c].field,\n                                    type     : 'text',\n                                    operator : 'contains',\n                                    value    : value\n                                };\n                                searchData.push(tmp);\n                            }\n                        }\n                    } else {\n                        var el = $('#grid_'+ this.name +'_search_all');\n                        var search = this.getSearch(field);\n                        if (search == null) search = { field: field, type: 'text' };\n                        if (search.field == field) this.last.caption = search.caption;\n                        if (value !== '') {\n                            var op  = 'contains';\n                            var val = value;\n                            if (['date', 'time'].indexOf(search.type) != -1) op = 'is';\n                            if (['list', 'enum'].indexOf(search.type) != -1) {\n                                op = 'is';\n                                var tmp = el.data('selected');\n                                if (tmp && !$.isEmptyObject(tmp)) val = tmp.id; else val = '';\n                            }\n                            if (search.type == 'int' && value !== '') {\n                                op = 'is';\n                                if (String(value).indexOf('-') != -1) {\n                                    var tmp = value.split('-');\n                                    if (tmp.length == 2) {\n                                        op = 'between';\n                                        val = [parseInt(tmp[0]), parseInt(tmp[1])];\n                                    }\n                                }\n                                if (String(value).indexOf(',') != -1) {\n                                    var tmp = value.split(',');\n                                    op  = 'in';\n                                    val = [];\n                                    for (var t in tmp) val.push(tmp[t]);\n                                }\n                            }\n                            var tmp = {\n                                field    : search.field,\n                                type     : search.type,\n                                operator : op,\n                                value    : val\n                            };\n                            searchData.push(tmp);\n                        }\n                    }\n                }\n            }\n            // 3: search([ { field, value, [operator,] [type] }, { field, value, [operator,] [type] } ], logic) - submit whole structure\n            if ($.isArray(field)) {\n                var logic = 'AND';\n                if (typeof value == 'string') {\n                    logic = value.toUpperCase();\n                    if (logic != 'OR' && logic != 'AND') logic = 'AND';\n                }\n                last_search = '';\n                last_multi  = true;\n                last_logic  = logic;\n                for (var f in field) {\n                    var data   = field[f];\n                    var search = this.getSearch(data.field);\n                    if (search == null) search = { type: 'text', operator: 'contains' };\n                    if ($.isArray(data.value)) {\n                        for (var v in data.value) {\n                            if (typeof data.value[v] == 'string') data.value[v] = data.value[v].toLowerCase();\n                        }\n                    }\n                    // merge current field and search if any\n                    searchData.push($.extend(true, {}, search, data));\n                }\n            }\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'search', target: this.name, searchData: searchData,\n                    searchField: (field ? field : 'multi'), searchValue: (value ? value : 'multi') });\n            if (eventData.isCancelled === true) return;\n            // default action\n            this.searchData  = eventData.searchData;\n            this.last.field  = last_field;\n            this.last.search = last_search;\n            this.last.multi  = last_multi;\n            this.last.logic  = last_logic;\n            this.last.scrollTop         = 0;\n            this.last.scrollLeft        = 0;\n            this.last.selection.indexes = [];\n            this.last.selection.columns = {};\n            // -- clear all search field\n            this.searchClose();\n            this.set({ expanded: false }, true);\n            // apply search\n            if (url) {\n                this.last.xhr_offset = 0;\n                this.reload();\n            } else {\n                // local search\n                this.localSearch();\n                this.refresh();\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        searchOpen: function () {\n            if (!this.box) return;\n            if (this.searches.length == 0) return;\n            var obj = this;\n            // show search\n            $('#tb_'+ this.name +'_toolbar_item_w2ui-search-advanced').w2overlay(\n                this.getSearchesHTML(),    {\n                    name    : 'searches-'+ this.name,\n                    left    : -10,\n                    'class' : 'w2ui-grid-searches',\n                    onShow  : function () {\n                        if (obj.last.logic == 'OR') obj.searchData = [];\n                        obj.initSearches();\n                        $('#w2ui-overlay-searches-'+ this.name +' .w2ui-grid-searches').data('grid-name', obj.name);\n                        var sfields = $('#w2ui-overlay-searches-'+ this.name +' .w2ui-grid-searches *[rel=search]');\n                        if (sfields.length > 0) sfields[0].focus();\n                    }\n                }\n            );\n        },\n\n        searchClose: function () {\n            if (!this.box) return;\n            if (this.searches.length == 0) return;\n            if (this.toolbar) this.toolbar.uncheck('w2ui-search-advanced');\n            // hide search\n            if ($('#w2ui-overlay-searches-'+ this.name +' .w2ui-grid-searches').length > 0) {\n                $().w2overlay('', { name: 'searches-'+ this.name });\n            }\n        },\n\n        searchReset: function (noRefresh) {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'search', target: this.name, searchData: [] });\n            if (eventData.isCancelled === true) return;\n            // default action\n            this.searchData  = [];\n            this.last.search = '';\n            this.last.logic  = 'OR';\n            // --- do not reset to All Fields (I think)\n            if (this.last.multi) {\n                if (!this.multiSearch) {\n                    this.last.field   = this.searches[0].field;\n                    this.last.caption = this.searches[0].caption;\n                } else {\n                    this.last.field   = 'all';\n                    this.last.caption = w2utils.lang('All Fields');\n                }\n            }\n            this.last.multi      = false;\n            this.last.xhr_offset = 0;\n            // reset scrolling position\n            this.last.scrollTop  = 0;\n            this.last.scrollLeft = 0;\n            this.last.selection.indexes = [];\n            this.last.selection.columns = {};\n            // -- clear all search field\n            this.searchClose();\n            $('#grid_'+ this.name +'_search_all').val('');\n            // apply search\n            if (!noRefresh) this.reload();\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },        \n\n        searchShowFields: function () {\n            var el   = $('#grid_'+ this.name +'_search_all');\n            var html = '<div class=\"w2ui-select-field\"><table>';\n            for (var s = -1; s < this.searches.length; s++) {\n                var search = this.searches[s];\n                if (s == -1) {\n                    if (!this.multiSearch) continue;\n                    search = { field: 'all', caption: w2utils.lang('All Fields') };\n                } else {\n                    if (this.searches[s].hidden === true) continue;\n                }\n                html += '<tr '+ (w2utils.isIOS ? 'onTouchStart' : 'onClick') +'=\"w2ui[\\''+ this.name +'\\'].initAllField(\\''+ search.field +'\\')\">'+\n                        '    <td><input type=\"radio\" tabIndex=\"-1\" '+ (search.field == this.last.field ? 'checked' : '') +'></td>'+\n                        '    <td>'+ search.caption +'</td>'+\n                        '</tr>';\n            }\n            html += \"</table></div>\";\n            // need timer otherwise does nto show with list type\n            setTimeout(function () {\n                $(el).w2overlay(html, { left: -10 });\n            }, 1);\n        },\n\n        initAllField: function (field, value) {\n            var el = $('#grid_'+ this.name +'_search_all');\n            if (field == 'all') {\n                var search = { field: 'all', caption: w2utils.lang('All Fields') };\n                el.w2field('clear');\n                el.change().focus();\n            } else {\n                var search = this.getSearch(field);\n                if (search == null) return;\n                var st = search.type;\n                if (['enum', 'select'].indexOf(st) != -1) st = 'list';\n                el.w2field(st, $.extend({}, search.options, { suffix: '', autoFormat: false, selected: value }));\n                if (['list', 'enum', 'date', 'time'].indexOf(search.type) != -1) {\n                    this.last.search = '';\n                    this.last.item   = '';\n                    el.val('');\n                }\n                // set focus\n                setTimeout(function () { \n                    if (value !== null) el.focus(); /* do not do el.change() as it will refresh grid and pull from server */ \n                }, 1);\n            }\n            // update field\n            if (this.last.search != '') {\n                this.search(search.field, this.last.search);\n            } else {\n                this.last.field   = search.field;\n                this.last.caption = search.caption;\n            }\n            el.attr('placeholder', search.caption);\n            $().w2overlay();\n        },\n\n        clear: function (noRefresh) {\n            // this.offset              = 0;   // clear should not reset offset\n            // this.total               = 0;   // clear should not reset total\n            this.records                = [];\n            this.summary                = [];\n            this.last.scrollTop         = 0;\n            this.last.scrollLeft        = 0;\n            this.last.selection.indexes = [];\n            this.last.selection.columns = {};\n            this.last.range_start       = null;\n            this.last.range_end         = null;\n            this.last.xhr_offset        = 0;   // need this for reload button to work on remote data set\n            if (!noRefresh) this.refresh();\n        },\n\n        reset: function (noRefresh) {\n            // this.offset              = 0;   // reset should not reset offset\n            // this.total               = 0;   // reset should not reset total\n            this.last.scrollTop         = 0;\n            this.last.scrollLeft        = 0;\n            this.last.selection.indexes = [];\n            this.last.selection.columns = {};\n            this.last.range_start       = null;\n            this.last.range_end         = null;\n            this.last.xhr_offset        = 0;\n            // this.searchReset(noRefresh);     // do not reset search fields\n            // initial sort\n            if (this.last.sortData != null ) this.sortData = this.last.sortData;\n            // select none without refresh\n            this.set({ expanded: false }, true);\n            // refresh\n            if (!noRefresh) this.refresh();\n        },\n\n        skip: function (offset) {\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (url) {\n                this.offset = parseInt(offset);\n                if (this.offset > this.total) this.offset = this.total - this.limit;\n                if (this.offset < 0 || !w2utils.isInt(this.offset)) this.offset = 0;\n                this.records  = [];\n                this.last.xhr_offset = 0;\n                this.last.pull_more  = true;\n                this.last.scrollTop  = 0;\n                this.last.scrollLeft = 0;\n                $('#grid_'+ this.name +'_records').prop('scrollTop',  0);\n                this.reload();\n            } else {\n                console.log('ERROR: grid.skip() can only be called when you have remote data source.');\n            }\n        },\n\n        load: function (url, callBack) {\n            if (typeof url == 'undefined') {\n                console.log('ERROR: You need to provide url argument when calling .load() method of \"'+ this.name +'\" object.');\n                return;\n            }\n            // default action\n            this.request('get-records', {}, url, callBack);\n        },\n\n        reload: function (callBack) {\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (url) {\n                this.clear(true);\n                this.request('get-records', {}, null, callBack);\n            } else {\n                this.last.scrollTop   = 0;\n                this.last.scrollLeft  = 0;\n                this.last.range_start = null;\n                this.last.range_end   = null;\n                this.localSearch();\n                this.refresh();\n                if (typeof callBack == 'function') callBack({ status: 'success' });\n            }\n        },\n\n        request: function (cmd, add_params, url, callBack) {\n            if (typeof add_params == 'undefined') add_params = {};\n            if (url == '' || url == null) url = this.url;\n            if (url == '' || url == null) return;\n            // build parameters list\n            var params = {};\n            if (!w2utils.isInt(this.offset)) this.offset = 0;\n            if (!w2utils.isInt(this.last.xhr_offset)) this.last.xhr_offset = 0;\n            // add list params\n            params['cmd']         = cmd;\n            params['selected']    = this.getSelection();\n            params['limit']       = this.limit;\n            params['offset']      = parseInt(this.offset) + this.last.xhr_offset;\n            params['search']      = this.searchData;\n            params['searchLogic'] = this.last.logic;\n            params['sort']        = this.sortData;\n            if (this.searchData.length == 0) {\n                delete params['search'];\n                delete params['searchLogic'];\n            }\n            if (this.sortData.length == 0) {\n                delete params['sort'];\n            }\n            // append other params\n            $.extend(params, this.postData);\n            $.extend(params, add_params);\n            // event before\n            if (cmd == 'get-records') {\n                var eventData = this.trigger({ phase: 'before', type: 'request', target: this.name, url: url, postData: params });\n                if (eventData.isCancelled === true) { if (typeof callBack == 'function') callBack({ status: 'error', message: 'Request aborted.' }); return; }\n            } else {\n                var eventData = { url: url, postData: params };\n            }\n            // call server to get data\n            var obj = this;\n            if (this.last.xhr_offset == 0) {\n                this.lock(this.msgRefresh, true);\n            } else {\n                var more = $('#grid_'+ this.name +'_rec_more');\n                if (this.autoLoad === true) {\n                    more.show().find('td').html('<div><div style=\"width: 20px; height: 20px;\" class=\"w2ui-spinner\"></div></div>');\n                } else {\n                    more.find('td').html('<div>'+ w2utils.lang('Load') + ' ' + obj.limit + ' ' + w2utils.lang('More') + '...</div>');\n                }\n            }\n            if (this.last.xhr) try { this.last.xhr.abort(); } catch (e) {}\n            // URL\n            var url = (typeof eventData.url != 'object' ? eventData.url : eventData.url.get);\n            if (params.cmd == 'save-records' && typeof eventData.url == 'object')   url = eventData.url.save;\n            if (params.cmd == 'delete-records' && typeof eventData.url == 'object') url = eventData.url.remove;\n            // process url with routeData\n            if (!$.isEmptyObject(obj.routeData)) {\n                var info  = w2utils.parseRoute(url);\n                if (info.keys.length > 0) {\n                    for (var k = 0; k < info.keys.length; k++) {\n                        if (obj.routeData[info.keys[k].name] == null) continue;\n                        url = url.replace((new RegExp(':'+ info.keys[k].name, 'g')), obj.routeData[info.keys[k].name]);\n                    }\n                }\n            }\n            // ajax ptions\n            var ajaxOptions = {\n                type     : 'POST',\n                url      : url,\n                data     : eventData.postData, \n                dataType : 'text'  // expected data type from server\n            };\n            if (w2utils.settings.dataType == 'HTTP') {\n                ajaxOptions.data = (typeof ajaxOptions.data == 'object' ? String($.param(ajaxOptions.data, false)).replace(/%5B/g, '[').replace(/%5D/g, ']') : ajaxOptions.data);\n            }\n            if (w2utils.settings.dataType == 'RESTFULL') {\n                ajaxOptions.type = 'GET';\n                if (params.cmd == 'save-records')   ajaxOptions.type = 'PUT';  // so far it is always update\n                if (params.cmd == 'delete-records') ajaxOptions.type = 'DELETE';\n                ajaxOptions.data = (typeof ajaxOptions.data == 'object' ? String($.param(ajaxOptions.data, false)).replace(/%5B/g, '[').replace(/%5D/g, ']') : ajaxOptions.data);\n            }\n            if (w2utils.settings.dataType == 'JSON') {\n                ajaxOptions.type        = 'POST';\n                ajaxOptions.data        = JSON.stringify(ajaxOptions.data);\n                ajaxOptions.contentType = 'application/json';\n            }\n            if (this.method) ajaxOptions.type = this.method;\n\n            this.last.xhr_cmd   = params.cmd;\n            this.last.xhr_start = (new Date()).getTime();\n            this.last.xhr = $.ajax(ajaxOptions)\n                .done(function (data, status, xhr) {\n                    obj.requestComplete(status, cmd, callBack);\n                })\n                .fail(function (xhr, status, error) {\n                    // trigger event\n                    var errorObj = { status: status, error: error, rawResponseText: xhr.responseText };\n                    var eventData2 = obj.trigger({ phase: 'before', type: 'error', error: errorObj, xhr: xhr });\n                    if (eventData2.isCancelled === true) return;\n                    // default behavior\n                    if (status != 'abort') { // it can be aborted by the grid itself\n                        var data;\n                        try { data = $.parseJSON(xhr.responseText) } catch (e) {}\n                        console.log('ERROR: Server communication failed.', \n                            '\\n   EXPECTED:', { status: 'success', total: 5, records: [{ recid: 1, field: 'value' }] }, \n                            '\\n         OR:', { status: 'error', message: 'error message' },\n                            '\\n   RECEIVED:', typeof data == 'object' ? data : xhr.responseText);\n                        obj.requestComplete('error', cmd, callBack);\n                    }\n                    // event after\n                    obj.trigger($.extend(eventData2, { phase: 'after' }));\n                });\n            if (cmd == 'get-records') {\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n            }\n        },\n\n        requestComplete: function(status, cmd, callBack) {\n            var obj = this;\n            this.unlock();\n            setTimeout(function () { \n                if (obj.show.statusResponse) obj.status(w2utils.lang('Server Response') + ' ' + ((new Date()).getTime() - obj.last.xhr_start)/1000 +' ' + w2utils.lang('sec')); \n            }, 10);\n            this.last.pull_more    = false;\n            this.last.pull_refresh = true;\n\n            // event before\n            var event_name = 'load';\n            if (this.last.xhr_cmd == 'save-records') event_name   = 'save';\n            if (this.last.xhr_cmd == 'delete-records') event_name = 'deleted';\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: event_name, xhr: this.last.xhr, status: status });\n            if (eventData.isCancelled === true) {\n                if (typeof callBack == 'function') callBack({ status: 'error', message: 'Request aborted.' });\n                return;\n            }\n            // parse server response\n            var data;\n            var responseText = this.last.xhr.responseText;\n            if (status != 'error') {\n                // default action\n                if (typeof responseText != 'undefined' && responseText != '') {\n                    // check if the onLoad handler has not already parsed the data\n                    if (typeof responseText == \"object\") {\n                        data = responseText;\n                    } else {\n                        if (typeof obj.parser == 'function') {\n                            data = obj.parser(responseText);\n                            if (typeof data != 'object') {\n                                console.log('ERROR: Your parser did not return proper object');\n                            }\n                        } else {\n                            // $.parseJSON or $.getJSON did not work because those expect perfect JSON data - where everything is in double quotes\n                            //\n                            // TODO: avoid (potentially malicious) code injection from the response.\n                            try { eval('data = '+ responseText); } catch (e) { }\n                        }\n                    }\n                    if (data == null) {\n                        data = {\n                            status       : 'error',\n                            message      : this.msgNotJSON,\n                            responseText : responseText\n                        };\n                    } else if (obj.recid) {\n                        // convert recids\n                        for (var r in data.records) {\n                            data.records[r]['recid'] = data.records[r][obj.recid];\n                        }\n                    }\n                    if (data['status'] == 'error') {\n                        obj.error(data['message']);\n                    } else {\n                        if (cmd == 'get-records') {\n                            if (this.last.xhr_offset == 0) {\n                                this.records = [];\n                                this.summary = [];\n                                //data.xhr_status=data.status;\n                                delete data.status;\n                                $.extend(true, this, data);\n                            } else {\n                                if (parseInt(data.total) != parseInt(this.total)) {\n                                    w2alert(this.msgNeedReload);\n                                    delete this.last.xhr_offset;\n                                    this.reload();\n                                    return;\n                                }\n                                var records = data.records;\n                                delete data.records;\n                                delete data.status;\n                                $.extend(true, this, data);\n                                for (var r = 0; r < records.length; r++) {\n                                    this.records.push(records[r]);\n                                }\n                            }\n                        }\n                        if (cmd == 'delete-records') {\n                            this.reset(); // unselect old selections\n                            this.reload();\n                            return;\n                        }\n                    }\n                }\n            } else {\n                data = {\n                    status       : 'error',\n                    message      : this.msgAJAXerror,\n                    responseText : responseText\n                };\n                obj.error(this.msgAJAXerror);\n            }\n            // event after\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (!url) {\n                this.localSort();\n                this.localSearch();\n            }\n            this.total = parseInt(this.total);\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            // do not refresh if loading on infinite scroll\n            if (this.last.xhr_offset == 0) this.refresh(); else this.scroll();\n            // call back\n            if (typeof callBack == 'function') callBack(data);\n        },\n\n        error: function (msg) {\n            var obj = this;\n            // let the management of the error outside of the grid\n            var eventData = this.trigger({ target: this.name, type: 'error', message: msg , xhr: this.last.xhr });\n            if (eventData.isCancelled === true) {\n                if (typeof callBack == 'function') callBack({ status: 'error', message: 'Request aborted.' });\n                return;\n            }\n            w2alert(msg, 'Error');\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        getChanges: function () {\n            var changes = [];\n            for (var r = 0; r < this.records.length; r++) {\n                var rec = this.records[r];\n                if (typeof rec['changes'] != 'undefined') {\n                    changes.push($.extend(true, { recid: rec.recid }, rec.changes));\n                }\n            }\n            return changes;\n        },\n\n        mergeChanges: function () {\n            var changes = this.getChanges();\n            for (var c = 0; c < changes.length; c++) {\n                var record = this.get(changes[c].recid);\n                for (var s in changes[c]) {\n                    if (s == 'recid') continue; // do not allow to change recid\n                    try { eval('record.' + s + ' = changes[c][s]'); } catch (e) {}\n                    delete record.changes;\n                }\n            }\n            this.refresh();\n        },\n\n        // ===================================================\n        // --  Action Handlers\n\n        save: function () {\n            var obj = this;\n            var changes = this.getChanges();\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'submit', changes: changes });\n            if (eventData.isCancelled === true) return;\n            var url = (typeof this.url != 'object' ? this.url : this.url.save);\n            if (url) {\n                this.request('save-records', { 'changes' : eventData.changes }, null,\n                    function (data) {\n                        if (data.status !== 'error') {\n                            // only merge changes, if save was successful\n                            obj.mergeChanges();\n                        }\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                    }\n                );\n            } else {\n                this.mergeChanges();\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n            }\n        },\n\n        editField: function (recid, column, value, event) {\n            var obj   = this;\n            var index = obj.get(recid, true);\n            var rec   = obj.records[index];\n            var col   = obj.columns[column];\n            var edit  = col ? col.editable : null;\n            if (!rec || !col || !edit || rec.editable === false) return;\n            if (['enum', 'file'].indexOf(edit.type) != -1) {\n                console.log('ERROR: input types \"enum\" and \"file\" are not supported in inline editing.');\n                return;\n            }\n            // event before\n            var eventData = obj.trigger({ phase: 'before', type: 'editField', target: obj.name, recid: recid, column: column, value: value,\n                index: index, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            value = eventData.value;\n            // default behaviour\n            this.selectNone();\n            this.select({ recid: recid, column: column });\n            this.last.edit_col = column;\n            if (['checkbox', 'check'].indexOf(edit.type) != -1) return;\n            // create input element\n            var tr = $('#grid_'+ obj.name +'_rec_'+ w2utils.escapeId(recid));\n            var el = tr.find('[col='+ column +'] > div');\n            if (typeof edit.inTag   == 'undefined') edit.inTag   = '';\n            if (typeof edit.outTag  == 'undefined') edit.outTag  = '';\n            if (typeof edit.style   == 'undefined') edit.style   = '';\n            if (typeof edit.items   == 'undefined') edit.items   = [];\n            var val = (rec.changes && typeof rec.changes[col.field] != 'undefined' ? w2utils.stripTags(rec.changes[col.field]) : w2utils.stripTags(rec[col.field]));\n            if (val == null) val = '';\n            if (value != null) val = value;\n            var addStyle = (typeof col.style != 'undefined' ? col.style + ';' : '');\n            if (typeof col.render == 'string' && ['number', 'int', 'float', 'money', 'percent'].indexOf(col.render.split(':')[0]) != -1) {\n                addStyle += 'text-align: right;';\n            }\n            // mormalize items\n            if (edit.items.length > 0 && !$.isPlainObject(edit.items[0])) {\n                edit.items = w2obj.field.prototype.normMenu(edit.items);\n            }\n            if (edit.type == 'select') {\n                var html = '';\n                for (var i = 0; i < edit.items.length; i++) {\n                    html += '<option value=\"'+ edit.items[i].id +'\" '+ (edit.items[i].id == val ? 'selected' : '') +'>'+ edit.items[i].text +'</option>';\n                }\n                el.addClass('w2ui-editable')\n                    .html('<select id=\"grid_'+ obj.name +'_edit_'+ recid +'_'+ column +'\" column=\"'+ column +'\" '+\n                        '    style=\"width: 100%; '+ addStyle + edit.style +'\" field=\"'+ col.field +'\" recid=\"'+ recid +'\" '+\n                        '    '+ edit.inTag +\n                        '>'+ html +'</select>' + edit.outTag);\n                el.find('select').focus()\n                    .on('change', function (event) {\n                        delete obj.last.move;\n                    })\n                    .on('blur', function (event) {\n                        obj.editChange.call(obj, this, index, column, event);\n                    });\n            } else {\n                el.addClass('w2ui-editable')\n                    .html('<input id=\"grid_'+ obj.name +'_edit_'+ recid +'_'+ column +'\" '+\n                        '    type=\"text\" style=\"font-family: inherit; font-size: inherit; outline: none; '+ addStyle + edit.style +'\" field=\"'+ col.field +'\" recid=\"'+ recid +'\" '+\n                        '    column=\"'+ column +'\" '+ edit.inTag +\n                        '>' + edit.outTag);\n                // issue #499\n                if (typeof val == 'number') {\n                    val = w2utils.formatNumber(val);\n                }\n                if (value == null) el.find('input').val(typeof val != 'object' ? val : '');\n                // init w2field\n                var input = el.find('input').get(0);\n                $(input).w2field(edit.type, $.extend(edit, { selected: val }));\n                // add blur listener\n                setTimeout(function () {\n                    var tmp = input;\n                    if (edit.type == 'list') {\n                        tmp = $($(input).data('w2field').helpers.focus).find('input');\n                        if (typeof val != 'object' && val != '') tmp.val(val).css({ opacity: 1 }).prev().css({ opacity: 1 });\n                    }\n                    $(tmp).on('blur', function (event) {\n                        obj.editChange.call(obj, input, index, column, event);\n                    });\n                }, 10);\n                if (value != null) $(input).val(typeof val != 'object' ? val : '');\n            }\n            setTimeout(function () {\n                el.find('input, select')\n                    .on('click', function (event) {\n                        event.stopPropagation();\n                    })\n                    .on('keydown', function (event) {\n                        var cancel = false;\n                        switch (event.keyCode) {\n                            case 9:  // tab\n                                cancel = true;\n                                var next_rec = recid;\n                                var next_col = event.shiftKey ? obj.prevCell(column, true) : obj.nextCell(column, true);\n                                // next or prev row\n                                if (next_col == null) {\n                                    var tmp = event.shiftKey ? obj.prevRow(index) : obj.nextRow(index);\n                                    if (tmp != null && tmp != index) {\n                                        next_rec = obj.records[tmp].recid;\n                                        // find first editable row\n                                        for (var c = 0; c < obj.columns.length; c++) {\n                                            var tmp = obj.columns[c].editable;\n                                            if (typeof tmp != 'undefined' && ['checkbox', 'check'].indexOf(tmp.type) == -1) {\n                                                next_col = parseInt(c);\n                                                if (!event.shiftKey) break;\n                                            }\n                                        }\n                                    }\n\n                                }\n                                if (next_rec === false) next_rec = recid;\n                                if (next_col == null) next_col = column;\n                                // init new or same record\n                                this.blur();\n                                setTimeout(function () {\n                                    if (obj.selectType != 'row') {\n                                        obj.selectNone();\n                                        obj.select({ recid: next_rec, column: next_col });\n                                    } else {\n                                        obj.editField(next_rec, next_col, null, event);\n                                    }\n                                }, 1);\n                                break;\n\n                            case 13: // enter\n                                this.blur();\n                                var next = event.shiftKey ? obj.prevRow(index) : obj.nextRow(index);\n                                if (next != null && next != index) {\n                                    setTimeout(function () {\n                                        if (obj.selectType != 'row') {\n                                            obj.selectNone();\n                                            obj.select({ recid: obj.records[next].recid, column: column });\n                                        } else {\n                                            obj.editField(obj.records[next].recid, column, null, event);\n                                        }\n                                    }, 100);\n                                }\n                                break;\n\n                            case 38: // up arrow\n                                if (!event.shiftKey) break;\n                                cancel = true;\n                                var next = obj.prevRow(index);\n                                if (next != index) {\n                                    this.blur();\n                                    setTimeout(function () {\n                                        if (obj.selectType != 'row') {\n                                            obj.selectNone();\n                                            obj.select({ recid: obj.records[next].recid, column: column });\n                                        } else {\n                                            obj.editField(obj.records[next].recid, column, null, event);\n                                        }\n                                    }, 1);\n                                }\n                                break;\n\n                            case 40: // down arrow\n                                if (!event.shiftKey) break;\n                                cancel = true;\n                                var next = obj.nextRow(index);\n                                if (next != null && next != index) {\n                                    this.blur();\n                                    setTimeout(function () {\n                                        if (obj.selectType != 'row') {\n                                            obj.selectNone();\n                                            obj.select({ recid: obj.records[next].recid, column: column });\n                                        } else {\n                                            obj.editField(obj.records[next].recid, column, null, event);\n                                        }\n                                    }, 1);\n                                }\n                                break;\n\n                            case 27: // escape\n                                var old = obj.parseField(rec, col.field);\n                                if (rec.changes && typeof rec.changes[col.field] != 'undefined') old = rec.changes[col.field];\n                                this.value = typeof old != 'undefined' ? old : '';\n                                this.blur();\n                                setTimeout(function () { obj.select({ recid: recid, column: column }) }, 1);\n                                break;\n                        }\n                        if (cancel) if (event.preventDefault) event.preventDefault();\n                    });\n                // focus and select\n                var tmp = el.find('input').focus();\n                if (value != null) {\n                    // set cursor to the end\n                    tmp[0].setSelectionRange(tmp.val().length, tmp.val().length);\n                } else {\n                    tmp.select();\n                }\n\n            }, 1);\n            // event after\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        editChange: function (el, index, column, event) {\n            // all other fields\n            var summary = index < 0;\n            index = index < 0 ? -index - 1 : index;\n            var records = summary ? this.summary : this.records;\n            var rec     = records[index];\n            var tr      = $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(rec.recid));\n            var col     = this.columns[column];\n            var new_val = el.value;\n            var old_val = this.parseField(rec, col.field);\n            var tmp     = $(el).data('w2field');\n            if (tmp) {\n                new_val = tmp.clean(new_val);\n                if (tmp.type == 'list' && new_val != '') new_val = $(el).data('selected');\n            }\n            if (el.type == 'checkbox') new_val = el.checked;\n            // change/restore event\n            var eventData = {\n                phase: 'before', type: 'change', target: this.name, input_id: el.id, recid: rec.recid, index: index, column: column,\n                value_new: new_val, value_previous: (rec.changes && rec.changes.hasOwnProperty(col.field) ? rec.changes[col.field]: old_val), value_original: old_val\n            };\n            if (old_val == null) old_val = '';\n            while (true) {\n                new_val = eventData.value_new;\n                if ((typeof new_val != 'object' && String(old_val) != String(new_val)) || \n                    (typeof new_val == 'object' && (typeof old_val != 'object' || old_val === null || new_val.id != old_val.id))) {\n                    // change event\n                    eventData = this.trigger($.extend(eventData, { type: 'change', phase: 'before' }));\n                    if (eventData.isCancelled !== true) {\n                        if (new_val !== eventData.value_new) {\n                            // re-evaluate the type of change to be made\n                            continue;\n                        }\n                        // default action\n                        rec.changes = rec.changes || {};\n                        rec.changes[col.field] = eventData.value_new;\n                        // event after\n                        this.trigger($.extend(eventData, { phase: 'after' }));\n                    }\n                } else {\n                    // restore event\n                    eventData = this.trigger($.extend(eventData, { type: 'restore', phase: 'before' }));\n                    if (eventData.isCancelled !== true) {\n                        if (new_val !== eventData.value_new) {\n                            // re-evaluate the type of change to be made\n                            continue;\n                        }\n                        // default action\n                        if (rec.changes) delete rec.changes[col.field];\n                        if ($.isEmptyObject(rec.changes)) delete rec.changes;\n                        // event after\n                        this.trigger($.extend(eventData, { phase: 'after' }));\n                    }\n                }\n                break;\n            }\n            // refresh cell\n            var cell = this.getCellHTML(index, column, summary);\n            if (!summary) {\n                if (rec.changes && typeof rec.changes[col.field] != 'undefined') {\n                    $(tr).find('[col='+ column +']').addClass('w2ui-changed').html(cell);\n                } else {\n                    $(tr).find('[col='+ column +']').removeClass('w2ui-changed').html(cell);\n                }\n            }\n        },\n\n        \"delete\": function (force) {\n            var time = (new Date()).getTime();\n            var obj = this;\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'delete', force: force });\n            if (eventData.isCancelled === true) return;\n            force = eventData.force;\n            // default action\n            var recs = this.getSelection();\n            if (recs.length == 0) return;\n            if (this.msgDelete != '' && !force) {\n                w2confirm({\n                    title : w2utils.lang('Delete Confirmation'), \n                    msg   : obj.msgDelete, \n                    yes_class : 'btn-red',\n                    callBack: function (result) {\n                        if (result == 'Yes') w2ui[obj.name]['delete'](true);\n                    }\n                });\n                return;\n            }\n            // call delete script\n            var url = (typeof this.url != 'object' ? this.url : this.url.remove);\n            if (url) {\n                this.request('delete-records');\n            } else {\n                this.selectNone();\n                if (typeof recs[0] != 'object') {\n                    this.remove.apply(this, recs);\n                } else {\n                    // clear cells\n                    for (var r = 0; r < recs.length; r++) {\n                        var fld = this.columns[recs[r].column].field;\n                        var ind = this.get(recs[r].recid, true);\n                        var rec = this.records[ind];\n                        if (ind != null && fld != 'recid') {\n                            this.records[ind][fld] = '';\n                            if (rec.changes) delete rec.changes[fld];\n                            // -- style should not be deleted\n                            // if (rec.style != null && $.isPlainObject(rec.style) && rec.style[recs[r].column]) {\n                            //     delete rec.style[recs[r].column];\n                            // }\n                        }\n                    }\n                    this.update();\n                }\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        click: function (recid, event) {\n            var time = (new Date()).getTime();\n            var column = null;\n            if (this.last.cancelClick == true || (event && event.altKey)) return;\n            if (typeof recid == 'object') {\n                column = recid.column;\n                recid  = recid.recid;\n            }\n            if (typeof event == 'undefined') event = {};\n            // check for double click\n            if (time - parseInt(this.last.click_time) < 350 && event.type == 'click') {\n                this.dblClick(recid, event);\n                return;\n            }\n            this.last.click_time = time;\n            // column user clicked on\n            if (column == null && event.target) {\n                var tmp = event.target;\n                if (tmp.tagName != 'TD') tmp = $(tmp).parents('td')[0];\n                if (typeof $(tmp).attr('col') != 'undefined') column = parseInt($(tmp).attr('col'));\n            }\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'click', recid: recid, column: column, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // if it is subgrid unselect top grid\n            var parent = $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(recid)).parents('tr');\n            if (parent.length > 0 && String(parent.attr('id')).indexOf('expanded_row') != -1) {\n                var grid  = parent.parents('.w2ui-grid').attr('name');\n                w2ui[grid].selectNone();\n                // all subgrids\n                parent.parents('.w2ui-grid').find('.w2ui-expanded-row .w2ui-grid').each(function (index, el) {\n                    var grid = $(el).attr('name');\n                    if (w2ui[grid]) w2ui[grid].selectNone();\n                });\n            }\n            // unselect all subgrids\n            $(this.box).find('.w2ui-expanded-row .w2ui-grid').each(function (index, el) {\n                var grid = $(el).attr('name');\n                if (w2ui[grid]) w2ui[grid].selectNone();\n            });\n            // default action\n            var obj = this;\n            var sel = this.getSelection();\n            $('#grid_'+ this.name +'_check_all').prop(\"checked\", false);\n            var ind    = this.get(recid, true);\n            var record = this.records[ind];\n            var selectColumns  = [];\n            obj.last.sel_ind   = ind;\n            obj.last.sel_col   = column;\n            obj.last.sel_recid = recid;\n            obj.last.sel_type  = 'click';\n            // multi select with shif key\n            if (event.shiftKey && sel.length > 0 && obj.multiSelect) {\n                if (sel[0].recid) {\n                    var start = this.get(sel[0].recid, true);\n                    var end   = this.get(recid, true);\n                    if (column > sel[0].column) {\n                        var t1 = sel[0].column;\n                        var t2 = column;\n                    } else {\n                        var t1 = column;\n                        var t2 = sel[0].column;\n                    }\n                    for (var c = t1; c <= t2; c++) selectColumns.push(c);\n                } else {\n                    var start = this.get(sel[0], true);\n                    var end   = this.get(recid, true);\n                }\n                var sel_add = []\n                if (start > end) { var tmp = start; start = end; end = tmp; }\n                var url = (typeof this.url != 'object' ? this.url : this.url.get);\n                for (var i = start; i <= end; i++) {\n                    if (this.searchData.length > 0 && !url && $.inArray(i, this.last.searchIds) == -1) continue;\n                    if (this.selectType == 'row') {\n                        sel_add.push(this.records[i].recid);\n                    } else {\n                        for (var sc = 0; sc < selectColumns.length; sc++) {\n                            sel_add.push({ recid: this.records[i].recid, column: selectColumns[sc] });\n                        }\n                    }\n                    //sel.push(this.records[i].recid);\n                }\n                this.select.apply(this, sel_add);\n            } else {\n                var last = this.last.selection;\n                var flag = (last.indexes.indexOf(ind) != -1 ? true : false);\n                // clear other if necessary\n                if (((!event.ctrlKey && !event.shiftKey && !event.metaKey) || !this.multiSelect) && !this.showSelectColumn) {\n                    if (this.selectType != 'row' && $.inArray(column, last.columns[ind]) == -1) flag = false;\n                    if (sel.length > 300) this.selectNone(); else this.unselect.apply(this, sel);\n                    if (flag === true) {\n                        this.unselect({ recid: recid, column: column });\n                    } else {\n                        this.select({ recid: recid, column: column });\n                    }\n                } else {\n                    if (this.selectType != 'row' && $.inArray(column, last.columns[ind]) == -1) flag = false;\n                    if (flag === true) {\n                        this.unselect({ recid: recid, column: column });\n                    } else {\n                        this.select({ recid: recid, column: column });\n                    }\n                }\n            }\n            this.status();\n            obj.initResize();\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        columnClick: function (field, event) {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'columnClick', target: this.name, field: field, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // default behaviour\n            var column = this.getColumn(field);\n            if (column && column.sortable) this.sort(field, null, (event && (event.ctrlKey || event.metaKey) ? true : false) );\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        focus: function (event) {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'focus', target: this.name, originalEvent: event });\n            if (eventData.isCancelled === true) return false;\n            // default behaviour\n            $(this.box).find('.w2ui-selected').removeClass('w2ui-inactive');\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        blur: function (event) {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'blur', target: this.name, originalEvent: event });\n            if (eventData.isCancelled === true) return false;\n            // default behaviour\n            $(this.box).find('.w2ui-selected').addClass('w2ui-inactive');\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        keydown: function (event) {\n            // this method is called from w2utils\n            var obj = this;\n            if (obj.keyboard !== true) return;\n            // trigger event\n            var eventData = obj.trigger({ phase: 'before', type: 'keydown', target: obj.name, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // default behavior\n            var empty   = false;\n            var records = $('#grid_'+ obj.name +'_records');\n            var sel     = obj.getSelection();\n            if (sel.length == 0) empty = true;\n            var recid   = sel[0] || null;\n            var columns = [];\n            var recid2  = sel[sel.length-1];\n            if (typeof recid == 'object' && recid != null) {\n                recid   = sel[0].recid;\n                columns = [];\n                var ii  = 0;\n                while (true) {\n                    if (!sel[ii] || sel[ii].recid != recid) break;\n                    columns.push(sel[ii].column);\n                    ii++;\n                }\n                recid2  = sel[sel.length-1].recid;\n            }\n            var ind    = obj.get(recid, true);\n            var ind2   = obj.get(recid2, true);\n            var rec    = obj.get(recid);\n            var recEL  = $('#grid_'+ obj.name +'_rec_'+ (ind !== null ? w2utils.escapeId(obj.records[ind].recid) : 'none'));\n            var cancel = false;\n            var key    = event.keyCode;\n            var shiftKey= event.shiftKey;\n            if (key == 9) { // tab key\n                if (event.shiftKey) key = 37; else key = 39; // replace with arrows\n                shiftKey = false;\n                cancel   = true;\n            }\n            switch (key) {\n                case 8:  // backspace\n                case 46: // delete\n                    if (this.show.toolbarDelete || this.onDelete) obj[\"delete\"]();\n                    cancel = true;\n                    event.stopPropagation();\n                    break;\n\n                case 27: // escape\n                    obj.selectNone();\n                    if (sel.length > 0 && typeof sel[0] == 'object') {\n                        obj.select({ recid: sel[0].recid, column: sel[0].column });\n                    }\n                    cancel = true;\n                    break;\n\n                case 65: // cmd + A\n                    if (!event.metaKey && !event.ctrlKey) break;\n                    obj.selectAll();\n                    cancel = true;\n                    break;\n\n                case 70: // cmd + F\n                    if (!event.metaKey && !event.ctrlKey) break;\n                    $('#grid_'+ obj.name + '_search_all').focus();\n                    cancel = true;\n                    break;\n\n                case 13: // enter\n                    // if expandable columns - expand it\n                    if (this.selectType == 'row' && obj.show.expandColumn === true) {\n                        if (recEL.length <= 0) break;\n                        obj.toggle(recid, event);\n                        cancel = true;\n                    } else { // or enter edit\n                        for (var c = 0; c < this.columns.length; c++) {\n                            if (this.columns[c].editable) {\n                                columns.push(parseInt(c));\n                                break;\n                            }\n                        }\n                        // edit last column that was edited\n                        if (this.selectType == 'row' && this.last.edit_col) columns = [this.last.edit_col];\n                        if (columns.length > 0) {\n                            obj.editField(recid, columns[0], null, event);\n                            cancel = true;\n                        }\n                    }\n                    break;\n\n                case 37: // left\n                    if (empty) break;\n                    // check if this is subgrid\n                    var parent = $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(obj.records[ind].recid)).parents('tr');\n                    if (parent.length > 0 && String(parent.attr('id')).indexOf('expanded_row') != -1) {\n                        var recid = parent.prev().attr('recid');\n                        var grid  = parent.parents('.w2ui-grid').attr('name');\n                        obj.selectNone();\n                        w2utils.keyboard.active(grid);\n                        w2ui[grid].set(recid, { expanded: false });\n                        w2ui[grid].collapse(recid);\n                        w2ui[grid].click(recid);\n                        cancel = true;\n                        break;\n                    }\n                    if (this.selectType == 'row') {\n                        if (recEL.length <= 0 || rec.expanded !== true ) break;\n                        obj.set(recid, { expanded: false }, true);\n                        obj.collapse(recid, event);\n                    } else {\n                        var prev = obj.prevCell(columns[0]);\n                        if (prev != null) {\n                            if (shiftKey && obj.multiSelect) {\n                                if (tmpUnselect()) return;\n                                var tmp    = [];\n                                var newSel = [];\n                                var unSel  = [];\n                                if (columns.indexOf(this.last.sel_col) == 0 && columns.length > 1) {\n                                    for (var i = 0; i < sel.length; i++) {\n                                        if (tmp.indexOf(sel[i].recid) == -1) tmp.push(sel[i].recid);\n                                        unSel.push({ recid: sel[i].recid, column: columns[columns.length-1] });\n                                    }\n                                } else {\n                                    for (var i = 0; i < sel.length; i++) {\n                                        if (tmp.indexOf(sel[i].recid) == -1) tmp.push(sel[i].recid);\n                                        newSel.push({ recid: sel[i].recid, column: prev });\n                                    }\n                                }\n                                obj.unselect.apply(obj, unSel);\n                                obj.select.apply(obj, newSel);\n                            } else {\n                                event.shiftKey = false;\n                                obj.click({ recid: recid, column: prev }, event);\n                            }\n                        } else {\n                            // if selected more then one, then select first\n                            if (!shiftKey) {\n                                if (sel.length > 1) {\n                                    obj.selectNone();\n                                } else {\n                                    for (var s = 1; s < sel.length; s++) obj.unselect(sel[s]);\n                                }\n                            }\n                        }\n                    }\n                    cancel = true;\n                    break;\n\n                case 39: // right\n                    if (empty) break;\n                    if (this.selectType == 'row') {\n                        if (recEL.length <= 0 || rec.expanded === true || obj.show.expandColumn !== true) break;\n                        obj.expand(recid, event);\n                    } else {\n                        var next = obj.nextCell(columns[columns.length-1]);\n                        if (next !== null) {\n                            if (shiftKey && key == 39 && obj.multiSelect) {\n                                if (tmpUnselect()) return;\n                                var tmp    = [];\n                                var newSel = [];\n                                var unSel  = [];\n                                if (columns.indexOf(this.last.sel_col) == columns.length-1 && columns.length > 1) {\n                                    for (var i = 0; i < sel.length; i++) {\n                                        if (tmp.indexOf(sel[i].recid) == -1) tmp.push(sel[i].recid);\n                                        unSel.push({ recid: sel[i].recid, column: columns[0] });\n                                    }\n                                } else {\n                                    for (var i = 0; i < sel.length; i++) {\n                                        if (tmp.indexOf(sel[i].recid) == -1) tmp.push(sel[i].recid);\n                                        newSel.push({ recid: sel[i].recid, column: next });\n                                    }\n                                }\n                                obj.unselect.apply(obj, unSel);\n                                obj.select.apply(obj, newSel);\n                            } else {\n                                obj.click({ recid: recid, column: next }, event);\n                            }\n                        } else {\n                            // if selected more then one, then select first\n                            if (!shiftKey) {\n                                if (sel.length > 1) {\n                                    obj.selectNone();\n                                } else {\n                                    for (var s = 0; s < sel.length-1; s++) obj.unselect(sel[s]);\n                                }\n                            }\n                        }\n                    }\n                    cancel = true;\n                    break;\n\n                case 38: // up\n                    if (empty) selectTopRecord();\n                    if (recEL.length <= 0) break;\n                    // move to the previous record\n                    var prev = obj.prevRow(ind);\n                    if (prev != null) {\n                        // jump into subgrid\n                        if (obj.records[prev].expanded) {\n                            var subgrid = $('#grid_'+ obj.name +'_rec_'+ w2utils.escapeId(obj.records[prev].recid) +'_expanded_row').find('.w2ui-grid');\n                            if (subgrid.length > 0 && w2ui[subgrid.attr('name')]) {\n                                obj.selectNone();\n                                var grid = subgrid.attr('name');\n                                var recs = w2ui[grid].records;\n                                w2utils.keyboard.active(grid);\n                                w2ui[grid].click(recs[recs.length-1].recid);\n                                cancel = true;\n                                break;\n                            }\n                        }\n                        if (shiftKey && obj.multiSelect) { // expand selection\n                            if (tmpUnselect()) return;\n                            if (obj.selectType == 'row') {\n                                if (obj.last.sel_ind > prev && obj.last.sel_ind != ind2) {\n                                    obj.unselect(obj.records[ind2].recid);\n                                } else {\n                                    obj.select(obj.records[prev].recid);\n                                }\n                            } else {\n                                if (obj.last.sel_ind > prev && obj.last.sel_ind != ind2) {\n                                    prev = ind2;\n                                    var tmp = [];\n                                    for (var c = 0; c < columns.length; c++) tmp.push({ recid: obj.records[prev].recid, column: columns[c] });\n                                    obj.unselect.apply(obj, tmp);\n                                } else {\n                                    var tmp = [];\n                                    for (var c = 0; c < columns.length; c++) tmp.push({ recid: obj.records[prev].recid, column: columns[c] });\n                                    obj.select.apply(obj, tmp);\n                                }\n                            }\n                        } else { // move selected record\n                            obj.selectNone();\n                            obj.click({ recid: obj.records[prev].recid, column: columns[0] }, event);\n                        }\n                        obj.scrollIntoView(prev);\n                        if (event.preventDefault) event.preventDefault();\n                    } else {\n                        // if selected more then one, then select first\n                        if (!shiftKey) {\n                            if (sel.length > 1) {\n                                obj.selectNone();\n                            } else {\n                                for (var s = 1; s < sel.length; s++) obj.unselect(sel[s]);\n                            }\n                        }\n                        // jump out of subgird (if first record)\n                        var parent = $('#grid_'+ obj.name +'_rec_'+ w2utils.escapeId(obj.records[ind].recid)).parents('tr');\n                        if (parent.length > 0 && String(parent.attr('id')).indexOf('expanded_row') != -1) {\n                            var recid = parent.prev().attr('recid');\n                            var grid  = parent.parents('.w2ui-grid').attr('name');\n                            obj.selectNone();\n                            w2utils.keyboard.active(grid);\n                            w2ui[grid].click(recid);\n                            cancel = true;\n                            break;\n                        }\n                    }\n                    break;\n\n                case 40: // down\n                    if (empty) selectTopRecord();\n                    if (recEL.length <= 0) break;\n                    // jump into subgrid\n                    if (obj.records[ind2].expanded) {\n                        var subgrid = $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(obj.records[ind2].recid) +'_expanded_row').find('.w2ui-grid');\n                        if (subgrid.length > 0 && w2ui[subgrid.attr('name')]) {\n                            obj.selectNone();\n                            var grid = subgrid.attr('name');\n                            var recs = w2ui[grid].records;\n                            w2utils.keyboard.active(grid);\n                            w2ui[grid].click(recs[0].recid);\n                            cancel = true;\n                            break;\n                        }\n                    }\n                    // move to the next record\n                    var next = obj.nextRow(ind2);\n                    if (next != null) {\n                        if (shiftKey && obj.multiSelect) { // expand selection\n                            if (tmpUnselect()) return;\n                            if (obj.selectType == 'row') {\n                                if (this.last.sel_ind < next && this.last.sel_ind != ind) {\n                                    obj.unselect(obj.records[ind].recid);\n                                } else {\n                                    obj.select(obj.records[next].recid);\n                                }\n                            } else {\n                                if (this.last.sel_ind < next && this.last.sel_ind != ind) {\n                                    next = ind;\n                                    var tmp = [];\n                                    for (var c = 0; c < columns.length; c++) tmp.push({ recid: obj.records[next].recid, column: columns[c] });\n                                    obj.unselect.apply(obj, tmp);\n                                } else {\n                                    var tmp = [];\n                                    for (var c = 0; c < columns.length; c++) tmp.push({ recid: obj.records[next].recid, column: columns[c] });\n                                    obj.select.apply(obj, tmp);\n                                }\n                            }\n                        } else { // move selected record\n                            obj.selectNone();\n                            obj.click({ recid: obj.records[next].recid, column: columns[0] }, event);\n                        }\n                        obj.scrollIntoView(next);\n                        cancel = true;\n                    } else {\n                        // if selected more then one, then select first\n                        if (!shiftKey) {\n                            if (sel.length > 1) {\n                                obj.selectNone();\n                            } else {\n                                for (var s = 0; s < sel.length-1; s++) obj.unselect(sel[s]);\n                            }\n                        }\n                        // jump out of subgrid (if last record in subgrid)\n                        var parent = $('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(obj.records[ind2].recid)).parents('tr');\n                        if (parent.length > 0 && String(parent.attr('id')).indexOf('expanded_row') != -1) {\n                            var recid = parent.next().attr('recid');\n                            var grid  = parent.parents('.w2ui-grid').attr('name');\n                            obj.selectNone();\n                            w2utils.keyboard.active(grid);\n                            w2ui[grid].click(recid);\n                            cancel = true;\n                            break;\n                        }\n                    }\n                    break;\n\n                // copy & paste\n\n                case 17: // ctrl key\n                case 91: // cmd key\n                    // SLOW: 10k records take 7.0\n                    if (empty) break;\n                    var text = obj.copy();\n                    $('body').append('<textarea id=\"_tmp_copy_data\" '+\n                        '   onpaste=\"var obj = this; setTimeout(function () { w2ui[\\''+ obj.name + '\\'].paste(obj.value); }, 1);\" '+\n                        '   onkeydown=\"w2ui[\\''+ obj.name +'\\'].keydown(event)\"'+\n                        '   style=\"position: absolute; top: -100px; height: 1px; width: 1px\">'+ text +'</textarea>');\n                    $('#_tmp_copy_data').focus().select();\n                    // remove _tmp_copy_data textarea\n                    $(document).on('keyup', tmp_key_down);\n                    function tmp_key_down() { \n                        $('#_tmp_copy_data').remove(); \n                        $(document).off('keyup', tmp_key_down); \n                    }\n                    break;\n\n                case 88: // x - cut\n                    if (empty) break;\n                    if (event.ctrlKey || event.metaKey) {\n                        setTimeout(function () { obj[\"delete\"](true); }, 100);\n                    }\n                    break;\n            }\n            var tmp = [187, 189, 32]; // =-spacebar\n            for (var i=48; i<=90; i++) tmp.push(i); // 0-9,a-z,A-Z\n            if (tmp.indexOf(key) != -1 && !event.ctrlKey && !event.metaKey && !cancel) {\n                if (columns.length == 0) columns.push(0);\n                var tmp = String.fromCharCode(key);\n                if (key == 187) tmp = '=';\n                if (key == 189) tmp = '-';\n                if (!shiftKey)  tmp = tmp.toLowerCase();\n                obj.editField(recid, columns[0], tmp, event);\n                cancel = true;\n            }\n            if (cancel) { // cancel default behaviour\n                if (event.preventDefault) event.preventDefault();\n            }\n            // event after\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n\n            function selectTopRecord() {\n                var ind = Math.floor((records[0].scrollTop + (records.height() / 2.1)) / obj.recordHeight);\n                if (!obj.records[ind]) ind = 0;\n                obj.select({ recid: obj.records[ind].recid, column: 0});\n            }\n\n            function tmpUnselect () {\n                if (obj.last.sel_type != 'click') return false;\n                if (obj.selectType != 'row') {\n                    obj.last.sel_type = 'key';\n                    if (sel.length > 1) {\n                        for (var s = 0; s < sel.length; s++) {\n                            if (sel[s].recid == obj.last.sel_recid && sel[s].column == obj.last.sel_col) {\n                                sel.splice(s, 1);\n                                break;\n                            }\n                        }\n                        obj.unselect.apply(obj, sel);\n                        return true;\n                    }\n                    return false;\n                } else {\n                    obj.last.sel_type = 'key';\n                    if (sel.length > 1) {\n                        sel.splice(sel.indexOf(obj.records[obj.last.sel_ind].recid), 1);\n                        obj.unselect.apply(obj, sel);\n                        return true;\n                    }\n                    return false;\n                }\n            }\n        },\n\n        scrollIntoView: function (ind) {\n            var buffered = this.records.length;\n            if (this.searchData.length != 0 && !this.url) buffered = this.last.searchIds.length;\n            if (typeof ind == 'undefined') {\n                var sel = this.getSelection();\n                if (sel.length == 0) return;\n                ind = this.get(sel[0], true);\n            }\n            var records = $('#grid_'+ this.name +'_records');\n            if (buffered == 0) return;\n            // if all records in view\n            var len = this.last.searchIds.length;\n            if (records.height() > this.recordHeight * (len > 0 ? len : buffered)) return;\n            if (len > 0) ind = this.last.searchIds.indexOf(ind); // if seach is applied\n            // scroll to correct one\n            var t1 = Math.floor(records[0].scrollTop / this.recordHeight);\n            var t2 = t1 + Math.floor(records.height() / this.recordHeight);\n            if (ind == t1) records.animate({ 'scrollTop': records.scrollTop() - records.height() / 1.3 }, 250, 'linear');\n            if (ind == t2) records.animate({ 'scrollTop': records.scrollTop() + records.height() / 1.3 }, 250, 'linear');\n            if (ind < t1 || ind > t2) records.animate({ 'scrollTop': (ind - 1) * this.recordHeight });\n        },\n\n        dblClick: function (recid, event) {\n            // find columns\n            var column = null;\n            if (typeof recid == 'object') {\n                column = recid.column;\n                recid  = recid.recid;\n            }\n            if (typeof event == 'undefined') event = {};\n            // column user clicked on\n            if (column == null && event.target) {\n                var tmp = event.target;\n                if (tmp.tagName != 'TD') tmp = $(tmp).parents('td')[0];\n                column = parseInt($(tmp).attr('col'));\n            }\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'dblClick', recid: recid, column: column, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // default action\n            this.selectNone();\n            var col = this.columns[column];\n            if (col && $.isPlainObject(col.editable)) {\n                this.editField(recid, column, null, event);\n            } else {\n                this.select({ recid: recid, column: column });\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        contextMenu: function (recid, event) {\n            var obj = this;\n            if (obj.last.userSelect == 'text') return;\n            if (typeof event == 'undefined') event = { offsetX: 0, offsetY: 0, target: $('#grid_'+ obj.name +'_rec_'+ recid)[0] };\n            if (typeof event.offsetX === 'undefined') {\n                event.offsetX = event.layerX - event.target.offsetLeft;\n                event.offsetY = event.layerY - event.target.offsetTop;\n            }\n            if (w2utils.isFloat(recid)) recid = parseFloat(recid);\n            if (this.getSelection().indexOf(recid) == -1) obj.click(recid);\n            // need timeout to allow click to finish first\n            setTimeout(function () {\n                // event before\n                var eventData = obj.trigger({ phase: 'before', type: 'contextMenu', target: obj.name, originalEvent: event, recid: recid });\n                if (eventData.isCancelled === true) return;\n                // default action\n                if (obj.menu.length > 0) {\n                    $(obj.box).find(event.target)\n                        .w2menu(obj.menu, {\n                            left    : event.offsetX,\n                            onSelect: function (event) { \n                                obj.menuClick(recid, parseInt(event.index), event.originalEvent); \n                            }\n                        }\n                    );\n                }\n                // event after\n                obj.trigger($.extend(eventData, { phase: 'after' }));\n            }, 150); // need timer 150 for FF\n            // cancel event\n            if (event.preventDefault) event.preventDefault();\n        },\n\n        menuClick: function (recid, index, event) {\n            var obj = this;\n            // event before\n            var eventData = obj.trigger({ phase: 'before', type: 'menuClick', target: obj.name, originalEvent: event, \n                recid: recid, menuIndex: index, menuItem: obj.menu[index] });\n            if (eventData.isCancelled === true) return;\n            // default action\n            // -- empty\n            // event after\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        toggle: function (recid) {\n            var rec = this.get(recid);\n            if (rec.expanded === true) return this.collapse(recid); else return this.expand(recid);\n        },\n\n        expand: function (recid) {\n            var rec = this.get(recid);\n            var obj = this;\n            var id  = w2utils.escapeId(recid);\n            if ($('#grid_'+ this.name +'_rec_'+ id +'_expanded_row').length > 0) return false;\n            if (rec.expanded == 'none') return false;\n            // insert expand row\n            var tmp = 1 + (this.show.selectColumn ? 1 : 0);\n            var addClass = ''; // ($('#grid_'+this.name +'_rec_'+ w2utils.escapeId(recid)).hasClass('w2ui-odd') ? 'w2ui-odd' : 'w2ui-even');\n            $('#grid_'+ this.name +'_rec_'+ id).after(\n                    '<tr id=\"grid_'+ this.name +'_rec_'+ recid +'_expanded_row\" class=\"w2ui-expanded-row '+ addClass +'\">'+\n                        (this.show.lineNumbers ? '<td class=\"w2ui-col-number\"></td>' : '') +\n                    '    <td class=\"w2ui-grid-data w2ui-expanded1\" colspan=\"'+ tmp +'\"><div style=\"display: none\"></div></td>'+\n                    '    <td colspan=\"100\" class=\"w2ui-expanded2\">'+\n                    '        <div id=\"grid_'+ this.name +'_rec_'+ recid +'_expanded\" style=\"opacity: 0\"></div>'+\n                    '    </td>'+\n                    '</tr>');\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'expand', target: this.name, recid: recid,\n                box_id: 'grid_'+ this.name +'_rec_'+ recid +'_expanded', ready: ready });\n            if (eventData.isCancelled === true) {\n                $('#grid_'+ this.name +'_rec_'+ id +'_expanded_row').remove();\n                return;\n            }\n            // default action\n            $('#grid_'+ this.name +'_rec_'+ id).attr('expanded', 'yes').addClass('w2ui-expanded');\n            $('#grid_'+ this.name +'_rec_'+ id +'_expanded_row').show();\n            $('#grid_'+ this.name +'_cell_'+ this.get(recid, true) +'_expand div').html('<div class=\"w2ui-spinner\" style=\"width: 16px; height: 16px; margin: -2px 2px;\"></div>');\n            rec.expanded = true;\n            // check if height of expanded row > 5 then remove spinner\n            setTimeout(ready, 300);\n            function ready() {\n                var div1 = $('#grid_'+ obj.name +'_rec_'+ id +'_expanded');\n                var div2 = $('#grid_'+ obj.name +'_rec_'+ id +'_expanded_row .w2ui-expanded1 > div');\n                if (div1.height() < 5) return;\n                div1.css('opacity', 1);\n                div2.show().css('opacity', 1);\n                $('#grid_'+ obj.name +'_cell_'+ obj.get(recid, true) +'_expand div').html('-');\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            this.resizeRecords();\n            return true;\n        },\n\n        collapse: function (recid) {\n            var rec = this.get(recid);\n            var obj = this;\n            var id  = w2utils.escapeId(recid);\n            if ($('#grid_'+ this.name +'_rec_'+ id +'_expanded_row').length == 0) return false;\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'collapse', target: this.name, recid: recid,\n                box_id: 'grid_'+ this.name +'_rec_'+ id +'_expanded' });\n            if (eventData.isCancelled === true) return;\n            // default action\n            $('#grid_'+ this.name +'_rec_'+ id).removeAttr('expanded').removeClass('w2ui-expanded');\n            $('#grid_'+ this.name +'_rec_'+ id +'_expanded').css('opacity', 0);\n            $('#grid_'+ this.name +'_cell_'+ this.get(recid, true) +'_expand div').html('+');\n            setTimeout(function () {\n                $('#grid_'+ obj.name +'_rec_'+ id +'_expanded').height('0px');\n                setTimeout(function () {\n                    $('#grid_'+ obj.name +'_rec_'+ id +'_expanded_row').remove();\n                    delete rec.expanded;\n                    // event after\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                    obj.resizeRecords();\n                }, 300);\n            }, 200);\n            return true;\n        },\n\n        sort: function (field, direction, multiField) { // if no params - clears sort\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'sort', target: this.name, field: field, direction: direction, multiField: multiField });\n            if (eventData.isCancelled === true) return;\n            // check if needed to quit\n            if (typeof field != 'undefined') {\n                // default action\n                var sortIndex = this.sortData.length;\n                for (var s = 0; s < this.sortData.length; s++) {\n                    if (this.sortData[s].field == field) { sortIndex = s; break; }\n                }\n                if (typeof direction == 'undefined' || direction == null) {\n                    if (typeof this.sortData[sortIndex] == 'undefined') {\n                        direction = 'asc';\n                    } else {\n                        switch (String(this.sortData[sortIndex].direction)) {\n                            case 'asc'  : direction = 'desc'; break;\n                            case 'desc' : direction = 'asc';  break;\n                            default     : direction = 'asc';  break;\n                        }\n                    }\n                }\n                if (this.multiSort === false) { this.sortData = []; sortIndex = 0; }\n                if (multiField != true) { this.sortData = []; sortIndex = 0; }\n                // set new sort\n                if (typeof this.sortData[sortIndex] == 'undefined') this.sortData[sortIndex] = {};\n                this.sortData[sortIndex].field        = field;\n                this.sortData[sortIndex].direction = direction;\n            } else {\n                this.sortData = [];\n            }\n            this.selectNone();\n            // if local\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (!url) {\n                this.localSort();\n                if (this.searchData.length > 0) this.localSearch(true);\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n                this.refresh();\n            } else {\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n                this.last.xhr_offset = 0;\n                this.reload();\n            }\n        },\n\n        copy: function () {\n            var sel = this.getSelection();\n            if (sel.length == 0) return '';\n            var text = '';\n            if (typeof sel[0] == 'object') { // cell copy\n                // find min/max column\n                var minCol = sel[0].column;\n                var maxCol = sel[0].column;\n                var recs   = [];\n                for (var s = 0; s < sel.length; s++) {\n                    if (sel[s].column < minCol) minCol = sel[s].column;\n                    if (sel[s].column > maxCol) maxCol = sel[s].column;\n                    if (recs.indexOf(sel[s].index) == -1) recs.push(sel[s].index);\n                }\n                recs.sort(function(a, b) { return a-b }); // sort function must be for numerical sort\n                for (var r = 0 ; r < recs.length; r++) {\n                    var ind = recs[r];\n                    for (var c = minCol; c <= maxCol; c++) {\n                        var col = this.columns[c];\n                        if (col.hidden === true) continue;\n                        text += w2utils.stripTags(this.getCellHTML(ind, c)) + '\\t';\n                    }\n                    text = text.substr(0, text.length-1); // remove last \\t\n                    text += '\\n';\n                }\n            } else { // row copy\n                // copy headers\n                for (var c = 0; c < this.columns.length; c++) {\n                    var col = this.columns[c];\n                    if (col.hidden === true) continue;\n                    text += '\"' + w2utils.stripTags(col.caption ? col.caption : col.field) + '\"\\t';\n                }\n                text = text.substr(0, text.length-1); // remove last \\t\n                text += '\\n';\n                // copy selected text                \n                for (var s = 0; s < sel.length; s++) {\n                    var ind = this.get(sel[s], true);\n                    for (var c = 0; c < this.columns.length; c++) {\n                        var col = this.columns[c];\n                        if (col.hidden === true) continue;\n                        text += '\"' + w2utils.stripTags(this.getCellHTML(ind, c)) + '\"\\t';\n                    }\n                    text = text.substr(0, text.length-1); // remove last \\t\n                    text += '\\n';\n                }\n            }\n            text = text.substr(0, text.length - 1);\n            // before event\n            var eventData = this.trigger({ phase: 'before', type: 'copy', target: this.name, text: text });\n            if (eventData.isCancelled === true) return '';\n            text = eventData.text;\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return text;\n        },\n\n        paste: function (text) {\n            var sel = this.getSelection();\n            var ind = this.get(sel[0].recid, true);\n            var col = sel[0].column;\n            // before event\n            var eventData = this.trigger({ phase: 'before', type: 'paste', target: this.name, text: text, index: ind, column: col });\n            if (eventData.isCancelled === true) return;\n            text = eventData.text;\n            // default action\n            if (this.selectType == 'row' || sel.length == 0) {\n                console.log('ERROR: You can paste only if grid.selectType = \\'cell\\' and when at least one cell selected.');\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n                return;\n            }\n            var newSel = [];\n            var text   = text.split('\\n');\n            for (var t = 0; t < text.length; t++) {\n                var tmp  = text[t].split('\\t');\n                var cnt  = 0;\n                var rec  = this.records[ind];\n                var cols = [];\n                for (var dt = 0; dt < tmp.length; dt++) {\n                    if (!this.columns[col + cnt]) continue;\n                    var field = this.columns[col + cnt].field;\n                    rec.changes = rec.changes || {};\n                    rec.changes[field] = tmp[dt];\n                    cols.push(col + cnt);\n                    cnt++;\n                }\n                for (var c = 0; c < cols.length; c++) newSel.push({ recid: rec.recid, column: cols[c] });\n                ind++;\n            }\n            this.selectNone();\n            this.select.apply(this, newSel);\n            this.refresh();\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        // ==================================================\n        // --- Common functions\n\n        resize: function () {\n            var obj  = this;\n            var time = (new Date()).getTime();\n            //if (window.getSelection) window.getSelection().removeAllRanges(); // clear selection\n            // make sure the box is right\n            if (!this.box || $(this.box).attr('name') != this.name) return;\n            // determine new width and height\n            $(this.box).find('> div')\n                .css('width', $(this.box).width())\n                .css('height', $(this.box).height());\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'resize', target: this.name });\n            if (eventData.isCancelled === true) return;\n            // resize\n            obj.resizeBoxes();\n            obj.resizeRecords();\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        update: function () {\n            var time = (new Date()).getTime();\n            if (this.box == null) return 0;\n            for (var index = this.last.range_start - 1; index <= this.last.range_end - 1; index++) {\n                if (index < 0) continue;\n                var rec = this.records[index];\n                for (var col_ind = 0; col_ind < this.columns.length; col_ind++) {\n                    var cell = $(this.box).find('#grid_'+ this.name + '_data_'+ index +'_'+ col_ind);\n                    cell.html(this.getCellHTML(index, col_ind, false));\n                    // assign style\n                    if (rec.style != null && !$.isEmptyObject(rec.style)) {\n                        if (typeof rec.style == 'string') {\n                            $(this.box).find('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(rec.recid)).attr('style', rec.style);\n                        }\n                        if ($.isPlainObject(rec.style) && typeof rec.style[col_ind] == 'string') {\n                            cell.attr('style', rec.style[col_ind])\n                        }\n                    } else {\n                        cell.attr('style', '');\n                    }\n                }\n            }\n            return (new Date()).getTime() - time;\n        },\n\n        refreshCell: function (recid, field) {\n            var index     = this.get(recid, true);\n            var isSummary = (this.records[index] && this.records[index].recid == recid ? false : true);\n            var col_ind   = this.getColumn(field, true);\n            var rec       = (isSummary ? this.summary[index] : this.records[index]);\n            var col       = this.columns[col_ind];\n            var cell      = $(this.box).find('#grid_'+ this.name + '_data_'+ index +'_'+ col_ind);\n            // set cell html and changed flag\n            cell.html(this.getCellHTML(index, col_ind, isSummary));\n            if (rec.changes && typeof rec.changes[col.field] != 'undefined') {\n                cell.addClass('w2ui-changed');\n            } else {\n                cell.removeClass('w2ui-changed');\n            }\n            // assign style\n            if (rec.style != null && !$.isEmptyObject(rec.style)) {\n                if (typeof rec.style == 'string') {\n                    $(this.box).find('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(rec.recid)).attr('style', rec.style);\n                }\n                if ($.isPlainObject(rec.style) && typeof rec.style[col_ind] == 'string') {\n                    cell.attr('style', rec.style[col_ind])\n                }\n            } else {\n                cell.attr('style', '');\n            }\n        },\n\n        refreshRow: function (recid) {\n            var tr1 = $(this.box).find('#grid_'+ this.name +'_frec_'+ w2utils.escapeId(recid));\n            var tr2 = $(this.box).find('#grid_'+ this.name +'_rec_'+ w2utils.escapeId(recid));\n            if (tr1.length > 0) {\n                var ind  = this.get(recid, true);\n                var line = tr1.attr('line');\n                var isSummary = (this.records[ind] && this.records[ind].recid == recid ? false : true);\n                // if it is searched, find index in search array\n                var url = (typeof this.url != 'object' ? this.url : this.url.get);\n                if (this.searchData.length > 0 && !url) for (var s = 0; s < this.last.searchIds.length; s++) if (this.last.searchIds[s] == ind) ind = s;\n                var rec_html = this.getRecordHTML(ind, line, isSummary);\n                $(tr1).replaceWith(rec_html[0]);\n                $(tr2).replaceWith(rec_html[1]);\n                if (isSummary) this.resize();\n            }\n        },\n\n        refresh: function () {\n            var obj  = this;\n            var time = (new Date()).getTime();\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (this.total <= 0 && !url && this.searchData.length == 0) {\n                this.total = this.records.length;\n            }\n            //if (window.getSelection) window.getSelection().removeAllRanges(); // clear selection\n            this.toolbar.disable('w2ui-edit', 'w2ui-delete');\n            if (!this.box) return;\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'refresh' });\n            if (eventData.isCancelled === true) return;\n            // -- header\n            if (this.show.header) {\n                $('#grid_'+ this.name +'_header').html(this.header +'&nbsp;').show();\n            } else {\n                $('#grid_'+ this.name +'_header').hide();\n            }\n            // -- toolbar\n            if (this.show.toolbar) {\n                // if select-collumn is checked - no toolbar refresh\n                if (this.toolbar && this.toolbar.get('w2ui-column-on-off') && this.toolbar.get('w2ui-column-on-off').checked) {\n                    // no action\n                } else {\n                    $('#grid_'+ this.name +'_toolbar').show();\n                    // refresh toolbar all but search field\n                    if (typeof this.toolbar == 'object') {\n                        var tmp = this.toolbar.items;\n                        for (var t = 0; t < tmp.length; t++) {\n                            if (tmp[t].id == 'w2ui-search' || tmp[t].type == 'break') continue;\n                            this.toolbar.refresh(tmp[t].id);\n                        }\n                    }\n                }\n            } else {\n                $('#grid_'+ this.name +'_toolbar').hide();\n            }\n            // -- make sure search is closed\n            this.searchClose();\n            // search placeholder\n            var el = $('#grid_'+ obj.name +'_search_all');\n            if (!this.multiSearch && this.last.field == 'all' && this.searches.length > 0) {\n                this.last.field   = this.searches[0].field;\n                this.last.caption = this.searches[0].caption;\n            }\n            for (var s = 0; s < this.searches.length; s++) {\n                if (this.searches[s].field == this.last.field) this.last.caption = this.searches[s].caption;\n            }\n            if (this.last.multi) {\n                el.attr('placeholder', '[' + w2utils.lang('Multiple Fields') + ']');\n            } else {\n                el.attr('placeholder', this.last.caption);\n            }\n            if (el.val() != this.last.search) {\n                var val = this.last.search;\n                var tmp = el.data('w2field');\n                if (tmp) val = tmp.format(val);\n                el.val(val);\n            }\n\n            // -- separate summary\n            var tmp = this.find({ summary: true }, true);\n            if (tmp.length > 0) {\n                for (var t = 0; t < tmp.length; t++) this.summary.push(this.records[tmp[t]]);\n                for (var t = tmp.length-1; t >= 0; t--) this.records.splice(tmp[t], 1);\n                this.total = this.total - tmp.length;\n            }\n\n            // -- body\n            var recHTML  = this.getRecordsHTML();\n            var colHTML  = this.getColumnsHTML();\n            var bodyHTML = \n                '<div id=\"grid_'+ this.name +'_frecords\" class=\"w2ui-grid-frecords\" style=\"margin-bottom: '+ (w2utils.scrollBarSize() - 1) +'px;\">'+\n                    recHTML[0] +\n                '</div>'+\n                '<div id=\"grid_'+ this.name +'_records\" class=\"w2ui-grid-records\" onscroll=\"w2ui[\\''+ this.name +'\\'].scroll(event);\">' +\n                    recHTML[1] + \n                '</div>'+\n                '<div id=\"grid_'+ this.name +'_scroll1\" class=\"w2ui-grid-scroll1\" style=\"height: '+ w2utils.scrollBarSize() +'px\"></div>'+\n                // Columns need to be after to be able to overlap\n                '<div id=\"grid_'+ this.name +'_fcolumns\" class=\"w2ui-grid-columns\">'+\n                '    <table>'+ colHTML[0] +'</table>'+\n                '</div>'+\n                '<div id=\"grid_'+ this.name +'_columns\" class=\"w2ui-grid-columns\">'+\n                '    <table>'+ colHTML[1] +'</table>'+\n                '</div>'; \n            $('#grid_'+ this.name +'_body').html(bodyHTML);\n            // show summary records\n            if (this.summary.length > 0) {\n                var sumHTML = this.getSummaryHTML();\n                $('#grid_'+ this.name +'_fsummary').html(sumHTML[0]).show();\n                $('#grid_'+ this.name +'_summary').html(sumHTML[1]).show();\n            } else {\n                $('#grid_'+ this.name +'_fsummary').hide();\n                $('#grid_'+ this.name +'_summary').hide();\n            }\n            // -- footer\n            if (this.show.footer) {\n                $('#grid_'+ this.name +'_footer').html(this.getFooterHTML()).show();\n            } else {\n                $('#grid_'+ this.name +'_footer').hide();\n            }\n            // show/hide clear search link\n             if (this.searchData.length > 0) {\n                $('#grid_'+ this.name +'_searchClear').show();\n            } else {\n                $('#grid_'+ this.name +'_searchClear').hide();\n            }\n            // all selected?\n            var sel = this.last.selection;\n            if (sel.indexes.length == this.records.length || (this.searchData.length !== 0 && sel.indexes.length == this.last.searchIds.length)) {\n                $('#grid_'+ this.name +'_check_all').prop('checked', true);\n            } else {\n                $('#grid_'+ this.name +'_check_all').prop('checked', false);\n            }\n            // show number of selected\n            this.status();\n            // collapse all records\n            var rows = obj.find({ expanded: true }, true);\n            for (var r = 0; r < rows.length; r++) obj.records[rows[r]].expanded = false;\n            // mark selection\n            setTimeout(function () {\n                var str  = $.trim($('#grid_'+ obj.name +'_search_all').val());\n                if (str != '' && obj.markSearch) $(obj.box).find('.w2ui-grid-data > div').w2marker(str);\n            }, 50);\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            obj.resize();\n            obj.addRange('selection');\n            setTimeout(function () { obj.resize(); obj.scroll(); }, 1); // allow to render first\n\n            if ( obj.reorderColumns && !obj.last.columnDrag ) {\n                obj.last.columnDrag = obj.initColumnDrag();\n            } else if ( !obj.reorderColumns && obj.last.columnDrag ) {\n                obj.last.columnDrag.remove();\n            }\n            return (new Date()).getTime() - time;\n        },\n\n        render: function (box) {\n            var obj  = this;\n            var time = (new Date()).getTime();\n            //if (window.getSelection) window.getSelection().removeAllRanges(); // clear selection\n            if (box != null) {\n                if ($(this.box).find('#grid_'+ this.name +'_body').length > 0) {\n                    $(this.box)\n                        .removeAttr('name')\n                        .removeClass('w2ui-reset w2ui-grid')\n                        .html('');\n                }\n                this.box = box;\n            }\n            if (!this.box) return;\n            if (this.last.sortData == null) this.last.sortData = this.sortData;\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'render', box: box });\n            if (eventData.isCancelled === true) return;\n            // reset needed if grid existed\n            this.reset(true);\n            // insert elements\n            $(this.box)\n                .attr('name', this.name)\n                .addClass('w2ui-reset w2ui-grid')\n                .html('<div>'+\n                      '    <div id=\"grid_'+ this.name +'_header\" class=\"w2ui-grid-header\"></div>'+\n                      '    <div id=\"grid_'+ this.name +'_toolbar\" class=\"w2ui-grid-toolbar\"></div>'+\n                      '    <div id=\"grid_'+ this.name +'_body\" class=\"w2ui-grid-body\"></div>'+\n                      '    <div id=\"grid_'+ this.name +'_fsummary\" class=\"w2ui-grid-body w2ui-grid-summary\"></div>'+\n                      '    <div id=\"grid_'+ this.name +'_summary\" class=\"w2ui-grid-body w2ui-grid-summary\"></div>'+\n                      '    <div id=\"grid_'+ this.name +'_footer\" class=\"w2ui-grid-footer\"></div>'+\n                      '</div>');\n            if (this.selectType != 'row') $(this.box).addClass('w2ui-ss');\n            if ($(this.box).length > 0) $(this.box)[0].style.cssText += this.style;\n            // init toolbar\n            this.initToolbar();\n            if (this.toolbar != null) this.toolbar.render($('#grid_'+ this.name +'_toolbar')[0]);\n            // reinit search_all\n            if (this.last.field && this.last.field != 'all') {\n                var sd = this.searchData;\n                setTimeout(function () { obj.initAllField(obj.last.field, (sd.length == 1 ? sd[0].value : null)); }, 1);\n            }\n            // init footer\n            $('#grid_'+ this.name +'_footer').html(this.getFooterHTML());            \n            // refresh\n            if (!this.last.state) this.last.state = this.stateSave(true); // initial default state\n            this.stateRestore();\n            if (this.url) this.refresh(); // show empty grid (need it) - should it be only for remote data source\n            this.reload();\n\n            // init mouse events for mouse selection\n            $(this.box).on('mousedown', mouseStart);\n            $(this.box).on('selectstart', function () { return false; }); // fixes chrome cursor bug\n\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            // attach to resize event\n            if ($('.w2ui-layout').length == 0) { // if there is layout, it will send a resize event\n                this.tmp_resize = function (event) { w2ui[obj.name].resize(); }\n                $(window).off('resize', this.tmp_resize).on('resize', this.tmp_resize);\n            }\n            return (new Date()).getTime() - time;\n\n            function mouseStart (event) {\n                if (event.which != 1) return; // if not left mouse button\n                // restore css user-select\n                if (obj.last.userSelect == 'text') {\n                    delete obj.last.userSelect;\n                    $(obj.box).find('.w2ui-grid-body').css(w2utils.cssPrefix('user-select', 'none'));\n                    $(this.box).on('selectstart', function () { return false; });\n                }\n                // regular record select\n                if ($(event.target).parents().hasClass('w2ui-head') || $(event.target).hasClass('w2ui-head')) return;\n                if (obj.last.move && obj.last.move.type == 'expand') return;\n                // if altKey - alow text selection\n                if (event.altKey) {\n                    $(obj.box).off('selectstart');\n                    $(obj.box).find('.w2ui-grid-body').css(w2utils.cssPrefix('user-select', 'text'));\n                    obj.selectNone();\n                    obj.last.move = { type: 'text-select' };\n                    obj.last.userSelect = 'text';\n                } else {\n                    if (!obj.multiSelect) return;\n                    obj.last.move = {\n                        x      : event.screenX,\n                        y      : event.screenY,\n                        divX   : 0,\n                        divY   : 0,\n                        recid  : $(event.target).parents('tr').attr('recid'),\n                        column : (event.target.tagName == 'TD' ? $(event.target).attr('col') : $(event.target).parents('td').attr('col')),\n                        type   : 'select',\n                        ghost  : false,\n                        start  : true\n                    };\n                }\n                if (obj.reorderRows == true) {\n                    var el = event.target;\n                    if (el.tagName != 'TD') el = $(el).parents('td')[0];\n                    if ($(el).hasClass('w2ui-col-number')) {\n                        obj.selectNone();\n                        obj.last.move.reorder = true; \n                        // supress hover\n                        var eColor = $(obj.box).find('.w2ui-even.w2ui-empty-record').css('background-color');\n                        var oColor = $(obj.box).find('.w2ui-odd.w2ui-empty-record').css('background-color');\n                        $(obj.box).find('.w2ui-even td').not('.w2ui-col-number').css('background-color', eColor);\n                        $(obj.box).find('.w2ui-odd td').not('.w2ui-col-number').css('background-color', oColor);\n                        // display empty record and ghost record\n                        var mv = obj.last.move;\n                        if (!mv.ghost) {\n                            var row    = $('#grid_'+ obj.name + '_rec_'+ mv.recid);\n                            var tmp    = row.parents('table').find('tr:first-child').clone();\n                            mv.offsetY = event.offsetY;\n                            mv.from    = mv.recid;\n                            mv.pos     = row.position();\n                            mv.ghost   = $(row).clone(true);\n                            mv.ghost.removeAttr('id');\n                            row.find('td').remove();\n                            row.append('<td colspan=\"1000\" style=\"height: '+ obj.recordHeight +'px; background-color: #eee; border-bottom: 1px dashed #aaa; border-top: 1px dashed #aaa;\"></td>');\n                            var recs = $(obj.box).find('.w2ui-grid-records');\n                            recs.append('<table id=\"grid_'+ obj.name + '_ghost\" style=\"position: absolute; z-index: 999999; opacity: 0.7; pointer-events: none;\"></table>');\n                            $('#grid_'+ obj.name + '_ghost').append(tmp).append(mv.ghost);\n                        }\n                        var ghost = $('#grid_'+ obj.name + '_ghost');\n                        var recs  = $(obj.box).find('.w2ui-grid-records');\n                        ghost.css({\n                            top  : mv.pos.top + recs.scrollTop(),\n                            left : mv.pos.left,\n                            \"border-top\"    : '1px solid #aaa',\n                            \"border-bottom\" : '1px solid #aaa'\n                        });\n                    } else {\n                        obj.last.move.reorder = false;\n                    }\n                }\n                $(document).on('mousemove', mouseMove);\n                $(document).on('mouseup', mouseStop);\n            }\n\n            function mouseMove (event) {\n                var mv = obj.last.move;\n                if (!mv || mv.type != 'select') return;\n                mv.divX = (event.screenX - mv.x);\n                mv.divY = (event.screenY - mv.y);\n                if (Math.abs(mv.divX) <= 1 && Math.abs(mv.divY) <= 1) return; // only if moved more then 1px\n                obj.last.cancelClick = true;\n                if (obj.reorderRows == true && obj.last.move.reorder) {\n                    var tmp   = $(event.target).parents('tr');\n                    var recid = tmp.attr('recid');\n                    if (recid != mv.from) {\n                        var row1 = $('#grid_'+ obj.name + '_rec_'+ mv.recid);\n                        var row2 = $('#grid_'+ obj.name + '_rec_'+ recid);\n                        $(obj.box).find('.tmp-ghost').css('border-top', '0px');\n                        row2.addClass('tmp-ghost').css('border-top', '2px solid #769EFC');\n                        // MOVABLE GHOST\n                        // if (event.screenY - mv.lastY < 0) row1.after(row2); else row2.after(row1);\n                        mv.lastY = event.screenY;\n                        mv.to      = recid;\n                    }\n                    var ghost = $('#grid_'+ obj.name + '_ghost');\n                    var recs  = $(obj.box).find('.w2ui-grid-records');\n                    ghost.css({\n                        top  : mv.pos.top + mv.divY + recs.scrollTop(),\n                        left : mv.pos.left\n                    });\n                    return;\n                }\n                if (mv.start && mv.recid) {\n                    obj.selectNone();\n                    mv.start = false;\n                }\n                var newSel= [];\n                var recid = (event.target.tagName == 'TR' ? $(event.target).attr('recid') : $(event.target).parents('tr').attr('recid'));\n                if (typeof recid == 'undefined') return;\n                var ind1  = obj.get(mv.recid, true);\n                // |:wolfmanx:| this happens when selection is started on summary row\n                if (ind1 === null) return;\n                var ind2  = obj.get(recid, true);\n                // this happens when selection is extended into summary row (a good place to implement scrolling)\n                if (ind2 === null) return;\n                var col1 = parseInt(mv.column);\n                var col2 = parseInt(event.target.tagName == 'TD' ? $(event.target).attr('col') : $(event.target).parents('td').attr('col'));\n                if (ind1 > ind2) { var tmp = ind1; ind1 = ind2; ind2 = tmp; }\n                // check if need to refresh\n                var tmp = 'ind1:'+ ind1 +',ind2;'+ ind2 +',col1:'+ col1 +',col2:'+ col2;\n                if (mv.range == tmp) return;\n                mv.range = tmp;\n                for (var i = ind1; i <= ind2; i++) {\n                    if (obj.last.searchIds.length > 0 && obj.last.searchIds.indexOf(i) == -1) continue;\n                    if (obj.selectType != 'row') {\n                        if (col1 > col2) { var tmp = col1; col1 = col2; col2 = tmp; }\n                        var tmp = [];\n                        for (var c = col1; c <= col2; c++) {\n                            if (obj.columns[c].hidden) continue;\n                            newSel.push({ recid: obj.records[i].recid, column: parseInt(c) });\n                        }\n                    } else {\n                        newSel.push(obj.records[i].recid);\n                    }\n                }\n                if (obj.selectType != 'row') {\n                    var sel = obj.getSelection();\n                    // add more items\n                    var tmp = [];\n                    for (var ns = 0; ns < newSel.length; ns++) {\n                        var flag = false;\n                        for (var s = 0; s < sel.length; s++) if (newSel[ns].recid == sel[s].recid && newSel[ns].column == sel[s].column) flag = true;\n                        if (!flag) tmp.push({ recid: newSel[ns].recid, column: newSel[ns].column });\n                    }\n                    obj.select.apply(obj, tmp);\n                    // remove items\n                    var tmp = [];\n                    for (var s = 0; s < sel.length; s++) {\n                        var flag = false;\n                        for (var ns = 0; ns < newSel.length; ns++) if (newSel[ns].recid == sel[s].recid && newSel[ns].column == sel[s].column) flag = true;\n                        if (!flag) tmp.push({ recid: sel[s].recid, column: sel[s].column });\n                    }\n                    obj.unselect.apply(obj, tmp);\n                } else {\n                    if (obj.multiSelect) {\n                        var sel = obj.getSelection();\n                        for (var ns = 0; ns < newSel.length; ns++) if (sel.indexOf(newSel[ns]) == -1) obj.select(newSel[ns]); // add more items\n                        for (var s = 0; s < sel.length; s++) if (newSel.indexOf(sel[s]) == -1) obj.unselect(sel[s]); // remove items\n                    }\n                }\n            }\n\n            function mouseStop (event) {\n                var mv = obj.last.move;\n                setTimeout(function () { delete obj.last.cancelClick; }, 1);\n                if ($(event.target).parents().hasClass('.w2ui-head') || $(event.target).hasClass('.w2ui-head')) return;\n                if (mv && mv.type == 'select') {\n                    if (obj.reorderRows == true && obj.last.move.reorder) {\n                        // event\n                        var eventData = obj.trigger({ phase: 'before', target: obj.name, type: 'reorderRow', recid: mv.from, moveAfter: mv.to });\n                        if (eventData.isCancelled === true) {\n                            $('#grid_'+ obj.name + '_ghost').remove();\n                            obj.refresh();\n                            return;\n                        }\n                        // default behavior\n                        var ind1 = obj.get(mv.from, true);\n                        var ind2 = obj.get(mv.to, true);\n                        var tmp  = obj.records[ind1];\n                        // swap records\n                        if (ind1 != null && ind2 != null) {\n                            obj.records.splice(ind1, 1);\n                            if (ind1 > ind2) {\n                                obj.records.splice(ind2, 0, tmp);\n                            } else {\n                                obj.records.splice(ind2 - 1, 0, tmp);\n                            }\n                        }\n                        $('#grid_'+ obj.name + '_ghost').remove();\n                        obj.refresh();\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                    }\n                }\n                delete obj.last.move;\n                $(document).off('mousemove', mouseMove);\n                $(document).off('mouseup', mouseStop);\n            }\n        },\n\n        destroy: function () {\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'destroy' });\n            if (eventData.isCancelled === true) return;\n            // remove events\n            if (this.tmp_resize) $(window).off('resize', this.tmp_resize);\n            // clean up\n            if (typeof this.toolbar == 'object' && this.toolbar.destroy) this.toolbar.destroy();\n            if ($(this.box).find('#grid_'+ this.name +'_body').length > 0) {\n                $(this.box)\n                    .removeAttr('name')\n                    .removeClass('w2ui-reset w2ui-grid')\n                    .html('');\n            }\n            delete w2ui[this.name];\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        // ===========================================\n        // --- Internal Functions\n\n        initColumnOnOff: function () {\n            if (!this.show.toolbarColumns) return;\n            var obj = this;\n            var col_html =  '<div class=\"w2ui-col-on-off\">'+\n                            '<table><tr>'+\n                            '<td style=\"width: 30px\">'+\n                            '    <input id=\"grid_'+ this.name +'_column_ln_check\" type=\"checkbox\" tabIndex=\"-1\" '+ (obj.show.lineNumbers ? 'checked' : '') +\n                            '        onclick=\"w2ui[\\''+ obj.name +'\\'].columnOnOff(this, event, \\'line-numbers\\');\">'+\n                            '</td>'+\n                            '<td onclick=\"w2ui[\\''+ obj.name +'\\'].columnOnOff(this, event, \\'line-numbers\\'); $(document).click();\">'+\n                            '    <label for=\"grid_'+ this.name +'_column_ln_check\">'+ w2utils.lang('Line #') +'</label>'+\n                            '</td></tr>';\n            for (var c = 0; c < this.columns.length; c++) {\n                var col = this.columns[c];\n                var tmp = this.columns[c].caption;\n                if (col.hideable === false) continue;\n                if (!tmp && this.columns[c].hint) tmp = this.columns[c].hint;\n                if (!tmp) tmp = '- column '+ (parseInt(c) + 1) +' -';\n                col_html += '<tr>'+\n                    '<td style=\"width: 30px\">'+\n                    '    <input id=\"grid_'+ this.name +'_column_'+ c +'_check\" type=\"checkbox\" tabIndex=\"-1\" '+ (col.hidden ? '' : 'checked') +\n                    '        onclick=\"w2ui[\\''+ obj.name +'\\'].columnOnOff(this, event, \\''+ col.field +'\\');\">'+\n                    '</td>'+\n                    '<td>'+\n                    '    <label for=\"grid_'+ this.name +'_column_'+ c +'_check\">'+ tmp +    '</label>'+\n                    '</td>'+\n                    '</tr>';\n            }\n            col_html += '<tr><td colspan=\"2\"><div style=\"border-top: 1px solid #ddd;\"></div></td></tr>';\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (url && obj.show.skipRecords) {\n                col_html +=\n                        '<tr><td colspan=\"2\" style=\"padding: 0px\">'+\n                        '    <div style=\"cursor: pointer; padding: 2px 8px; cursor: default\">'+ w2utils.lang('Skip') +\n                        '        <input type=\"text\" style=\"width: 45px\" value=\"'+ this.offset +'\" '+\n                        '            onkeypress=\"if (event.keyCode == 13) { '+\n                        '               w2ui[\\''+ obj.name +'\\'].skip(this.value); '+\n                        '               $(document).click(); '+\n                        '            }\"> '+ w2utils.lang('Records')+\n                        '    </div>'+\n                        '</td></tr>';\n            }\n            col_html += '<tr><td colspan=\"2\" onclick=\"w2ui[\\''+ obj.name +'\\'].stateSave(); $(document).click();\">'+\n                        '    <div style=\"cursor: pointer; padding: 4px 8px; cursor: default\">'+ w2utils.lang('Save Grid State') + '</div>'+\n                        '</td></tr>'+\n                        '<tr><td colspan=\"2\" onclick=\"w2ui[\\''+ obj.name +'\\'].stateReset(); $(document).click();\">'+\n                        '    <div style=\"cursor: pointer; padding: 4px 8px; cursor: default\">'+ w2utils.lang('Restore Default State') + '</div>'+\n                        '</td></tr>';\n            col_html += \"</table></div>\";\n            this.toolbar.get('w2ui-column-on-off').html = col_html;\n        },\n\n        /**\n         *\n         * @param box, grid object\n         * @returns {{remove: Function}} contains a closure around all events to ensure they are removed from the dom\n         */\n        initColumnDrag: function ( box ) {\n            //throw error if using column groups\n            if ( this.columnGroups && this.columnGroups.length ) throw 'Draggable columns are not currently supported with column groups.';\n\n            var obj = this,\n                _dragData = {};\n                _dragData.lastInt = null;\n                _dragData.pressed = false;\n                _dragData.timeout = null;_dragData.columnHead = null;\n\n            //attach orginal event listener\n            $(obj.box).on('mousedown', dragColStart);\n            $(obj.box).on('mouseup', catchMouseup);\n\n            function catchMouseup(){\n                _dragData.pressed = false;\n                clearTimeout( _dragData.timeout );\n            }\n            /**\n             *\n             * @param event, mousedown\n             * @returns {boolean} false, preventsDefault\n             */\n            function dragColStart ( event ) {\n                if ( _dragData.timeout ) clearTimeout( _dragData.timeout );\n                var self = this;\n                _dragData.pressed = true;\n\n                _dragData.timeout = setTimeout(function(){\n                    if ( !_dragData.pressed ) return;\n\n                    var eventData,\n                        columns,\n                        selectedCol,\n                        origColumn,\n                        origColumnNumber,\n                        invalidPreColumns = [ 'w2ui-col-number', 'w2ui-col-expand', 'w2ui-col-select' ],\n                        invalidPostColumns = [ 'w2ui-head-last' ],\n                        invalidColumns = invalidPreColumns.concat( invalidPostColumns ),\n                        preColumnsSelector = '.w2ui-col-number, .w2ui-col-expand, .w2ui-col-select',\n                        preColHeadersSelector = '.w2ui-head.w2ui-col-number, .w2ui-head.w2ui-col-expand, .w2ui-head.w2ui-col-select';\n\n                    // do nothing if it is not a header\n                    if ( !$( event.originalEvent.target ).parents().hasClass( 'w2ui-head' ) ) return;\n\n                    // do nothing if it is an invalid column\n                    for ( var i = 0, l = invalidColumns.length; i < l; i++ ){\n                        if ( $( event.originalEvent.target ).parents().hasClass( invalidColumns[ i ] ) ) return;\n                    }\n\n                    _dragData.numberPreColumnsPresent = $( obj.box ).find( preColHeadersSelector ).length;\n\n                    //start event for drag start\n                    _dragData.columnHead = origColumn = $( event.originalEvent.target ).parents( '.w2ui-head' );\n                    origColumnNumber = parseInt( origColumn.attr( 'col' ), 10);\n                    eventData = obj.trigger({ type: 'columnDragStart', phase: 'before', originalEvent: event, origColumnNumber: origColumnNumber, target: origColumn[0] });\n                    if ( eventData.isCancelled === true ) return false;\n\n                    columns = _dragData.columns = $( obj.box ).find( '.w2ui-head:not(.w2ui-head-last)' );\n\n                    //add events\n                    $( document ).on( 'mouseup', dragColEnd );\n                    $( document ).on( 'mousemove', dragColOver );\n\n                    _dragData.originalPos = parseInt( $( event.originalEvent.target ).parent( '.w2ui-head' ).attr( 'col' ), 10 );\n                    //_dragData.columns.css({ overflow: 'visible' }).children( 'div' ).css({ overflow: 'visible' });\n\n                    //configure and style ghost image\n                    _dragData.ghost = $( self ).clone( true );\n\n                    //hide other elements on ghost except the grid body\n                    $( _dragData.ghost ).find( '[col]:not([col=\"' + _dragData.originalPos + '\"]), .w2ui-toolbar, .w2ui-grid-header' ).remove();\n                    $( _dragData.ghost ).find( preColumnsSelector ).remove();\n                    $( _dragData.ghost ).find( '.w2ui-grid-body' ).css({ top: 0 });\n\n                    selectedCol = $( _dragData.ghost ).find( '[col=\"' + _dragData.originalPos + '\"]' );\n                    $( document.body ).append( _dragData.ghost );\n\n                    $( _dragData.ghost ).css({\n                        width: 0,\n                        height: 0,\n                        margin: 0,\n                        position: 'fixed',\n                        zIndex: 999999,\n                        opacity: 0\n                    }).addClass( '.w2ui-grid-ghost' ).animate({\n                            width: selectedCol.width(),\n                            height: $(obj.box).find('.w2ui-grid-body:first').height(),\n                            left : event.pageX,\n                            top : event.pageY,\n                            opacity: .8\n                        }, 0 );\n\n                    //establish current offsets\n                    _dragData.offsets = [];\n                    for ( var i = 0, l = columns.length; i < l; i++ ) {\n                        _dragData.offsets.push( $( columns[ i ] ).offset().left );\n                    }\n\n                    //conclude event\n                    obj.trigger( $.extend( eventData, { phase: 'after' } ) );\n                }, 150 );//end timeout wrapper\n            }\n\n            function dragColOver ( event ) {\n                if ( !_dragData.pressed ) return;\n\n                var cursorX = event.originalEvent.pageX,\n                    cursorY = event.originalEvent.pageY,\n                    offsets = _dragData.offsets,\n                    lastWidth = $( '.w2ui-head:not(.w2ui-head-last)' ).width();\n\n                _dragData.targetInt = Math.max(_dragData.numberPreColumnsPresent,targetIntersection( cursorX, offsets, lastWidth ));\n\n                markIntersection( _dragData.targetInt );\n                trackGhost( cursorX, cursorY );\n            }\n\n            function dragColEnd ( event ) {\n                _dragData.pressed = false;\n\n                var eventData,\n                    target,\n                    selected,\n                    columnConfig,\n                    targetColumn,\n                    ghosts = $( '.w2ui-grid-ghost' );\n\n                //start event for drag start\n                eventData = obj.trigger({ type: 'columnDragEnd', phase: 'before', originalEvent: event, target: _dragData.columnHead[0] });\n                if ( eventData.isCancelled === true ) return false;\n\n                selected = obj.columns[ _dragData.originalPos ];\n                columnConfig = obj.columns;\n                targetColumn =  $( _dragData.columns[ Math.min(_dragData.lastInt, _dragData.columns.length - 1) ] );\n                target = (_dragData.lastInt < _dragData.columns.length) ? parseInt(targetColumn.attr('col')) : columnConfig.length;\n\n                if ( target !== _dragData.originalPos + 1 && target !== _dragData.originalPos && targetColumn && targetColumn.length ) {\n                    $( _dragData.ghost ).animate({\n                        top: $( obj.box ).offset().top,\n                        left: targetColumn.offset().left,\n                        width: 0,\n                        height: 0,\n                        opacity:.2\n                    }, 300, function(){\n                        $( this ).remove();\n                        ghosts.remove();\n                    });\n\n                    columnConfig.splice( target, 0, $.extend( {}, selected ) );\n                    columnConfig.splice( columnConfig.indexOf( selected ), 1);\n\n                } else {\n                    $( _dragData.ghost ).remove();\n                    ghosts.remove();\n                }\n\n                //_dragData.columns.css({ overflow: '' }).children( 'div' ).css({ overflow: '' });\n\n                $( document ).off( 'mouseup', dragColEnd );\n                $( document ).off( 'mousemove', dragColOver );\n                if ( _dragData.marker ) _dragData.marker.remove();\n                _dragData = {};\n\n                obj.refresh();\n\n                //conclude event\n                obj.trigger( $.extend( eventData, { phase: 'after', targetColumnNumber: target - 1 } ) );\n            }\n\n            function markIntersection( intersection ){\n                if ( !_dragData.marker && !_dragData.markerLeft ) {\n                    _dragData.marker = $('<div class=\"col-intersection-marker\">' +\n                        '<div class=\"top-marker\"></div>' +\n                        '<div class=\"bottom-marker\"></div>' +\n                        '</div>');\n                    _dragData.markerLeft = $('<div class=\"col-intersection-marker\">' +\n                        '<div class=\"top-marker\"></div>' +\n                        '<div class=\"bottom-marker\"></div>' +\n                        '</div>');\n                }\n\n                if ( !_dragData.lastInt || _dragData.lastInt !== intersection ){\n                    _dragData.lastInt = intersection;\n                    _dragData.marker.remove();\n                    _dragData.markerLeft.remove();\n                    $('.w2ui-head').removeClass('w2ui-col-intersection');\n\n                    //if the current intersection is greater than the number of columns add the marker to the end of the last column only\n                    if ( intersection >= _dragData.columns.length ) {\n                        $( _dragData.columns[ _dragData.columns.length - 1 ] ).children( 'div:last' ).append( _dragData.marker.addClass( 'right' ).removeClass( 'left' ) );\n                        $( _dragData.columns[ _dragData.columns.length - 1 ] ).addClass('w2ui-col-intersection');\n                    } else if ( intersection <= _dragData.numberPreColumnsPresent ) {\n                        //if the current intersection is on the column numbers place marker on first available column only\n                        $( _dragData.columns[ _dragData.numberPreColumnsPresent ] ).prepend( _dragData.marker.addClass( 'left' ).removeClass( 'right' ) ).css({ position: 'relative' });\n                        $( _dragData.columns[ _dragData.numberPreColumnsPresent ] ).prev().addClass('w2ui-col-intersection');\n                    } else {\n                        //otherwise prepend the marker to the targeted column and append it to the previous column\n                        $( _dragData.columns[intersection] ).children( 'div:last' ).prepend( _dragData.marker.addClass( 'left' ).removeClass( 'right' ) );\n                        $( _dragData.columns[intersection] ).prev().children( 'div:last' ).append( _dragData.markerLeft.addClass( 'right' ).removeClass( 'left' ) ).css({ position: 'relative' });\n                        $( _dragData.columns[intersection - 1] ).addClass('w2ui-col-intersection');\n                    }\n                }\n            }\n\n            function targetIntersection( cursorX, offsets, lastWidth ){\n                if ( cursorX <= offsets[0] ) {\n                    return 0;\n                } else if ( cursorX >= offsets[offsets.length - 1] + lastWidth ) {\n                    return offsets.length;\n                } else {\n                    for ( var i = 0, l = offsets.length; i < l; i++ ) {\n                        var thisOffset = offsets[ i ];\n                        var nextOffset = offsets[ i + 1 ] || offsets[ i ] + lastWidth;\n                        var midpoint = ( nextOffset - offsets[ i ]) / 2 + offsets[ i ];\n\n                        if ( cursorX > thisOffset && cursorX <= midpoint ) {\n                            return i;\n                        } else if ( cursorX > midpoint && cursorX <= nextOffset ) {\n                            return i + 1;\n                        }\n                    }\n                    return intersection;\n                }\n            }\n\n            function trackGhost( cursorX, cursorY ){\n                $( _dragData.ghost ).css({\n                    left: cursorX - 10,\n                    top: cursorY - 10\n                });\n            }\n\n            //return an object to remove drag if it has ever been enabled\n            return {\n                remove: function(){\n                    $( obj.box ).off( 'mousedown', dragColStart );\n                    $( obj.box ).off( 'mouseup', catchMouseup );\n                    $( obj.box ).find( '.w2ui-head' ).removeAttr( 'draggable' );\n                    obj.last.columnDrag = false;\n                }\n            }\n        },\n\n        columnOnOff: function (el, event, field) {\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'columnOnOff', checkbox: el, field: field, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // regular processing\n            var obj = this;\n            // collapse expanded rows\n            for (var r = 0; r < this.records.length; r++) {\n                if (this.records[r].expanded === true) this.records[r].expanded = false\n            }\n            // show/hide\n            var hide = true;\n            if (field == 'line-numbers') {\n                this.show.lineNumbers = !this.show.lineNumbers;\n                this.refresh();\n            } else {\n                var col = this.getColumn(field);\n                if (col.hidden) {\n                    $(el).prop('checked', true);\n                    this.showColumn(col.field);\n                } else {\n                    $(el).prop('checked', false);\n                    this.hideColumn(col.field);\n                }\n                hide = false;\n            }\n            if (hide) {\n                setTimeout(function () {\n                    $().w2overlay('', { name: 'searches-'+ this.name });\n                    obj.toolbar.uncheck('column-on-off');\n                }, 100);\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        initToolbar: function () {\n            // -- if toolbar is true\n            if (typeof this.toolbar['render'] == 'undefined') {\n                var tmp_items = this.toolbar.items;\n                this.toolbar.items = [];\n                this.toolbar = $().w2toolbar($.extend(true, {}, this.toolbar, { name: this.name +'_toolbar', owner: this }));\n\n                // =============================================\n                // ------ Toolbar Generic buttons\n\n                if (this.show.toolbarReload) {\n                    this.toolbar.items.push($.extend(true, {}, this.buttons['reload']));\n                }\n                if (this.show.toolbarColumns) {\n                    this.toolbar.items.push($.extend(true, {}, this.buttons['columns']));\n                }\n                if (this.show.toolbarReload || this.show.toolbarColumn) {\n                    this.toolbar.items.push({ type: 'break', id: 'w2ui-break0' });\n                }\n                if (this.show.toolbarSearch) {\n                    var html =\n                        '<div class=\"w2ui-toolbar-search\">'+\n                        '<table cellpadding=\"0\" cellspacing=\"0\"><tr>'+\n                        '    <td>'+ this.buttons['search'].html +'</td>'+\n                        '    <td>'+\n                        '        <input id=\"grid_'+ this.name +'_search_all\" class=\"w2ui-search-all\" '+\n                        '            placeholder=\"'+ this.last.caption +'\" value=\"'+ this.last.search +'\"'+\n                        '            onkeydown=\"if (event.keyCode == 13 && w2utils.isIE) this.onchange();\"'+\n                        '            onchange=\"'+\n                        '                var grid = w2ui[\\''+ this.name +'\\']; '+\n                        '                var val = this.value; '+\n                        '                var sel = $(this).data(\\'selected\\');'+\n                        '                var fld = $(this).data(\\'w2field\\'); '+\n                        '                if (fld) val = fld.clean(val);'+\n                        '                if (fld && fld.type == \\'list\\' && sel && typeof sel.id == \\'undefined\\') {'+\n                        '                   grid.searchReset();'+\n                        '                } else {'+\n                        '                   grid.search(grid.last.field, val);'+\n                        '                }'+\n                        '            \">'+\n                        '    </td>'+\n                        '    <td>'+\n                        '        <div title=\"'+ w2utils.lang('Clear Search') +'\" class=\"w2ui-search-clear\" id=\"grid_'+ this.name +'_searchClear\"  '+\n                        '             onclick=\"var obj = w2ui[\\''+ this.name +'\\']; obj.searchReset();\" '+\n                        '        >&nbsp;&nbsp;</div>'+\n                        '    </td>'+\n                        '</tr></table>'+\n                        '</div>';\n                    this.toolbar.items.push({ type: 'html', id: 'w2ui-search', html: html });\n                    if (this.multiSearch && this.searches.length > 0) {\n                        this.toolbar.items.push($.extend(true, {}, this.buttons['search-go']));\n                    }\n                }\n                if (this.show.toolbarSearch && (this.show.toolbarAdd || this.show.toolbarEdit || this.show.toolbarDelete || this.show.toolbarSave)) {\n                    this.toolbar.items.push({ type: 'break', id: 'w2ui-break1' });\n                }\n                if (this.show.toolbarAdd) {\n                    this.toolbar.items.push($.extend(true, {}, this.buttons['add']));\n                }\n                if (this.show.toolbarEdit) {\n                    this.toolbar.items.push($.extend(true, {}, this.buttons['edit']));\n                }\n                if (this.show.toolbarDelete) {\n                    this.toolbar.items.push($.extend(true, {}, this.buttons['delete']));\n                }\n                if (this.show.toolbarSave) {\n                    if (this.show.toolbarAdd || this.show.toolbarDelete || this.show.toolbarEdit) {\n                        this.toolbar.items.push({ type: 'break', id: 'w2ui-break2' });\n                    }\n                    this.toolbar.items.push($.extend(true, {}, this.buttons['save']));\n                }\n                // add original buttons\n                if (tmp_items) for (var i = 0; i < tmp_items.length; i++) this.toolbar.items.push(tmp_items[i]);\n\n                // =============================================\n                // ------ Toolbar onClick processing\n\n                var obj = this;\n                this.toolbar.on('click', function (event) {\n                    var eventData = obj.trigger({ phase: 'before', type: 'toolbar', target: event.target, originalEvent: event });\n                    if (eventData.isCancelled === true) return;\n                    var id = event.target;\n                    switch (id) {\n                        case 'w2ui-reload':\n                            var eventData2 = obj.trigger({ phase: 'before', type: 'reload', target: obj.name });\n                            if (eventData2.isCancelled === true) return false;\n                            obj.reload();\n                            obj.trigger($.extend(eventData2, { phase: 'after' }));\n                            break;\n                        case 'w2ui-column-on-off':\n                            obj.initColumnOnOff();\n                            obj.initResize();\n                            obj.resize();\n                            break;\n                        case 'w2ui-search-advanced':\n                            var tb = this;\n                            var it = this.get(id);\n                            if (it.checked) {\n                                obj.searchClose();\n                                setTimeout(function () { tb.uncheck(id); }, 1);\n                            } else {\n                                obj.searchOpen();\n                                event.originalEvent.stopPropagation();\n                                function tmp_close() {\n                                    if ($('#w2ui-overlay-searches-'+ obj.name).data('keepOpen') === true) return;\n                                    tb.uncheck(id);\n                                    $(document).off('click', 'body', tmp_close);\n                                }\n                                $(document).on('click', 'body', tmp_close);\n                            }\n                            break;\n                        case 'w2ui-add':\n                            // events\n                            var eventData = obj.trigger({ phase: 'before', target: obj.name, type: 'add', recid: null });\n                            obj.trigger($.extend(eventData, { phase: 'after' }));\n                            break;\n                        case 'w2ui-edit':\n                            var sel     = obj.getSelection();\n                            var recid     = null;\n                            if (sel.length == 1) recid = sel[0];\n                            // events\n                            var eventData = obj.trigger({ phase: 'before', target: obj.name, type: 'edit', recid: recid });\n                            obj.trigger($.extend(eventData, { phase: 'after' }));\n                            break;\n                        case 'w2ui-delete':\n                            obj[\"delete\"]();\n                            break;\n                        case 'w2ui-save':\n                            obj.save();\n                            break;\n                    }\n                    // no default action\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                });\n            }\n            return;\n        },\n\n        initResize: function () {\n            var obj = this;\n            //if (obj.resizing === true) return;\n            $(this.box).find('.w2ui-resizer')\n                .off('click')\n                .on('click', function (event) {\n                    if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\n                    if (event.preventDefault) event.preventDefault();\n                })\n                .off('mousedown')\n                .on('mousedown', function (event) {\n                    if (!event) event = window.event;\n                    if (!window.addEventListener) { window.document.attachEvent('onselectstart', function() { return false; } ); }\n                    obj.resizing = true;\n                    obj.last.tmp = {\n                        x   : event.screenX,\n                        y   : event.screenY,\n                        gx  : event.screenX,\n                        gy  : event.screenY,\n                        col : parseInt($(this).attr('name'))\n                    };\n                    if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\n                    if (event.preventDefault) event.preventDefault();\n                    // fix sizes\n                    for (var c = 0; c < obj.columns.length; c++) {\n                        if (typeof obj.columns[c].sizeOriginal == 'undefined') obj.columns[c].sizeOriginal = obj.columns[c].size;\n                        obj.columns[c].size = obj.columns[c].sizeCalculated;\n                    }\n                    var eventData = { phase: 'before', type: 'columnResize', target: obj.name, column: obj.last.tmp.col, field: obj.columns[obj.last.tmp.col].field };\n                    eventData = obj.trigger($.extend(eventData, { resizeBy: 0, originalEvent: event }));\n                    // set move event\n                    var mouseMove = function (event) {\n                        if (obj.resizing != true) return;\n                        if (!event) event = window.event;\n                        // event before\n                        eventData = obj.trigger($.extend(eventData, { resizeBy: (event.screenX - obj.last.tmp.gx), originalEvent: event }));\n                        if (eventData.isCancelled === true) { eventData.isCancelled = false; return; }\n                        // default action\n                        obj.last.tmp.x = (event.screenX - obj.last.tmp.x);\n                        obj.last.tmp.y = (event.screenY - obj.last.tmp.y);\n                        obj.columns[obj.last.tmp.col].size = (parseInt(obj.columns[obj.last.tmp.col].size) + obj.last.tmp.x) + 'px';\n                        obj.resizeRecords();\n                        // reset\n                        obj.last.tmp.x = event.screenX;\n                        obj.last.tmp.y = event.screenY;\n                    };\n                    var mouseUp = function (event) {\n                        delete obj.resizing;\n                        $(document).off('mousemove', 'body');\n                        $(document).off('mouseup', 'body');\n                        obj.resizeRecords();\n                        // event before\n                        obj.trigger($.extend(eventData, { phase: 'after', originalEvent: event }));\n                    };\n                    $(document).on('mousemove', 'body', mouseMove);\n                    $(document).on('mouseup', 'body', mouseUp);\n                })\n                .each(function (index, el) {\n                    var td  = $(el).parent();\n                    $(el).css({\n                        \"height\"         : '25px',\n                        \"margin-left\"     : (td.width() - 3) + 'px'\n                    })\n                });\n        },\n\n        resizeBoxes: function () {\n            // elements\n            var header   = $('#grid_'+ this.name +'_header');\n            var toolbar  = $('#grid_'+ this.name +'_toolbar');\n            var fsummary = $('#grid_'+ this.name +'_fsummary');\n            var summary  = $('#grid_'+ this.name +'_summary');\n            var footer   = $('#grid_'+ this.name +'_footer');\n            var body     = $('#grid_'+ this.name +'_body');\n\n            if (this.show.header) {\n                header.css({\n                    top:   '0px',\n                    left:  '0px',\n                    right: '0px'\n                });\n            }\n\n            if (this.show.toolbar) {\n                toolbar.css({\n                    top:   ( 0 + (this.show.header ? w2utils.getSize(header, 'height') : 0) ) + 'px',\n                    left:  '0px',\n                    right: '0px'\n                });\n            }\n            if (this.summary.length > 0) {\n                fsummary.css({\n                    bottom: ( 0 + (this.show.footer ? w2utils.getSize(footer, 'height') : 0) ) + 'px'\n                });\n                summary.css({\n                    bottom: ( 0 + (this.show.footer ? w2utils.getSize(footer, 'height') : 0) ) + 'px',\n                    right: '0px'\n                });\n            }\n            if (this.show.footer) {\n                footer.css({\n                    bottom: '0px',\n                    left:  '0px',\n                    right: '0px'\n                });\n            }\n            body.css({\n                top: ( 0 + (this.show.header ? w2utils.getSize(header, 'height') : 0) + (this.show.toolbar ? w2utils.getSize(toolbar, 'height') : 0) ) + 'px',\n                bottom: ( 0 + (this.show.footer ? w2utils.getSize(footer, 'height') : 0) + (this.summary.length > 0 ? w2utils.getSize(summary, 'height') : 0) ) + 'px',\n                left:   '0px',\n                right:  '0px'\n            });\n        },\n\n        resizeRecords: function () {\n            var obj = this;\n            // remove empty records\n            $(this.box).find('.w2ui-empty-record').remove();\n            // -- Calculate Column size in PX\n            var box      = $(this.box);\n            var grid     = $(this.box).find('> div');\n            var header   = $('#grid_'+ this.name +'_header');\n            var toolbar  = $('#grid_'+ this.name +'_toolbar');\n            var summary  = $('#grid_'+ this.name +'_summary');\n            var fsummary = $('#grid_'+ this.name +'_fsummary');\n            var footer   = $('#grid_'+ this.name +'_footer');\n            var body     = $('#grid_'+ this.name +'_body');\n            var columns  = $('#grid_'+ this.name +'_columns');\n            var fcolumns = $('#grid_'+ this.name +'_fcolumns');\n            var records  = $('#grid_'+ this.name +'_records');\n            var frecords = $('#grid_'+ this.name +'_frecords');\n            var scroll1  = $('#grid_'+ this.name +'_scroll1');\n            var lineNumberWidth = String(this.total).length * 8 + 10;\n            if (lineNumberWidth < 34) lineNumberWidth = 34; // 3 digit width\n\n            var bodyOverflowX = false;\n            var bodyOverflowY = false;\n            if (body.width() < $(records).find('>table').width() + $(frecords).find('>table').width()) bodyOverflowX = true;\n            if (body.height() - columns.height() < $(records).find('>table').height() + (bodyOverflowX ? w2utils.scrollBarSize() : 0)) bodyOverflowY = true;\n\n            // body might be expanded by data\n            if (!this.fixedBody) {\n                // allow it to render records, then resize\n                var calculatedHeight = w2utils.getSize(columns, 'height')\n                    + w2utils.getSize($('#grid_'+ obj.name +'_records table'), 'height')\n                    + (bodyOverflowX ? w2utils.scrollBarSize() : 0);\n                obj.height = calculatedHeight\n                    + w2utils.getSize(grid, '+height')\n                    + (obj.show.header ? w2utils.getSize(header, 'height') : 0)\n                    + (obj.show.toolbar ? w2utils.getSize(toolbar, 'height') : 0)\n                    + (summary.css('display') != 'none' ? w2utils.getSize(summary, 'height') : 0)\n                    + (obj.show.footer ? w2utils.getSize(footer, 'height') : 0);\n                grid.css('height', obj.height);\n                body.css('height', calculatedHeight);\n                box.css('height', w2utils.getSize(grid, 'height') + w2utils.getSize(box, '+height'));\n            } else {\n                // fixed body height\n                var calculatedHeight =  grid.height()\n                    - (this.show.header ? w2utils.getSize(header, 'height') : 0)\n                    - (this.show.toolbar ? w2utils.getSize(toolbar, 'height') : 0)\n                    - (summary.css('display') != 'none' ? w2utils.getSize(summary, 'height') : 0)\n                    - (this.show.footer ? w2utils.getSize(footer, 'height') : 0);\n                body.css('height', calculatedHeight);\n            }\n\n            var buffered = this.records.length;\n            if (this.searchData.length != 0 && !this.url) buffered = this.last.searchIds.length;\n            // apply overflow\n            if (!this.fixedBody) { bodyOverflowY = false }\n            if (bodyOverflowX || bodyOverflowY) {\n                columns.find('> table > tbody > tr:nth-child(1) td.w2ui-head-last').css('width', w2utils.scrollBarSize()).show();\n                records.css({\n                    top: ((this.columnGroups.length > 0 && this.show.columns ? 1 : 0) + w2utils.getSize(columns, 'height')) +'px',\n                    \"-webkit-overflow-scrolling\": \"touch\",\n                    \"overflow-x\": (bodyOverflowX ? 'auto' : 'hidden'),\n                    \"overflow-y\": (bodyOverflowY ? 'auto' : 'hidden') \n                });\n            } else {\n                columns.find('> table > tbody > tr:nth-child(1) td.w2ui-head-last').hide();\n                records.css({\n                    top: ((this.columnGroups.length > 0 && this.show.columns ? 1 : 0) + w2utils.getSize(columns, 'height')) +'px',\n                    overflow: 'hidden'\n                });\n                if (records.length > 0) { this.last.scrollTop  = 0; this.last.scrollLeft = 0; } // if no scrollbars, always show top\n            }\n            if (bodyOverflowX) {\n                frecords.css('margin-bottom', w2utils.scrollBarSize());\n                scroll1.show();\n            } else {\n                frecords.css('margin-bottom', 0);\n                scroll1.hide();                \n            }\n            frecords.css({ overflow: 'hidden', top: records.css('top') });\n            if (this.show.emptyRecords && !bodyOverflowY) {\n                var max = Math.floor(records.height() / this.recordHeight) + 1;\n                if (this.fixedBody) {\n                    for (var di = buffered; di <= max; di++) {\n                        var html1 = '';\n                        var html2 = '';\n                        var htmlp = '';\n                        html1 += '<tr class=\"'+ (di % 2 ? 'w2ui-even' : 'w2ui-odd') + ' w2ui-empty-record\" style=\"height: '+ this.recordHeight +'px\">';\n                        html2 += '<tr class=\"'+ (di % 2 ? 'w2ui-even' : 'w2ui-odd') + ' w2ui-empty-record\" style=\"height: '+ this.recordHeight +'px\">';\n                        if (this.show.lineNumbers)  html1 += '<td class=\"w2ui-col-number\"></td>';\n                        if (this.show.selectColumn) html1 += '<td class=\"w2ui-grid-data w2ui-col-select\"></td>';\n                        if (this.show.expandColumn) html1 += '<td class=\"w2ui-grid-data w2ui-col-expand\"></td>';\n                        var j = 0;\n                        while (this.columns.length > 0) {\n                            var col = this.columns[j];\n                            if (col.hidden) { j++; if (typeof this.columns[j] == 'undefined') break; else continue; }\n                            htmlp += '<td class=\"w2ui-grid-data\" '+ (typeof col.attr != 'undefined' ? col.attr : '') +' col=\"'+ j +'\"></td>';\n                            if (col.frozen) html1 += htmlp; else html2 += htmlp;\n                            j++;\n                            if (typeof this.columns[j] == 'undefined') break;\n                        }\n                        html1 += '<td class=\"w2ui-grid-data-last\"></td>';\n                        html2 += '<td class=\"w2ui-grid-data-last\"></td>';\n                        html1 += '</tr>';\n                        html2 += '</tr>';\n                        $('#grid_'+ this.name +'_frecords > table').append(html1);\n                        $('#grid_'+ this.name +'_records > table').append(html2);\n                    }\n                }\n            }\n            if (body.length > 0) {\n                var width_max = parseInt(body.width())\n                    - (bodyOverflowY ? w2utils.scrollBarSize() : 0)\n                    - (this.show.lineNumbers ? lineNumberWidth : 0)\n                    - (this.show.selectColumn ? 26 : 0)\n                    - (this.show.expandColumn ? 26 : 0)\n                    - 1; // left is 1xp due to border width\n                var width_box = width_max;\n                var percent = 0;\n                // gridMinWidth processiong\n                var restart = false;\n                for (var i = 0; i < this.columns.length; i++) {\n                    var col = this.columns[i];\n                    if (col.gridMinWidth > 0) {\n                        if (col.gridMinWidth > width_box && col.hidden !== true) {\n                            col.hidden = true;\n                            restart = true;\n                        }\n                        if (col.gridMinWidth < width_box && col.hidden === true) {\n                            col.hidden = false;\n                            restart = true;\n                        }\n                    }\n                }\n                if (restart === true) {\n                    this.refresh();\n                    return;\n                }\n                // assign PX column s\n                for (var i = 0; i < this.columns.length; i++) {\n                    var col = this.columns[i];\n                    if (col.hidden) continue;\n                    if (String(col.size).substr(String(col.size).length-2).toLowerCase() == 'px') {\n                        width_max -= parseFloat(col.size);\n                        this.columns[i].sizeCalculated = col.size;\n                        this.columns[i].sizeType = 'px';\n                    } else {\n                        percent += parseFloat(col.size);\n                        this.columns[i].sizeType = '%';\n                        delete col.sizeCorrected;\n                    }\n                }\n                // if sum != 100% -- reassign proportionally\n                if (percent != 100 && percent > 0) {\n                    for (var i = 0; i < this.columns.length; i++) {\n                        var col = this.columns[i];\n                        if (col.hidden) continue;\n                        if (col.sizeType == '%') {\n                            col.sizeCorrected = Math.round(parseFloat(col.size) * 100 * 100 / percent) / 100 + '%';\n                        }\n                    }\n                }\n                // calculate % columns\n                for (var i = 0; i < this.columns.length; i++) {\n                    var col = this.columns[i];\n                    if (col.hidden) continue;\n                    if (col.sizeType == '%') {\n                        if (typeof this.columns[i].sizeCorrected != 'undefined') {\n                            // make it 1px smaller, so margin of error can be calculated correctly\n                            this.columns[i].sizeCalculated = Math.floor(width_max * parseFloat(col.sizeCorrected) / 100) - 1 + 'px';\n                        } else {\n                            // make it 1px smaller, so margin of error can be calculated correctly\n                            this.columns[i].sizeCalculated = Math.floor(width_max * parseFloat(col.size) / 100) - 1 + 'px';\n                        }\n                    }\n                }\n            }\n            // fix margin of error that is due percentage calculations\n            var width_cols = 0;\n            for (var i = 0; i < this.columns.length; i++) {\n                var col = this.columns[i];\n                if (col.hidden) continue;\n                if (typeof col.min == 'undefined') col.min = 20;\n                if (parseInt(col.sizeCalculated) < parseInt(col.min)) col.sizeCalculated = col.min + 'px';\n                if (parseInt(col.sizeCalculated) > parseInt(col.max)) col.sizeCalculated = col.max + 'px';\n                width_cols += parseInt(col.sizeCalculated);\n            }\n            var width_diff = parseInt(width_box) - parseInt(width_cols);\n            if (width_diff > 0 && percent > 0) {\n                var i = 0;\n                while (true) {\n                    var col = this.columns[i];\n                    if (typeof col == 'undefined') { i = 0; continue; }\n                    if (col.hidden || col.sizeType == 'px') { i++; continue; }\n                    col.sizeCalculated = (parseInt(col.sizeCalculated) + 1) + 'px';\n                    width_diff--;\n                    if (width_diff == 0) break;\n                    i++;\n                }\n            } else if (width_diff > 0) {\n                columns.find('> table > tbody > tr:nth-child(1) td.w2ui-head-last').css('width', w2utils.scrollBarSize()).show();\n            }\n\n            // find width of frozen columns\n            var fwidth = 1;\n            if (this.show.lineNumbers)  fwidth += lineNumberWidth;\n            if (this.show.selectColumn) fwidth += 26;\n            if (this.show.expandColumn) fwidth += 26;\n            for (var i = 0; i < this.columns.length; i++) {\n                if (this.columns[i].hidden) continue;\n                if (this.columns[i].frozen) fwidth += parseInt(this.columns[i].sizeCalculated);\n            }\n            fcolumns.css('width', fwidth);\n            frecords.css('width', fwidth);\n            fsummary.css('width', fwidth);\n            scroll1.css('width', fwidth);\n            columns.css('left', fwidth);\n            records.css('left', fwidth);\n            summary.css('left', fwidth);\n\n            // resize columns\n            columns.find('> table > tbody > tr:nth-child(1) td')\n                .add(fcolumns.find('> table > tbody > tr:nth-child(1) td'))\n                .each(function (index, el) {\n                    // line numbers\n                    if ($(el).hasClass('w2ui-col-number')) {\n                        $(el).css('width', lineNumberWidth)\n                    }\n                    // records\n                    var ind = $(el).attr('col');\n                    if (typeof ind != 'undefined' && obj.columns[ind]) {\n                        $(el).css('width', obj.columns[ind].sizeCalculated);\n                    }\n                    // last column\n                    if ($(el).hasClass('w2ui-head-last')) {\n                        $(el).css('width', w2utils.scrollBarSize() + (width_diff > 0 && percent == 0 ? width_diff : 0) + 'px');\n                    }\n                });\n            // if there are column groups - hide first row (needed for sizing)\n            if (columns.find('> table > tbody > tr').length == 3) {\n                columns.find('> table > tbody > tr:nth-child(1) td')\n                    .add(fcolumns.find('> table > tbody > tr:nth-child(1) td'))\n                    .html('').css({\n                        'height' : '0px',\n                        'border' : '0px',\n                        'padding': '0px',\n                        'margin' : '0px'\n                    });\n            }\n            // resize records\n            records.find('> table > tbody > tr:nth-child(1) td')\n                .add(frecords.find('> table > tbody > tr:nth-child(1) td'))\n                .each(function (index, el) {\n                    // line numbers\n                    if ($(el).hasClass('w2ui-col-number')) {\n                        $(el).css('width', lineNumberWidth)\n                    }\n                    // records\n                    var ind = $(el).attr('col');\n                    if (typeof ind != 'undefined' && obj.columns[ind]) {\n                        $(el).css('width', obj.columns[ind].sizeCalculated);\n                    }\n                    // last column\n                    if ($(el).hasClass('w2ui-grid-data-last') && $(el).parents('.w2ui-grid-frecords').length == 0) { // not in frecords\n                        $(el).css('width', (width_diff > 0 && percent == 0 ? width_diff : 0) + 'px');\n                    }\n                });\n            // resize summary\n            summary.find('> table > tbody > tr:nth-child(1) td')\n                .add(fsummary.find('> table > tbody > tr:nth-child(1) td'))\n                .each(function (index, el) {\n                    // line numbers\n                    if ($(el).hasClass('w2ui-col-number')) {\n                        $(el).css('width', lineNumberWidth)\n                    }\n                    // records\n                    var ind = $(el).attr('col');\n                    if (typeof ind != 'undefined' && obj.columns[ind]) {\n                        $(el).css('width', obj.columns[ind].sizeCalculated);\n                    }\n                    // last column\n                    if ($(el).hasClass('w2ui-grid-data-last') && $(el).parents('.w2ui-grid-frecords').length == 0) { // not in frecords\n                        $(el).css('width', w2utils.scrollBarSize() + (width_diff > 0 && percent == 0 ? width_diff : 0) + 'px');\n                    }\n                });\n            this.initResize();\n            this.refreshRanges();\n            // apply last scroll if any\n            if ((this.last.scrollTop || this.last.scrollLeft) && records.length > 0) {\n                columns.prop('scrollLeft', this.last.scrollLeft);\n                records.prop('scrollTop',  this.last.scrollTop);\n                records.prop('scrollLeft', this.last.scrollLeft);\n            }\n        },\n\n        getSearchesHTML: function () {\n            var html = '<table cellspacing=\"0\">';\n            var showBtn = false;\n            for (var i = 0; i < this.searches.length; i++) {\n                var s = this.searches[i];\n                s.type = String(s.type).toLowerCase();\n                if (s.hidden) continue;\n                var btn = '';\n                if (showBtn == false) {\n                    btn = '<button class=\"w2ui-btn close-btn\" onclick=\"obj = w2ui[\\''+ this.name +'\\']; if (obj) { obj.searchClose(); }\">X</button';\n                    showBtn = true;\n                }\n                if (typeof s.inTag   == 'undefined') s.inTag     = '';\n                if (typeof s.outTag  == 'undefined') s.outTag     = '';\n                if (typeof s.type    == 'undefined') s.type     = 'text';\n                if (['text', 'alphanumeric', 'combo'].indexOf(s.type) != -1) {\n                    var operator =  '<select id=\"grid_'+ this.name +'_operator_'+ i +'\" onclick=\"event.stopPropagation();\">'+\n                        '    <option value=\"is\">'+ w2utils.lang('is') +'</option>'+\n                        '    <option value=\"begins\">'+ w2utils.lang('begins') +'</option>'+\n                        '    <option value=\"contains\">'+ w2utils.lang('contains') +'</option>'+\n                        '    <option value=\"ends\">'+ w2utils.lang('ends') +'</option>'+\n                        '</select>';\n                }\n                if (['int', 'float', 'money', 'currency', 'percent', 'date', 'time'].indexOf(s.type) != -1) {\n                    var operator =  '<select id=\"grid_'+ this.name +'_operator_'+ i +'\" '+\n                        '        onchange=\"w2ui[\\''+ this.name + '\\'].initOperator(this, '+ i +');\" onclick=\"event.stopPropagation();\">'+\n                        '   <option value=\"is\">'+ w2utils.lang('is') +'</option>'+\n                        '   <option value=\"between\">'+ w2utils.lang('between') +'</option>'+\n                        '</select>';\n                }\n                if (['select', 'list', 'hex'].indexOf(s.type) != -1) {\n                    var operator =  '<select id=\"grid_'+ this.name +'_operator_'+ i +'\" onclick=\"event.stopPropagation();\">'+\n                        '    <option value=\"is\">'+ w2utils.lang('is') +'</option>'+\n                        '</select>';\n                }\n                if (['enum'].indexOf(s.type) != -1) {\n                    var operator =  '<select id=\"grid_'+ this.name +'_operator_'+ i +'\" onclick=\"event.stopPropagation();\">'+\n                        '    <option value=\"in\">'+ w2utils.lang('in') +'</option>'+\n                        '    <option value=\"not in\">'+ w2utils.lang('not in') +'</option>'+\n                        '</select>';\n                }\n                html += '<tr>'+\n                        '    <td class=\"close-btn\">'+ btn +'</td>' +\n                        '    <td class=\"caption\">'+ s.caption +'</td>' +\n                        '    <td class=\"operator\">'+ operator +'</td>'+\n                        '    <td class=\"value\">';\n\n                switch (s.type) {\n                    case 'text':\n                    case 'alphanumeric':\n                    case 'hex':\n                    case 'list':\n                    case 'combo':\n                    case 'enum':\n                        html += '<input rel=\"search\" type=\"text\" style=\"width: 300px;\" id=\"grid_'+ this.name +'_field_'+ i +'\" name=\"'+ s.field +'\" '+ s.inTag +'>';\n                        break;\n\n                    case 'int':\n                    case 'float':\n                    case 'money':\n                    case 'currency':\n                    case 'percent':\n                    case 'date':\n                    case 'time':\n                        html += '<input rel=\"search\" type=\"text\" size=\"12\" id=\"grid_'+ this.name +'_field_'+ i +'\" name=\"'+ s.field +'\" '+ s.inTag +'>'+\n                                '<span id=\"grid_'+ this.name +'_range_'+ i +'\" style=\"display: none\">'+\n                                '&nbsp;-&nbsp;&nbsp;<input rel=\"search\" type=\"text\" style=\"width: 90px\" id=\"grid_'+ this.name +'_field2_'+i+'\" name=\"'+ s.field +'\" '+ s.inTag +'>'+\n                                '</span>';\n                        break;\n\n                    case 'select':\n                        html += '<select rel=\"search\" id=\"grid_'+ this.name +'_field_'+ i +'\" name=\"'+ s.field +'\" '+ s.inTag +'  onclick=\"event.stopPropagation();\"></select>';\n                        break;\n\n                }\n                html += s.outTag +\n                        '    </td>' +\n                        '</tr>';\n            }\n            html += '<tr>'+\n                    '    <td colspan=\"4\" class=\"actions\">'+\n                    '        <div>'+\n                    '        <button class=\"w2ui-btn\" onclick=\"obj = w2ui[\\''+ this.name +'\\']; if (obj) { obj.searchReset(); }\">'+ w2utils.lang('Reset') + '</button>'+\n                    '        <button class=\"w2ui-btn w2ui-btn-blue\" onclick=\"obj = w2ui[\\''+ this.name +'\\']; if (obj) { obj.search(); }\">'+ w2utils.lang('Search') + '</button>'+\n                    '        </div>'+\n                    '    </td>'+\n                    '</tr></table>';\n            return html;\n        },\n\n        initOperator: function (el, search_ind) {\n            var obj     = this;\n            var search  = obj.searches[search_ind];\n            var range   = $('#grid_'+ obj.name + '_range_'+ search_ind);\n            var fld1    = $('#grid_'+ obj.name +'_field_'+ search_ind);\n            var fld2    = fld1.parent().find('span input');\n            if ($(el).val() == 'in' || $(el).val() == 'not in') { fld1.w2field('clear'); } else { fld1.w2field(search.type); }\n            if ($(el).val() == 'between') { range.show(); fld2.w2field(search.type); } else { range.hide(); }\n        },\n\n        initSearches: function () {\n            var obj = this;\n            // init searches\n            for (var s = 0; s < this.searches.length; s++) {\n                var search   = this.searches[s];\n                var sdata    = this.getSearchData(search.field);\n                var operator = null;\n                search.type = String(search.type).toLowerCase();\n                if (typeof search.options != 'object') search.options = {};\n                // init types\n                switch (search.type) {\n                    case 'text':\n                    case 'alphanumeric':\n                        operator = 'begins';\n                        if (search.operator && ['is', 'begins', 'contains', 'ends'].indexOf(search.operator) != -1) operator = search.operator;\n                        if (['alphanumeric', 'hex'].indexOf(search.type) != -1) {\n                            $('#grid_'+ this.name +'_field_' + s).w2field(search.type, search.options);\n                        }\n                        break;\n\n                    case 'int':\n                    case 'float':\n                    case 'money':\n                    case 'currency':\n                    case 'percent':\n                    case 'date':\n                    case 'time':\n                        if (sdata && sdata.type == 'int' && ['in', 'not in'].indexOf(sdata.operator) != -1) break;\n                        operator = 'is';\n                        if (search.operator && ['is', 'between'].indexOf(search.operator) != -1) operator = search.operator;\n                        $('#grid_'+ this.name +'_field_'+s).w2field(search.type, search.options);\n                        $('#grid_'+ this.name +'_field2_'+s).w2field(search.type, search.options);\n                        setTimeout(function () { // convert to date if it is number\n                            $('#grid_'+ obj.name +'_field_'+s).keydown(); \n                            $('#grid_'+ obj.name +'_field2_'+s).keydown(); \n                        }, 1);\n                        break;\n\n                    case 'hex':\n                        operator = 'is';\n                        if (search.operator && ['is', 'between'].indexOf(search.operator) != -1) operator = search.operator;\n                        break;\n\n                    case 'list':\n                    case 'combo':\n                    case 'enum':\n                        if (search.type == 'list') operator = 'is'\n                        if (search.type == 'combo') {\n                            operator = 'begins'\n                            if (search.operator && ['is', 'begins', 'contains', 'ends'].indexOf(search.operator) != -1) operator = search.operator;\n                        }\n                        if (search.type == 'enum') {\n                            operator = 'in';\n                            if (search.operator && ['in', 'not in'].indexOf(search.operator) != -1) operator = search.operator;\n                        }                        \n                        var options = search.options;\n                        if (search.type == 'list') options.selected = {};\n                        if (search.type == 'enum') options.selected = [];\n                        if (sdata) options.selected = sdata.value;\n                        $('#grid_'+ this.name +'_field_'+s).w2field(search.type, $.extend({ openOnFocus: true }, options));\n                        break;\n\n                    case 'select':\n                        operator = 'is';\n                        // build options\n                        var options = '<option value=\"\">--</option>';\n                        for (var i = 0; i < search.options.items; i++) {\n                            var si = search.options.items[i];\n                            if ($.isPlainObject(search.options.items[i])) {\n                                var val = si.id;\n                                var txt = si.text;\n                                if (typeof val == 'undefined' && typeof si.value != 'undefined')   val = si.value;\n                                if (typeof txt == 'undefined' && typeof si.caption != 'undefined') txt = si.caption;\n                                if (val == null) val = '';\n                                options += '<option value=\"'+ val +'\">'+ txt +'</option>';\n                            } else {\n                                options += '<option value=\"'+ si +'\">'+ si +'</option>';\n                            }\n                        }\n                        $('#grid_'+ this.name +'_field_'+s).html(options);\n                        break;\n                }\n                if (sdata != null) {\n                    if (sdata.type == 'int' && ['in', 'not in'].indexOf(sdata.operator) != -1) {\n                        $('#grid_'+ this.name +'_field_'+ s).w2field('clear').val(sdata.value);\n                    }\n                    $('#grid_'+ this.name +'_operator_'+ s).val(sdata.operator).trigger('change');\n                    if (!$.isArray(sdata.value)) {\n                        if (typeof sdata.value != 'udefined') $('#grid_'+ this.name +'_field_'+ s).val(sdata.value).trigger('change');\n                    } else {\n                        if (['in', 'not in'].indexOf(sdata.operator) != -1) {\n                            $('#grid_'+ this.name +'_field_'+ s).val(sdata.value).trigger('change');\n                        } else {\n                            $('#grid_'+ this.name +'_field_'+ s).val(sdata.value[0]).trigger('change');\n                            $('#grid_'+ this.name +'_field2_'+ s).val(sdata.value[1]).trigger('change');\n                        }\n                    }\n                } else {\n                    $('#grid_'+ this.name +'_operator_'+s).val(operator).trigger('change');\n                }\n            }\n            // add on change event\n            $('#w2ui-overlay-searches-'+ this.name +' .w2ui-grid-searches *[rel=search]').on('keypress', function (evnt) {\n                if (evnt.keyCode == 13) {\n                    obj.search();\n                    $().w2overlay();\n                }\n            });\n        },\n\n        getColumnsHTML: function () {\n            var obj  = this;\n            var html1 = '';\n            var html2 = '';\n            if (this.show.columnHeaders) {\n                if (this.columnGroups.length > 0) {\n                    var tmp1 = getColumns(true);\n                    var tmp2 = getGroups();\n                    var tmp3 = getColumns(false);\n                    html1 = tmp1[0] + tmp2[0] + tmp3[0];\n                    html2 = tmp1[1] + tmp2[1] + tmp3[1];\n                } else {\n                    var tmp = getColumns(true);\n                    html1 = tmp[0];\n                    html2 = tmp[1];\n                }\n            }\n            return [html1, html2];\n\n            function getGroups () {\n                var html1 = '<tr>';\n                var html2 = '<tr>';\n                var tmpf  = '';\n                // add empty group at the end\n                if (obj.columnGroups[obj.columnGroups.length-1].caption != '') obj.columnGroups.push({ caption: '' });\n\n                if (obj.show.lineNumbers) {\n                    html1 += '<td class=\"w2ui-head w2ui-col-number\">'+\n                            '    <div style=\"height: '+ (obj.recordHeight+1) +'px\">&nbsp;</div>'+\n                            '</td>';\n                }\n                if (obj.show.selectColumn) {\n                    html1 += '<td class=\"w2ui-head w2ui-col-select\">'+\n                            '    <div style=\"height: '+ (obj.recordHeight+1) +'px\">&nbsp;</div>'+\n                            '</td>';\n                }\n                if (obj.show.expandColumn) {\n                    html1 += '<td class=\"w2ui-head w2ui-col-expand\">'+\n                            '    <div style=\"height: '+ (obj.recordHeight+1) +'px\">&nbsp;</div>'+\n                            '</td>';\n                }\n                var ii = 0;\n                for (var i=0; i<obj.columnGroups.length; i++) {\n                    var colg = obj.columnGroups[i];\n                    var col  = obj.columns[ii];\n                    if (typeof colg.span == 'undefined' || colg.span != parseInt(colg.span)) colg.span = 1;\n                    if (typeof colg.colspan != 'undefined') colg.span = colg.colspan;\n                    if (colg.master === true) {\n                        var sortStyle = '';\n                        for (var si = 0; si < obj.sortData.length; si++) {\n                            if (obj.sortData[si].field == col.field) {\n                                if (new RegExp('asc', 'i').test(obj.sortData[si].direction))  sortStyle = 'w2ui-sort-up';\n                                if (new RegExp('desc', 'i').test(obj.sortData[si].direction)) sortStyle = 'w2ui-sort-down';\n                            }\n                        }\n                        var resizer = \"\";\n                        if (col.resizable !== false) {\n                            resizer = '<div class=\"w2ui-resizer\" name=\"'+ ii +'\"></div>';\n                        }\n                        tmpf = '<td id=\"grid_'+ obj.name + '_column_' + ii +'\" class=\"w2ui-head '+ sortStyle +'\" col=\"'+ ii + '\" rowspan=\"2\" colspan=\"'+ (colg.span + (i == obj.columnGroups.length-1 ? 1 : 0) ) +'\" '+\n                               '    onclick=\"w2ui[\\''+ obj.name +'\\'].columnClick(\\''+ col.field +'\\', event);\">'+\n                                   resizer +\n                               '    <div class=\"w2ui-col-group w2ui-col-header '+ (sortStyle ? 'w2ui-col-sorted' : '') +'\">'+\n                               '        <div class=\"'+ sortStyle +'\"></div>'+\n                                       (!col.caption ? '&nbsp;' : col.caption) +\n                               '    </div>'+\n                               '</td>';\n                        if (col && col.frozen) html1 += tmpf; else html2 += tmpf;\n                    } else {\n                        tmpf = '<td id=\"grid_'+ obj.name + '_column_' + ii +'\" class=\"w2ui-head\" col=\"'+ ii + '\" '+\n                               '        colspan=\"'+ (colg.span + (i == obj.columnGroups.length-1 ? 1 : 0) ) +'\">'+\n                               '    <div class=\"w2ui-col-group\">'+\n                                   (!colg.caption ? '&nbsp;' : colg.caption) +\n                               '    </div>'+\n                               '</td>';\n                        if (col && col.frozen) html1 += tmpf; else html2 += tmpf;\n                    }\n                    ii += colg.span;\n                }\n                html1 += '<td></td></tr>'; // need empty column for border-right \n                html2 += '</tr>';\n                return [html1, html2];\n            }\n\n            function getColumns (master) {\n                var html1 = '<tr>';\n                var html2 = '<tr>';\n                var tmpf  = '';\n                var reorderCols = (obj.reorderColumns && (!obj.columnGroups || !obj.columnGroups.length)) ? ' w2ui-reorder-cols-head ' : '';\n                if (obj.show.lineNumbers) {\n                    html1 += '<td class=\"w2ui-head w2ui-col-number\" onclick=\"w2ui[\\''+ obj.name +'\\'].columnClick(\\'line-number\\', event);\">'+\n                            '    <div>#</div>'+\n                            '</td>';\n                }\n                if (obj.show.selectColumn) {\n                    html1 += '<td class=\"w2ui-head w2ui-col-select\" '+\n                            '        onclick=\"if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\">'+\n                            '    <div>'+\n                            '        <input type=\"checkbox\" id=\"grid_'+ obj.name +'_check_all\" tabIndex=\"-1\"'+\n                            '            style=\"' + (obj.multiSelect == false ? 'display: none;' : '') + '\"'+\n                            '            onclick=\"if (this.checked) w2ui[\\''+ obj.name +'\\'].selectAll(); '+\n                            '                     else w2ui[\\''+ obj.name +'\\'].selectNone(); '+\n                            '                     if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\">'+\n                            '    </div>'+\n                            '</td>';\n                }\n                if (obj.show.expandColumn) {\n                    html1 += '<td class=\"w2ui-head w2ui-col-expand\">'+\n                            '    <div>&nbsp;</div>'+\n                            '</td>';\n                }\n                var ii = 0;\n                var id = 0;\n                for (var i = 0; i < obj.columns.length; i++) {\n                    var col  = obj.columns[i];\n                    var colg = {};\n                    if (i == id) {\n                        id = id + (typeof obj.columnGroups[ii] != 'undefined' ? parseInt(obj.columnGroups[ii].span) : 0);\n                        ii++;\n                    }\n                    if (typeof obj.columnGroups[ii-1] != 'undefined') var colg = obj.columnGroups[ii-1];\n                    if (col.hidden) continue;\n                    var sortStyle = '';\n                    for (var si = 0; si < obj.sortData.length; si++) {\n                        if (obj.sortData[si].field == col.field) {\n                            if (new RegExp('asc', 'i').test(obj.sortData[si].direction))  sortStyle = 'w2ui-sort-up';\n                            if (new RegExp('desc', 'i').test(obj.sortData[si].direction)) sortStyle = 'w2ui-sort-down';\n                        }\n                    }\n                    if (colg['master'] !== true || master) { // grouping of columns\n                        var resizer = \"\";\n                        if (col.resizable !== false) {\n                            resizer = '<div class=\"w2ui-resizer\" name=\"'+ i +'\"></div>';\n                        }\n                        tmpf  = '<td id=\"grid_'+ obj.name + '_column_' + i +'\" col=\"'+ i +'\" class=\"w2ui-head '+ sortStyle + reorderCols + '\" ' +\n                                '    onclick=\"w2ui[\\''+ obj.name +'\\'].columnClick(\\''+ col.field +'\\', event);\">'+\n                                    resizer +\n                                '    <div class=\"w2ui-col-header '+ (sortStyle ? 'w2ui-col-sorted' : '') +'\">'+\n                                '        <div class=\"'+ sortStyle +'\"></div>'+\n                                        (!col.caption ? '&nbsp;' : col.caption) +\n                                '    </div>'+\n                                '</td>';\n                        if (col && col.frozen) html1 += tmpf; else html2 += tmpf;\n                    }\n                }\n                html1 += '<td class=\"w2ui-head w2ui-head-last\"><div>&nbsp;</div></td>';\n                html2 += '<td class=\"w2ui-head w2ui-head-last\"><div>&nbsp;</div></td>';\n                html1 += '</tr>';\n                html2 += '</tr>';\n                return [html1, html2];\n            }\n        },\n\n        getRecordsHTML: function () {\n            var buffered = this.records.length;\n            if (this.searchData.length != 0 && !this.url) buffered = this.last.searchIds.length;\n            // larget number works better with chrome, smaller with FF.\n            if (buffered > this.vs_start) this.last.show_extra = this.vs_extra; else this.last.show_extra = this.vs_start;\n            var records  = $('#grid_'+ this.name +'_records');\n            var limit    = Math.floor(records.height() / this.recordHeight) + this.last.show_extra + 1;\n            if (!this.fixedBody || limit > buffered) limit = buffered;\n            // always need first record for resizing purposes\n            var rec_html = this.getRecordHTML(-1, 0);\n            var html1 = '<table>' + rec_html[0];\n            var html2 = '<table>' + rec_html[1];\n            // first empty row with height\n            html1 += '<tr id=\"grid_'+ this.name + '_frec_top\" line=\"top\" style=\"height: '+ 0 +'px\">'+\n                     '    <td colspan=\"200\"></td>'+\n                     '</tr>';\n            html2 += '<tr id=\"grid_'+ this.name + '_rec_top\" line=\"top\" style=\"height: '+ 0 +'px\">'+\n                     '    <td colspan=\"200\"></td>'+\n                     '</tr>';\n            for (var i = 0; i < limit; i++) {\n                rec_html = this.getRecordHTML(i, i+1);\n                html1 += rec_html[0];\n                html2 += rec_html[1];\n            }\n            html1 += '<tr id=\"grid_'+ this.name + '_frec_bottom\" line=\"bottom\" style=\"height: '+ ((buffered - limit) * this.recordHeight) +'px\">'+\n                    '    <td colspan=\"200\"></td>'+\n                    '</tr>'+\n                    '<tr id=\"grid_'+ this.name +'_frec_more\" style=\"display: none\">'+\n                    '    <td colspan=\"200\" class=\"w2ui-load-more\"></td>'+\n                    '</tr>'+\n                    '</table>';\n            html2 += '<tr id=\"grid_'+ this.name + '_rec_bottom\" line=\"bottom\" style=\"height: '+ ((buffered - limit) * this.recordHeight) +'px\">'+\n                    '    <td colspan=\"200\"></td>'+\n                    '</tr>'+\n                    '<tr id=\"grid_'+ this.name +'_rec_more\" style=\"display: none\">'+\n                    '    <td colspan=\"200\" class=\"w2ui-load-more\"></td>'+\n                    '</tr>'+\n                    '</table>';\n            this.last.range_start = 0;\n            this.last.range_end   = limit;\n            return [html1, html2];\n        },\n\n        getSummaryHTML: function () {\n            if (this.summary.length == 0) return;\n            var rec_html = '';\n            var html1 = '<table>';\n            var html2 = '<table>';\n            for (var i = 0; i < this.summary.length; i++) {\n                rec_html = this.getRecordHTML(i, i+1, true);\n                html1 += rec_html[0];\n                html2 += rec_html[1];\n            }\n            html1 += '</table>';\n            html2 += '</table>';\n            return [html1, html2];\n        },\n\n        scroll: function (event) {\n            var time = (new Date()).getTime();\n            var obj  = this;\n            var records  = $('#grid_'+ this.name +'_records');\n            var frecords = $('#grid_'+ this.name +'_frecords');\n            // sync scroll positions\n            if (event) {\n                var sTop  = event.target.scrollTop; \n                var sLeft = event.target.scrollLeft;\n                obj.last.scrollTop  = sTop;\n                obj.last.scrollLeft = sLeft;\n                $('#grid_'+ obj.name +'_columns')[0].scrollLeft = sLeft;\n                $('#grid_'+ obj.name +'_summary')[0].scrollLeft = sLeft;\n                frecords[0].scrollTop = sTop;\n            }\n            // perform virtual scroll\n            var buffered = this.records.length;\n            if (this.searchData.length != 0 && !this.url) buffered = this.last.searchIds.length;\n            if (buffered == 0 || records.length == 0 || records.height() == 0) return;\n            if (buffered > this.vs_start) this.last.show_extra = this.vs_extra; else this.last.show_extra = this.vs_start;\n            // need this to enable scrolling when this.limit < then a screen can fit\n            if (records.height() < buffered * this.recordHeight && records.css('overflow-y') == 'hidden') {\n                if (this.total > 0) this.refresh();\n                return;\n            }\n            // update footer\n            var t1 = Math.round(records[0].scrollTop / this.recordHeight + 1);\n            var t2 = t1 + (Math.round(records.height() / this.recordHeight) - 1);\n            if (t1 > buffered) t1 = buffered;\n            if (t2 >= buffered - 1) t2 = buffered;\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            $('#grid_'+ this.name + '_footer .w2ui-footer-right').html(\n                (obj.show.statusRange ? w2utils.formatNumber(this.offset + t1) + '-' + w2utils.formatNumber(this.offset + t2) + ' ' + w2utils.lang('of') + ' ' +    w2utils.formatNumber(this.total) : '') +\n                (url && obj.show.statusBuffered ? ' ('+ w2utils.lang('buffered') + ' '+ w2utils.formatNumber(buffered) + (this.offset > 0 ? ', skip ' + w2utils.formatNumber(this.offset) : '') + ')' : '')\n            );\n            // only for local data source, else no extra records loaded\n            if (!url && (!this.fixedBody || this.total <= 300)) return;\n            // regular processing\n            var start   = Math.floor(records[0].scrollTop / this.recordHeight) - this.last.show_extra;\n            var end     = start + Math.floor(records.height() / this.recordHeight) + this.last.show_extra * 2 + 1;\n            // var div  = start - this.last.range_start;\n            if (start < 1) start = 1;\n            if (end > this.total) end = this.total;\n            var tr1  = records.find('#grid_'+ this.name +'_rec_top');\n            var tr2  = records.find('#grid_'+ this.name +'_rec_bottom');\n            var tr1f = frecords.find('#grid_'+ this.name +'_frec_top');\n            var tr2f = frecords.find('#grid_'+ this.name +'_frec_bottom');\n            // if row is expanded\n            if (String(tr1.next().prop('id')).indexOf('_expanded_row') != -1) {\n                tr1.next().remove();\n                tr1f.next().remove();\n            }\n            if (this.total > end && String(tr2.prev().prop('id')).indexOf('_expanded_row') != -1) {\n                tr2.prev().remove();\n                tr2f.prev().remove();\n            }\n            var first = parseInt(tr1.next().attr('line'));\n            var last  = parseInt(tr2.prev().attr('line'));\n            //$('#log').html('buffer: '+ this.buffered +' start-end: ' + start + '-'+ end + ' ===> first-last: ' + first + '-' + last);\n            if (first < start || first == 1 || this.last.pull_refresh) { // scroll down\n                // console.log('end', end, 'last', last, 'show_extre', this.last.show_extra, this.last.pull_refresh);\n                if (end <= last + this.last.show_extra - 2 && end != this.total) return;\n                this.last.pull_refresh = false;\n                // remove from top\n                while (true) {\n                    var tmp1 = frecords.find('#grid_'+ this.name +'_frec_top').next();\n                    var tmp2 = records.find('#grid_'+ this.name +'_rec_top').next();\n                    if (tmp2.attr('line') == 'bottom') break;\n                    if (parseInt(tmp2.attr('line')) < start) { tmp1.remove(); tmp2.remove(); } else break;\n                }\n                // add at bottom\n                var tmp = records.find('#grid_'+ this.name +'_rec_bottom').prev();\n                var rec_start = tmp.attr('line');\n                if (rec_start == 'top') rec_start = start;\n                for (var i = parseInt(rec_start) + 1; i <= end; i++) {\n                    if (!this.records[i-1]) continue;\n                    if (this.records[i-1].expanded === true) this.records[i-1].expanded = false;\n                    var rec_html = this.getRecordHTML(i-1, i);\n                    tr2.before(rec_html[1]);\n                    tr2f.before(rec_html[0]);\n                }\n                markSearch();\n                setTimeout(function() { obj.refreshRanges(); }, 0);\n            } else { // scroll up\n                if (start >= first - this.last.show_extra + 2 && start > 1) return;\n                // remove from bottom\n                while (true) {\n                    var tmp1 = frecords.find('#grid_'+ this.name +'_frec_bottom').prev();\n                    var tmp2 = records.find('#grid_'+ this.name +'_rec_bottom').prev();\n                    if (tmp2.attr('line') == 'top') break;\n                    if (parseInt(tmp2.attr('line')) > end) { tmp1.remove(); tmp2.remove(); } else break;\n                }\n                // add at top\n                var tmp = records.find('#grid_'+ this.name +'_rec_top').next();\n                var rec_start = tmp.attr('line');\n                if (rec_start == 'bottom') rec_start = end;\n                for (var i = parseInt(rec_start) - 1; i >= start; i--) {\n                    if (!this.records[i-1]) continue;\n                    if (this.records[i-1].expanded === true) this.records[i-1].expanded = false;\n                    var rec_html = this.getRecordHTML(i-1, i);\n                    tr1.after(rec_html[1]);\n                    tr1f.after(rec_html[0]);\n                }\n                markSearch();\n                setTimeout(function() { obj.refreshRanges(); }, 0);\n            }\n            // first/last row size\n            var h1 = (start - 1) * obj.recordHeight;\n            var h2 = (buffered - end) * obj.recordHeight;\n            if (h2 < 0) h2 = 0;\n            tr1.css('height', h1 + 'px');\n            tr1f.css('height', h1 + 'px');\n            tr2.css('height', h2 + 'px');\n            tr2f.css('height', h2 + 'px');\n            obj.last.range_start = start;\n            obj.last.range_end   = end;\n            // load more if needed\n            var s = Math.floor(records[0].scrollTop / this.recordHeight);\n            var e = s + Math.floor(records.height() / this.recordHeight);\n            if (e + 10 > buffered && this.last.pull_more !== true && buffered < this.total - this.offset) {\n                if (this.autoLoad === true) {\n                    this.last.pull_more = true;\n                    this.last.xhr_offset += this.limit;\n                    this.request('get-records');\n                } else {\n                    var more = $('#grid_'+ this.name +'_rec_more');\n                    if (more.css('display') == 'none') {\n                        more.show()\n                            .on('click', function () {\n                                obj.last.pull_more = true;\n                                obj.last.xhr_offset += obj.limit;\n                                obj.request('get-records');\n                                // show spinner the last\n                                $(this).find('td').html('<div><div style=\"width: 20px; height: 20px;\" class=\"w2ui-spinner\"></div></div>');\n                            });\n                    }\n                    if (more.find('td').text().indexOf('Load') == -1) {\n                        more.find('td').html('<div>'+ w2utils.lang('Load') + ' ' + obj.limit + ' ' + w2utils.lang('More') + '...</div>');\n                    }\n                }\n            }\n            // check for grid end\n            if (buffered >= this.total - this.offset) $('#grid_'+ this.name +'_rec_more').hide();\n            return;\n\n            function markSearch() {\n                // mark search\n                if (!obj.markSearch) return;\n                clearTimeout(obj.last.marker_timer);\n                obj.last.marker_timer = setTimeout(function () {\n                    // mark all search strings\n                    var str = [];\n                    for (var s = 0; s < obj.searchData.length; s++) {\n                        var tmp = obj.searchData[s];\n                        if ($.inArray(tmp.value, str) == -1) str.push(tmp.value);\n                    }\n                    if (str.length > 0) $(obj.box).find('.w2ui-grid-data > div').w2marker(str);\n                }, 50);\n            }\n        },\n\n        getRecordHTML: function (ind, lineNum, summary) {\n            var tmph = '';\n            var rec_html1 = '';\n            var rec_html2 = '';\n            var sel = this.last.selection;\n            var record;\n            // first record needs for resize purposes\n            if (ind == -1) {\n                rec_html1 += '<tr line=\"0\">';\n                rec_html2 += '<tr line=\"0\">';\n                if (this.show.lineNumbers)  rec_html1 += '<td class=\"w2ui-col-number\" style=\"height: 0px;\"></td>';\n                if (this.show.selectColumn) rec_html1 += '<td class=\"w2ui-col-select\" style=\"height: 0px;\"></td>';\n                if (this.show.expandColumn) rec_html1 += '<td class=\"w2ui-col-expand\" style=\"height: 0px;\"></td>';\n                for (var i = 0; i < this.columns.length; i++) {\n                    var col = this.columns[i];\n                    if (col.hidden) continue;\n                    tmph = '<td class=\"w2ui-grid-data\" col=\"'+ i +'\" style=\"height: 0px;\"></td>';\n                    if (col.frozen) rec_html1 += tmph; else rec_html2 += tmph;\n                }\n                rec_html1 += '<td class=\"w2ui-grid-data-last\" style=\"height: 0px\"></td>';\n                rec_html2 += '<td class=\"w2ui-grid-data-last\" style=\"height: 0px\"></td>';\n                rec_html1 += '</tr>';\n                rec_html2 += '</tr>';\n                return [rec_html1, rec_html2];\n            }\n            // regular record\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (summary !== true) {\n                if (this.searchData.length > 0 && !url) {\n                    if (ind >= this.last.searchIds.length) return '';\n                    ind = this.last.searchIds[ind];\n                    record = this.records[ind];\n                } else {\n                    if (ind >= this.records.length) return '';\n                    record = this.records[ind];\n                }\n            } else {\n                if (ind >= this.summary.length) return '';\n                record = this.summary[ind];\n            }\n            if (!record) return '';\n            var id = w2utils.escapeId(record.recid);\n            var isRowSelected = false;\n            if (sel.indexes.indexOf(ind) != -1) isRowSelected = true;\n            // render TR\n            rec_html1 += '<tr id=\"grid_'+ this.name +'_frec_'+ record.recid +'\" recid=\"'+ record.recid +'\" line=\"'+ lineNum +'\" '+\n                ' class=\"'+ (lineNum % 2 == 0 ? 'w2ui-even' : 'w2ui-odd') + (isRowSelected && this.selectType == 'row' ? ' w2ui-selected' : '') + (record.expanded === true ? ' w2ui-expanded' : '') + '\" ' +\n                (summary !== true ?\n                    (w2utils.isIOS ?\n                        '    onclick  = \"w2ui[\\''+ this.name +'\\'].dblClick(\\''+ record.recid +'\\', event);\"'\n                        :\n                        '    onclick  = \"w2ui[\\''+ this.name +'\\'].click(\\''+ record.recid +'\\', event);\"'+\n                        '    oncontextmenu = \"w2ui[\\''+ this.name +'\\'].contextMenu(\\''+ record.recid +'\\', event);\"'\n                     )\n                    : ''\n                ) +\n                (this.selectType == 'row' ? \n                    ' onmouseover=\"$(\\'#grid_'+ this.name +'_rec_'+ record.recid +'\\').addClass(\\'w2ui-record-hover\\')\"'+\n                    ' onmouseout =\"$(\\'#grid_'+ this.name +'_rec_'+ record.recid +'\\').removeClass(\\'w2ui-record-hover\\')\"' \n                    : \n                    '') +\n                ' style=\"height: '+ this.recordHeight +'px; '+ (!isRowSelected && typeof record['style'] == 'string' ? record['style'] : '') +'\" '+\n                    ( typeof record['style'] == 'string' ? 'custom_style=\"'+ record['style'] +'\"' : '') +\n                '>';\n            rec_html2 += '<tr id=\"grid_'+ this.name +'_rec_'+ record.recid +'\" recid=\"'+ record.recid +'\" line=\"'+ lineNum +'\" '+\n                ' class=\"'+ (lineNum % 2 == 0 ? 'w2ui-even' : 'w2ui-odd') + (isRowSelected && this.selectType == 'row' ? ' w2ui-selected' : '') + (record.expanded === true ? ' w2ui-expanded' : '') + '\" ' +\n                (summary !== true ?\n                    (w2utils.isIOS ?\n                        '    onclick  = \"var obj = w2ui[\\''+ this.name +'\\']; obj.dblClick(\\''+ record.recid +'\\', event);\"'\n                        :\n                        '    onclick  = \"var obj = w2ui[\\''+ this.name +'\\']; obj.click(\\''+ record.recid +'\\', event);\"'+\n                        '    oncontextmenu = \"var obj = w2ui[\\''+ this.name +'\\']; obj.contextMenu(\\''+ record.recid +'\\', event);\"'\n                     )\n                    : ''\n                ) +\n                (this.selectType == 'row' ? \n                    ' onmouseover=\"$(\\'#grid_'+ this.name +'_frec_'+ record.recid +'\\').addClass(\\'w2ui-record-hover\\')\"'+\n                    ' onmouseout =\"$(\\'#grid_'+ this.name +'_frec_'+ record.recid +'\\').removeClass(\\'w2ui-record-hover\\')\"'\n                    :\n                    '') +\n                ' style=\"height: '+ this.recordHeight +'px; '+ (!isRowSelected && typeof record['style'] == 'string' ? record['style'] : '') +'\" '+\n                    ( typeof record['style'] == 'string' ? 'custom_style=\"'+ record['style'] +'\"' : '') +\n                '>';\n            if (this.show.lineNumbers) {\n                rec_html1 += '<td id=\"grid_'+ this.name +'_cell_'+ ind +'_number' + (summary ? '_s' : '') + '\" '+\n                            '   class=\"w2ui-col-number '+ (isRowSelected  ? ' w2ui-row-selected' : '') +'\"'+\n                                (this.reorderRows ? 'style=\"cursor: move\"' : '') + '>'+\n                                (summary !== true ? '<div>'+ lineNum +'</div>' : '') +\n                            '</td>';\n            }\n            if (this.show.selectColumn) {\n                rec_html1 +=\n                        '<td id=\"grid_'+ this.name +'_cell_'+ ind +'_select' + (summary ? '_s' : '') + '\" class=\"w2ui-grid-data w2ui-col-select\" '+\n                        '        onclick=\"if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\">'+\n                            (summary !== true ?\n                            '    <div>'+\n                            '        <input class=\"w2ui-grid-select-check\" type=\"checkbox\" tabIndex=\"-1\"'+\n                            '            '+ (isRowSelected ? 'checked=\"checked\"' : '') +\n                            '            onclick=\"var obj = w2ui[\\''+ this.name +'\\']; '+\n                            '                if (!obj.multiSelect) { obj.selectNone(); }'+\n                            '                if (this.checked) obj.select(\\''+ record.recid + '\\'); else obj.unselect(\\''+ record.recid + '\\'); '+\n                            '                if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\">'+\n                            '    </div>'\n                            :\n                            '' ) +\n                        '</td>';\n            }\n            if (this.show.expandColumn) {\n                var tmp_img = '';\n                if (record.expanded === true)  tmp_img = '-'; else tmp_img = '+';\n                if (record.expanded == 'none') tmp_img = '';\n                if (record.expanded == 'spinner') tmp_img = '<div class=\"w2ui-spinner\" style=\"width: 16px; margin: -2px 2px;\"></div>';\n                rec_html1 +=\n                        '<td id=\"grid_'+ this.name +'_cell_'+ ind +'_expand' + (summary ? '_s' : '') + '\" class=\"w2ui-grid-data w2ui-col-expand\">'+\n                            (summary !== true ?\n                            '    <div ondblclick=\"if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\" '+\n                            '            onclick=\"w2ui[\\''+ this.name +'\\'].toggle(\\''+ record.recid +'\\', event); '+\n                            '                if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\">'+\n                            '        '+ tmp_img +' </div>'\n                            :\n                            '' ) +\n                        '</td>';\n            }\n            var col_ind = 0;\n            while (true) {\n                var col = this.columns[col_ind];\n                if (col.hidden) { col_ind++; if (typeof this.columns[col_ind] == 'undefined') break; else continue; }\n                var isChanged = !summary && record.changes && typeof record.changes[col.field] != 'undefined';\n                var rec_cell  = this.getCellHTML(ind, col_ind, summary);\n                var addStyle  = '';\n                if (typeof col.render == 'string') {\n                    var tmp = col.render.toLowerCase().split(':');\n                    if (['number', 'int', 'float', 'money', 'currency', 'percent'].indexOf(tmp[0]) != -1) addStyle += 'text-align: right;';\n                }\n                if (typeof record.style == 'object') {\n                    if (typeof record.style[col_ind] == 'string') addStyle += record.style[col_ind] + ';';\n                    if (typeof record.style[col.field] == 'string') addStyle += record.style[col.field] + ';';\n                }\n                var isCellSelected = false;\n                if (isRowSelected && $.inArray(col_ind, sel.columns[ind]) != -1) isCellSelected = true;\n                tmph = '<td class=\"w2ui-grid-data'+ (isCellSelected ? ' w2ui-selected' : '') + (isChanged ? ' w2ui-changed' : '') +'\" '+\n                        '    id=\"grid_'+ this.name +'_data_'+ ind +'_'+ col_ind +'\" col=\"'+ col_ind +'\" '+\n                        '    style=\"'+ addStyle + (typeof col.style != 'undefined' ? col.style : '') +'\" '+\n                                     (typeof col.attr != 'undefined' ? col.attr : '') +'>'+\n                             rec_cell +\n                        '</td>';\n                if (col.frozen) rec_html1 += tmph; else rec_html2 += tmph;\n                col_ind++;\n                if (typeof this.columns[col_ind] == 'undefined') break;\n            }\n            rec_html1 += '<td class=\"w2ui-grid-data-last\"></td>';\n            rec_html2 += '<td class=\"w2ui-grid-data-last\"></td>';\n            rec_html1 += '</tr>';\n            rec_html2 += '</tr>';\n            return [rec_html1, rec_html2];\n        },\n\n        getCellHTML: function (ind, col_ind, summary) {\n            var col    = this.columns[col_ind];\n            var record = (summary !== true ? this.records[ind] : this.summary[ind]);\n            var data   = this.getCellValue(ind, col_ind, summary);\n            var edit   = col.editable;\n            // various renderers\n            if (typeof col.render != 'undefined') {\n                if (typeof col.render == 'function') {\n                    data = $.trim(col.render.call(this, record, ind, col_ind));\n                    if (data.length < 4 || data.substr(0, 4).toLowerCase() != '<div') data = '<div>' + data + '</div>';\n                }\n                if (typeof col.render == 'object')   data = '<div>' + (col.render[data] || '') + '</div>';\n                if (typeof col.render == 'string') {\n                    var t   = col.render.toLowerCase().indexOf(':');\n                    var tmp = [];\n                    if (t == -1) {\n                        tmp[0] = col.render.toLowerCase();\n                        tmp[1] = '';\n                    } else {\n                        tmp[0] = col.render.toLowerCase().substr(0, t);\n                        tmp[1] = col.render.toLowerCase().substr(t+1);\n                    }\n                    var prefix = '';\n                    var suffix = '';\n                    if (['number', 'int', 'float', 'money', 'currency', 'percent'].indexOf(tmp[0]) != -1) {\n                        if (typeof tmp[1] == 'undefined' || !w2utils.isInt(tmp[1])) tmp[1] = 0;\n                        if (tmp[1] > 20) tmp[1] = 20;\n                        if (tmp[1] < 0)  tmp[1] = 0;\n                        if (['money', 'currency'].indexOf(tmp[0]) != -1) { tmp[1] = w2utils.settings.currencyPrecision; prefix = w2utils.settings.currencyPrefix; suffix = w2utils.settings.currencySuffix }\n                        if (tmp[0] == 'percent') { suffix = '%'; if (tmp[1] !== '0') tmp[1] = 1; }\n                        if (tmp[0] == 'int')     { tmp[1] = 0; }\n                        // format\n                        data = '<div>' + (data !== '' ? prefix + w2utils.formatNumber(Number(data).toFixed(tmp[1])) + suffix : '') + '</div>';\n                    }\n                    if (tmp[0] == 'time') {\n                        if (typeof tmp[1] == 'undefined' || tmp[1] == '') tmp[1] = w2utils.settings.time_format;\n                        if (tmp[1] == 'h12') tmp[1] = 'hh:mi pm';\n                        if (tmp[1] == 'h24') tmp[1] = 'h24:mi';\n                        data = '<div>' + prefix + w2utils.formatTime(data, tmp[1]) + suffix + '</div>';\n                    }\n                    if (tmp[0] == 'date') {\n                        if (typeof tmp[1] == 'undefined' || tmp[1] == '') tmp[1] = w2utils.settings.date_display;\n                        data = '<div>' + prefix + w2utils.formatDate(data, tmp[1]) + suffix + '</div>';\n                    }\n                    if (tmp[0] == 'datetime') {\n                        if (typeof tmp[1] == 'undefined' || tmp[1] == '') tmp[1] = w2utils.settings.date_display + '|' + w2utils.settings.time_format;\n                        data = '<div>' + prefix + w2utils.formatDateTime(data, tmp[1]) + suffix + '</div>';\n                    }\n                    if (tmp[0] == 'age') {\n                        data = '<div>' + prefix + w2utils.age(data) + suffix + '</div>';\n                    }\n                    if (tmp[0] == 'toggle') {\n                        data = '<div>' + prefix + (data ? 'Yes' : '') + suffix + '</div>';\n                    }\n                }\n            } else {\n                // if editable checkbox\n                var addStyle = '';\n                if (edit && ['checkbox', 'check'].indexOf(edit.type) != -1) {\n                    var changeInd = summary ? -(ind + 1) : ind;\n                    addStyle = 'text-align: center';\n                    data = '<input type=\"checkbox\" '+ (data ? 'checked' : '') +' onclick=\"' +\n                           '    var obj = w2ui[\\''+ this.name + '\\']; '+\n                           '    obj.editChange.call(obj, this, '+ changeInd +', '+ col_ind +', event); ' +\n                           '\">';\n                }\n                if (!this.show.recordTitles) {\n                    var data = '<div style=\"'+ addStyle +'\">'+ data +'</div>';\n                } else {\n                    // title overwrite\n                    var title = String(data).replace(/\"/g, \"''\");\n                    if (typeof col.title != 'undefined') {\n                        if (typeof col.title == 'function') title = col.title.call(this, record, ind, col_ind);\n                        if (typeof col.title == 'string')   title = col.title;\n                    }\n                    var data = '<div title=\"'+ w2utils.stripTags(title) +'\" style=\"'+ addStyle +'\">'+ data +'</div>';\n                }\n            }\n            if (data == null) data = '';\n            return data;\n        },\n\n        getCellValue: function (ind, col_ind, summary) {\n            var col    = this.columns[col_ind];\n            var record = (summary !== true ? this.records[ind] : this.summary[ind]);\n            var data   = this.parseField(record, col.field);\n            if (record.changes && typeof record.changes[col.field] != 'undefined') {\n                data = record.changes[col.field];\n                if ($.isPlainObject(data)) {\n                    if (data.text != null) data = data.text;\n                    if (data.id != null) data = data.id;\n                }\n            }\n            if (data == null) data = '';\n            return data;\n        },\n        \n        getFooterHTML: function () {\n            return '<div>'+\n                '    <div class=\"w2ui-footer-left\"></div>'+\n                '    <div class=\"w2ui-footer-right\"></div>'+\n                '    <div class=\"w2ui-footer-center\"></div>'+\n                '</div>';\n        },\n\n        status: function (msg) {\n            if (typeof msg != 'undefined') {\n                $('#grid_'+ this.name +'_footer').find('.w2ui-footer-left').html(msg);\n            } else {\n                // show number of selected\n                var msgLeft = '';\n                var sel = this.getSelection();\n                if (sel.length > 0) {\n                    if (this.show.statusSelection && sel.length > 1) {\n                        msgLeft = String(sel.length).replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1,\") + ' ' + w2utils.lang('selected');\n                    }\n                    if (this.show.statusRecordID && sel.length == 1) {\n                        var tmp = sel[0];\n                        if (typeof tmp == 'object') tmp = tmp.recid + ', '+ w2utils.lang('Column') +': '+ tmp.column;\n                        msgLeft = w2utils.lang('Record ID') + ': '+ tmp + ' ';\n                    }\n                }\n                $('#grid_'+ this.name +'_footer .w2ui-footer-left').html(msgLeft);\n                // toolbar\n                if (sel.length == 1) this.toolbar.enable('w2ui-edit'); else this.toolbar.disable('w2ui-edit');\n                if (sel.length >= 1) this.toolbar.enable('w2ui-delete'); else this.toolbar.disable('w2ui-delete');\n            }\n        },\n\n        lock: function (msg, showSpinner) {\n            var box  = $(this.box).find('> div:first-child');\n            var args = Array.prototype.slice.call(arguments, 0);\n            args.unshift(box);\n            setTimeout(function () { w2utils.lock.apply(window, args); }, 10);\n        },\n\n        unlock: function (speed) {\n            var box = this.box;\n            setTimeout(function () { w2utils.unlock(box, speed); }, 25); // needed timer so if server fast, it will not flash\n        },\n\n        stateSave: function (returnOnly) {\n            if (!localStorage) return null;\n            var state = {\n                columns     : [],\n                show        : $.extend({}, this.show),\n                last        : {\n                    search      : this.last.search,\n                    multi       : this.last.multi,\n                    logic       : this.last.logic,\n                    caption     : this.last.caption,\n                    field       : this.last.field,\n                    scrollTop   : this.last.scrollTop,\n                    scrollLeft  : this.last.scrollLeft\n                },\n                sortData    : [],\n                searchData  : []\n            };\n            for (var i = 0; i < this.columns.length; i++) {\n                var col = this.columns[i];\n                state.columns.push({\n                    field           : col.field,\n                    hidden          : col.hidden ? true : false,\n                    size            : col.size ? col.size : null,\n                    sizeCalculated  : col.sizeCalculated ? col.sizeCalculated : null,\n                    sizeOriginal    : col.sizeOriginal ? col.sizeOriginal : null,\n                    sizeType        : col.sizeType ? col.sizeType : null\n                });\n            }\n            for (var i = 0; i < this.sortData.length; i++) state.sortData.push($.extend({}, this.sortData[i]));\n            for (var i = 0; i < this.searchData.length; i++) state.searchData.push($.extend({}, this.searchData[i]));\n            // save into local storage\n            if (returnOnly !== true) {\n                // event before\n                var eventData = this.trigger({ phase: 'before', type: 'stateSave', target: this.name, state: state });\n                if (eventData.isCancelled === true) { if (typeof callBack == 'function') callBack({ status: 'error', message: 'Request aborted.' }); return; }\n                try {\n                    var savedState = $.parseJSON(localStorage.w2ui || '{}');\n                    if (!savedState) savedState = {};\n                    if (!savedState.states) savedState.states = {};\n                    savedState.states[this.name] = state;\n                    localStorage.w2ui = JSON.stringify(savedState);\n                } catch (e) {\n                    delete localStorage.w2ui;\n                    return null;\n                }\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n            }\n            return state;\n        },\n\n        stateRestore: function (newState) {\n            var obj = this;\n            if (!newState) {\n                // read it from local storage\n                try {\n                    if (!localStorage) return false;\n                    var tmp = $.parseJSON(localStorage.w2ui || '{}');\n                    if (!tmp) tmp = {};\n                    if (!tmp.states) tmp.states = {};\n                    newState = tmp.states[this.name];\n                } catch (e) {\n                    delete localStorage.w2ui;\n                    return null;\n                }\n            }\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'stateRestore', target: this.name, state: newState });\n            if (eventData.isCancelled === true) { if (typeof callBack == 'function') callBack({ status: 'error', message: 'Request aborted.' }); return; }\n            // default behavior\n            if ($.isPlainObject(newState)) {\n                $.extend(this.show, newState.show);\n                $.extend(this.last, newState.last);\n                var sTop  = this.last.scrollTop;\n                var sLeft = this.last.scrollLeft;\n                for (var c = 0; c < newState.columns.length; c++) {\n                    var tmp = newState.columns[c];\n                    var col = this.getColumn(tmp.field);\n                    if (col) $.extend(col, tmp);\n                }\n                this.sortData.splice(0, this.sortData.length);\n                for (var c = 0; c < newState.sortData.length; c++) this.sortData.push(newState.sortData[c]);\n                this.searchData.splice(0, this.searchData.length);\n                for (var c = 0; c < newState.searchData.length; c++) this.searchData.push(newState.searchData[c]);\n                // apply sort and search\n                setTimeout(function () {\n                    // needs timeout as records need to be populated\n                    // ez 10.09.2014 this -->\n                    if (!(typeof obj.url != 'object' ? obj.url : obj.url.get)) {\n                        if (obj.sortData.length > 0) obj.localSort();\n                        if (obj.searchData.length > 0) obj.localSearch();\n                    }\n                    obj.last.scrollTop  = sTop;\n                    obj.last.scrollLeft = sLeft;\n                    obj.refresh();\n                }, 1);\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return true;\n        },\n\n        stateReset: function () {\n            this.stateRestore(this.last.state);\n            // remove from local storage\n            if (localStorage) {\n                try {\n                    var tmp = $.parseJSON(localStorage.w2ui || '{}');\n                    if (tmp.states && tmp.states[this.name]) {\n                        delete tmp.states[this.name];\n                    }\n                    localStorage.w2ui = JSON.stringify(tmp);\n                } catch (e) {\n                    delete localStorage.w2ui;\n                    return null;\n                }                \n            }\n        },\n\n        parseField: function (obj, field) {\n            var val = '';\n            try { // need this to make sure no error in fields\n                val = obj;\n                var tmp = String(field).split('.');\n                for (var i = 0; i < tmp.length; i++) {\n                    val = val[tmp[i]];\n                }\n            } catch (event) {\n                val = '';\n            }\n            return val;\n        },\n\n        prepareData: function () {\n            // loops thru records and prepares date and time objects\n            for (var r = 0; r < this.records.length; r++) {\n                var rec = this.records[r];\n                for (var c = 0; c < this.columns.length; c++) {\n                    var column = this.columns[c];\n                    if (rec[column.field] == null || typeof column.render != 'string') continue;\n                    // number\n                    if (['number', 'int', 'float', 'money', 'currency', 'percent'].indexOf(column.render.split(':')[0])  != -1) {\n                        if (typeof rec[column.field] != 'number') rec[column.field] = parseFloat(rec[column.field]);\n                    }\n                    // date\n                    if (['date', 'age'].indexOf(column.render.split(':')[0]) != -1) {\n                        if (!rec[column.field + '_']) {\n                            var dt = rec[column.field];\n                            if (w2utils.isInt(dt)) dt = parseInt(dt);\n                            rec[column.field + '_'] = new Date(dt);\n                        }\n                    }\n                    // time\n                    if (['time'].indexOf(column.render) != -1) {\n                        if (w2utils.isTime(rec[column.field])) { // if string\n                            var tmp = w2utils.isTime(rec[column.field], true);\n                            var dt = new Date();\n                            dt.setHours(tmp.hours, tmp.minutes, (tmp.seconds ? tmp.seconds : 0), 0); // sets hours, min, sec, mills\n                            if (!rec[column.field + '_']) rec[column.field + '_'] = dt;\n                        } else { // if date object\n                            var tmp = rec[column.field];\n                            if (w2utils.isInt(tmp)) tmp = parseInt(tmp);\n                            var tmp = (tmp != null ? new Date(tmp) : new Date());\n                            var dt  = new Date();\n                            dt.setHours(tmp.getHours(), tmp.getMinutes(), tmp.getSeconds(), 0); // sets hours, min, sec, mills\n                            if (!rec[column.field + '_']) rec[column.field + '_'] = dt;\n                        }\n                    }\n                }\n            }\n        },\n\n        nextCell: function (col_ind, editable) {\n            var check = col_ind + 1;\n            if (this.columns.length == check) return null;\n            if (editable === true) {\n                var edit = this.columns[check].editable;\n                if (this.columns[check].hidden || typeof edit == 'undefined'\n                    || (edit && ['checkbox', 'check'].indexOf(edit.type) != -1)) return this.nextCell(check, editable);\n            }\n            return check;\n        },\n\n        prevCell: function (col_ind, editable) {\n            var check = col_ind - 1;\n            if (check < 0) return null;\n            if (editable === true) {\n                var edit = this.columns[check].editable;\n                if (this.columns[check].hidden || typeof edit == 'undefined'\n                    || (edit && ['checkbox', 'check'].indexOf(edit.type) != -1)) return this.prevCell(check, editable);\n            }\n            return check;\n        },\n\n        nextRow: function (ind) {\n            if ((ind + 1 < this.records.length && this.last.searchIds.length == 0) // if there are more records\n                    || (this.last.searchIds.length > 0 && ind < this.last.searchIds[this.last.searchIds.length-1])) {\n                ind++;\n                if (this.last.searchIds.length > 0) {\n                    while (true) {\n                        if ($.inArray(ind, this.last.searchIds) != -1 || ind > this.records.length) break;\n                        ind++;\n                    }\n                }\n                return ind;\n            } else {\n                return null;\n            }\n        },\n\n        prevRow: function (ind) {\n            if ((ind > 0 && this.last.searchIds.length == 0)  // if there are more records\n                    || (this.last.searchIds.length > 0 && ind > this.last.searchIds[0])) {\n                ind--;\n                if (this.last.searchIds.length > 0) {\n                    while (true) {\n                        if ($.inArray(ind, this.last.searchIds) != -1 || ind < 0) break;\n                        ind--;\n                    }\n                }\n                return ind;\n            } else {\n                return null;\n            }\n        }\n    };\n\n    $.extend(w2grid.prototype, w2utils.event);\n    w2obj.grid = w2grid;\n})();\n\n/************************************************************************\n*   Library: Web 2.0 UI for jQuery (using prototypical inheritance)\n*   - Following objects defined\n*        - w2layout        - layout widget\n*        - $().w2layout    - jQuery wrapper\n*   - Dependencies: jQuery, w2utils, w2toolbar, w2tabs\n*\n* == NICE TO HAVE ==\n*   - onResize for the panel\n*   - add more panel title positions (left=rotated, right=rotated, bottom)\n*   - bug: resizer is visible (and onHover) when panel is hidden.\n*   - bug: when you assign content before previous transition completed.\n*\n* == 1.5 changes\n*   - $('#layout').w2layout() - if called w/o argument then it returns layout object\n*\n************************************************************************/\n\n(function () {\n    var w2layout = function (options) {\n        this.box     = null;        // DOM Element that holds the element\n        this.name    = null;        // unique name for w2ui\n        this.panels  = [];\n        this.tmp     = {};\n\n        this.padding = 1;        // panel padding\n        this.resizer = 4;        // resizer width or height\n        this.style   = '';\n\n        this.onShow         = null;\n        this.onHide         = null;\n        this.onResizing     = null;\n        this.onResizerClick = null;\n        this.onRender       = null;\n        this.onRefresh      = null;\n        this.onResize       = null;\n        this.onDestroy      = null;\n\n        $.extend(true, this, w2obj.layout, options);\n    };\n\n    var w2panels = ['top', 'left', 'main', 'preview', 'right', 'bottom'];\n\n    // ====================================================\n    // -- Registers as a jQuery plugin\n\n    $.fn.w2layout = function(method) {\n        if ($.isPlainObject(method)) {\n            // check name parameter\n            if (!w2utils.checkName(method, 'w2layout')) return;\n            var panels = method.panels || [];\n            var object = new w2layout(method);\n            $.extend(object, { handlers: [], panels: [] });\n            // add defined panels\n            for (var p = 0, len = panels.length; p < len; p++) {\n                object.panels[p] = $.extend(true, {}, w2layout.prototype.panel, panels[p]);\n                if ($.isPlainObject(object.panels[p].tabs) || $.isArray(object.panels[p].tabs)) initTabs(object, panels[p].type);\n                if ($.isPlainObject(object.panels[p].toolbar) || $.isArray(object.panels[p].toolbar)) initToolbar(object, panels[p].type);\n            }\n            // add all other panels\n            for (var p1 = 0; p1 < w2panels.length; p1++) {\n                if (object.get(w2panels[p1]) !== null) continue;\n                object.panels.push($.extend(true, {}, w2layout.prototype.panel, { type: w2panels[p1], hidden: (w2panels[p1] !== 'main'), size: 50 }));\n            }\n            if ($(this).length > 0) {\n                object.render($(this)[0]);\n            }\n            w2ui[object.name] = object;\n            return object;\n\n        } else {\n            var obj = w2ui[$(this).attr('name')];\n            if (!obj) return null;\n            if (arguments.length > 0) {\n                if (obj[method]) obj[method].apply(obj, Array.prototype.slice.call(arguments, 1));\n                return this;\n            } else {\n                return obj;\n            }\n        }\n\n        function initTabs(object, panel, tabs) {\n            var pan = object.get(panel);\n            if (pan !== null && typeof tabs == 'undefined') tabs = pan.tabs;\n            if (pan === null || tabs === null) return false;\n            // instanciate tabs\n            if ($.isArray(tabs)) tabs = { tabs: tabs };\n            $().w2destroy(object.name + '_' + panel + '_tabs'); // destroy if existed\n            pan.tabs = $().w2tabs($.extend({}, tabs, { owner: object, name: object.name + '_' + panel + '_tabs' }));\n            pan.show.tabs = true;\n            return true;\n        }\n\n        function initToolbar(object, panel, toolbar) {\n            var pan = object.get(panel);\n            if (pan !== null && typeof toolbar == 'undefined') toolbar = pan.toolbar;\n            if (pan === null || toolbar === null) return false;\n            // instanciate toolbar\n            if ($.isArray(toolbar)) toolbar = { items: toolbar };\n            $().w2destroy(object.name + '_' + panel + '_toolbar'); // destroy if existed\n            pan.toolbar = $().w2toolbar($.extend({}, toolbar, { owner: object, name: object.name + '_' + panel + '_toolbar' }));\n            pan.show.toolbar = true;\n            return true;\n        }\n    };\n\n    // ====================================================\n    // -- Implementation of core functionality\n\n    w2layout.prototype = {\n        // default setting for a panel\n        panel: {\n            type      : null,        // left, right, top, bottom\n            title     : '',\n            size      : 100,        // width or height depending on panel name\n            minSize   : 20,\n            maxSize   : false,\n            hidden    : false,\n            resizable : false,\n            overflow  : 'auto',\n            style     : '',\n            content   : '',        // can be String or Object with .render(box) method\n            tabs      : null,\n            toolbar   : null,\n            width     : null,        // read only\n            height    : null,        // read only\n            show : {\n                toolbar : false,\n                tabs    : false\n            },\n            onRefresh : null,\n            onShow    : null,\n            onHide    : null\n        },\n\n        // alias for content\n        html: function (panel, data, transition) {\n            return this.content(panel, data, transition);\n        },\n\n        content: function (panel, data, transition) {\n            var obj = this;\n            var p = this.get(panel);\n            // if it is CSS panel\n            if (panel == 'css') {\n                $('#layout_'+ obj.name +'_panel_css').html('<style>'+ data +'</style>');\n                return true;\n            }\n            if (p === null) return false;\n            if (typeof data == 'undefined' || data === null) {\n                return p.content;\n            } else {\n                if (data instanceof jQuery) {\n                    console.log('ERROR: You can not pass jQuery object to w2layout.content() method');\n                    return false;\n                }\n                var pname    = '#layout_'+ this.name + '_panel_'+ p.type;\n                var current  = $(pname + '> .w2ui-panel-content');\n                var panelTop = 0;\n                if (current.length > 0) {\n                    $(pname).scrollTop(0);\n                    panelTop = $(current).position().top;\n                }\n                if (p.content === '') {\n                    p.content = data;\n                    this.refresh(panel);\n                } else {\n                    p.content = data;\n                    if (!p.hidden) {\n                        if (transition !== null && transition !== '' && typeof transition != 'undefined') {\n                            // apply transition\n                            var div1 = $(pname + '> .w2ui-panel-content');\n                            div1.after('<div class=\"w2ui-panel-content new-panel\" style=\"'+ div1[0].style.cssText +'\"></div>');\n                            var div2 = $(pname + '> .w2ui-panel-content.new-panel');\n                            div1.css('top', panelTop);\n                            div2.css('top', panelTop);\n                            if (typeof data == 'object') {\n                                data.box = div2[0]; // do not do .render(box);\n                                data.render();\n                            } else {\n                                div2.html(data);\n                            }\n                            w2utils.transition(div1[0], div2[0], transition, function () {\n                                div1.remove();\n                                div2.removeClass('new-panel');\n                                div2.css('overflow', p.overflow);\n                                // IE Hack\n                                obj.resize();\n                                if (window.navigator.userAgent.indexOf('MSIE') != -1) setTimeout(function () { obj.resize(); }, 100);\n                            });\n                        }\n                    }\n                    this.refresh(panel);\n                }\n            }\n            // IE Hack\n            obj.resize();\n            if (window.navigator.userAgent.indexOf('MSIE') != -1) setTimeout(function () { obj.resize(); }, 100);\n            return true;\n        },\n\n        load: function (panel, url, transition, onLoad) {\n            var obj = this;\n            if (panel == 'css') {\n                $.get(url, function (data, status, xhr) { // should always be $.get as it is template\n                    obj.content(panel, xhr.responseText);\n                    if (onLoad) onLoad();\n                });\n                return true;\n            }\n            if (this.get(panel) !== null) {\n                $.get(url, function (data, status, xhr) { // should always be $.get as it is template\n                    obj.content(panel, xhr.responseText, transition);\n                    if (onLoad) onLoad();\n                    // IE Hack\n                    obj.resize();\n                    if (window.navigator.userAgent.indexOf('MSIE') != -1) setTimeout(function () { obj.resize(); }, 100);\n                });\n                return true;\n            }\n            return false;\n        },\n\n        sizeTo: function (panel, size) {\n            var obj = this;\n            var pan = obj.get(panel);\n            if (pan === null) return false;\n            // resize\n            $(obj.box).find(' > div > .w2ui-panel').css(w2utils.cssPrefix('transition', '.2s'));\n            setTimeout(function () {\n                obj.set(panel, { size: size });\n            }, 1);\n            // clean\n            setTimeout(function () {\n                $(obj.box).find(' > div > .w2ui-panel').css(w2utils.cssPrefix('transition', '0s'));\n                obj.resize();\n            }, 500);\n            return true;\n        },\n\n        show: function (panel, immediate) {\n            var obj = this;\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'show', target: panel, object: this.get(panel), immediate: immediate });\n            if (eventData.isCancelled === true) return;\n\n            var p = obj.get(panel);\n            if (p === null) return false;\n            p.hidden = false;\n            if (immediate === true) {\n                $('#layout_'+ obj.name +'_panel_'+panel).css({ 'opacity': '1' });\n                if (p.resizable) $('#layout_'+ obj.name +'_resizer_'+panel).show();\n                obj.trigger($.extend(eventData, { phase: 'after' }));\n                obj.resize();\n            } else {\n                if (p.resizable) $('#layout_'+ obj.name +'_resizer_'+panel).show();\n                // resize\n                $('#layout_'+ obj.name +'_panel_'+panel).css({ 'opacity': '0' });\n                $(obj.box).find(' > div > .w2ui-panel').css(w2utils.cssPrefix('transition', '.2s'));\n                setTimeout(function () { obj.resize(); }, 1);\n                // show\n                setTimeout(function() {\n                    $('#layout_'+ obj.name +'_panel_'+ panel).css({ 'opacity': '1' });\n                }, 250);\n                // clean\n                setTimeout(function () {\n                    $(obj.box).find(' > div > .w2ui-panel').css(w2utils.cssPrefix('transition', '0s'));\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                    obj.resize();\n                }, 500);\n            }\n            return true;\n        },\n\n        hide: function (panel, immediate) {\n            var obj = this;\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'hide', target: panel, object: this.get(panel), immediate: immediate });\n            if (eventData.isCancelled === true) return;\n\n            var p = obj.get(panel);\n            if (p === null) return false;\n            p.hidden = true;\n            if (immediate === true) {\n                $('#layout_'+ obj.name +'_panel_'+panel).css({ 'opacity': '0'    });\n                $('#layout_'+ obj.name +'_resizer_'+panel).hide();\n                obj.trigger($.extend(eventData, { phase: 'after' }));\n                obj.resize();\n            } else {\n                $('#layout_'+ obj.name +'_resizer_'+panel).hide();\n                // hide\n                $(obj.box).find(' > div > .w2ui-panel').css(w2utils.cssPrefix('transition', '.2s'));\n                $('#layout_'+ obj.name +'_panel_'+panel).css({ 'opacity': '0'    });\n                setTimeout(function () { obj.resize(); }, 1);\n                // clean\n                setTimeout(function () {\n                    $(obj.box).find(' > div > .w2ui-panel').css(w2utils.cssPrefix('transition', '0s'));\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                    obj.resize();\n                }, 500);\n            }\n            return true;\n        },\n\n        toggle: function (panel, immediate) {\n            var p = this.get(panel);\n            if (p === null) return false;\n            if (p.hidden) return this.show(panel, immediate); else return this.hide(panel, immediate);\n        },\n\n        set: function (panel, options) {\n            var ind = this.get(panel, true);\n            if (ind === null) return false;\n            $.extend(this.panels[ind], options);\n            // refresh only when content changed\n            if (typeof options['content'] != 'undefined') this.refresh(panel);\n            // show/hide resizer\n            var resizer = $('#layout_'+ this.name +'_resizer_'+ panel);\n            if (options.resizable) resizer.show(); else resizer.hide();\n            this.resize(); // resize is needed when panel size is changed\n            return true;\n        },\n\n        get: function (panel, returnIndex) {\n            for (var p = 0; p < this.panels.length; p++) {\n                if (this.panels[p].type == panel) {\n                    if (returnIndex === true) return p; else return this.panels[p];\n                }\n            }\n            return null;\n        },\n\n        el: function (panel) {\n            var el = $('#layout_'+ this.name +'_panel_'+ panel +'> .w2ui-panel-content');\n            if (el.length != 1) return null;\n            return el[0];\n        },\n\n        hideToolbar: function (panel) {\n            var pan = this.get(panel);\n            if (!pan) return;\n            pan.show.toolbar = false;\n            $('#layout_'+ this.name +'_panel_'+ panel +'> .w2ui-panel-toolbar').hide();\n            this.resize();\n        },\n\n        showToolbar: function (panel) {\n            var pan = this.get(panel);\n            if (!pan) return;\n            pan.show.toolbar = true;\n            $('#layout_'+ this.name +'_panel_'+ panel +'> .w2ui-panel-toolbar').show();\n            this.resize();\n        },\n\n        toggleToolbar: function (panel) {\n            var pan = this.get(panel);\n            if (!pan) return;\n            if (pan.show.toolbar) this.hideToolbar(panel); else this.showToolbar(panel);\n        },\n\n        hideTabs: function (panel) {\n            var pan = this.get(panel);\n            if (!pan) return;\n            pan.show.tabs = false;\n            $('#layout_'+ this.name +'_panel_'+ panel +'> .w2ui-panel-tabs').hide();\n            this.resize();\n        },\n\n        showTabs: function (panel) {\n            var pan = this.get(panel);\n            if (!pan) return;\n            pan.show.tabs = true;\n            $('#layout_'+ this.name +'_panel_'+ panel +'> .w2ui-panel-tabs').show();\n            this.resize();\n        },\n\n        toggleTabs: function (panel) {\n            var pan = this.get(panel);\n            if (!pan) return;\n            if (pan.show.tabs) this.hideTabs(panel); else this.showTabs(panel);\n        },\n\n        render: function (box) {\n            var obj = this;\n            // if (window.getSelection) window.getSelection().removeAllRanges(); // clear selection\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = obj.trigger({ phase: 'before', type: 'render', target: obj.name, box: box });\n            if (eventData.isCancelled === true) return;\n\n            if (typeof box != 'undefined' && box !== null) {\n                if ($(obj.box).find('#layout_'+ obj.name +'_panel_main').length > 0) {\n                    $(obj.box)\n                        .removeAttr('name')\n                        .removeClass('w2ui-layout')\n                        .html('');\n                }\n                obj.box = box;\n            }\n            if (!obj.box) return false;\n            $(obj.box)\n                .attr('name', obj.name)\n                .addClass('w2ui-layout')\n                .html('<div></div>');\n            if ($(obj.box).length > 0) $(obj.box)[0].style.cssText += obj.style;\n            // create all panels\n            for (var p1 = 0; p1 < w2panels.length; p1++) {\n                var pan  = obj.get(w2panels[p1]);\n                var html =  '<div id=\"layout_'+ obj.name + '_panel_'+ w2panels[p1] +'\" class=\"w2ui-panel\">'+\n                            '    <div class=\"w2ui-panel-title\"></div>'+\n                            '    <div class=\"w2ui-panel-tabs\"></div>'+\n                            '    <div class=\"w2ui-panel-toolbar\"></div>'+\n                            '    <div class=\"w2ui-panel-content\"></div>'+\n                            '</div>'+\n                            '<div id=\"layout_'+ obj.name + '_resizer_'+ w2panels[p1] +'\" class=\"w2ui-resizer\"></div>';\n                $(obj.box).find(' > div').append(html);\n                // tabs are rendered in refresh()\n            }\n            $(obj.box).find(' > div')\n                .append('<div id=\"layout_'+ obj.name + '_panel_css\" style=\"position: absolute; top: 10000px;\"></div');\n            obj.refresh(); // if refresh is not called here, the layout will not be available right after initialization\n            // process event\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n            // reinit events\n            setTimeout(function () { // needed this timeout to allow browser to render first if there are tabs or toolbar\n                initEvents();\n                obj.resize();\n            }, 0);\n            return (new Date()).getTime() - time;\n\n            function initEvents() {\n                obj.tmp.events = {\n                    resize : function (event) {\n                        w2ui[obj.name].resize();\n                    },\n                    resizeStart : resizeStart,\n                    mouseMove   : resizeMove,\n                    mouseUp     : resizeStop\n                };\n                $(window).on('resize', obj.tmp.events.resize);\n            }\n\n            function resizeStart(type, evnt) {\n                if (!obj.box) return;\n                if (!evnt) evnt = window.event;\n                if (!window.addEventListener) { window.document.attachEvent('onselectstart', function() { return false; } ); }\n                $(document).off('mousemove', obj.tmp.events.mouseMove).on('mousemove', obj.tmp.events.mouseMove);\n                $(document).off('mouseup', obj.tmp.events.mouseUp).on('mouseup', obj.tmp.events.mouseUp);\n                obj.tmp.resize = {\n                    type    : type,\n                    x       : evnt.screenX,\n                    y       : evnt.screenY,\n                    diff_x  : 0,\n                    diff_y  : 0,\n                    value   : 0\n                };\n                // lock all panels\n                for (var p1 = 0; p1 < w2panels.length; p1++) {\n                    var $tmp = $(obj.el(w2panels[p1])).parent().find('.w2ui-lock');\n                    if ($tmp.length > 0) {\n                        $tmp.attr('locked', 'previous');\n                    } else {\n                        obj.lock(w2panels[p1], { opacity: 0 });\n                    }\n                }\n                if (type == 'left' || type == 'right') {\n                    obj.tmp.resize.value = parseInt($('#layout_'+ obj.name +'_resizer_'+ type)[0].style.left);\n                }\n                if (type == 'top' || type == 'preview' || type == 'bottom') {\n                    obj.tmp.resize.value = parseInt($('#layout_'+ obj.name +'_resizer_'+ type)[0].style.top);\n                }\n            }\n\n            function resizeStop(evnt) {\n                if (!obj.box) return;\n                if (!evnt) evnt = window.event;\n                if (!window.addEventListener) { window.document.attachEvent('onselectstart', function() { return false; } ); }\n                $(document).off('mousemove', obj.tmp.events.mouseMove);\n                $(document).off('mouseup', obj.tmp.events.mouseUp);\n                if (typeof obj.tmp.resize == 'undefined') return;\n                // unlock all panels\n                for (var p1 = 0; p1 < w2panels.length; p1++) {\n                    var $tmp = $(obj.el(w2panels[p1])).parent().find('.w2ui-lock');\n                    if ($tmp.attr('locked') == 'previous') {\n                        $tmp.removeAttr('locked');\n                    } else {\n                        obj.unlock(w2panels[p1]);\n                    }\n                }\n                // set new size\n                if (obj.tmp.diff_x !== 0 || obj.tmp.resize.diff_y !== 0) { // only recalculate if changed\n                    var ptop    = obj.get('top');\n                    var pbottom = obj.get('bottom');\n                    var panel   = obj.get(obj.tmp.resize.type);\n                    var height  = parseInt($(obj.box).height());\n                    var width   = parseInt($(obj.box).width());\n                    var str     = String(panel.size);\n                    var ns, nd;\n                    switch (obj.tmp.resize.type) {\n                        case 'top':\n                            ns = parseInt(panel.sizeCalculated) + obj.tmp.resize.diff_y;\n                            nd = 0;\n                            break;\n                        case 'bottom':\n                            ns = parseInt(panel.sizeCalculated) - obj.tmp.resize.diff_y;\n                            nd = 0;\n                            break;\n                        case 'preview':\n                            ns = parseInt(panel.sizeCalculated) - obj.tmp.resize.diff_y;\n                            nd = (ptop && !ptop.hidden ? ptop.sizeCalculated : 0) +\n                                (pbottom && !pbottom.hidden ? pbottom.sizeCalculated : 0);\n                            break;\n                        case 'left':\n                            ns = parseInt(panel.sizeCalculated) + obj.tmp.resize.diff_x;\n                            nd = 0;\n                            break;\n                        case 'right':\n                            ns = parseInt(panel.sizeCalculated) - obj.tmp.resize.diff_x;\n                            nd = 0;\n                            break;\n                    }\n                    // set size\n                    if (str.substr(str.length-1) == '%') {\n                        panel.size = Math.floor(ns * 100 /\n                            (panel.type == 'left' || panel.type == 'right' ? width : height - nd) * 100) / 100 + '%';\n                    } else {\n                        panel.size = ns;\n                    }\n                    obj.resize();\n                }\n                $('#layout_'+ obj.name + '_resizer_'+ obj.tmp.resize.type).removeClass('active');\n                delete obj.tmp.resize;\n            }\n\n            function resizeMove(evnt) {\n                if (!obj.box) return;\n                if (!evnt) evnt = window.event;\n                if (typeof obj.tmp.resize == 'undefined') return;\n                var panel = obj.get(obj.tmp.resize.type);\n                // event before\n                var tmp = obj.tmp.resize;\n                var eventData = obj.trigger({ phase: 'before', type: 'resizing', target: obj.name, object: panel, originalEvent: evnt,\n                    panel: tmp ? tmp.type : 'all', diff_x: tmp ? tmp.diff_x : 0, diff_y: tmp ? tmp.diff_y : 0 });\n                if (eventData.isCancelled === true) return;\n\n                var p         = $('#layout_'+ obj.name + '_resizer_'+ tmp.type);\n                var resize_x  = (evnt.screenX - tmp.x);\n                var resize_y  = (evnt.screenY - tmp.y);\n                var mainPanel = obj.get('main');\n\n                if (!p.hasClass('active')) p.addClass('active');\n\n                switch (tmp.type) {\n                    case 'left':\n                        if (panel.minSize - resize_x > panel.width) {\n                            resize_x = panel.minSize - panel.width;\n                        }\n                        if (panel.maxSize && (panel.width + resize_x > panel.maxSize)) {\n                            resize_x = panel.maxSize - panel.width;\n                        }\n                        if (mainPanel.minSize + resize_x > mainPanel.width) {\n                            resize_x = mainPanel.width - mainPanel.minSize;\n                        }\n                        break;\n\n                    case 'right':\n                        if (panel.minSize + resize_x > panel.width) {\n                            resize_x = panel.width - panel.minSize;\n                        }\n                        if (panel.maxSize && (panel.width - resize_x > panel.maxSize)) {\n                            resize_x = panel.width - panel.maxSize;\n                        }\n                        if (mainPanel.minSize - resize_x > mainPanel.width) {\n                            resize_x = mainPanel.minSize - mainPanel.width;\n                        }\n                        break;\n\n                    case 'top':\n                        if (panel.minSize - resize_y > panel.height) {\n                            resize_y = panel.minSize - panel.height;\n                        }\n                        if (panel.maxSize && (panel.height + resize_y > panel.maxSize)) {\n                            resize_y = panel.maxSize - panel.height;\n                        }\n                        if (mainPanel.minSize + resize_y > mainPanel.height) {\n                            resize_y = mainPanel.height - mainPanel.minSize;\n                        }\n                        break;\n\n                    case 'preview':\n                    case 'bottom':\n                        if (panel.minSize + resize_y > panel.height) {\n                            resize_y = panel.height - panel.minSize;\n                        }\n                        if (panel.maxSize && (panel.height - resize_y > panel.maxSize)) {\n                            resize_y = panel.height - panel.maxSize;\n                        }\n                        if (mainPanel.minSize - resize_y > mainPanel.height) {\n                            resize_y = mainPanel.minSize - mainPanel.height;\n                        }\n                        break;\n                }\n                tmp.diff_x = resize_x;\n                tmp.diff_y = resize_y;\n\n                switch (tmp.type) {\n                    case 'top':\n                    case 'preview':\n                    case 'bottom':\n                        tmp.diff_x = 0;\n                        if (p.length > 0) p[0].style.top = (tmp.value + tmp.diff_y) + 'px';\n                        break;\n\n                    case 'left':\n                    case 'right':\n                        tmp.diff_y = 0;\n                        if (p.length > 0) p[0].style.left = (tmp.value + tmp.diff_x) + 'px';\n                        break;\n                }\n                // event after\n                obj.trigger($.extend(eventData, { phase: 'after' }));\n            }\n        },\n\n        refresh: function (panel) {\n            var obj = this;\n            // if (window.getSelection) window.getSelection().removeAllRanges(); // clear selection\n            if (typeof panel == 'undefined') panel = null;\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = obj.trigger({ phase: 'before', type: 'refresh', target: (typeof panel != 'undefined' ? panel : obj.name), object: obj.get(panel) });\n            if (eventData.isCancelled === true) return;\n            // obj.unlock(panel);\n            if (typeof panel == 'string') {\n                var p = obj.get(panel);\n                if (p === null) return;\n                var pname = '#layout_'+ obj.name + '_panel_'+ p.type;\n                var rname = '#layout_'+ obj.name +'_resizer_'+ p.type;\n                // apply properties to the panel\n                $(pname).css({ display: p.hidden ? 'none' : 'block' });\n                if (p.resizable) $(rname).show(); else $(rname).hide();\n                // insert content\n                if (typeof p.content == 'object' && typeof p.content.render === 'function') {\n                    p.content.box = $(pname +'> .w2ui-panel-content')[0];\n                    setTimeout(function () {\n                        // need to remove unnecessary classes\n                        if ($(pname +'> .w2ui-panel-content').length > 0) {\n                            $(pname +'> .w2ui-panel-content')\n                                .removeClass()\n                                .removeAttr('name')\n                                .addClass('w2ui-panel-content')\n                                .css('overflow', p.overflow)[0].style.cssText += ';' + p.style;\n                        }\n                        p.content.render(); // do not do .render(box);\n                    }, 1);\n                } else {\n                    // need to remove unnecessary classes\n                    if ($(pname +'> .w2ui-panel-content').length > 0) {\n                        $(pname +'> .w2ui-panel-content')\n                            .removeClass()\n                            .removeAttr('name')\n                            .addClass('w2ui-panel-content')\n                            .html(p.content)\n                            .css('overflow', p.overflow)[0].style.cssText += ';' + p.style;\n                    }\n                }\n                // if there are tabs and/or toolbar - render it\n                var tmp = $(obj.box).find(pname +'> .w2ui-panel-tabs');\n                if (p.show.tabs) {\n                    if (tmp.find('[name='+ p.tabs.name +']').length === 0 && p.tabs !== null) tmp.w2render(p.tabs); else p.tabs.refresh();\n                } else {\n                    tmp.html('').removeClass('w2ui-tabs').hide();\n                }\n                tmp = $(obj.box).find(pname +'> .w2ui-panel-toolbar');\n                if (p.show.toolbar) {\n                    if (tmp.find('[name='+ p.toolbar.name +']').length === 0 && p.toolbar !== null) tmp.w2render(p.toolbar); else p.toolbar.refresh();\n                } else {\n                    tmp.html('').removeClass('w2ui-toolbar').hide();\n                }\n                // show title\n                tmp = $(obj.box).find(pname +'> .w2ui-panel-title');\n                if (p.title) {\n                    tmp.html(p.title).show();\n                } else {\n                    tmp.html('').hide();\n                }\n            } else {\n                if ($('#layout_'+ obj.name +'_panel_main').length == 0) {\n                    obj.render();\n                    return;\n                }\n                obj.resize();\n                // refresh all of them\n                for (var p1 = 0; p1 < this.panels.length; p1++) { obj.refresh(this.panels[p1].type); }\n            }\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        resize: function () {\n            // if (window.getSelection) window.getSelection().removeAllRanges();    // clear selection\n            if (!this.box) return false;\n            var time = (new Date()).getTime();\n            // event before\n            var tmp = this.tmp.resize;\n            var eventData = this.trigger({ phase: 'before', type: 'resize', target: this.name,\n                panel: tmp ? tmp.type : 'all', diff_x: tmp ? tmp.diff_x : 0, diff_y: tmp ? tmp.diff_y : 0  });\n            if (eventData.isCancelled === true) return;\n            if (this.padding < 0) this.padding = 0;\n\n            // layout itself\n            var width  = parseInt($(this.box).width());\n            var height = parseInt($(this.box).height());\n            $(this.box).find(' > div').css({\n                width    : width + 'px',\n                height    : height + 'px'\n            });\n            var obj = this;\n            // panels\n            var pmain   = this.get('main');\n            var pprev   = this.get('preview');\n            var pleft   = this.get('left');\n            var pright  = this.get('right');\n            var ptop    = this.get('top');\n            var pbottom = this.get('bottom');\n            var smain   = true; // main always on\n            var sprev   = (pprev !== null && pprev.hidden !== true ? true : false);\n            var sleft   = (pleft !== null && pleft.hidden !== true ? true : false);\n            var sright  = (pright !== null && pright.hidden !== true ? true : false);\n            var stop    = (ptop !== null && ptop.hidden !== true ? true : false);\n            var sbottom = (pbottom !== null && pbottom.hidden !== true ? true : false);\n            var l, t, w, h, e;\n            // calculate %\n            for (var p = 0; p < w2panels.length; p++) {\n                if (w2panels[p] === 'main') continue;\n                var tmp = this.get(w2panels[p]);\n                if (!tmp) continue;\n                var str = String(tmp.size || 0);\n                if (str.substr(str.length-1) == '%') {\n                    var tmph = height;\n                    if (tmp.type == 'preview') {\n                        tmph = tmph -\n                            (ptop && !ptop.hidden ? ptop.sizeCalculated : 0) -\n                            (pbottom && !pbottom.hidden ? pbottom.sizeCalculated : 0);\n                    }\n                    tmp.sizeCalculated = parseInt((tmp.type == 'left' || tmp.type == 'right' ? width : tmph) * parseFloat(tmp.size) / 100);\n                } else {\n                    tmp.sizeCalculated = parseInt(tmp.size);\n                }\n                tmp.sizeCalculated = Math.max(tmp.sizeCalculated, parseInt(tmp.minSize));\n            }\n            // top if any\n            if (ptop !== null && ptop.hidden !== true) {\n                l = 0;\n                t = 0;\n                w = width;\n                h = ptop.sizeCalculated;\n                $('#layout_'+ this.name +'_panel_top').css({\n                    'display': 'block',\n                    'left': l + 'px',\n                    'top': t + 'px',\n                    'width': w + 'px',\n                    'height': h + 'px'\n                }).show();\n                ptop.width  = w;\n                ptop.height = h;\n                // resizer\n                if (ptop.resizable) {\n                    t = ptop.sizeCalculated - (this.padding === 0 ? this.resizer : 0);\n                    h = (this.resizer > this.padding ? this.resizer : this.padding);\n                    $('#layout_'+ this.name +'_resizer_top').show().css({\n                        'display': 'block',\n                        'left': l + 'px',\n                        'top': t + 'px',\n                        'width': w + 'px',\n                        'height': h + 'px',\n                        'cursor': 'ns-resize'\n                    }).off('mousedown').on('mousedown', function (event) {\n                        // event before\n                        var eventData = obj.trigger({ phase: 'before', type: 'resizerClick', target: 'top', originalEvent: event });\n                        if (eventData.isCancelled === true) return;\n                        // default action\n                        w2ui[obj.name].tmp.events.resizeStart('top', event);\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                        return false;\n                    });\n                }\n            } else {\n                $('#layout_'+ this.name +'_panel_top').hide();\n            }\n            // left if any\n            if (pleft !== null && pleft.hidden !== true) {\n                l = 0;\n                t = 0 + (stop ? ptop.sizeCalculated + this.padding : 0);\n                w = pleft.sizeCalculated;\n                h = height - (stop ? ptop.sizeCalculated + this.padding : 0) -\n                        (sbottom ? pbottom.sizeCalculated + this.padding : 0);\n                e = $('#layout_'+ this.name +'_panel_left');\n                if (window.navigator.userAgent.indexOf('MSIE') != -1 && e.length > 0 && e[0].clientHeight < e[0].scrollHeight) w += 17; // IE hack\n                e.css({\n                    'display': 'block',\n                    'left': l + 'px',\n                    'top': t + 'px',\n                    'width': w + 'px',\n                    'height': h + 'px'\n                }).show();\n                pleft.width  = w;\n                pleft.height = h;\n                // resizer\n                if (pleft.resizable) {\n                    l = pleft.sizeCalculated - (this.padding === 0 ? this.resizer : 0);\n                    w = (this.resizer > this.padding ? this.resizer : this.padding);\n                    $('#layout_'+ this.name +'_resizer_left').show().css({\n                        'display': 'block',\n                        'left': l + 'px',\n                        'top': t + 'px',\n                        'width': w + 'px',\n                        'height': h + 'px',\n                        'cursor': 'ew-resize'\n                    }).off('mousedown').on('mousedown', function (event) {\n                        // event before\n                        var eventData = obj.trigger({ phase: 'before', type: 'resizerClick', target: 'left', originalEvent: event });\n                        if (eventData.isCancelled === true) return;\n                        // default action\n                        w2ui[obj.name].tmp.events.resizeStart('left', event);\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                        return false;\n                    });\n                }\n            } else {\n                $('#layout_'+ this.name +'_panel_left').hide();\n                $('#layout_'+ this.name +'_resizer_left').hide();\n            }\n            // right if any\n            if (pright !== null && pright.hidden !== true) {\n                l = width - pright.sizeCalculated;\n                t = 0 + (stop ? ptop.sizeCalculated + this.padding : 0);\n                w = pright.sizeCalculated;\n                h = height - (stop ? ptop.sizeCalculated + this.padding : 0) -\n                    (sbottom ? pbottom.sizeCalculated + this.padding : 0);\n                $('#layout_'+ this.name +'_panel_right').css({\n                    'display': 'block',\n                    'left': l + 'px',\n                    'top': t + 'px',\n                    'width': w + 'px',\n                    'height': h + 'px'\n                }).show();\n                pright.width  = w;\n                pright.height = h;\n                // resizer\n                if (pright.resizable) {\n                    l = l - this.padding;\n                    w = (this.resizer > this.padding ? this.resizer : this.padding);\n                    $('#layout_'+ this.name +'_resizer_right').show().css({\n                        'display': 'block',\n                        'left': l + 'px',\n                        'top': t + 'px',\n                        'width': w + 'px',\n                        'height': h + 'px',\n                        'cursor': 'ew-resize'\n                    }).off('mousedown').on('mousedown', function (event) {\n                        // event before\n                        var eventData = obj.trigger({ phase: 'before', type: 'resizerClick', target: 'right', originalEvent: event });\n                        if (eventData.isCancelled === true) return;\n                        // default action\n                        w2ui[obj.name].tmp.events.resizeStart('right', event);\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                        return false;\n                    });\n                }\n            } else {\n                $('#layout_'+ this.name +'_panel_right').hide();\n            }\n            // bottom if any\n            if (pbottom !== null && pbottom.hidden !== true) {\n                l = 0;\n                t = height - pbottom.sizeCalculated;\n                w = width;\n                h = pbottom.sizeCalculated;\n                $('#layout_'+ this.name +'_panel_bottom').css({\n                    'display': 'block',\n                    'left': l + 'px',\n                    'top': t + 'px',\n                    'width': w + 'px',\n                    'height': h + 'px'\n                }).show();\n                pbottom.width  = w;\n                pbottom.height = h;\n                // resizer\n                if (pbottom.resizable) {\n                    t = t - (this.padding === 0 ? 0 : this.padding);\n                    h = (this.resizer > this.padding ? this.resizer : this.padding);\n                    $('#layout_'+ this.name +'_resizer_bottom').show().css({\n                        'display': 'block',\n                        'left': l + 'px',\n                        'top': t + 'px',\n                        'width': w + 'px',\n                        'height': h + 'px',\n                        'cursor': 'ns-resize'\n                    }).off('mousedown').on('mousedown', function (event) {\n                        // event before\n                        var eventData = obj.trigger({ phase: 'before', type: 'resizerClick', target: 'bottom', originalEvent: event });\n                        if (eventData.isCancelled === true) return;\n                        // default action\n                        w2ui[obj.name].tmp.events.resizeStart('bottom', event);\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                        return false;\n                    });\n                }\n            } else {\n                $('#layout_'+ this.name +'_panel_bottom').hide();\n            }\n            // main - always there\n            l = 0 + (sleft ? pleft.sizeCalculated + this.padding : 0);\n            t = 0 + (stop ? ptop.sizeCalculated + this.padding : 0);\n            w = width  - (sleft ? pleft.sizeCalculated + this.padding : 0) -\n                (sright ? pright.sizeCalculated + this.padding: 0);\n            h = height - (stop ? ptop.sizeCalculated + this.padding : 0) -\n                (sbottom ? pbottom.sizeCalculated + this.padding : 0) -\n                (sprev ? pprev.sizeCalculated + this.padding : 0);\n            e = $('#layout_'+ this.name +'_panel_main');\n            if (window.navigator.userAgent.indexOf('MSIE') != -1 && e.length > 0 && e[0].clientHeight < e[0].scrollHeight) w += 17; // IE hack\n            e.css({\n                'display': 'block',\n                'left': l + 'px',\n                'top': t + 'px',\n                'width': w + 'px',\n                'height': h + 'px'\n            });\n            pmain.width  = w;\n            pmain.height = h;\n\n            // preview if any\n            if (pprev !== null && pprev.hidden !== true) {\n                l = 0 + (sleft ? pleft.sizeCalculated + this.padding : 0);\n                t = height - (sbottom ? pbottom.sizeCalculated + this.padding : 0) - pprev.sizeCalculated;\n                w = width  - (sleft ? pleft.sizeCalculated + this.padding : 0) -\n                    (sright ? pright.sizeCalculated + this.padding : 0);\n                h = pprev.sizeCalculated;\n                e = $('#layout_'+ this.name +'_panel_preview');\n                if (window.navigator.userAgent.indexOf('MSIE') != -1 && e.length > 0 && e[0].clientHeight < e[0].scrollHeight) w += 17; // IE hack\n                e.css({\n                    'display': 'block',\n                    'left': l + 'px',\n                    'top': t + 'px',\n                    'width': w + 'px',\n                    'height': h + 'px'\n                }).show();\n                pprev.width  = w;\n                pprev.height = h;\n                // resizer\n                if (pprev.resizable) {\n                    t = t - (this.padding === 0 ? 0 : this.padding);\n                    h = (this.resizer > this.padding ? this.resizer : this.padding);\n                    $('#layout_'+ this.name +'_resizer_preview').show().css({\n                        'display': 'block',\n                        'left': l + 'px',\n                        'top': t + 'px',\n                        'width': w + 'px',\n                        'height': h + 'px',\n                        'cursor': 'ns-resize'\n                    }).off('mousedown').on('mousedown', function (event) {\n                        // event before\n                        var eventData = obj.trigger({ phase: 'before', type: 'resizerClick', target: 'preview', originalEvent: event });\n                        if (eventData.isCancelled === true) return;\n                        // default action\n                        w2ui[obj.name].tmp.events.resizeStart('preview', event);\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                        return false;\n                    });\n                }\n            } else {\n                $('#layout_'+ this.name +'_panel_preview').hide();\n            }\n\n            // display tabs and toolbar if needed\n            for (var p1 = 0; p1 < w2panels.length; p1++) {\n                var pan = this.get(w2panels[p1]);\n                var tmp2 = '#layout_'+ this.name +'_panel_'+ w2panels[p1] +' > .w2ui-panel-';\n                var tabHeight = 0;\n                if (pan) {\n                    if (pan.title) {\n                        tabHeight += w2utils.getSize($(tmp2 + 'title').css({ top: tabHeight + 'px', display: 'block' }), 'height');\n                    }\n                    if (pan.show.tabs) {\n                        if (pan.tabs !== null && w2ui[this.name +'_'+ w2panels[p1] +'_tabs']) w2ui[this.name +'_'+ w2panels[p1] +'_tabs'].resize();\n                        tabHeight += w2utils.getSize($(tmp2 + 'tabs').css({ top: tabHeight + 'px', display: 'block' }), 'height');\n                    }\n                    if (pan.show.toolbar) {\n                        if (pan.toolbar !== null && w2ui[this.name +'_'+ w2panels[p1] +'_toolbar']) w2ui[this.name +'_'+ w2panels[p1] +'_toolbar'].resize();\n                        tabHeight += w2utils.getSize($(tmp2 + 'toolbar').css({ top: tabHeight + 'px', display: 'block' }), 'height');\n                    }\n                }\n                $(tmp2 + 'content').css({ display: 'block' }).css({ top: tabHeight + 'px' });\n            }\n            // send resize to all objects\n            clearTimeout(this._resize_timer);\n            this._resize_timer = setTimeout(function () {\n                for (var e in w2ui) {\n                    if (typeof w2ui[e].resize == 'function') {\n                        // sent to all none-layouts\n                        if (w2ui[e].panels == 'undefined') w2ui[e].resize();\n                        // only send to nested layouts\n                        var parent = $(w2ui[e].box).parents('.w2ui-layout');\n                        if (parent.length > 0 && parent.attr('name') == obj.name) w2ui[e].resize();\n                    }\n                }\n            }, 100);\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        destroy: function () {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'destroy', target: this.name });\n            if (eventData.isCancelled === true) return;\n            if (typeof w2ui[this.name] == 'undefined') return false;\n            // clean up\n            if ($(this.box).find('#layout_'+ this.name +'_panel_main').length > 0) {\n                $(this.box)\n                    .removeAttr('name')\n                    .removeClass('w2ui-layout')\n                    .html('');\n            }\n            delete w2ui[this.name];\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            if (this.tmp.events && this.tmp.events.resize) $(window).off('resize', this.tmp.events.resize);\n            return true;\n        },\n\n        lock: function (panel, msg, showSpinner) {\n            if (w2panels.indexOf(panel) == -1) {\n                console.log('ERROR: First parameter needs to be the a valid panel name.');\n                return;\n            }\n            var args = Array.prototype.slice.call(arguments, 0);\n            args[0]  = '#layout_'+ this.name + '_panel_' + panel;\n            w2utils.lock.apply(window, args);\n        },\n\n        unlock: function (panel, speed) {\n            if (w2panels.indexOf(panel) == -1) {\n                console.log('ERROR: First parameter needs to be the a valid panel name.');\n                return;\n            }\n            var nm = '#layout_'+ this.name + '_panel_' + panel;\n            w2utils.unlock(nm, speed);\n        }\n    };\n\n    $.extend(w2layout.prototype, w2utils.event);\n    w2obj.layout = w2layout;\n})();\n\n/************************************************************************\n*   Library: Web 2.0 UI for jQuery (using prototypical inheritance)\n*   - Following objects defined\n*        - w2popup      - popup widget\n*        - $().w2popup  - jQuery wrapper\n*   - Dependencies: jQuery, w2utils\n*\n* == NICE TO HAVE ==\n*   - transition should include title, body and buttons, not just body\n*   - .message() should have same props (body, buttons, title?)\n*   - hide overlay on esc\n*\n* == 1.5 changes\n*   - new: resizeMessages()\n*   - popup can be moved/resized/closed when locked or has messages\n*   - messages negative widht/height means margin\n*   - added btn_yes and btn_no\n*   - dismissed message will slide up - added parameter unlock(speed)\n*   - refactore -webkit-* -moz-* to a function\n*   - resize nested elements in popup for onMin, onMax\n*   - rename btn -> w2ui-btn and same for colored ones\n*   - added options.body and options.buttons for w2popup.message\n*\n************************************************************************/\n\nvar w2popup = {};\n\n(function () {\n\n    // ====================================================\n    // -- Registers as a jQuery plugin\n\n    $.fn.w2popup = function(method, options) {\n        if (typeof method === 'undefined') {\n            options = {};\n            method  = 'open';\n        }\n        if ($.isPlainObject(method)) {\n            options = method;\n            method  = 'open';\n        }\n        method = method.toLowerCase();\n        if (method === 'load' && typeof options === 'string') {\n            options = $.extend({ url: options }, arguments.length > 2 ? arguments[2] : {});\n        }\n        if (method === 'open' && options.url != null) method = 'load';\n        options = options || {};\n        // load options from markup\n        var dlgOptions = {};\n        if ($(this).length > 0) {\n            if ($(this).find('div[rel=title], div[rel=body], div[rel=buttons]').length > 0) {\n                if ($(this).find('div[rel=title]').length > 0) {\n                    dlgOptions['title'] = $(this).find('div[rel=title]').html();\n                }\n                if ($(this).find('div[rel=body]').length > 0) {\n                    dlgOptions['body']  = $(this).find('div[rel=body]').html();\n                    dlgOptions['style'] = $(this).find('div[rel=body]')[0].style.cssText;\n                }\n                if ($(this).find('div[rel=buttons]').length > 0) {\n                    dlgOptions['buttons'] = $(this).find('div[rel=buttons]').html();\n                }\n            } else {\n                dlgOptions['title'] = '&nbsp;';\n                dlgOptions['body']  = $(this).html();\n            }\n            if (parseInt($(this).css('width')) != 0)  dlgOptions['width']  = parseInt($(this).css('width'));\n            if (parseInt($(this).css('height')) != 0) dlgOptions['height'] = parseInt($(this).css('height'));\n        }\n        // show popup\n        return w2popup[method]($.extend({}, dlgOptions, options));\n    };\n\n    // ====================================================\n    // -- Implementation of core functionality (SINGELTON)\n\n    w2popup = {\n        defaults: {\n            title     : '',\n            body      : '',\n            buttons   : '',\n            style     : '',\n            color     : '#000',\n            opacity   : 0.4,\n            speed     : 0.3,\n            modal     : false,\n            maximized : false,\n            keyboard  : true,     // will close popup on esc if not modal\n            width     : 500,\n            height    : 300,\n            showClose : true,\n            showMax   : false,\n            transition: null\n        },\n        status    : 'closed',     // string that describes current status\n        handlers  : [],\n        onOpen    : null,\n        onClose   : null,\n        onMax     : null,\n        onMin     : null,\n        onToggle  : null,\n        onKeydown : null,\n\n        open: function (options) {\n            var obj = this;\n            if (w2popup.status == 'closing') {\n                setTimeout(function () { obj.open.call(obj, options); }, 100);\n                return;\n            }\n            // get old options and merge them\n            var old_options = $('#w2ui-popup').data('options');\n            var options = $.extend({}, this.defaults, old_options, { title: '', body : '', buttons: '' }, options, { maximized: false });\n            // need timer because popup might not be open\n            setTimeout(function () { $('#w2ui-popup').data('options', options); }, 100);\n            // if new - reset event handlers\n            if ($('#w2ui-popup').length == 0) {\n                w2popup.handlers  = [];\n                w2popup.onMax     = null;\n                w2popup.onMin     = null;\n                w2popup.onToggle  = null;\n                w2popup.onOpen    = null;\n                w2popup.onClose   = null;\n                w2popup.onKeydown = null;\n            }\n            if (options.onOpen)    w2popup.onOpen    = options.onOpen;\n            if (options.onClose)   w2popup.onClose   = options.onClose;\n            if (options.onMax)     w2popup.onMax     = options.onMax;\n            if (options.onMin)     w2popup.onMin     = options.onMin;\n            if (options.onToggle)  w2popup.onToggle  = options.onToggle;\n            if (options.onKeydown) w2popup.onKeydown = options.onKeydown;\n\n            if (window.innerHeight == undefined) {\n                var width  = document.documentElement.offsetWidth;\n                var height = document.documentElement.offsetHeight;\n                if (w2utils.engine === 'IE7') { width += 21; height += 4; }\n            } else {\n                var width  = window.innerWidth;\n                var height = window.innerHeight;\n            }\n            if (parseInt(width)  - 10 < parseInt(options.width))  options.width  = parseInt(width)  - 10;\n            if (parseInt(height) - 10 < parseInt(options.height)) options.height = parseInt(height) - 10;\n            var top  = parseInt(((parseInt(height) - parseInt(options.height)) / 2) * 0.6);\n            var left = parseInt((parseInt(width) - parseInt(options.width)) / 2);\n            // check if message is already displayed\n            if ($('#w2ui-popup').length == 0) {\n                // trigger event\n                var eventData = this.trigger({ phase: 'before', type: 'open', target: 'popup', options: options, present: false });\n                if (eventData.isCancelled === true) return;\n                w2popup.status = 'opening';\n                // output message\n                w2popup.lockScreen(options);\n                var btn = '';\n                if (options.showClose) {\n                    btn += '<div class=\"w2ui-msg-button w2ui-msg-close\" onmousedown=\"event.stopPropagation()\" onclick=\"w2popup.close()\">Close</div>';\n                }\n                if (options.showMax) {\n                    btn += '<div class=\"w2ui-msg-button w2ui-msg-max\" onmousedown=\"event.stopPropagation()\" onclick=\"w2popup.toggle()\">Max</div>';\n                }\n                var msg='<div id=\"w2ui-popup\" class=\"w2ui-popup\" style=\"opacity: 0; left: '+ left +'px; top: '+ top +'px;'+\n                        '     width: ' + parseInt(options.width) + 'px; height: ' + parseInt(options.height) + 'px; '+\n                              w2utils.cssPrefix('transform', 'scale(0.8)', true) + '\"' +\n                        '>'+\n                        '   <div class=\"w2ui-msg-title\" style=\"'+ (options.title == '' ? 'display: none' : '') +'\">' + btn + options.title + '</div>'+\n                        '   <div class=\"w2ui-box1\" style=\"'+ (options.title == '' ? 'top: 0px !important;' : '') + \n                                    (options.buttons == '' ? 'bottom: 0px !important;' : '') + '\">'+\n                        '       <div class=\"w2ui-msg-body' + (!options.title != '' ? ' w2ui-msg-no-title' : '') + \n                                    (!options.buttons != '' ? ' w2ui-msg-no-buttons' : '') + '\" style=\"' + options.style + '\">' + options.body + '</div>'+\n                        '   </div>'+\n                        '   <div class=\"w2ui-box2\" style=\"' + (options.title == '' ? 'top: 0px !important;' : '') +\n                                    (options.buttons == '' ? 'bottom: 0px !important;' : '') + '\">'+\n                        '       <div class=\"w2ui-msg-body' + (!options.title != '' ? ' w2ui-msg-no-title' : '') + \n                                    (!options.buttons != '' ? ' w2ui-msg-no-buttons' : '') + '\" style=\"' + options.style + '\"></div>'+\n                        '       </div>'+\n                        '   <div class=\"w2ui-msg-buttons\" style=\"'+ (options.buttons == '' ? 'display: none' : '') +'\">' + options.buttons + '</div>'+\n                        '</div>';\n                $('body').append(msg);\n                // allow element to render\n                setTimeout(function () {\n                    $('#w2ui-popup .w2ui-box2').hide();\n                    $('#w2ui-popup')\n                        .css('opacity', '1')\n                        .css(w2utils.cssPrefix({\n                            'transition': options.speed + 's opacity, ' + options.speed + 's -webkit-transform',\n                            'transform' : 'scale(1)'\n                        }));\n                }, 1);\n                // clean transform\n                setTimeout(function () {\n                    $('#w2ui-popup').css(w2utils.cssPrefix('transform', ''));\n                    // event after\n                    w2popup.status = 'open';\n                    setTimeout(function () {\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                    }, 100);\n                }, options.speed * 1000);\n            } else {\n                // trigger event\n                var eventData = this.trigger({ phase: 'before', type: 'open', target: 'popup', options: options, present: true });\n                if (eventData.isCancelled === true) return;\n                // check if size changed\n                w2popup.status = 'opening';\n                if (typeof old_options != 'undefined') {\n                    if (!old_options.maximized && (old_options['width'] != options['width'] || old_options['height'] != options['height'])) {\n                        w2popup.resize(options.width, options.height);\n                    }\n                    options.prevSize  = options.width + 'px:' + options.height + 'px';\n                    options.maximized = old_options.maximized;\n                }\n                // show new items\n                var body = $('#w2ui-popup .w2ui-box2 > .w2ui-msg-body').html(options.body);\n                if (body.length > 0) body[0].style.cssText = options.style;\n                if (options.buttons != '') {\n                    $('#w2ui-popup .w2ui-msg-buttons').show().html(options.buttons);\n                    $('#w2ui-popup .w2ui-msg-body').removeClass('w2ui-msg-no-buttons');\n                    $('#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2').css('bottom', '');\n                } else {\n                    $('#w2ui-popup .w2ui-msg-buttons').hide().html('');\n                    $('#w2ui-popup .w2ui-msg-body').addClass('w2ui-msg-no-buttons');\n                    $('#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2').css('bottom', '0px');\n                }\n                if (options.title != '') {\n                    $('#w2ui-popup .w2ui-msg-title').show().html(\n                          (options.showClose ? '<div class=\"w2ui-msg-button w2ui-msg-close\" onmousedown=\"event.stopPropagation()\" onclick=\"w2popup.close()\">Close</div>' : '') +\n                          (options.showMax ? '<div class=\"w2ui-msg-button w2ui-msg-max\" onmousedown=\"event.stopPropagation()\" onclick=\"w2popup.toggle()\">Max</div>' : '') +\n                          options.title);\n                    $('#w2ui-popup .w2ui-msg-body').removeClass('w2ui-msg-no-title');\n                    $('#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2').css('top', '');\n                } else {\n                    $('#w2ui-popup .w2ui-msg-title').hide().html('');\n                    $('#w2ui-popup .w2ui-msg-body').addClass('w2ui-msg-no-title');\n                    $('#w2ui-popup .w2ui-box1, #w2ui-popup .w2ui-box2').css('top', '0px');\n                }\n                // transition\n                var div_old = $('#w2ui-popup .w2ui-box1')[0];\n                var div_new = $('#w2ui-popup .w2ui-box2')[0];\n                w2utils.transition(div_old, div_new, options.transition);\n                div_new.className = 'w2ui-box1';\n                div_old.className = 'w2ui-box2';\n                $(div_new).addClass('w2ui-current-box');\n                // remove max state\n                $('#w2ui-popup').data('prev-size', null);\n                // call event onChange\n                setTimeout(function () {\n                    w2popup.status = 'open';\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                }, 100);\n            }\n            // save new options\n            options._last_w2ui_name = w2utils.keyboard.active();\n            w2utils.keyboard.clear();\n            // keyboard events\n            if (options.keyboard) $(document).on('keydown', this.keydown);\n\n            // initialize move\n            var tmp = {\n                resizing : false,\n                mvMove   : mvMove,\n                mvStop   : mvStop\n            };\n            $('#w2ui-popup .w2ui-msg-title').on('mousedown', function (event) { \n                if (!w2popup.get().maximized) mvStart(event); \n            });\n\n            // handlers\n            function mvStart(evnt) {\n                if (!evnt) evnt = window.event;\n                if (!window.addEventListener) { window.document.attachEvent('onselectstart', function() { return false; } ); }\n                w2popup.status = 'moving';\n                tmp.resizing = true;\n                tmp.isLocked = $('#w2ui-popup > .w2ui-lock').length == 1 ? true : false;\n                tmp.x = evnt.screenX;\n                tmp.y = evnt.screenY;\n                tmp.pos_x = $('#w2ui-popup').position().left;\n                tmp.pos_y = $('#w2ui-popup').position().top;\n                if (!tmp.isLocked) w2popup.lock({ opacity: 0 });\n                $(document).on('mousemove', tmp.mvMove);\n                $(document).on('mouseup', tmp.mvStop);\n                if (evnt.stopPropagation) evnt.stopPropagation(); else evnt.cancelBubble = true;\n                if (evnt.preventDefault) evnt.preventDefault(); else return false;\n            }\n\n            function mvMove(evnt) {\n                if (tmp.resizing != true) return;\n                if (!evnt) evnt = window.event;\n                tmp.div_x = evnt.screenX - tmp.x;\n                tmp.div_y = evnt.screenY - tmp.y;\n                $('#w2ui-popup').css(w2utils.cssPrefix({\n                    'transition': 'none',\n                    'transform' : 'translate3d('+ tmp.div_x +'px, '+ tmp.div_y +'px, 0px)'\n                }));\n            }\n\n            function mvStop(evnt) {\n                if (tmp.resizing != true) return;\n                if (!evnt) evnt = window.event;\n                w2popup.status = 'open';\n                tmp.div_x = (evnt.screenX - tmp.x);\n                tmp.div_y = (evnt.screenY - tmp.y);\n                $('#w2ui-popup').css({\n                    'left': (tmp.pos_x + tmp.div_x) + 'px',\n                    'top' : (tmp.pos_y  + tmp.div_y) + 'px'\n                }).css(w2utils.cssPrefix({\n                    'transition': 'none',\n                    'transform' : 'translate3d(0px, 0px, 0px)'\n                }));\n                tmp.resizing = false;\n                $(document).off('mousemove', tmp.mvMove);\n                $(document).off('mouseup', tmp.mvStop);\n                if (!tmp.isLocked) w2popup.unlock();\n            }\n            return this;\n        },\n\n        keydown: function (event) {\n            var options = $('#w2ui-popup').data('options');\n            if (options && !options.keyboard) return;\n            // trigger event\n            var eventData = w2popup.trigger({ phase: 'before', type: 'keydown', target: 'popup', options: options, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // default behavior\n            switch (event.keyCode) {\n                case 27:\n                    event.preventDefault();\n                    if ($('#w2ui-popup .w2ui-popup-message').length > 0) w2popup.message(); else w2popup.close();\n                    break;\n            }\n            // event after\n            w2popup.trigger($.extend(eventData, { phase: 'after'}));\n        },\n\n        close: function (options) {\n            var obj = this;\n            var options = $.extend({}, $('#w2ui-popup').data('options'), options);\n            if ($('#w2ui-popup').length == 0) return;\n            // trigger event\n            var eventData = this.trigger({ phase: 'before', type: 'close', target: 'popup', options: options });\n            if (eventData.isCancelled === true) return;\n            // default behavior\n            w2popup.status = 'closing';\n            $('#w2ui-popup')\n                .css('opacity', '0')\n                .css(w2utils.cssPrefix({\n                    'transition': options.speed + 's opacity, ' + options.speed + 's -webkit-transform',\n                    'transform' : 'scale(0.9)'\n                }));\n            w2popup.unlockScreen(options);\n            setTimeout(function () {\n                $('#w2ui-popup').remove();\n                w2popup.status = 'closed';\n                // event after\n                obj.trigger($.extend(eventData, { phase: 'after'}));\n            }, options.speed * 1000);\n            // restore active\n            w2utils.keyboard.active(options._last_w2ui_name);\n            // remove keyboard events\n            if (options.keyboard) $(document).off('keydown', this.keydown);\n        },\n\n        toggle: function () {\n            var obj     = this;\n            var options = $('#w2ui-popup').data('options');\n            // trigger event\n            var eventData = this.trigger({ phase: 'before', type: 'toggle', target: 'popup', options: options });\n            if (eventData.isCancelled === true) return;\n            // defatul action\n            if (options.maximized === true) w2popup.min(); else w2popup.max();\n            // event after\n            setTimeout(function () {\n                obj.trigger($.extend(eventData, { phase: 'after'}));\n            }, (options.speed * 1000) + 50);\n        },\n\n        max: function () {\n            var obj = this;\n            var options = $('#w2ui-popup').data('options');\n            if (options.maximized === true) return;\n            // trigger event\n            var eventData = this.trigger({ phase: 'before', type: 'max', target: 'popup', options: options });\n            if (eventData.isCancelled === true) return;\n            // default behavior\n            w2popup.status   = 'resizing';\n            options.prevSize = $('#w2ui-popup').css('width') + ':' + $('#w2ui-popup').css('height');\n            // do resize\n            w2popup.resize(10000, 10000, function () {\n                w2popup.status    = 'open';\n                options.maximized = true;\n                obj.trigger($.extend(eventData, { phase: 'after'}));\n                // resize gird, form, layout inside popup\n                $('#w2ui-popup .w2ui-grid, #w2ui-popup .w2ui-form, #w2ui-popup .w2ui-layout').each(function () {\n                    var name = $(this).attr('name');\n                    if (w2ui[name] && w2ui[name].resize) w2ui[name].resize();\n                })\n            });\n        },\n\n        min: function () {\n            var obj = this;\n            var options = $('#w2ui-popup').data('options');\n            if (options.maximized !== true) return;\n            var size = options.prevSize.split(':');\n            // trigger event\n            var eventData = this.trigger({ phase: 'before', type: 'min', target: 'popup', options: options });\n            if (eventData.isCancelled === true) return;\n            // default behavior\n            w2popup.status = 'resizing';\n            // do resize\n            w2popup.resize(parseInt(size[0]), parseInt(size[1]), function () {\n                w2popup.status = 'open';\n                options.maximized = false;\n                options.prevSize  = null;\n                obj.trigger($.extend(eventData, { phase: 'after'}));\n                // resize gird, form, layout inside popup\n                $('#w2ui-popup .w2ui-grid, #w2ui-popup .w2ui-form, #w2ui-popup .w2ui-layout').each(function () {\n                    var name = $(this).attr('name');\n                    if (w2ui[name] && w2ui[name].resize) w2ui[name].resize();\n                })\n            });\n        },\n\n        get: function () {\n            return $('#w2ui-popup').data('options');\n        },\n\n        set: function (options) {\n            w2popup.open(options);\n        },\n\n        clear: function() {\n            $('#w2ui-popup .w2ui-msg-title').html('');\n            $('#w2ui-popup .w2ui-msg-body').html('');\n            $('#w2ui-popup .w2ui-msg-buttons').html('');\n        },\n\n        reset: function () {\n            w2popup.open(w2popup.defaults);\n        },\n\n        load: function (options) {\n            w2popup.status = 'loading';\n            if (String(options.url) == 'undefined') {\n                console.log('ERROR: The url parameter is empty.');\n                return;\n            }\n            var tmp = String(options.url).split('#');\n            var url = tmp[0];\n            var selector = tmp[1];\n            if (String(options) == 'undefined') options = {};\n            // load url\n            var html = $('#w2ui-popup').data(url);\n            if (typeof html != 'undefined' && html != null) {\n                popup(html, selector);\n            } else {\n                $.get(url, function (data, status, obj) { // should always be $.get as it is template\n                    popup(obj.responseText, selector);\n                    $('#w2ui-popup').data(url, obj.responseText); // remember for possible future purposes\n                });\n            }\n            function popup(html, selector) {\n                delete options.url;\n                $('body').append('<div id=\"w2ui-tmp\" style=\"display: none\">' + html + '</div>');\n                if (typeof selector != 'undefined' && $('#w2ui-tmp #'+selector).length > 0) {\n                    $('#w2ui-tmp #' + selector).w2popup(options);\n                } else {\n                    $('#w2ui-tmp > div').w2popup(options);\n                }\n                // link styles\n                if ($('#w2ui-tmp > style').length > 0) {\n                    var style = $('<div>').append($('#w2ui-tmp > style').clone()).html();\n                    if ($('#w2ui-popup #div-style').length == 0) {\n                        $('#w2ui-popup').append('<div id=\"div-style\" style=\"position: absolute; left: -100; width: 1px\"></div>');\n                    }\n                    $('#w2ui-popup #div-style').html(style);\n                }\n                $('#w2ui-tmp').remove();\n            }\n        },\n\n        message: function (options) {\n            $().w2tag(); // hide all tags\n            if (!options) options = { width: 200, height: 100 };\n            var pWidth   = parseInt($('#w2ui-popup').width());\n            var pHeight  = parseInt($('#w2ui-popup').height());\n            options.originalWidth  = options.width;\n            options.originalHeight = options.height;\n            if (parseInt(options.width) < 10)  options.width  = 10;\n            if (parseInt(options.height) < 10) options.height = 10;\n            if (typeof options.hideOnClick == 'undefined') options.hideOnClick = false;\n            var poptions    = $('#w2ui-popup').data('options') || {};\n            var titleHeight = parseInt($('#w2ui-popup > .w2ui-msg-title').css('height'));\n            if (typeof options.width == 'undefined' || options.width > poptions.width - 10) {\n                options.width = poptions.width - 10;\n            }\n            if (typeof options.height == 'undefined' || options.height > poptions.height - titleHeight - 5) {\n                options.height = poptions.height - titleHeight - 5; // need margin from bottom only\n            }\n            // negative value means margin\n            if (options.originalHeight < 0) options.height = pHeight + options.originalHeight - titleHeight;\n            if (options.originalWidth < 0) options.width = pWidth + options.originalWidth * 2; // x 2 because there is left and right margin\n\n            var head     = $('#w2ui-popup .w2ui-msg-title');\n            var msgCount = $('#w2ui-popup .w2ui-popup-message').length;\n            // remove message\n            if ($.trim(options.html) == '' && $.trim(options.body) == '' && $.trim(options.buttons) == '') {\n                var $msg = $('#w2ui-popup #w2ui-message'+ (msgCount-1));\n                var options = $msg.data('options') || {};\n                $msg.css(w2utils.cssPrefix({ \n                    'transition': '0.15s', \n                    'transform': 'translateY(-' + options.height + 'px)'\n                }));\n                if (msgCount == 1) {\n                    w2popup.unlock(150);\n                } else {\n                    $('#w2ui-popup #w2ui-message'+ (msgCount-2)).css('z-index', 1500);\n                }\n                setTimeout(function () {\n                    $msg.remove();\n                    if (typeof options.onClose == 'function') options.onClose();\n                }, 150);\n            } else {\n                if ($.trim(options.body) != '' || $.trim(options.buttons) != '') {\n                    options.html = '<div class=\"w2ui-popup-message-body\">'+ options.body +'</div>'+\n                        '<div class=\"w2ui-popup-message-buttons\">'+ options.buttons +'</div>';\n                }\n                // hide previous messages\n                $('#w2ui-popup .w2ui-popup-message').css('z-index', 1390);\n                head.css('z-index', 1501);\n                // add message\n                $('#w2ui-popup .w2ui-box1')\n                    .before('<div id=\"w2ui-message' + msgCount + '\" class=\"w2ui-popup-message\" style=\"display: none; z-index: 1500; ' +\n                                (head.length == 0 ? 'top: 0px;' : 'top: ' + w2utils.getSize(head, 'height') + 'px;') +\n                                (typeof options.width  != 'undefined' ? 'width: ' + options.width + 'px; left: ' + ((pWidth - options.width) / 2) + 'px;' : 'left: 10px; right: 10px;') +\n                                (typeof options.height != 'undefined' ? 'height: ' + options.height + 'px;' : 'bottom: 6px;') +\n                                w2utils.cssPrefix('transition', '.3s', true) + '\"' +\n                                (options.hideOnClick === true ? 'onclick=\"w2popup.message();\"' : '') + '>' +\n                            '</div>');\n                $('#w2ui-popup #w2ui-message'+ msgCount).data('options', options);\n                var display = $('#w2ui-popup #w2ui-message'+ msgCount).css('display');\n                $('#w2ui-popup #w2ui-message'+ msgCount).css(w2utils.cssPrefix({\n                    'transform': (display == 'none' ? 'translateY(-' + options.height + 'px)' : 'translateY(0px)')\n                }));\n                if (display == 'none') {\n                    $('#w2ui-popup #w2ui-message'+ msgCount).show().html(options.html);\n                    // timer needs to animation\n                    setTimeout(function () {\n                        $('#w2ui-popup #w2ui-message'+ msgCount).css(w2utils.cssPrefix({\n                            'transform': (display == 'none' ? 'translateY(0px)' : 'translateY(-' + options.height + 'px)')\n                        }));\n                    }, 1);\n                    // timer for lock\n                    if (msgCount == 0) w2popup.lock();\n                    setTimeout(function() {\n                        // has to be on top of lock\n                        $('#w2ui-popup #w2ui-message'+ msgCount).css(w2utils.cssPrefix({ 'transition': '0s' }));\n                        if (typeof options.onOpen == 'function') options.onOpen();\n                    }, 350);\n                }\n            }\n        },\n\n        lock: function (msg, showSpinner) {\n            var args = Array.prototype.slice.call(arguments, 0);\n            args.unshift($('#w2ui-popup'));\n            w2utils.lock.apply(window, args);\n        },\n\n        unlock: function (speed) {\n            w2utils.unlock($('#w2ui-popup'), speed);\n        },\n\n        // --- INTERNAL FUNCTIONS\n\n        lockScreen: function (options) {\n            if ($('#w2ui-lock').length > 0) return false;\n            if (typeof options == 'undefined') options = $('#w2ui-popup').data('options');\n            if (typeof options == 'undefined') options = {};\n            options = $.extend({}, w2popup.defaults, options);\n            // show element\n            $('body').append('<div id=\"w2ui-lock\" ' +\n                '    onmousewheel=\"if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true; if (event.preventDefault) event.preventDefault(); else return false;\"'+\n                '    style=\"position: ' + (w2utils.engine == 'IE5' ? 'absolute' : 'fixed') + '; z-Index: 1199; left: 0px; top: 0px; ' +\n                '           padding: 0px; margin: 0px; background-color: ' + options.color + '; width: 100%; height: 100%; opacity: 0;\"></div>');\n            // lock screen\n            setTimeout(function () {\n                $('#w2ui-lock')\n                    .css('opacity', options.opacity)\n                    .css(w2utils.cssPrefix('transition', options.speed + 's opacity'));\n            }, 1);\n            // add events\n            if (options.modal == true) {\n                $('#w2ui-lock').on('mousedown', function () {\n                    $('#w2ui-lock')\n                        .css('opacity', '0.6')\n                        .css(w2utils.cssPrefix('transition', '.1s'));\n                });\n                $('#w2ui-lock').on('mouseup', function () {\n                    setTimeout(function () {\n                        $('#w2ui-lock')\n                            .css('opacity', options.opacity)\n                            .css(w2utils.cssPrefix('transition', '.1s'));\n                    }, 100);\n                });\n            } else {\n                $('#w2ui-lock').on('mousedown', function () { w2popup.close(); });\n            }\n            return true;\n        },\n\n        unlockScreen: function (options) {\n            if ($('#w2ui-lock').length == 0) return false;\n            if (typeof options == 'undefined') options = $('#w2ui-popup').data('options');\n            if (typeof options == 'undefined') options = {};\n            options = $.extend({}, w2popup.defaults, options);\n            $('#w2ui-lock')\n                .css('opacity', '0')\n                .css(w2utils.cssPrefix('transition', options.speed + 's opacity'));\n            setTimeout(function () {\n                $('#w2ui-lock').remove();\n            }, options.speed * 1000);\n            return true;\n        },\n\n        resizeMessages: function () {\n            var obj = this;\n            var options = $('#w2ui-popup').data('options');\n            // see if there are messages and resize them\n            $('#w2ui-popup .w2ui-popup-message').each(function () {\n                var moptions = $(this).data('options');\n                var $popup   = $('#w2ui-popup');\n                if (parseInt(moptions.width) < 10)  moptions.width  = 10;\n                if (parseInt(moptions.height) < 10) moptions.height = 10;\n                var titleHeight = parseInt($popup.find('> .w2ui-msg-title').css('height'));\n                var pWidth      = parseInt($popup.width());\n                var pHeight     = parseInt($popup.height());\n                // recalc width\n                moptions.width = moptions.originalWidth;\n                if (moptions.width > pWidth - 10) {\n                    moptions.width = pWidth - 10;\n                }\n                // recalc height\n                moptions.height = moptions.originalHeight;\n                if (moptions.height > pHeight - titleHeight - 5) {\n                    moptions.height = pHeight - titleHeight - 5;\n                }\n                if (moptions.originalHeight < 0) moptions.height = pHeight + moptions.originalHeight - titleHeight;\n                if (moptions.originalWidth < 0) moptions.width = pWidth + moptions.originalWidth * 2; // x 2 because there is left and right margin\n                $(this).css({\n                    left    : ((pWidth - moptions.width) / 2) + 'px',\n                    width   : moptions.width + 'px',\n                    height  : moptions.height + 'px'\n                });\n            });            \n        },\n\n        resize: function (width, height, callBack) {\n            var obj = this;\n            var options = $('#w2ui-popup').data('options');\n            width  = parseInt(width);\n            height = parseInt(height);\n            // calculate new position\n            if ($(window).width()  - 10 < width)  width  = $(window).width()  - 10;\n            if ($(window).height() - 10 < height) height = $(window).height() - 10;\n            var top  = ($(window).height() - height) / 2 * 0.8;\n            var left = ($(window).width() - width) / 2;\n            // resize there\n            $('#w2ui-popup')\n                .css(w2utils.cssPrefix({\n                    'transition': options.speed + 's width, ' + options.speed + 's height, ' + options.speed + 's left, ' + options.speed + 's top'\n                }))\n                .css({\n                    'top': top,\n                    'left': left,\n                    'width': width,\n                    'height': height\n                });\n            var tmp_int = setInterval(function () { obj.resizeMessages(); }, 10); // then messages resize nicely\n            setTimeout(function () {\n                clearInterval(tmp_int);\n                options.width  = width;\n                options.height = height;\n                obj.resizeMessages();\n                if (typeof callBack == 'function') callBack();\n            }, (options.speed * 1000) + 50); // give extra 50 ms\n        }\n    };\n\n    // merge in event handling\n    $.extend(w2popup, w2utils.event);\n\n})();\n\n// ============================================\n// --- Common dialogs\n\nvar w2alert = function (msg, title, callBack) {\n    if (title == null) title = w2utils.lang('Notification');\n    if ($('#w2ui-popup').length > 0 && w2popup.status != 'closing') {\n        w2popup.message({\n            width   : 400,\n            height  : 170,\n            body    : '<div class=\"w2ui-centered\" style=\"font-size: 13px;\">' + msg + '</div>',\n            buttons : '<button onclick=\"w2popup.message();\" class=\"w2ui-popup-btn w2ui-btn\">' + w2utils.lang('Ok') + '</button>',            \n            onOpen: function () {\n                $('#w2ui-popup .w2ui-popup-message .w2ui-popup-btn').focus();\n            },\n            onClose: function () {\n                if (typeof callBack == 'function') callBack();\n            }\n        });\n    } else {\n        w2popup.open({\n            width     : 450,\n            height    : 220,\n            showMax   : false,\n            showClose : false,\n            title     : title,\n            body      : '<div class=\"w2ui-centered\" style=\"font-size: 13px;\">' + msg + '</div>',\n            buttons   : '<button onclick=\"w2popup.close();\" class=\"w2ui-popup-btn w2ui-btn\">' + w2utils.lang('Ok') + '</button>',\n            onOpen: function (event) {\n                // do not use onComplete as it is slower\n                setTimeout(function () { $('#w2ui-popup .w2ui-popup-btn').focus(); }, 1);\n            },\n            onKeydown: function (event) {\n            $('#w2ui-popup .w2ui-popup-btn').focus().addClass('clicked'); \n            },\n            onClose: function () {\n                if (typeof callBack == 'function') callBack();\n            }\n        });\n    }\n};\n\nvar w2confirm = function (msg, title, callBack) {\n    var options  = {};\n    var defaults = {\n        msg         : '',\n        title       : w2utils.lang('Confirmation'),\n        width       : ($('#w2ui-popup').length > 0 ? 400 : 450),\n        height      : ($('#w2ui-popup').length > 0 ? 170 : 220),\n        yes_text    : 'Yes',\n        yes_class   : '',\n        yes_style   : '',\n        yes_callBack: null,\n        no_text     : 'No',\n        no_class    : '',\n        no_style    : '',\n        no_callBack : null,\n        callBack    : null\n    };\n    if (arguments.length == 1 && typeof msg == 'object') {\n        $.extend(options, defaults, msg);\n    } else {\n        if (typeof title == 'function') {\n            $.extend(options, defaults, {\n                msg     : msg,\n                callBack: title\n            })            \n        } else {\n            $.extend(options, defaults, {\n                msg     : msg,\n                title   : title, \n                callBack: callBack\n            })            \n        }\n    }\n    // if there is a yes/no button object\n    if (typeof options.btn_yes == 'object') {\n        options.yes_text     = options.btn_yes.text || options.yes_text;\n        options.yes_class    = options.btn_yes[\"class\"] || options.yes_class;\n        options.yes_style    = options.btn_yes.style || options.yes_style;\n        options.yes_callBack = options.btn_yes.callBack || options.yes_callBack;\n    }\n    if (typeof options.btn_no == 'object') {\n        options.no_text      = options.btn_no.text || options.no_text;\n        options.no_class     = options.btn_no[\"class\"] || options.no_class;\n        options.no_style     = options.btn_no.style || options.no_style;\n        options.no_callBack  = options.btn_no.callBack || options.no_callBack;\n    }\n    if ($('#w2ui-popup').length > 0 && w2popup.status != 'closing') {\n        if (options.width > w2popup.get().width) options.width = w2popup.get().width;\n        if (options.height > (w2popup.get().height - 50)) options.height = w2popup.get().height - 50;\n          w2popup.message({\n            width   : options.width,\n            height  : options.height,\n            body    : '<div class=\"w2ui-centered\" style=\"font-size: 13px;\">' + options.msg + '</div>',\n            buttons : '<button id=\"Yes\" class=\"w2ui-popup-btn w2ui-btn '+ options.yes_class +'\" style=\"'+ options.yes_style +'\">' + w2utils.lang(options.yes_text) + '</button>' +\n                      '<button id=\"No\" class=\"w2ui-popup-btn w2ui-btn '+ options.no_class +'\" style=\"'+ options.no_style +'\">' + w2utils.lang(options.no_text) + '</button>',\n            onOpen: function () {\n                $('#w2ui-popup .w2ui-popup-message .w2ui-btn').on('click', function (event) {\n                    w2popup.message();\n                    if (typeof options.callBack == 'function') options.callBack(event.target.id);\n                    if (event.target.id == 'Yes' && typeof options.yes_callBack == 'function') options.yes_callBack();\n                    if (event.target.id == 'No'  && typeof options.no_callBack == 'function') options.no_callBack();\n                });\n            }\n            // onKeydown will not work here\n        });\n\n    } else {\n\n        if (!w2utils.isInt(options.height)) options.height = options.height + 50;\n        w2popup.open({\n            width      : options.width,\n            height     : options.height,\n            title      : options.title,\n            modal      : true,\n            showClose  : false,\n            body       : '<div class=\"w2ui-centered\" style=\"font-size: 13px;\">' + options.msg + '</div>',\n            buttons    : '<button id=\"Yes\" class=\"w2ui-popup-btn w2ui-btn '+ options.yes_class +'\" style=\"'+ options.yes_style +'\">'+ w2utils.lang(options.yes_text) +'</button>'+\n                         '<button id=\"No\" class=\"w2ui-popup-btn w2ui-btn '+ options.no_class +'\" style=\"'+ options.no_style +'\">'+ w2utils.lang(options.no_text) +'</button>',\n            onOpen: function (event) {\n                // do not use onComplete as it is slower\n                setTimeout(function () {\n                    $('#w2ui-popup .w2ui-popup-btn').on('click', function (event) {\n                        w2popup.close();\n                        if (typeof options.callBack == 'function') options.callBack(event.target.id);\n                        if (event.target.id == 'Yes' && typeof options.yes_callBack == 'function') options.yes_callBack();\n                        if (event.target.id == 'No'  && typeof options.no_callBack == 'function') options.no_callBack();\n                    });\n                    $('#w2ui-popup .w2ui-popup-btn#No').focus();\n                }, 1);\n            },\n            onKeydown: function (event) {\n                // if there are no messages\n                if ($('#w2ui-popup .w2ui-popup-message').length == 0) {\n                    switch (event.originalEvent.keyCode) {\n                        case 13: // enter\n                            $('#w2ui-popup .w2ui-popup-btn#Yes').focus().addClass('clicked'); // no need fo click as enter will do click\n                            w2popup.close();\n                            break;\n                        case 27: // esc\n                            $('#w2ui-popup .w2ui-popup-btn#No').focus().click();\n                            w2popup.close();\n                            break;\n                    }\n                }\n            }\n        });\n    }\n\n    return {\n        yes: function (fun) {\n            options.yes_callBack = fun;\n            return this;\n        },\n        no: function (fun) {\n            options.no_callBack = fun;\n            return this;\n        }\n    };\n};\n/************************************************************************\n*   Library: Web 2.0 UI for jQuery (using prototypical inheritance)\n*   - Following objects defined\n*        - w2tabs        - tabs widget\n*        - $().w2tabs    - jQuery wrapper\n*   - Dependencies: jQuery, w2utils\n*\n* == NICE TO HAVE ==\n*   - on overflow display << >>\n*   - declarative tabs\n*   - align = left, right, center ?? \n*\n* == 1.5 changes\n*   - $('#tabs').w2tabs() - if called w/o argument then it returns tabs object\n*   - added flow property (up/down)\n*   - added tab.style\n*\n************************************************************************/\n\n(function () {\n    var w2tabs = function (options) {\n        this.box       = null;      // DOM Element that holds the element\n        this.name      = null;      // unique name for w2ui\n        this.active    = null;\n        this.flow      = 'down';    // can be down or up\n        this.tabs      = [];\n        this.routeData = {};        // data for dynamic routes\n        this.right     = '';\n        this.style     = '';\n        this.onClick   = null;\n        this.onClose   = null;\n        this.onRender  = null;\n        this.onRefresh = null;\n        this.onResize  = null;\n        this.onDestroy = null;\n\n        $.extend(this, { handlers: [] });\n        $.extend(true, this, w2obj.tabs, options);\n    };\n\n    // ====================================================\n    // -- Registers as a jQuery plugin\n\n    $.fn.w2tabs = function(method) {\n        if ($.isPlainObject(method)) {\n            // check name parameter\n            if (!w2utils.checkName(method, 'w2tabs')) return;\n            // extend tabs\n            var tabs   = method.tabs || [];\n            var object = new w2tabs(method);\n            for (var i = 0; i < tabs.length; i++) {\n                object.tabs[i] = $.extend({}, w2tabs.prototype.tab, tabs[i]);\n            }\n            if ($(this).length !== 0) {\n                object.render($(this)[0]);\n            }\n            // register new object\n            w2ui[object.name] = object;\n            return object;\n        } else {\n            var obj = w2ui[$(this).attr('name')];\n            if (!obj) return null;\n            if (arguments.length > 0) {\n                if (obj[method]) obj[method].apply(obj, Array.prototype.slice.call(arguments, 1));\n                return this;\n            } else {\n                return obj;\n            }\n        }\n    };\n\n    // ====================================================\n    // -- Implementation of core functionality\n\n    w2tabs.prototype = {\n        tab : {\n            id        : null,        // command to be sent to all event handlers\n            text      : '',\n            route     : null,\n            hidden    : false,\n            disabled  : false,\n            closable  : false,\n            hint      : '',\n            style     : '',\n            onClick   : null,\n            onRefresh : null,\n            onClose   : null\n        },\n\n        add: function (tab) {\n            return this.insert(null, tab);\n        },\n\n        insert: function (id, tab) {\n            if (!$.isArray(tab)) tab = [tab];\n            // assume it is array\n            for (var i = 0; i < tab.length; i++) {\n                // checks\n                if (typeof tab[i].id === 'undefined') {\n                    console.log('ERROR: The parameter \"id\" is required but not supplied. (obj: '+ this.name +')');\n                    return;\n                }\n                if (!w2utils.checkUniqueId(tab[i].id, this.tabs, 'tabs', this.name)) return;\n                // add tab\n                var newTab = $.extend({}, w2tabs.prototype.tab, tab[i]);\n                if (id === null || typeof id === 'undefined') {\n                    this.tabs.push(newTab);\n                } else {\n                    var middle = this.get(id, true);\n                    this.tabs = this.tabs.slice(0, middle).concat([newTab], this.tabs.slice(middle));\n                }\n                this.refresh(tab[i].id);\n            }\n        },\n\n        remove: function () {\n            var removed = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var tab = this.get(arguments[a]);\n                if (!tab) return false;\n                removed++;\n                // remove from array\n                this.tabs.splice(this.get(tab.id, true), 1);\n                // remove from screen\n                $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(tab.id)).remove();\n            }\n            return removed;\n        },\n\n        select: function (id) {\n            if (this.active == id || this.get(id) === null) return false;\n            this.active = id;\n            this.refresh();\n            return true;\n        },\n\n        set: function (id, tab) {\n            var index = this.get(id, true);\n            if (index === null) return false;\n            $.extend(this.tabs[index], tab);\n            this.refresh(id);\n            return true;\n        },\n\n        get: function (id, returnIndex) {\n            if (arguments.length === 0) {\n                var all = [];\n                for (var i1 = 0; i1 < this.tabs.length; i1++) {\n                    if (this.tabs[i1].id != null) {\n                        all.push(this.tabs[i1].id);\n                    }\n                }\n                return all;\n            } else {\n                for (var i2 = 0; i2 < this.tabs.length; i2++) {\n                    if (this.tabs[i2].id == id) { // need to be == since id can be numeric\n                        return (returnIndex === true ? i2 : this.tabs[i2]);\n                    }\n                }\n            }\n            return null;\n        },\n\n        show: function () {\n            var obj   = this;\n            var shown = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var tab = this.get(arguments[a]);\n                if (!tab || tab.hidden === false) continue;\n                shown++;\n                tab.hidden = false;\n                tmp.push(tab.id);\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return shown;\n        },\n\n        hide: function () {\n            var obj   = this;\n            var hidden= 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var tab = this.get(arguments[a]);\n                if (!tab || tab.hidden === true) continue;\n                hidden++;\n                tab.hidden = true;\n                tmp.push(tab.id);\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return hidden;\n        },\n\n        enable: function () {\n            var obj   = this;\n            var enabled = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var tab = this.get(arguments[a]);\n                if (!tab || tab.disabled === false) continue;\n                enabled++;\n                tab.disabled = false;\n                tmp.push(tab.id);\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return enabled;\n        },\n\n        disable: function () {\n            var obj   = this;\n            var disabled = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var tab = this.get(arguments[a]);\n                if (!tab || tab.disabled === true) continue;\n                disabled++;\n                tab.disabled = true;\n                tmp.push(tab.id);\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return disabled;\n        },\n\n        refresh: function (id) {\n            var time = (new Date()).getTime();\n            if (this.flow == 'up') $(this.box).addClass('w2ui-tabs-up'); else $(this.box).removeClass('w2ui-tabs-up');\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'refresh', target: (typeof id !== 'undefined' ? id : this.name), object: this.get(id) });\n            if (eventData.isCancelled === true) return;\n            if (typeof id === 'undefined') {\n                // refresh all\n                for (var i = 0; i < this.tabs.length; i++) this.refresh(this.tabs[i].id);\n            } else {\n                // create or refresh only one item\n                var tab = this.get(id);\n                if (tab === null) return false;\n                if (typeof tab.caption !== 'undefined') tab.text = tab.caption;\n\n                var jq_el   = $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(tab.id));\n                var tabHTML = (tab.closable ? '<div class=\"w2ui-tab-close\" onclick=\"w2ui[\\''+ this.name +'\\'].animateClose(\\''+ tab.id +'\\', event);\"></div>' : '') +\n                    '    <div class=\"w2ui-tab'+ (this.active === tab.id ? ' active' : '') + (tab.closable ? ' closable' : '') +'\" '+\n                    '        title=\"'+ (typeof tab.hint !== 'undefined' ? tab.hint : '') +'\" style=\"'+ tab.style +'\" '+ \n                    '        onclick=\"w2ui[\\''+ this.name +'\\'].click(\\''+ tab.id +'\\', event);\">' + tab.text + '</div>';\n                if (jq_el.length === 0) {\n                    // does not exist - create it\n                    var addStyle = '';\n                    if (tab.hidden) { addStyle += 'display: none;'; }\n                    if (tab.disabled) { addStyle += 'opacity: 0.2;'; }\n                    var html = '<td id=\"tabs_'+ this.name + '_tab_'+ tab.id +'\" style=\"'+ addStyle +'\" valign=\"middle\">'+ tabHTML + '</td>';\n                    if (this.get(id, true) !== this.tabs.length-1 && $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(this.tabs[parseInt(this.get(id, true))+1].id)).length > 0) {\n                        $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(this.tabs[parseInt(this.get(id, true))+1].id)).before(html);\n                    } else {\n                        $(this.box).find('#tabs_'+ this.name +'_right').before(html);\n                    }\n                } else {\n                    // refresh\n                    jq_el.html(tabHTML);\n                    if (tab.hidden) { jq_el.css('display', 'none'); }\n                    else { jq_el.css('display', ''); }\n                    if (tab.disabled) { jq_el.css({ 'opacity': '0.2' }); }\n                    else { jq_el.css({ 'opacity': '1' }); }\n                }\n            }\n            // right html\n            $('#tabs_'+ this.name +'_right').html(this.right);\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        render: function (box) {\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'render', target: this.name, box: box });\n            if (eventData.isCancelled === true) return;\n            // default action\n            // if (window.getSelection) window.getSelection().removeAllRanges(); // clear selection\n            if (typeof box !== 'undefined' && box !== null) {\n                if ($(this.box).find('> table #tabs_'+ this.name + '_right').length > 0) {\n                    $(this.box)\n                        .removeAttr('name')\n                        .removeClass('w2ui-reset w2ui-tabs')\n                        .html('');\n                }\n                this.box = box;\n            }\n            if (!this.box) return false;\n            // render all buttons\n            var html =    '<table cellspacing=\"0\" cellpadding=\"1\" width=\"100%\">'+\n                        '    <tr><td width=\"100%\" id=\"tabs_'+ this.name +'_right\" align=\"right\">'+ this.right +'</td></tr>'+\n                        '</table>';\n            $(this.box)\n                .attr('name', this.name)\n                .addClass('w2ui-reset w2ui-tabs')\n                .html(html);\n            if ($(this.box).length > 0) $(this.box)[0].style.cssText += this.style;\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            this.refresh();\n            return (new Date()).getTime() - time;\n        },\n\n        resize: function () {\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'resize', target: this.name });\n            if (eventData.isCancelled === true) return;\n\n            // intentionaly blank\n\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        destroy: function () {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'destroy', target: this.name });\n            if (eventData.isCancelled === true) return;\n            // clean up\n            if ($(this.box).find('> table #tabs_'+ this.name + '_right').length > 0) {\n                $(this.box)\n                    .removeAttr('name')\n                    .removeClass('w2ui-reset w2ui-tabs')\n                    .html('');\n            }\n            delete w2ui[this.name];\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        // ===================================================\n        // -- Internal Event Handlers\n\n        click: function (id, event) {\n            var tab = this.get(id);\n            if (tab === null || tab.disabled) return false;\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'click', target: id, tab: tab, object: tab, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // default action\n            $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(this.active) +' .w2ui-tab').removeClass('active');\n            this.active = tab.id;\n            // route processing\n            if (tab.route) {\n                var route = String('/'+ tab.route).replace(/\\/{2,}/g, '/');\n                var info  = w2utils.parseRoute(route);\n                if (info.keys.length > 0) {\n                    for (var k = 0; k < info.keys.length; k++) {\n                        if (this.routeData[info.keys[k].name] == null) continue;\n                        route = route.replace((new RegExp(':'+ info.keys[k].name, 'g')), this.routeData[info.keys[k].name]);\n                    }\n                }\n                setTimeout(function () { window.location.hash = route; }, 1);\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            this.refresh(id);\n        },\n\n        animateClose: function(id, event) {\n            var tab = this.get(id);\n            if (tab === null || tab.disabled) return false;\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'close', target: id, object: this.get(id), originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // default action\n            var obj = this;\n            $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(tab.id)).css(w2utils.cssPrefix('transition', '.2s')).css('opacity', '0');\n            setTimeout(function () {\n                var width = $(obj.box).find('#tabs_'+ obj.name +'_tab_'+ w2utils.escapeId(tab.id)).width();\n                $(obj.box).find('#tabs_'+ obj.name +'_tab_'+ w2utils.escapeId(tab.id))\n                    .html('<div style=\"width: '+ width +'px; '+ w2utils.cssPrefix('transition', '.2s', true) +'\"></div>');\n                setTimeout(function () {\n                    $(obj.box).find('#tabs_'+ obj.name +'_tab_'+ w2utils.escapeId(tab.id)).find(':first-child').css({ 'width': '0px' });\n                }, 50);\n            }, 200);\n            setTimeout(function () {\n                obj.remove(id);\n            }, 450);\n            // event before\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            this.refresh();\n        },\n\n        animateInsert: function(id, tab) {\n            if (this.get(id) === null) return;\n            if (!$.isPlainObject(tab)) return;\n            // check for unique\n            if (!w2utils.checkUniqueId(tab.id, this.tabs, 'tabs', this.name)) return;\n            // insert simple div\n            var jq_el   = $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(tab.id));\n            if (jq_el.length !== 0) return; // already exists\n            // measure width\n            if (typeof tab.caption !== 'undefined') tab.text = tab.caption;\n            var tmp = '<div id=\"_tmp_tabs\" class=\"w2ui-reset w2ui-tabs\" style=\"position: absolute; top: -1000px;\">'+\n                '<table cellspacing=\"0\" cellpadding=\"1\" width=\"100%\"><tr>'+\n                '<td id=\"_tmp_simple_tab\" style=\"\" valign=\"middle\">'+\n                    (tab.closable ? '<div class=\"w2ui-tab-close\"></div>' : '') +\n                '    <div class=\"w2ui-tab '+ (this.active === tab.id ? 'active' : '') +'\">'+ tab.text +'</div>'+\n                '</td></tr></table>'+\n                '</div>';\n            $('body').append(tmp);\n            // create dummy element\n            var tabHTML = '<div style=\"width: 1px; '+ w2utils.cssPrefix('transition', '.2s', true) +'\">&nbsp;</div>';\n            var addStyle = '';\n            if (tab.hidden) { addStyle += 'display: none;'; }\n            if (tab.disabled) { addStyle += 'opacity: 0.2;'; }\n            var html = '<td id=\"tabs_'+ this.name +'_tab_'+ tab.id +'\" style=\"'+ addStyle +'\" valign=\"middle\">'+ tabHTML +'</td>';\n            if (this.get(id, true) !== this.tabs.length && $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(this.tabs[parseInt(this.get(id, true))].id)).length > 0) {\n                $(this.box).find('#tabs_'+ this.name +'_tab_'+ w2utils.escapeId(this.tabs[parseInt(this.get(id, true))].id)).before(html);\n            } else {\n                $(this.box).find('#tabs_'+ this.name +'_right').before(html);\n            }\n            // -- move\n            var obj = this;\n            setTimeout(function () {\n                var width = $('#_tmp_simple_tab').width();\n                $('#_tmp_tabs').remove();\n                $('#tabs_'+ obj.name +'_tab_'+ w2utils.escapeId(tab.id) +' > div').css('width', width+'px');\n            }, 1);\n            setTimeout(function () {\n                // insert for real\n                obj.insert(id, tab);\n            }, 200);\n        }\n    };\n\n    $.extend(w2tabs.prototype, w2utils.event);\n    w2obj.tabs = w2tabs;\n})();\n\n\n/************************************************************************\n*   Library: Web 2.0 UI for jQuery (using prototypical inheritance)\n*   - Following objects defined\n*        - w2toolbar        - toolbar widget\n*        - $().w2toolbar    - jQuery wrapper\n*   - Dependencies: jQuery, w2utils\n*\n* == NICE TO HAVE ==\n*   - on overflow display << >>\n*   - vertical toolbar\n*   - declarative toolbar\n*\n* == 1.5 changes\n*   - $('#toolbar').w2toolbar() - if called w/o argument then it returns toolbar object\n*   - change enable, disable can disable menu items\n*\n************************************************************************/\n\n(function () {\n    var w2toolbar = function (options) {\n        this.box       = null;      // DOM Element that holds the element\n        this.name      = null;      // unique name for w2ui\n        this.routeData = {};        // data for dynamic routes\n        this.items     = [];\n        this.right     = '';        // HTML text on the right of toolbar\n        this.onClick   = null;\n        this.onRender  = null;\n        this.onRefresh = null;\n        this.onResize  = null;\n        this.onDestroy = null;\n\n        $.extend(true, this, w2obj.toolbar, options);\n    };\n\n    // ====================================================\n    // -- Registers as a jQuery plugin\n\n    $.fn.w2toolbar = function(method) {\n        if ($.isPlainObject(method)) {\n            // check name parameter\n            if (!w2utils.checkName(method, 'w2toolbar')) return;\n            // extend items\n            var items = method.items || [];\n            var object = new w2toolbar(method);\n            $.extend(object, { items: [], handlers: [] });\n            for (var i = 0; i < items.length; i++) {\n                object.items[i] = $.extend({}, w2toolbar.prototype.item, items[i]);\n            }\n            if ($(this).length !== 0) {\n                object.render($(this)[0]);\n            }\n            // register new object\n            w2ui[object.name] = object;\n            return object;\n\n        } else {\n            var obj = w2ui[$(this).attr('name')];\n            if (!obj) return null;\n            if (arguments.length > 0) {\n                if (obj[method]) obj[method].apply(obj, Array.prototype.slice.call(arguments, 1));\n                return this;\n            } else {\n                return obj;\n            }\n        }\n    };\n\n    // ====================================================\n    // -- Implementation of core functionality\n\n    w2toolbar.prototype = {\n        item: {\n            id       : null,        // command to be sent to all event handlers\n            type     : 'button',    // button, check, radio, drop, menu, break, html, spacer\n            text     : '',\n            route    : null,        // if not null, it is route to go\n            html     : '',\n            img      : null,\n            icon     : null,\n            count    : null,\n            hidden   : false,\n            disabled : false,\n            checked  : false,       // used for radio buttons\n            arrow    : true,        // arrow down for drop/menu types\n            hint     : '',\n            group    : null,        // used for radio buttons\n            items    : null,        // for type menu it is an array of items in the menu\n            overlay  : {},\n            onClick  : null\n        },\n\n        add: function (items) {\n            this.insert(null, items);\n        },\n\n        insert: function (id, items) {\n            if (!$.isArray(items)) items = [items];\n            for (var o = 0; o < items.length; o++) {\n                // checks\n                if (typeof items[o].type === 'undefined') {\n                    console.log('ERROR: The parameter \"type\" is required but not supplied in w2toolbar.add() method.');\n                    return;\n                }\n                if ($.inArray(String(items[o].type), ['button', 'check', 'radio', 'drop', 'menu', 'break', 'html', 'spacer']) === -1) {\n                    console.log('ERROR: The parameter \"type\" should be one of the following [button, check, radio, drop, menu, break, html, spacer] '+\n                            'in w2toolbar.add() method.');\n                    return;\n                }\n                if (typeof items[o].id === 'undefined') {\n                    console.log('ERROR: The parameter \"id\" is required but not supplied in w2toolbar.add() method.');\n                    return;\n                }\n                if (!w2utils.checkUniqueId(items[o].id, this.items, 'toolbar items', this.name)) return;\n                // add item\n                var it = $.extend({}, w2toolbar.prototype.item, items[o]);\n                if (id == null) {\n                    this.items.push(it);\n                } else {\n                    var middle = this.get(id, true);\n                    this.items = this.items.slice(0, middle).concat([it], this.items.slice(middle));\n                }\n                this.refresh(it.id);\n            }\n        },\n\n        remove: function () {\n            var removed = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var it = this.get(arguments[a]);\n                if (!it) continue;\n                removed++;\n                // remove from screen\n                $(this.box).find('#tb_'+ this.name +'_item_'+ w2utils.escapeId(it.id)).remove();\n                // remove from array\n                var ind = this.get(it.id, true);\n                if (ind != null) this.items.splice(ind, 1);\n            }\n            return removed;\n        },\n\n        set: function (id, item) {\n            var index = this.get(id, true);\n            if (index === null) return false;\n            $.extend(this.items[index], item);\n            this.refresh(id);\n            return true;\n        },\n\n        get: function (id, returnIndex) {\n            if (arguments.length === 0) {\n                var all = [];\n                for (var i1 = 0; i1 < this.items.length; i1++) if (this.items[i1].id !== null) all.push(this.items[i1].id);\n                return all;\n            }\n            for (var i2 = 0; i2 < this.items.length; i2++) {\n                if (this.items[i2].id === id) {\n                    if (returnIndex === true) return i2; else return this.items[i2];\n                }\n            }\n            return null;\n        },\n\n        show: function () {\n            var obj   = this;\n            var items = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var it = this.get(arguments[a]);\n                if (!it) continue;\n                items++;\n                it.hidden = false;\n                tmp.push(it.id);\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return items;\n        },\n\n        hide: function () {\n            var obj   = this;\n            var items = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var it = this.get(arguments[a]);\n                if (!it) continue;\n                items++;\n                it.hidden = true;\n                tmp.push(it.id);\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return items;\n        },\n\n        enable: function () {\n            var obj   = this;\n            var items = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var it = this.get(arguments[a]);\n                var id = arguments[a].split(':');\n                var it = this.get(id[0]);\n                if (!it) continue;\n                items++;\n                tmp.push(it.id);\n                if (it.type == 'menu' && id.length == 2) {\n                    // disable a menu item\n                    for (var i = 0; i < it.items.length; i++) {\n                        var item = it.items[i]\n                        if (item.id == id[1] || (item.id == null && item.text == id[1])) {\n                            item.disabled = false;\n                        }\n                    }\n                } else {\n                    it.disabled = false;\n                }\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return items;\n        },\n\n        disable: function () {\n            var obj   = this;\n            var items = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var id = arguments[a].split(':');\n                var it = this.get(id[0]);\n                if (!it) continue;\n                items++;\n                tmp.push(it.id);\n                if (it.type == 'menu' && id.length == 2) {\n                    // disable a menu item\n                    for (var i = 0; i < it.items.length; i++) {\n                        var item = it.items[i]\n                        if (item.id == id[1] || (item.id == null && item.text == id[1])) {\n                            item.disabled = true;\n                        }\n                    }\n                } else {\n                    it.disabled = true;\n                }\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return items;\n        },\n\n        check: function () {\n            var obj   = this;\n            var items = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var it = this.get(arguments[a]);\n                if (!it) continue;\n                items++;\n                it.checked = true;\n                tmp.push(it.id);\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return items;\n        },\n\n        uncheck: function () {\n            var obj   = this;\n            var items = 0;\n            var tmp   = [];\n            for (var a = 0; a < arguments.length; a++) {\n                var it = this.get(arguments[a]);\n                if (!it) continue;\n                items++;\n                it.checked = false;\n                tmp.push(it.id);\n            }\n            setTimeout(function () { for (var t=0; t<tmp.length; t++) obj.refresh(tmp[t]); }, 15); // needs timeout \n            return items;\n        },\n\n        render: function (box) {\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'render', target: this.name, box: box });\n            if (eventData.isCancelled === true) return;\n\n            if (box != null) {\n                if ($(this.box).find('> table #tb_'+ this.name + '_right').length > 0) {\n                    $(this.box)\n                        .removeAttr('name')\n                        .removeClass('w2ui-reset w2ui-toolbar')\n                        .html('');\n                }\n                this.box = box;\n            }\n            if (!this.box) return;\n            // render all buttons\n            var html = '<table cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">'+\n                       '<tr>';\n            for (var i = 0; i < this.items.length; i++) {\n                var it = this.items[i];\n                if (it.id == null) it.id = \"item_\" + i;\n                if (it === null)  continue;\n                if (it.type === 'spacer') {\n                    html += '<td width=\"100%\" id=\"tb_'+ this.name +'_item_'+ it.id +'\" align=\"right\"></td>';\n                } else {\n                    html += '<td id=\"tb_'+ this.name + '_item_'+ it.id +'\" style=\"'+ (it.hidden ? 'display: none' : '') +'\" '+\n                            '    class=\"'+ (it.disabled ? 'disabled' : '') +'\" valign=\"middle\">'+ this.getItemHTML(it) +\n                            '</td>';\n                }\n            }\n            html += '<td width=\"100%\" id=\"tb_'+ this.name +'_right\" align=\"right\">'+ this.right +'</td>';\n            html += '</tr>'+\n                    '</table>';\n            $(this.box)\n                .attr('name', this.name)\n                .addClass('w2ui-reset w2ui-toolbar')\n                .html(html);\n            if ($(this.box).length > 0) $(this.box)[0].style.cssText += this.style;\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        refresh: function (id) {\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'refresh', target: (typeof id !== 'undefined' ? id : this.name), item: this.get(id) });\n            if (eventData.isCancelled === true) return;\n\n            if (id == null) {\n                // refresh all\n                for (var i = 0; i < this.items.length; i++) {\n                    var it1 = this.items[i];\n                    if (it1.id == null) it1.id = \"item_\" + i;\n                    this.refresh(it1.id);\n                }\n            }\n            // create or refresh only one item\n            var it = this.get(id);\n            if (it === null) return false;\n\n            var el = $(this.box).find('#tb_'+ this.name +'_item_'+ w2utils.escapeId(it.id));\n            var html  = this.getItemHTML(it);\n            if (el.length === 0) {\n                // does not exist - create it\n                if (it.type === 'spacer') {\n                    html = '<td width=\"100%\" id=\"tb_'+ this.name +'_item_'+ it.id +'\" align=\"right\"></td>';\n                } else {\n                    html = '<td id=\"tb_'+ this.name + '_item_'+ it.id +'\" style=\"'+ (it.hidden ? 'display: none' : '') +'\" '+\n                        '    class=\"'+ (it.disabled ? 'disabled' : '') +'\" valign=\"middle\">'+ html +\n                        '</td>';\n                }\n                if (this.get(id, true) === this.items.length-1) {\n                    $(this.box).find('#tb_'+ this.name +'_right').before(html);\n                } else {\n                    $(this.box).find('#tb_'+ this.name +'_item_'+ w2utils.escapeId(this.items[parseInt(this.get(id, true))+1].id)).before(html);\n                }\n            } else {\n                // refresh\n                el.html(html);\n                if (it.hidden) { el.css('display', 'none'); } else { el.css('display', ''); }\n                if (it.disabled) { el.addClass('disabled'); } else { el.removeClass('disabled'); }\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        resize: function () {\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'resize', target: this.name });\n            if (eventData.isCancelled === true) return;\n\n            // intentionaly blank\n\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        destroy: function () {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'destroy', target: this.name });\n            if (eventData.isCancelled === true) return;\n            // clean up\n            if ($(this.box).find('> table #tb_'+ this.name + '_right').length > 0) {\n                $(this.box)\n                    .removeAttr('name')\n                    .removeClass('w2ui-reset w2ui-toolbar')\n                    .html('');\n            }\n            $(this.box).html('');\n            delete w2ui[this.name];\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        // ========================================\n        // --- Internal Functions\n\n        getItemHTML: function (item) {\n            var html = '';\n\n            if (typeof item.caption !== 'undefined') item.text = item.caption;\n            if (typeof item.hint === 'undefined') item.hint = '';\n            if (typeof item.text === 'undefined') item.text = '';\n\n            switch (item.type) {\n                case 'menu':\n                case 'button':\n                case 'check':\n                case 'radio':\n                case 'drop':\n                    var img = '<td>&nbsp;</td>';\n                    if (item.img)  img = '<td><div class=\"w2ui-tb-image w2ui-icon '+ item.img +'\"></div></td>';\n                    if (item.icon) img = '<td><div class=\"w2ui-tb-image\"><span class=\"'+ item.icon +'\"></span></div></td>';\n                    html += '<table cellpadding=\"0\" cellspacing=\"0\" title=\"'+ item.hint +'\" class=\"w2ui-button '+ (item.checked ? 'checked' : '') +'\" '+\n                            '       onclick     = \"var el=w2ui[\\''+ this.name + '\\']; if (el) el.click(\\''+ item.id +'\\', event);\" '+\n                            '       onmouseover = \"' + (!item.disabled ? \"$(this).addClass('over');\" : \"\") + '\"'+\n                            '       onmouseout  = \"' + (!item.disabled ? \"$(this).removeClass('over').removeClass('down');\" : \"\") + '\"'+\n                            '       onmousedown = \"' + (!item.disabled ? \"$(this).addClass('down');\" : \"\") + '\"'+\n                            '       onmouseup   = \"' + (!item.disabled ? \"$(this).removeClass('down');\" : \"\") + '\"'+\n                            '>'+\n                            '<tr><td>'+\n                            '  <table cellpadding=\"1\" cellspacing=\"0\">'+\n                            '  <tr>' +\n                                    img +\n                                    (item.text !== '' ? '<td class=\"w2ui-tb-caption\" nowrap>'+ item.text +'</td>' : '') +\n                                    (item.count != null ? '<td class=\"w2ui-tb-count\" nowrap><span>'+ item.count +'</span></td>' : '') +\n                                    (((item.type === 'drop' || item.type === 'menu') && item.arrow !== false) ?\n                                        '<td class=\"w2ui-tb-down\" nowrap><div></div></td>' : '') +\n                            '  </tr></table>'+\n                            '</td></tr></table>';\n                    break;\n\n                case 'break':\n                    html +=    '<table cellpadding=\"0\" cellspacing=\"0\"><tr>'+\n                            '    <td><div class=\"w2ui-break\">&nbsp;</div></td>'+\n                            '</tr></table>';\n                    break;\n\n                case 'html':\n                    html +=    '<table cellpadding=\"0\" cellspacing=\"0\"><tr>'+\n                            '    <td nowrap>' + item.html + '</td>'+\n                            '</tr></table>';\n                    break;\n            }\n\n            var newHTML = '';\n            if (typeof item.onRender === 'function') newHTML = item.onRender.call(this, item.id, html);\n            if (typeof this.onRender === 'function') newHTML = this.onRender(item.id, html);\n            if (newHTML !== '' && newHTML != null) html = newHTML;\n            \n            return '<div>' + html + '</div>';\n        },\n\n        menuClick: function (event) {\n            var obj = this;\n            if (event.item && !event.item.disabled) {\n                // event before\n                var eventData = this.trigger({ phase: 'before', type: 'click', target: event.item.id + ':' + event.subItem.id, item: event.item,\n                    subItem: event.subItem, originalEvent: event.originalEvent });\n                if (eventData.isCancelled === true) return;\n\n                // route processing\n                var it = event.subItem;\n                if (it.route) {\n                    var route = String('/'+ it.route).replace(/\\/{2,}/g, '/');\n                    var info  = w2utils.parseRoute(route);\n                    if (info.keys.length > 0) {\n                        for (var k = 0; k < info.keys.length; k++) {\n                            if (obj.routeData[info.keys[k].name] == null) continue;\n                            route = route.replace((new RegExp(':'+ info.keys[k].name, 'g')), this.routeData[info.keys[k].name]);\n                        }\n                    }\n                    setTimeout(function () { window.location.hash = route; }, 1);\n                }\n\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n            }\n        },\n\n        click: function (id, event) {\n            var obj = this;\n            var it  = this.get(id);\n            if (it && !it.disabled) {\n                // event before\n                var eventData = this.trigger({ phase: 'before', type: 'click', target: (typeof id !== 'undefined' ? id : this.name),\n                    item: it, object: it, originalEvent: event });\n                if (eventData.isCancelled === true) return;\n\n                var btn = '#tb_'+ this.name +'_item_'+ w2utils.escapeId(it.id) +' table.w2ui-button';\n                $(btn).removeClass('down'); // need to requery at the moment -- as well as elsewhere in this function\n\n                if (it.type === 'radio') {\n                    for (var i = 0; i < this.items.length; i++) {\n                        var itt = this.items[i];\n                        if (itt == null || itt.id === it.id || itt.type !== 'radio') continue;\n                        if (itt.group === it.group && itt.checked) {\n                            itt.checked = false;\n                            this.refresh(itt.id);\n                        }\n                    }\n                    it.checked = true;\n                    $(btn).addClass('checked');\n                }\n\n                if (it.type === 'drop' || it.type === 'menu') {\n                    if (it.checked) {\n                        // if it was already checked, second click will hide it\n                        it.checked = false;\n                    } else {\n                        // show overlay\n                        setTimeout(function () {\n                            var el = $('#tb_'+ obj.name +'_item_'+ w2utils.escapeId(it.id));\n                            if (!$.isPlainObject(it.overlay)) it.overlay = {};\n                            var left = (el.width() - 50) / 2;\n                            if (left > 19) left = 19;\n                            if (it.type === 'drop') {\n                                el.w2overlay(it.html, $.extend({ name: obj.name, left: left, top: 3 }, it.overlay, {\n                                    onHide: function () { hideDrop(); }\n                                }));\n                            }\n                            if (it.type === 'menu') {\n                                el.w2menu(it.items, $.extend({ left: left, top: 3 }, it.overlay, {\n                                    select: function (event) {\n                                        obj.menuClick({ name: obj.name, item: it, subItem: event.item, originalEvent: event.originalEvent });\n                                        hideDrop();\n                                    },\n                                    onHide: function () { hideDrop(); }\n                                }));\n                            }\n                            function hideDrop(event) {\n                                it.checked = false;\n                                $(btn).removeClass('checked');\n                            }\n                        }, 1);\n                    }\n                }\n\n                if (it.type === 'check' || it.type === 'drop' || it.type === 'menu') {\n                    it.checked = !it.checked;\n                    if (it.checked) {\n                        $(btn).addClass('checked');\n                    } else {\n                        $(btn).removeClass('checked');\n                    }\n                }\n                // route processing\n                if (it.route) {\n                    var route = String('/'+ it.route).replace(/\\/{2,}/g, '/');\n                    var info  = w2utils.parseRoute(route);\n                    if (info.keys.length > 0) {\n                        for (var k = 0; k < info.keys.length; k++) {\n                            route = route.replace((new RegExp(':'+ info.keys[k].name, 'g')), this.routeData[info.keys[k].name]);\n                        }\n                    }\n                    setTimeout(function () { window.location.hash = route; }, 1);\n                }\n                // event after\n                this.trigger($.extend(eventData, { phase: 'after' }));\n            }\n        }\n    };\n\n    $.extend(w2toolbar.prototype, w2utils.event);\n    w2obj.toolbar = w2toolbar;\n})();\n\n\n/************************************************************************\n*   Library: Web 2.0 UI for jQuery (using prototypical inheritance)\n*   - Following objects defined\n*        - w2sidebar        - sidebar widget\n*        - $().w2sidebar    - jQuery wrapper\n*   - Dependencies: jQuery, w2utils\n*\n* == NICE TO HAVE ==\n*   - add find() method to find nodes by a specific criteria (I want all nodes for exampe)\n*   - dbl click should be like it is in grid (with timer not HTML dbl click event)\n*   - reorder with grag and drop\n*   - node.style is missleading - should be there to apply color for example\n*   - add multiselect\n*\n* == 1.5 changes\n*   - $('#sidebar').w2sidebar() - if called w/o argument then it returns sidebar object\n*   - add route property that would navigate to a #route\n*   - return ids of all subitems\n*   - added w2sidebar.flat\n*   - added focus(), blur(), onFocus, onBlur\n*\n************************************************************************/\n\n(function () {\n    var w2sidebar = function (options) {\n        this.name          = null;\n        this.box           = null;\n        this.sidebar       = null;\n        this.parent        = null;\n        this.nodes         = [];        // Sidebar child nodes\n        this.menu          = [];\n        this.routeData     = {};        // data for dynamic routes\n        this.selected      = null;      // current selected node (readonly)\n        this.img           = null;\n        this.icon          = null;\n        this.style         = '';\n        this.topHTML       = '';\n        this.bottomHTML    = '';\n        this.keyboard      = true;\n        this.flat          = false;\n        this.onClick       = null;      // Fire when user click on Node Text\n        this.onDblClick    = null;      // Fire when user dbl clicks\n        this.onContextMenu = null;\n        this.onMenuClick   = null;      // when context menu item selected\n        this.onExpand      = null;      // Fire when node Expands\n        this.onCollapse    = null;      // Fire when node Colapses\n        this.onKeydown     = null;\n        this.onRender      = null;\n        this.onRefresh     = null;\n        this.onResize      = null;\n        this.onDestroy     = null;\n        this.onFocus       = null;\n        this.onBlur        = null;\n\n        $.extend(true, this, w2obj.sidebar, options);\n    };\n\n    // ====================================================\n    // -- Registers as a jQuery plugin\n\n    $.fn.w2sidebar = function(method) {\n        if ($.isPlainObject(method)) {\n            // check name parameter\n            if (!w2utils.checkName(method, 'w2sidebar')) return;\n            // extend items\n            var nodes  = method.nodes;\n            var object = new w2sidebar(method);\n            $.extend(object, { handlers: [], nodes: [] });\n            if (typeof nodes != 'undefined') {\n                object.add(object, nodes);\n            }\n            if ($(this).length !== 0) {\n                object.render($(this)[0]);\n            }\n            object.sidebar = object;\n            // register new object\n            w2ui[object.name] = object;\n            return object;\n\n        } else {\n            var obj = w2ui[$(this).attr('name')];\n            if (!obj) return null;\n            if (arguments.length > 0) {\n                if (obj[method]) obj[method].apply(obj, Array.prototype.slice.call(arguments, 1));\n                return this;\n            } else {\n                return obj;\n            }\n        }\n    };\n\n    // ====================================================\n    // -- Implementation of core functionality\n\n    w2sidebar.prototype = {\n\n        node: {\n            id              : null,\n            text            : '',\n            count           : null,\n            img             : null,\n            icon            : null,\n            nodes           : [],\n            style           : '',            // additional style for subitems\n            route           : null,\n            selected        : false,\n            expanded        : false,\n            hidden          : false,\n            disabled        : false,\n            group           : false,        // if true, it will build as a group\n            groupShowHide   : true,\n            plus            : false,        // if true, plus will be shown even if there is no sub nodes\n            // events\n            onClick         : null,\n            onDblClick      : null,\n            onContextMenu   : null,\n            onExpand        : null,\n            onCollapse      : null,\n            // internal\n            parent          : null,    // node object\n            sidebar         : null\n        },\n\n        add: function (parent, nodes) {\n            if (arguments.length == 1) {\n                // need to be in reverse order\n                nodes  = arguments[0];\n                parent = this;\n            }\n            if (typeof parent == 'string') parent = this.get(parent);\n            return this.insert(parent, null, nodes);\n        },\n\n        insert: function (parent, before, nodes) {\n            var txt, ind, tmp, node, nd;\n            if (arguments.length == 2) {\n                // need to be in reverse order\n                nodes  = arguments[1];\n                before = arguments[0];\n                if (before != null) {\n                    ind = this.get(before);\n                    if (ind === null) {\n                        if (!$.isArray(nodes)) nodes = [nodes];\n                        txt = (nodes[0].caption != null ? nodes[0].caption : nodes[0].text);\n                        console.log('ERROR: Cannot insert node \"'+ txt +'\" because cannot find node \"'+ before +'\" to insert before.');\n                        return null;\n                    }\n                    parent = this.get(before).parent;\n                } else {\n                    parent = this;\n                }\n            }\n            if (typeof parent == 'string') parent = this.get(parent);\n            if (!$.isArray(nodes)) nodes = [nodes];\n            for (var o = 0; o < nodes.length; o++) {\n                node = nodes[o];\n                if (typeof node.id == null) {\n                    txt = (node.caption != null ? node.caption : node.text);\n                    console.log('ERROR: Cannot insert node \"'+ txt +'\" because it has no id.');\n                    continue;\n                }\n                if (this.get(this, node.id) !== null) {\n                    txt = (node.caption != null ? node.caption : node.text);\n                    console.log('ERROR: Cannot insert node with id='+ node.id +' (text: '+ txt + ') because another node with the same id already exists.');\n                    continue;\n                }\n                tmp = $.extend({}, w2sidebar.prototype.node, node);\n                tmp.sidebar = this;\n                tmp.parent  = parent;\n                nd = tmp.nodes || [];\n                tmp.nodes = []; // very important to re-init empty nodes array\n                if (before === null) { // append to the end\n                    parent.nodes.push(tmp);\n                } else {\n                    ind = this.get(parent, before, true);\n                    if (ind === null) {\n                        txt = (node.caption != null ? node.caption : node.text);\n                        console.log('ERROR: Cannot insert node \"'+ txt +'\" because cannot find node \"'+ before +'\" to insert before.');\n                        return null;\n                }\n                    parent.nodes.splice(ind, 0, tmp);\n                }\n                if (nd.length > 0) {\n                    this.insert(tmp, null, nd);\n                }\n            }\n            this.refresh(parent.id);\n            return tmp;\n        },\n\n        remove: function () { // multiple arguments\n            var deleted = 0;\n            var tmp;\n            for (var a = 0; a < arguments.length; a++) {\n                tmp = this.get(arguments[a]);\n                if (tmp === null) continue;\n                if (this.selected !== null && this.selected === tmp.id) {\n                    this.selected = null;\n                }\n                var ind  = this.get(tmp.parent, arguments[a], true);\n                if (ind === null) continue;\n                if (tmp.parent.nodes[ind].selected)    tmp.sidebar.unselect(tmp.id);\n                tmp.parent.nodes.splice(ind, 1);\n                deleted++;\n            }\n            if (deleted > 0 && arguments.length == 1) this.refresh(tmp.parent.id); else this.refresh();\n            return deleted;\n        },\n\n        set: function (parent, id, node) {\n            if (arguments.length == 2) {\n                // need to be in reverse order\n                node    = id;\n                id        = parent;\n                parent    = this;\n            }\n            // searches all nested nodes\n            if (typeof parent == 'string') parent = this.get(parent);\n            if (parent.nodes == null) return null;\n            for (var i = 0; i < parent.nodes.length; i++) {\n                if (parent.nodes[i].id === id) {\n                    // make sure nodes inserted correctly\n                    var nodes = node.nodes;\n                    $.extend(parent.nodes[i], node, { nodes: [] });\n                    if (nodes != null) {\n                        this.add(parent.nodes[i], nodes);\n                    }\n                    this.refresh(id);\n                    return true;\n                } else {\n                    var rv = this.set(parent.nodes[i], id, node);\n                    if (rv) return true;\n                }\n            }\n            return false;\n        },\n\n        get: function (parent, id, returnIndex) { // can be just called get(id) or get(id, true)\n            if (arguments.length === 0) {\n                var all = [];\n                var tmp = this.find({});\n                for (var t = 0; t < tmp.length; t++) {\n                    if (tmp[t].id != null) all.push(tmp[t].id);\n                }\n                return all;\n            } else {\n                if (arguments.length == 1 || (arguments.length == 2 && id === true) ) {\n                    // need to be in reverse order\n                    returnIndex    = id;\n                    id            = parent;\n                    parent        = this;\n                }\n                // searches all nested nodes\n                if (typeof parent == 'string') parent = this.get(parent);\n                if (parent.nodes == null) return null;\n                for (var i = 0; i < parent.nodes.length; i++) {\n                    if (parent.nodes[i].id == id) {\n                        if (returnIndex === true) return i; else return parent.nodes[i];\n                    } else {\n                        var rv = this.get(parent.nodes[i], id, returnIndex);\n                        if (rv || rv === 0) return rv;\n                    }\n                }\n                return null;\n            }\n        },\n\n        find: function (parent, params, results) { // can be just called find({ selected: true })\n            if (arguments.length == 1) {\n                // need to be in reverse order\n                params = parent;\n                parent = this;\n            }\n            if (!results) results = [];\n            // searches all nested nodes\n            if (typeof parent == 'string') parent = this.get(parent);\n            if (parent.nodes == null) return results;\n            for (var i = 0; i < parent.nodes.length; i++) {\n                var match = true;\n                for (var prop in params) { // params is an object\n                    if (parent.nodes[i][prop] != params[prop]) match = false;\n                }\n                if (match) results.push(parent.nodes[i]);\n                if (parent.nodes[i].nodes.length > 0) results = this.find(parent.nodes[i], params, results);\n            }\n            return results;\n        },\n\n        hide: function () { // multiple arguments\n            var hidden = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var tmp = this.get(arguments[a]);\n                if (tmp === null) continue;\n                tmp.hidden = true;\n                hidden++;\n            }\n            if (arguments.length == 1) this.refresh(arguments[0]); else this.refresh();\n            return hidden;\n        },\n\n        show: function () { // multiple arguments\n            var shown = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var tmp = this.get(arguments[a]);\n                if (tmp === null) continue;\n                tmp.hidden = false;\n                shown++;\n            }\n            if (arguments.length == 1) this.refresh(arguments[0]); else this.refresh();\n            return shown;\n        },\n\n        disable: function () { // multiple arguments\n            var disabled = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var tmp = this.get(arguments[a]);\n                if (tmp === null) continue;\n                tmp.disabled = true;\n                if (tmp.selected) this.unselect(tmp.id);\n                disabled++;\n            }\n            if (arguments.length == 1) this.refresh(arguments[0]); else this.refresh();\n            return disabled;\n        },\n\n        enable: function () { // multiple arguments\n            var enabled = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var tmp = this.get(arguments[a]);\n                if (tmp === null) continue;\n                tmp.disabled = false;\n                enabled++;\n            }\n            if (arguments.length == 1) this.refresh(arguments[0]); else this.refresh();\n            return enabled;\n        },\n\n        select: function (id) {\n            var new_node = this.get(id);\n            if (!new_node) return false;\n            if (this.selected == id && new_node.selected) return false;\n            this.unselect(this.selected);\n            $(this.box).find('#node_'+ w2utils.escapeId(id))\n                .addClass('w2ui-selected')\n                .find('.w2ui-icon').addClass('w2ui-icon-selected');\n            new_node.selected = true;\n            this.selected = id;\n            return true;\n        },\n\n        unselect: function (id) {\n            var current = this.get(id);\n            if (!current) return false;\n            current.selected = false;\n            $(this.box).find('#node_'+ w2utils.escapeId(id))\n                .removeClass('w2ui-selected')\n                .find('.w2ui-icon').removeClass('w2ui-icon-selected');\n            if (this.selected == id) this.selected = null;\n            return true;\n        },\n\n        toggle: function(id) {\n            var nd = this.get(id);\n            if (nd === null) return false;\n            if (nd.plus) {\n                this.set(id, { plus: false });\n                this.expand(id);\n                this.refresh(id);\n                return;\n            }\n            if (nd.nodes.length === 0) return false;\n            if (this.get(id).expanded) return this.collapse(id); else return this.expand(id);\n        },\n\n        collapse: function (id) {\n            var obj = this;\n            var nd  = this.get(id);\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'collapse', target: id, object: nd });\n            if (eventData.isCancelled === true) return;\n            // default action\n            $(this.box).find('#node_'+ w2utils.escapeId(id) +'_sub').slideUp(200);\n            $(this.box).find('#node_'+ w2utils.escapeId(id) +' .w2ui-node-dots:first-child').html('<div class=\"w2ui-expand\">+</div>');\n            nd.expanded = false;\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            setTimeout(function () { obj.refresh(id); }, 200);\n            return true;\n        },\n\n        collapseAll: function (parent) {\n            if (typeof parent == 'undefined') parent = this;\n            if (typeof parent == 'string') parent = this.get(parent);\n            if (parent.nodes == null) return false;\n            for (var i = 0; i < parent.nodes.length; i++) {\n                if (parent.nodes[i].expanded === true) parent.nodes[i].expanded = false;\n                if (parent.nodes[i].nodes && parent.nodes[i].nodes.length > 0) this.collapseAll(parent.nodes[i]);\n            }\n            this.refresh(parent.id);\n            return true;\n        },\n\n        expand: function (id) {\n            var obj = this;\n            var nd  = this.get(id);\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'expand', target: id, object: nd });\n            if (eventData.isCancelled === true) return;\n            // default action\n            $(this.box).find('#node_'+ w2utils.escapeId(id) +'_sub').slideDown(200);\n            $(this.box).find('#node_'+ w2utils.escapeId(id) +' .w2ui-node-dots:first-child').html('<div class=\"w2ui-expand\">-</div>');\n            nd.expanded = true;\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            setTimeout(function () { obj.refresh(id); }, 200);\n            return true;\n        },\n\n        expandAll: function (parent) {\n            if (typeof parent == 'undefined') parent = this;\n            if (typeof parent == 'string') parent = this.get(parent);\n            if (parent.nodes == null) return false;\n            for (var i = 0; i < parent.nodes.length; i++) {\n                if (parent.nodes[i].expanded === false) parent.nodes[i].expanded = true;\n                if (parent.nodes[i].nodes && parent.nodes[i].nodes.length > 0) this.collapseAll(parent.nodes[i]);\n            }\n            this.refresh(parent.id);\n        },\n\n        expandParents: function (id) {\n            var node = this.get(id);\n            if (node === null) return false;\n            if (node.parent) {\n                node.parent.expanded = true;\n                this.expandParents(node.parent.id);\n            }\n            this.refresh(id);\n            return true;\n        },\n\n        click: function (id, event) {\n            var obj = this;\n            var nd  = this.get(id);\n            if (nd === null) return;\n            if (nd.disabled || nd.group) return; // should click event if already selected\n            // unselect all previsously\n            $(obj.box).find('.w2ui-node.w2ui-selected').each(function (index, el) {\n                var oldID     = $(el).attr('id').replace('node_', '');\n                var oldNode = obj.get(oldID);\n                if (oldNode != null) oldNode.selected = false;\n                $(el).removeClass('w2ui-selected').find('.w2ui-icon').removeClass('w2ui-icon-selected');\n            });\n            // select new one\n            var newNode = $(obj.box).find('#node_'+ w2utils.escapeId(id));\n            var oldNode = $(obj.box).find('#node_'+ w2utils.escapeId(obj.selected));\n            newNode.addClass('w2ui-selected').find('.w2ui-icon').addClass('w2ui-icon-selected');\n            // need timeout to allow rendering\n            setTimeout(function () {\n                // event before\n                var eventData = obj.trigger({ phase: 'before', type: 'click', target: id, originalEvent: event, node: nd, object: nd });\n                if (eventData.isCancelled === true) {\n                    // restore selection\n                    newNode.removeClass('w2ui-selected').find('.w2ui-icon').removeClass('w2ui-icon-selected');\n                    oldNode.addClass('w2ui-selected').find('.w2ui-icon').addClass('w2ui-icon-selected');\n                    return;\n                }\n                // default action\n                if (oldNode !== null) oldNode.selected = false;\n                obj.get(id).selected = true;\n                obj.selected = id;\n                // route processing\n                if (nd.route) {\n                    var route = String('/'+ nd.route).replace(/\\/{2,}/g, '/');\n                    var info  = w2utils.parseRoute(route);\n                    if (info.keys.length > 0) {\n                        for (var k = 0; k < info.keys.length; k++) {\n                            if (obj.routeData[info.keys[k].name] == null) continue;\n                            route = route.replace((new RegExp(':'+ info.keys[k].name, 'g')), obj.routeData[info.keys[k].name]);\n                        }\n                    }\n                    setTimeout(function () { window.location.hash = route; }, 1);\n                }\n                // event after\n                obj.trigger($.extend(eventData, { phase: 'after' }));\n            }, 1);\n        },\n\n        focus: function (event) {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'focus', target: this.name, originalEvent: event });\n            if (eventData.isCancelled === true) return false;\n            // default behaviour\n            $(this.box).find('.w2ui-selected').removeClass('w2ui-inactive');\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        blur: function (event) {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'blur', target: this.name, originalEvent: event });\n            if (eventData.isCancelled === true) return false;\n            // default behaviour\n            $(this.box).find('.w2ui-selected').addClass('w2ui-inactive');\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        keydown: function (event) {\n            var obj = this;\n            var nd  = obj.get(obj.selected);\n            if (!nd || obj.keyboard !== true) return;\n            // trigger event\n            var eventData = obj.trigger({ phase: 'before', type: 'keydown', target: obj.name, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // default behaviour\n            if (event.keyCode == 13 || event.keyCode == 32) { // enter or space\n                if (nd.nodes.length > 0) obj.toggle(obj.selected);\n            }\n            if (event.keyCode == 37) { // left\n                if (nd.nodes.length > 0 && nd.expanded) {\n                    obj.collapse(obj.selected);\n                } else {\n                    selectNode(nd.parent);\n                    if (!nd.parent.group) obj.collapse(nd.parent.id);\n                }\n            }\n            if (event.keyCode == 39) { // right\n                if ((nd.nodes.length > 0 || nd.plus) && !nd.expanded) obj.expand(obj.selected);\n            }\n            if (event.keyCode == 38) { // up\n                selectNode(neighbor(nd, prev));\n            }\n            if (event.keyCode == 40) { // down\n                selectNode(neighbor(nd, next));\n            }\n            // cancel event if needed\n            if ($.inArray(event.keyCode, [13, 32, 37, 38, 39, 40]) != -1) {\n                if (event.preventDefault) event.preventDefault();\n                if (event.stopPropagation) event.stopPropagation();\n            }\n            // event after\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n\n            function selectNode (node, event) {\n                if (node !== null && !node.hidden && !node.disabled && !node.group) {\n                    obj.click(node.id, event);\n                    setTimeout(function () { obj.scrollIntoView(); }, 50);\n                }\n            }\n\n            function neighbor (node, neighborFunc) {\n                node = neighborFunc(node);\n                while (node !== null && (node.hidden || node.disabled)) {\n                    if (node.group) break; else node = neighborFunc(node);\n                }\n                return node;\n            }\n\n            function next (node, noSubs) {\n                if (node === null) return null;\n                var parent   = node.parent;\n                var ind      = obj.get(node.id, true);\n                var nextNode = null;\n                // jump inside\n                if (node.expanded && node.nodes.length > 0 && noSubs !== true) {\n                    var t = node.nodes[0];\n                    if (t.hidden || t.disabled || t.group) nextNode = next(t); else nextNode = t;\n                } else {\n                    if (parent && ind + 1 < parent.nodes.length) {\n                        nextNode = parent.nodes[ind + 1];\n                    } else {\n                        nextNode = next(parent, true); // jump to the parent\n                    }\n                }\n                if (nextNode !== null && (nextNode.hidden || nextNode.disabled || nextNode.group)) nextNode = next(nextNode);\n                return nextNode;\n            }\n\n            function prev (node) {\n                if (node === null) return null;\n                var parent   = node.parent;\n                var ind      = obj.get(node.id, true);\n                var prevNode = (ind > 0) ? lastChild(parent.nodes[ind - 1]) : parent;\n                if (prevNode !== null && (prevNode.hidden || prevNode.disabled || prevNode.group)) prevNode = prev(prevNode);\n                return prevNode;\n            }\n\n            function lastChild (node) {\n                if (node.expanded && node.nodes.length > 0) {\n                    var t = node.nodes[node.nodes.length - 1];\n                    if (t.hidden || t.disabled || t.group) return prev(t); else return lastChild(t);\n                }\n                return node;\n            }\n        },\n\n        scrollIntoView: function (id) {\n            if (typeof id == 'undefined') id = this.selected;\n            var nd = this.get(id);\n            if (nd === null) return;\n            var body   = $(this.box).find('.w2ui-sidebar-div');\n            var item   = $(this.box).find('#node_'+ w2utils.escapeId(id));\n            var offset = item.offset().top - body.offset().top;\n            if (offset + item.height() > body.height()) {\n                body.animate({ 'scrollTop': body.scrollTop() + body.height() / 1.3 }, 250, 'linear');\n            }\n            if (offset <= 0) {\n                body.animate({ 'scrollTop': body.scrollTop() - body.height() / 1.3 }, 250, 'linear');\n            }\n        },\n\n        dblClick: function (id, event) {\n            var nd = this.get(id);\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'dblClick', target: id, originalEvent: event, object: nd });\n            if (eventData.isCancelled === true) return;\n            // default action\n            this.toggle(id);\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        contextMenu: function (id, event) {\n            var obj = this;\n            var nd  = obj.get(id);\n            if (id != obj.selected) obj.click(id);\n            // need timeout to allow click to finish first\n            setTimeout(function () {\n                // event before\n                var eventData = obj.trigger({ phase: 'before', type: 'contextMenu', target: id, originalEvent: event, object: nd });\n                if (eventData.isCancelled === true) return;\n                // default action\n                if (nd.group || nd.disabled) return;\n                if (obj.menu.length > 0) {\n                    $(obj.box).find('#node_'+ w2utils.escapeId(id))\n                        .w2menu(obj.menu, {\n                            left    : (event ? event.offsetX || event.pageX : 50) - 25,\n                            onSelect: function (event) { \n                                obj.menuClick(id, parseInt(event.index), event.originalEvent); \n                            }\n                        }\n                    );\n                }\n                // event after\n                obj.trigger($.extend(eventData, { phase: 'after' }));\n            }, 150); // need timer 150 for FF\n        },\n\n        menuClick: function (itemId, index, event) {\n            var obj = this;\n            // event before\n            var eventData = obj.trigger({ phase: 'before', type: 'menuClick', target: itemId, originalEvent: event, menuIndex: index, menuItem: obj.menu[index] });\n            if (eventData.isCancelled === true) return;\n            // default action\n            // -- empty\n            // event after\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        render: function (box) {\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'render', target: this.name, box: box });\n            if (eventData.isCancelled === true) return;\n            // default action\n            if (typeof box != 'undefined' && box !== null) {\n                if ($(this.box).find('> div > div.w2ui-sidebar-div').length > 0) {\n                    $(this.box)\n                        .removeAttr('name')\n                        .removeClass('w2ui-reset w2ui-sidebar')\n                        .html('');\n                }\n                this.box = box;\n            }\n            if (!this.box) return;\n            $(this.box)\n                .attr('name', this.name)\n                .addClass('w2ui-reset w2ui-sidebar')\n                .html('<div>'+\n                        '<div class=\"w2ui-sidebar-top\"></div>' +\n                        '<div class=\"w2ui-sidebar-div\"></div>'+\n                        '<div class=\"w2ui-sidebar-bottom\"></div>'+\n                    '</div>'\n                );\n            $(this.box).find('> div').css({\n                width  : $(this.box).width() + 'px',\n                height : $(this.box).height() + 'px'\n            });\n            if ($(this.box).length > 0) $(this.box)[0].style.cssText += this.style;\n            // adjust top and bottom\n            if (this.topHTML !== '') {\n                $(this.box).find('.w2ui-sidebar-top').html(this.topHTML);\n                $(this.box).find('.w2ui-sidebar-div')\n                    .css('top', $(this.box).find('.w2ui-sidebar-top').height() + 'px');\n            }\n            if (this.bottomHTML !== '') {\n                $(this.box).find('.w2ui-sidebar-bottom').html(this.bottomHTML);\n                $(this.box).find('.w2ui-sidebar-div')\n                    .css('bottom', $(this.box).find('.w2ui-sidebar-bottom').height() + 'px');\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            // ---\n            this.refresh();\n            return (new Date()).getTime() - time;\n        },\n\n        refresh: function (id) {\n            var time = (new Date()).getTime();\n            // if (window.getSelection) window.getSelection().removeAllRanges(); // clear selection\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'refresh', target: (typeof id != 'undefined' ? id : this.name) });\n            if (eventData.isCancelled === true) return;\n            // adjust top and bottom\n            if (this.topHTML !== '') {\n                $(this.box).find('.w2ui-sidebar-top').html(this.topHTML);\n                $(this.box).find('.w2ui-sidebar-div')\n                    .css('top', $(this.box).find('.w2ui-sidebar-top').height() + 'px');\n            }\n            if (this.bottomHTML !== '') {\n                $(this.box).find('.w2ui-sidebar-bottom').html(this.bottomHTML);\n                $(this.box).find('.w2ui-sidebar-div')\n                    .css('bottom', $(this.box).find('.w2ui-sidebar-bottom').height() + 'px');\n            }\n            // default action\n            $(this.box).find('> div').css({\n                width : $(this.box).width() + 'px',\n                height: $(this.box).height() + 'px'\n            });\n            var obj = this;\n            var node, nd;\n            var nm;\n            if (typeof id == 'undefined') {\n                node = this;\n                nm   = '.w2ui-sidebar-div';\n            } else {\n                node = this.get(id);\n                if (node === null) return;\n                nm   = '#node_'+ w2utils.escapeId(node.id) + '_sub';\n            }\n            var nodeHTML;\n            if (node !== this) {\n                var tmp  = '#node_'+ w2utils.escapeId(node.id);\n                nodeHTML = getNodeHTML(node);\n                $(this.box).find(tmp).before('<div id=\"sidebar_'+ this.name + '_tmp\"></div>');\n                $(this.box).find(tmp).remove();\n                $(this.box).find(nm).remove();\n                $('#sidebar_'+ this.name + '_tmp').before(nodeHTML);\n                $('#sidebar_'+ this.name + '_tmp').remove();\n            }\n            // refresh sub nodes\n            $(this.box).find(nm).html('');\n            for (var i = 0; i < node.nodes.length; i++) {\n                nd = node.nodes[i];\n                nodeHTML = getNodeHTML(nd);\n                $(this.box).find(nm).append(nodeHTML);\n                if (nd.nodes.length !== 0) { this.refresh(nd.id); }\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n\n            function getNodeHTML(nd) {\n                var html = '';\n                var img  = nd.img;\n                if (img === null) img = this.img;\n                var icon = nd.icon;\n                if (icon === null) icon = this.icon;\n                // -- find out level\n                var tmp   = nd.parent;\n                var level = 0;\n                while (tmp && tmp.parent !== null) {\n                    if (tmp.group) level--;\n                    tmp = tmp.parent;\n                    level++;\n                }\n                if (typeof nd.caption != 'undefined') nd.text = nd.caption;\n                if (nd.group) {\n                    html =\n                        '<div class=\"w2ui-node-group\" id=\"node_'+ nd.id +'\"'+\n                        '        onclick=\"w2ui[\\''+ obj.name +'\\'].toggle(\\''+ nd.id +'\\')\"'+\n                        '        onmouseout=\"$(this).find(\\'span:nth-child(1)\\').css(\\'color\\', \\'transparent\\')\" '+\n                        '        onmouseover=\"$(this).find(\\'span:nth-child(1)\\').css(\\'color\\', \\'inherit\\')\">'+\n                        (nd.groupShowHide ? '<span>'+ (!nd.hidden && nd.expanded ? w2utils.lang('Hide') : w2utils.lang('Show')) +'</span>' : '<span></span>') +\n                        '    <span>'+ nd.text +'</span>'+\n                        '</div>'+\n                        '<div class=\"w2ui-node-sub\" id=\"node_'+ nd.id +'_sub\" style=\"'+ nd.style +';'+ (!nd.hidden && nd.expanded ? '' : 'display: none;') +'\"></div>';\n                    if (obj.flat) {\n                        html = '<div class=\"w2ui-node-group\" id=\"node_'+ nd.id +'\"><span>&nbsp;</span></div>'+\n                               '<div id=\"node_'+ nd.id +'_sub\" style=\"'+ nd.style +';'+ (!nd.hidden && nd.expanded ? '' : 'display: none;') +'\"></div>';\n                    }\n                } else {\n                    if (nd.selected && !nd.disabled) obj.selected = nd.id;\n                    tmp = '';\n                    if (img) tmp  = '<div class=\"w2ui-node-image w2ui-icon '+ img +    (nd.selected && !nd.disabled ? \" w2ui-icon-selected\" : \"\") +'\"></div>';\n                    if (icon) tmp = '<div class=\"w2ui-node-image\"><span class=\"'+ icon +'\"></span></div>';\n                    html =  '<div class=\"w2ui-node '+ (nd.selected ? 'w2ui-selected' : '') +' '+ (nd.disabled ? 'w2ui-disabled' : '') +'\" id=\"node_'+ nd.id +'\" style=\"'+ (nd.hidden ? 'display: none;' : '') +'\"'+\n                            '    ondblclick=\"w2ui[\\''+ obj.name +'\\'].dblClick(\\''+ nd.id +'\\', event);\"'+\n                            '    oncontextmenu=\"w2ui[\\''+ obj.name +'\\'].contextMenu(\\''+ nd.id +'\\', event); '+\n                            '        if (event.preventDefault) event.preventDefault();\"'+\n                            '    onClick=\"w2ui[\\''+ obj.name +'\\'].click(\\''+ nd.id +'\\', event); \">'+\n                            '<table cellpadding=\"0\" cellspacing=\"0\" style=\"margin-left:'+ (level*18) +'px; padding-right:'+ (level*18) +'px\"><tr>'+\n                            '<td class=\"w2ui-node-dots\" nowrap onclick=\"w2ui[\\''+ obj.name +'\\'].toggle(\\''+ nd.id +'\\'); '+\n                            '        if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\">'+\n                            '    <div class=\"w2ui-expand\">'    + (nd.nodes.length > 0 ? (nd.expanded ? '-' : '+') : (nd.plus ? '+' : '')) + '</div>' +\n                            '</td>'+\n                            '<td class=\"w2ui-node-data\" nowrap>'+\n                                    tmp +\n                                    (nd.count || nd.count === 0 ? '<div class=\"w2ui-node-count\">'+ nd.count +'</div>' : '') +\n                                    '<div class=\"w2ui-node-caption\">'+ nd.text +'</div>'+\n                            '</td>'+\n                            '</tr></table>'+\n                            '</div>'+\n                            '<div class=\"w2ui-node-sub\" id=\"node_'+ nd.id +'_sub\" style=\"'+ nd.style +';'+ (!nd.hidden && nd.expanded ? '' : 'display: none;') +'\"></div>';\n                    if (obj.flat) {\n                        html =  '<div class=\"w2ui-node '+ (nd.selected ? 'w2ui-selected' : '') +' '+ (nd.disabled ? 'w2ui-disabled' : '') +'\" id=\"node_'+ nd.id +'\" style=\"'+ (nd.hidden ? 'display: none;' : '') +'\"'+\n                                '    onmouseover=\"$(this).find(\\'.w2ui-node-data\\').w2tag(w2utils.base64decode(\\''+ \n                                                w2utils.base64encode(nd.text + (nd.count || nd.count === 0 ? ' - <span class=\"w2ui-node-count\">'+ nd.count +'</span>' : '')) + '\\'), '+\n                                '               { id: \\'' + nd.id + '\\', left: -5 })\"'+\n                                '    onmouseout=\"$(this).find(\\'.w2ui-node-data\\').w2tag(null, { id: \\'' + nd.id + '\\' })\"'+ \n                                '    ondblclick=\"w2ui[\\''+ obj.name +'\\'].dblClick(\\''+ nd.id +'\\', event);\"'+\n                                '    oncontextmenu=\"w2ui[\\''+ obj.name +'\\'].contextMenu(\\''+ nd.id +'\\', event); '+\n                                '        if (event.preventDefault) event.preventDefault();\"'+\n                                '    onClick=\"w2ui[\\''+ obj.name +'\\'].click(\\''+ nd.id +'\\', event); \">'+\n                                '<div class=\"w2ui-node-data w2ui-node-flat\">'+ tmp +'</div>'+\n                                '</div>'+\n                                '<div class=\"w2ui-node-sub\" id=\"node_'+ nd.id +'_sub\" style=\"'+ nd.style +';'+ (!nd.hidden && nd.expanded ? '' : 'display: none;') +'\"></div>';\n                    }\n                }\n                return html;\n            }\n        },\n\n        resize: function () {\n            var time = (new Date()).getTime();\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'resize', target: this.name });\n            if (eventData.isCancelled === true) return;\n            // default action\n            $(this.box).css('overflow', 'hidden');    // container should have no overflow\n            $(this.box).find('> div').css({\n                width  : $(this.box).width() + 'px',\n                height : $(this.box).height() + 'px'\n            });\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return (new Date()).getTime() - time;\n        },\n\n        destroy: function () {\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'destroy', target: this.name });\n            if (eventData.isCancelled === true) return;\n            // clean up\n            if ($(this.box).find('> div > div.w2ui-sidebar-div').length > 0) {\n                $(this.box)\n                    .removeAttr('name')\n                    .removeClass('w2ui-reset w2ui-sidebar')\n                    .html('');\n            }\n            delete w2ui[this.name];\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        lock: function (msg, showSpinner) {\n            var box = $(this.box).find('> div:first-child');\n            var args = Array.prototype.slice.call(arguments, 0);\n            args.unshift(box);\n            w2utils.lock.apply(window, args);\n        },\n\n        unlock: function (speed) {\n            w2utils.unlock(this.box, speed);\n        }\n    };\n\n    $.extend(w2sidebar.prototype, w2utils.event);\n    w2obj.sidebar = w2sidebar;\n})();\n\n/************************************************************************\n*   Library: Web 2.0 UI for jQuery (using prototypical inheritance)\n*   - Following objects defined\n*        - w2field        - various field controls\n*        - $().w2field    - jQuery wrapper\n*   - Dependencies: jQuery, w2utils\n*\n* == NICE TO HAVE ==\n*   - upload (regular files)\n*   - BUG with prefix/postfix and arrows (test in different contexts)\n*   - prefix and suffix are slow (100ms or so)\n*   - multiple date selection\n*   - month selection, year selections\n*   - arrows no longer work (for int)\n*   - form to support custom types\n*   - rewrite suffix and prefix positioning with translateY()\n*   - MultiSelect - Allow Copy/Paste for single and multi values\n*   - add routeData to list/enum\n*\n* == 1.5 changes\n*   - added support decimalSymbol (added options.decimalSymbol)\n*   - $('#id').w2field() - will return w2field object (same as $('#id').data('w2field'))\n*   - added resize() function and automatic watching for size\n*   - bug: if input is hidden and then enum is applied, then when it becomes visible, it will be 110px\n*   - deprecate placeholder, read it from input\n*   - added get(), set(), setIndex() for fields\n*   - add compare function for list, combo, enum\n*\n************************************************************************/\n\n(function ($) {\n\n    var w2field = function (options) {\n        // public properties\n        this.el          = null;\n        this.helpers     = {}; // object or helper elements\n        this.type        = options.type || 'text';\n        this.options     = $.extend(true, {}, options);\n        this.onSearch    = options.onSearch    || null;\n        this.onRequest   = options.onRequest   || null;\n        this.onLoad      = options.onLoad      || null;\n        this.onError     = options.onError     || null;\n        this.onClick     = options.onClick     || null;\n        this.onAdd       = options.onAdd       || null;\n        this.onNew       = options.onNew       || null;\n        this.onRemove    = options.onRemove    || null;\n        this.onMouseOver = options.onMouseOver || null;\n        this.onMouseOut  = options.onMouseOut  || null;\n        this.onIconClick = options.onIconClick || null;\n        this.tmp         = {}; // temp object\n        // clean up some options\n        delete this.options.type;\n        delete this.options.onSearch;\n        delete this.options.onRequest;\n        delete this.options.onLoad;\n        delete this.options.onError;\n        delete this.options.onClick;\n        delete this.options.onMouseOver;\n        delete this.options.onMouseOut;\n        delete this.options.onIconClick;\n        // extend with defaults\n        $.extend(true, this, w2obj.field);\n    };\n\n    // ====================================================\n    // -- Registers as a jQuery plugin\n\n    $.fn.w2field = function (method, options) {\n        // call direct\n        if (this.length == 0) {\n            var pr = w2field.prototype;\n            if (pr[method]) {\n                return pr[method].apply(pr, Array.prototype.slice.call(arguments, 1));\n            }\n        } else {\n            // if without arguments - return the object\n            if (arguments.length == 0) {\n                var obj = $(this).data('w2field');\n                return obj;\n            }\n            if (typeof method == 'string' && typeof options == 'object') {\n                method = $.extend(true, {}, options, { type: method });\n            }\n            if (typeof method == 'string' && typeof options == 'undefined') {\n                method = { type: method };\n            }\n            method.type = String(method.type).toLowerCase();\n            return this.each(function (index, el) {\n                var obj = $(el).data('w2field');\n                // if object is not defined, define it\n                if (typeof obj == 'undefined') {\n                    var obj = new w2field(method);\n                    $.extend(obj, { handlers: [] });\n                    if (el) obj.el = $(el)[0];\n                    obj.init();\n                    $(el).data('w2field', obj);\n                    return obj;\n                } else { // fully re-init\n                    obj.clear();\n                    if (method.type == 'clear') return;\n                    var obj = new w2field(method);\n                    $.extend(obj, { handlers: [] });\n                    if (el) obj.el = $(el)[0];\n                    obj.init();\n                    $(el).data('w2field', obj);\n                    return obj;\n                }\n                return null;\n            });\n        }\n    };\n\n    // ====================================================\n    // -- Implementation of core functionality\n\n    /*     To add custom types\n        $().w2field('addType', 'myType', function (options) {\n            $(this.el).on('keypress', function (event) {\n                if (event.metaKey || event.ctrlKey || event.altKey\n                    || (event.charCode != event.keyCode && event.keyCode > 0)) return;\n                var ch = String.fromCharCode(event.charCode);\n                if (ch != 'a' && ch != 'b' && ch != 'c') {\n                    if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\n                    return false;\n                }\n            });\n            $(this.el).on('blur', function (event)  { // keyCode & charCode differ in FireFox\n                var ch = this.value;\n                if (ch != 'a' && ch != 'b' && ch != 'c') {\n                    $(this).w2tag(w2utils.lang(\"Not a single charecter from the set of 'abc'\"));\n                }\n            });\n        });\n    */\n\n    w2field.prototype = {\n\n        custom: {},  // map of custom types\n\n        pallete: [\n            ['000000', '444444', '666666', '999999', 'CCCCCC', 'EEEEEE', 'F3F3F3', 'FFFFFF'],\n            ['FF011B', 'FF9838', 'FFFD59', '01FD55', '00FFFE', '0424F3', '9B24F4', 'FF21F5'],\n            ['F4CCCC', 'FCE5CD', 'FFF2CC', 'D9EAD3', 'D0E0E3', 'CFE2F3', 'D9D1E9', 'EAD1DC'],\n            ['EA9899', 'F9CB9C', 'FEE599', 'B6D7A8', 'A2C4C9', '9FC5E8', 'B4A7D6', 'D5A6BD'],\n            ['E06666', 'F6B26B', 'FED966', '93C47D', '76A5AF', '6FA8DC', '8E7CC3', 'C27BA0'],\n            ['CC0814', 'E69138', 'F1C232', '6AA84F', '45818E', '3D85C6', '674EA7', 'A54D79'],\n            ['99050C', 'B45F17', 'BF901F', '37761D', '124F5C', '0A5394', '351C75', '741B47'],\n            ['660205', '783F0B', '7F6011', '274E12', '0C343D', '063762', '20124D', '4C1030']\n        ],\n\n        addType: function (type, handler) {\n            type = String(type).toLowerCase();\n            this.custom[type] = handler;\n            return true;\n        },\n\n        removeType: function (type) {\n            type = String(type).toLowerCase();\n            if (!this.custom[type]) return false;\n            delete this.custom[type];\n            return true\n        },\n\n        init: function () {\n            var obj     = this;\n            var options = this.options;\n            var defaults;\n\n            // Custom Types\n            if (typeof this.custom[this.type] == 'function') {\n                this.custom[this.type].call(this, options);\n                return;\n            }\n            // only for INPUT or TEXTAREA\n            if (['INPUT', 'TEXTAREA'].indexOf(this.el.tagName) == -1) {\n                console.log('ERROR: w2field could only be applied to INPUT or TEXTAREA.', this.el);\n                return;\n            }\n\n            switch (this.type) {\n                case 'text':\n                case 'int':\n                case 'float':\n                case 'money':\n                case 'currency':\n                case 'percent':\n                case 'alphanumeric':\n                case 'hex':\n                    defaults = {\n                        min                : null,\n                        max                : null,\n                        step               : 1,\n                        autoFormat         : true,\n                        currencyPrefix     : w2utils.settings.currencyPrefix,\n                        currencySuffix     : w2utils.settings.currencySuffix,\n                        currencyPrecision  : w2utils.settings.currencyPrecision,\n                        decimalSymbol      : w2utils.settings.decimalSymbol,\n                        groupSymbol        : w2utils.settings.groupSymbol,\n                        arrows             : false,\n                        keyboard           : true,\n                        precision          : null,\n                        silent             : true,\n                        prefix             : '',\n                        suffix             : ''\n                    };\n                    this.options = $.extend(true, {}, defaults, options);\n                    options = this.options; // since object is re-created, need to re-assign\n                    options.numberRE  = new RegExp('['+ options.groupSymbol + ']', 'g');\n                    options.moneyRE   = new RegExp('['+ options.currencyPrefix + options.currencySuffix + options.groupSymbol +']', 'g');\n                    options.percentRE = new RegExp('['+ options.groupSymbol + '%]', 'g');\n                    // no keyboard support needed\n                    if (['text', 'alphanumeric', 'hex'].indexOf(this.type) != -1) {\n                        options.arrows   = false;\n                        options.keyboard = false;\n                    }\n                    this.addPrefix(); // only will add if needed\n                    this.addSuffix();\n                    break;\n\n                case 'color':\n                    defaults = {\n                        prefix      : '#',\n                        suffix      : '<div style=\"width: '+ (parseInt($(this.el).css('font-size')) || 12) +'px\">&nbsp;</div>',\n                        arrows      : false,\n                        keyboard    : false\n                    };\n                    $.extend(options, defaults);\n                    this.addPrefix();    // only will add if needed\n                    this.addSuffix();    // only will add if needed\n                    // additional checks\n                    $(this.el).attr('maxlength', 6);\n                    if ($(this.el).val() != '') setTimeout(function () { obj.change(); }, 1);\n                    break;\n\n                case 'date':\n                    defaults = {\n                        format      : w2utils.settings.date_format, // date format\n                        keyboard    : true,\n                        silent      : true,\n                        start       : '',       // string or jquery object\n                        end         : '',       // string or jquery object\n                        blocked     : {},       // { '4/11/2011': 'yes' }\n                        colored     : {}        // { '4/11/2011': 'red:white' }\n                    };\n                    this.options = $.extend(true, {}, defaults, options);\n                    options = this.options; // since object is re-created, need to re-assign\n                    if ($(this.el).attr('placeholder') == null) $(this.el).attr('placeholder', options.format);\n                    break;\n\n                case 'time':\n                    defaults = {\n                        format      : w2utils.settings.time_format,\n                        keyboard    : true,\n                        silent      : true,\n                        start       : '',\n                        end         : ''\n                    };\n                    this.options = $.extend(true, {}, defaults, options);\n                    options = this.options; // since object is re-created, need to re-assign\n                    if ($(this.el).attr('placeholder') == null) $(this.el).attr('placeholder', options.format);\n                    break;\n\n                case 'datetime':\n                    break;\n\n                case 'list':\n                case 'combo':\n                    defaults = {\n                        items           : [],\n                        selected        : {},\n                        url             : null,         // url to pull data from\n                        postData        : {},\n                        minLength       : 1,\n                        cacheMax        : 250,\n                        maxDropHeight   : 350,          // max height for drop down menu\n                        match           : 'begins',     // ['contains', 'is', 'begins', 'ends']\n                        silent          : true,\n                        icon            : null,\n                        iconStyle       : '',\n                        onSearch        : null,         // when search needs to be performed\n                        onRequest       : null,         // when request is submitted\n                        onLoad          : null,         // when data is received\n                        onError         : null,         // when data fails to load due to server error or other failure modes\n                        onIconClick     : null,\n                        renderDrop      : null,         // render function for drop down item\n                        compare         : null,         // compare function for filtering\n                        prefix          : '',\n                        suffix          : '',\n                        openOnFocus     : false,        // if to show overlay onclick or when typing\n                        markSearch      : false\n                    };\n                    options.items = this.normMenu(options.items); // need to be first\n                    if (this.type == 'list') {\n                        // defaults.search = (options.items && options.items.length >= 10 ? true : false);\n                        defaults.openOnFocus = true;\n                        defaults.suffix = '<div class=\"arrow-down\" style=\"margin-top: '+ ((parseInt($(this.el).height()) - 6) / 2) +'px;\"></div>';\n                        $(this.el).addClass('w2ui-select');\n                        // if simple value - look it up\n                        if (!$.isPlainObject(options.selected) && options.items) {\n                            for (var i = 0; i< options.items.length; i++) {\n                                var item = options.items[i];\n                                if (item && item.id == options.selected) {\n                                    options.selected = $.extend(true, {}, item);\n                                    break;\n                                }\n                            }\n                        }\n                        this.watchSize();\n                    }\n                    options = $.extend({}, defaults, options, {\n                        align   : 'both',      // same width as control\n                        altRows : true         // alternate row color\n                    });\n                    this.options = options;\n                    if (!$.isPlainObject(options.selected)) options.selected = {};\n                    $(this.el).data('selected', options.selected);\n                    if (options.url) this.request(0);\n                    if (this.type == 'list') this.addFocus();\n                    this.addPrefix();\n                    this.addSuffix();\n                    setTimeout(function () { obj.refresh(); }, 10); // need this for icon refresh\n                    $(this.el).attr('autocomplete', 'off');\n                    if (typeof options.selected.text != 'undefined') $(this.el).val(options.selected.text);\n                    break;\n\n                case 'enum':\n                    defaults = {\n                        items           : [],\n                        selected        : [],\n                        max             : 0,             // max number of selected items, 0 - unlim\n                        url             : null,          // not implemented\n                        postData        : {},\n                        minLength       : 1, \n                        cacheMax        : 250,\n                        maxWidth        : 250,           // max width for a single item\n                        maxHeight       : 350,           // max height for input control to grow\n                        maxDropHeight   : 350,           // max height for drop down menu\n                        match           : 'contains',    // ['contains', 'is', 'begins', 'ends']\n                        silent          : true,\n                        openOnFocus     : false,         // if to show overlay onclick or when typing\n                        markSearch      : true,\n                        renderDrop      : null,          // render function for drop down item\n                        renderItem      : null,          // render selected item\n                        compare         : null,          // compare function for filtering                        \n                        style           : '',            // style for container div\n                        onSearch        : null,          // when search needs to be performed\n                        onRequest       : null,          // when request is submitted\n                        onLoad          : null,          // when data is received\n                        onError         : null,          // when data fails to load due to server error or other failure modes\n                        onClick         : null,          // when an item is clicked\n                        onAdd           : null,          // when an item is added\n                        onNew           : null,          // when new item should be added\n                        onRemove        : null,          // when an item is removed\n                        onMouseOver     : null,          // when an item is mouse over\n                        onMouseOut      : null           // when an item is mouse out\n                    };\n                    options = $.extend({}, defaults, options, {\n                        align    : 'both',    // same width as control\n                        suffix   : '',\n                        altRows  : true       // alternate row color\n                    });\n                    options.items      = this.normMenu(options.items);\n                    options.selected = this.normMenu(options.selected);\n                    this.options = options;\n                    if (!$.isArray(options.selected)) options.selected = [];\n                    $(this.el).data('selected', options.selected);\n                    if (options.url) this.request(0);\n                    this.addSuffix();\n                    this.addMulti();\n                    this.watchSize();\n                    break;\n\n                case 'file':\n                    defaults = {\n                        selected      : [],\n                        max           : 0,\n                        maxSize       : 0,        // max size of all files, 0 - unlim\n                        maxFileSize   : 0,        // max size of a single file, 0 -unlim\n                        maxWidth      : 250,      // max width for a single item\n                        maxHeight     : 350,      // max height for input control to grow\n                        maxDropHeight : 350,      // max height for drop down menu\n                        silent        : true,\n                        renderItem    : null,     // render selected item\n                        style         : '',       // style for container div\n                        onClick       : null,     // when an item is clicked\n                        onAdd         : null,     // when an item is added\n                        onRemove      : null,     // when an item is removed\n                        onMouseOver   : null,     // when an item is mouse over\n                        onMouseOut    : null      // when an item is mouse out\n                    };\n                    options = $.extend({}, defaults, options, {\n                        align         : 'both',   // same width as control\n                        altRows        : true     // alternate row color\n                    });\n                    this.options = options;\n                    if (!$.isArray(options.selected)) options.selected = [];\n                    $(this.el).data('selected', options.selected);\n                    if ($(this.el).attr('placeholder') == null) {\n                        $(this.el).attr('placeholder', w2utils.lang('Attach files by dragging and dropping or Click to Select'));\n                    }\n                    this.addMulti();\n                    this.watchSize();\n                    break;\n            }\n            // attach events\n            this.tmp = {\n                onChange    : function (event) { obj.change.call(obj, event) },\n                onClick     : function (event) { obj.click.call(obj, event) },\n                onFocus     : function (event) { obj.focus.call(obj, event) },\n                onBlur      : function (event) { obj.blur.call(obj, event) },\n                onKeydown   : function (event) { obj.keyDown.call(obj, event) },\n                onKeyup     : function (event) { obj.keyUp.call(obj, event) },\n                onKeypress  : function (event) { obj.keyPress.call(obj, event) }\n            };\n            $(this.el)\n                .addClass('w2field')\n                .data('w2field', this)\n                .on('change',   this.tmp.onChange)\n                .on('click',    this.tmp.onClick)         // ignore click because it messes overlays\n                .on('focus',    this.tmp.onFocus)\n                .on('blur',     this.tmp.onBlur)\n                .on('keydown',  this.tmp.onKeydown)\n                .on('keyup',    this.tmp.onKeyup)\n                .on('keypress', this.tmp.onKeypress)\n                .css(w2utils.cssPrefix('box-sizing', 'border-box'));\n            // format initial value\n            this.change($.Event('change'));\n        },\n\n        watchSize: function () {\n            var obj = this;\n            var tmp = $(obj.el).data('tmp') || {};\n            tmp.sizeTimer = setInterval(function () {\n                if ($(obj.el).parents('body').length > 0) {\n                    obj.resize(); \n                } else {\n                    clearInterval(tmp.sizeTimer);\n                }\n            }, 200);\n            $(obj.el).data('tmp', tmp);\n        },\n\n        get: function () {\n            var ret;\n            if (['list', 'enum', 'file'].indexOf(this.type) != -1) {\n                ret = $(this.el).data('selected');\n            } else {\n                ret = $(this.el).val();\n            }\n            return ret;\n        },\n\n        set: function (val) {\n            if (['list', 'enum', 'file'].indexOf(this.type) != -1) {\n                $(this.el).data('selected', val).change();\n                this.refresh();\n            } else {\n                $(this.el).val(val);\n            }\n        },\n\n        setIndex: function (ind) {\n            var items = this.options.items;\n            if (items && items[ind]) {\n                $(this.el).data('selected', items[ind]).change();\n                this.refresh();\n                return true;\n            } \n            return false;\n        },\n\n        clear: function () {\n            var obj        = this;\n            var options    = this.options;\n            // if money then clear value\n            if (['money', 'currency'].indexOf(this.type) != -1) {\n                $(this.el).val($(this.el).val().replace(options.moneyRE, ''));\n            }\n            if (this.type == 'percent') {\n                $(this.el).val($(this.el).val().replace(/%/g, ''));\n            }\n            if (this.type == 'color') {\n                $(this.el).removeAttr('maxlength');\n            }\n            if (this.type == 'list') {\n                $(this.el).removeClass('w2ui-select');\n            }\n            this.type = 'clear';\n            var tmp = $(this.el).data('tmp');\n            if (!this.tmp) return;\n            // restore paddings\n            if (typeof tmp != 'undefined') {\n                $(this.el).height('auto');\n                if (tmp && tmp['old-padding-left'])  $(this.el).css('padding-left',  tmp['old-padding-left']);\n                if (tmp && tmp['old-padding-right']) $(this.el).css('padding-right', tmp['old-padding-right']);\n                if (tmp && tmp['old-background-color']) $(this.el).css('background-color', tmp['old-background-color']);\n                if (tmp && tmp['old-border-color']) $(this.el).css('border-color', tmp['old-border-color']);\n                // remove resize watcher\n                clearInterval(tmp.sizeTimer);\n            }\n            // remove events and (data)\n            $(this.el)\n                .val(this.clean($(this.el).val()))\n                .removeClass('w2field')\n                .removeData() // removes all attached data\n                .off('change',   this.tmp.onChange)\n                .off('click',    this.tmp.onClick)\n                .off('focus',    this.tmp.onFocus)\n                .off('blur',     this.tmp.onBlur)\n                .off('keydown',  this.tmp.onKeydown)\n                .off('keyup',    this.tmp.onKeyup)\n                .off('keypress', this.tmp.onKeypress);\n            // remove helpers\n            for (var h in this.helpers) $(this.helpers[h]).remove();\n            this.helpers = {};\n        },\n\n        refresh: function () {\n            var obj       = this;\n            var options   = this.options;\n            var selected  = $(this.el).data('selected');\n            var time      = (new Date()).getTime();\n            // enum\n            if (['list'].indexOf(this.type) != -1) {\n                $(obj.el).parent().css('white-space', 'nowrap'); // needs this for arrow alway to appear on the right side\n                // hide focus and show text\n                if (obj.helpers.prefix) obj.helpers.prefix.hide();\n                setTimeout(function () {\n                    if (!obj.helpers.focus) return;\n                    // if empty show no icon\n                    if (!$.isEmptyObject(selected) && options.icon) {\n                        options.prefix = '<span class=\"w2ui-icon '+ options.icon +'\"style=\"cursor: pointer; font-size: 14px;' + \n                                         ' display: inline-block; margin-top: -1px; color: #7F98AD;'+ options.iconStyle +'\">'+\n                            '</span>';\n                        obj.addPrefix();                        \n                    } else {\n                        options.prefix = '';\n                        obj.addPrefix();\n                    }\n                    // focus helpder\n                    var focus = obj.helpers.focus.find('input');\n                    if ($(focus).val() == '') {\n                        $(focus).css('opacity', 0).prev().css('opacity', 0);\n                        $(obj.el).val(selected && selected.text != null ? selected.text : '');\n                    } else {\n                        $(focus).css('opacity', 1).prev().css('opacity', 1);\n                        $(obj.el).val('');\n                        setTimeout(function () {\n                            if (obj.helpers.prefix) obj.helpers.prefix.hide(); \n                            var tmp = 'position: absolute; opacity: 0; margin: 4px 0px 0px 2px; background-position: left !important;';\n                            if (options.icon) {\n                                $(focus).css('margin-left', '17px');\n                                $(obj.helpers.focus).find('.icon-search').attr('style', tmp + 'width: 11px !important; opacity: 1');\n                            } else {\n                                $(focus).css('margin-left', '0px');\n                                $(obj.helpers.focus).find('.icon-search').attr('style', tmp + 'width: 0px !important; opacity: 0');\n                            }\n                        }, 1);\n                    }\n                    // if readonly or disabled\n                    if ($(obj.el).prop('readonly') || $(obj.el).prop('disabled')) {\n                        setTimeout(function () { \n                            $(obj.helpers.prefix).css('opacity', '0.6'); \n                            $(obj.helpers.suffix).css('opacity', '0.6');\n                        }, 1);\n                    } else {\n                        setTimeout(function () { \n                            $(obj.helpers.prefix).css('opacity', '1'); \n                            $(obj.helpers.suffix).css('opacity', '1');\n                        }, 1);\n                    }\n                }, 1);\n            }\n            if (['enum', 'file'].indexOf(this.type) != -1) {\n                var html = '';\n                for (var s in selected) {\n                    var it  = selected[s];\n                    var ren = '';\n                    if (typeof options.renderItem == 'function') {\n                        ren = options.renderItem(it, s, '<div class=\"w2ui-list-remove\" title=\"'+ w2utils.lang('Remove') +'\" index=\"'+ s +'\">&nbsp;&nbsp;</div>');\n                    } else {\n                        ren = '<div class=\"w2ui-list-remove\" title=\"'+ w2utils.lang('Remove') +'\" index=\"'+ s +'\">&nbsp;&nbsp;</div>'+\n                              (obj.type == 'enum' ? it.text : it.name + '<span class=\"file-size\"> - '+ w2utils.formatSize(it.size) +'</span>');\n                    }\n                    html += '<li index=\"'+ s +'\" style=\"max-width: '+ parseInt(options.maxWidth) + 'px; '+ (it.style ? it.style : '') +'\">'+\n                            ren +'</li>';\n                }\n                var div = obj.helpers.multi;\n                var ul  = div.find('ul');\n                div.attr('style', div.attr('style') + ';' + options.style);\n                if ($(obj.el).prop('readonly') || $(obj.el).prop('disabled')) {\n                    div.addClass('w2ui-readonly'); \n                    div.css('pointer-events', 'none').find('li').css('opacity', '0.6');\n                    $(obj.helpers.multi).find('input').prop('readonly', true);                    \n                } else {\n                    div.removeClass('w2ui-readonly');\n                    div.css('pointer-events', 'auto').find('li').css('opacity', '1');\n                    $(obj.helpers.multi).find('input').prop('readonly', false);\n                }\n                // celan\n                div.find('.w2ui-enum-placeholder').remove();\n                ul.find('li').not('li.nomouse').remove();\n                // add new list\n                if (html != '') {\n                    ul.prepend(html);\n                } else if ($(obj.el).attr('placeholder') != null) {\n                    var style =\n                        'padding-top: ' + $(this.el).css('padding-top') + ';'+\n                        'padding-left: ' + $(this.el).css('padding-left') + '; ' +\n                        'box-sizing: ' + $(this.el).css('box-sizing') + '; ' +\n                        'line-height: ' + $(this.el).css('line-height') + '; ' +\n                        'font-size: ' + $(this.el).css('font-size') + '; ' +\n                        'font-family: ' + $(this.el).css('font-family') + '; ';\n                    div.prepend('<div class=\"w2ui-enum-placeholder\" style=\"'+ style +'\">'+ $(obj.el).attr('placeholder') +'</div>');\n                }\n                // ITEMS events\n                div.find('li')\n                    .data('mouse', 'out')\n                    .on('click', function (event) {\n                        var item = selected[$(event.target).attr('index')];\n                        if ($(event.target).hasClass('nomouse')) return;\n                        event.stopPropagation();\n                        // trigger event\n                        var eventData = obj.trigger({ phase: 'before', type: 'click', target: obj.el, originalEvent: event.originalEvent, item: item });\n                        if (eventData.isCancelled === true) return;\n                        // default behavior\n                        if ($(event.target).hasClass('w2ui-list-remove')) {\n                            if ($(obj.el).attr('readonly') || $(obj.el).attr('disabled')) return;\n                            // trigger event\n                            var eventData = obj.trigger({ phase: 'before', type: 'remove', target: obj.el, originalEvent: event.originalEvent, item: item });\n                            if (eventData.isCancelled === true) return;\n                            // default behavior\n                            $().w2overlay();\n                            selected.splice($(event.target).attr('index'), 1);\n                            $(obj.el).trigger('change');\n                            $(event.target).parent().fadeOut('fast');\n                            setTimeout(function () {\n                                obj.refresh();\n                                // event after\n                                obj.trigger($.extend(eventData, { phase: 'after' }));\n                            }, 300);\n                        }\n                        if (obj.type == 'file' && !$(event.target).hasClass('w2ui-list-remove')) {\n                            var preview = '';\n                            if ((/image/i).test(item.type)) { // image\n                                preview = '<div style=\"padding: 3px;\">'+\n                                    '    <img src=\"'+ (item.content ? 'data:'+ item.type +';base64,'+ item.content : '') +'\" style=\"max-width: 300px;\" '+\n                                    '        onload=\"var w = $(this).width(); var h = $(this).height(); '+\n                                    '            if (w < 300 & h < 300) return; '+\n                                    '            if (w >= h && w > 300) $(this).width(300);'+\n                                    '            if (w < h && h > 300) $(this).height(300);\"'+\n                                    '        onerror=\"this.style.display = \\'none\\'\"'+\n                                    '    >'+\n                                    '</div>';\n                            }\n                            var td1 = 'style=\"padding: 3px; text-align: right; color: #777;\"';\n                            var td2 = 'style=\"padding: 3px\"';\n                            preview += '<div style=\"padding: 8px;\">'+\n                                '    <table cellpadding=\"2\">'+\n                                '    <tr><td '+ td1 +'>'+ w2utils.lang('Name') +':</td><td '+ td2 +'>'+ item.name +'</td></tr>'+\n                                '    <tr><td '+ td1 +'>'+ w2utils.lang('Size') +':</td><td '+ td2 +'>'+ w2utils.formatSize(item.size) +'</td></tr>'+\n                                '    <tr><td '+ td1 +'>'+ w2utils.lang('Type') +':</td><td '+ td2 +'>' +\n                                '        <span style=\"width: 200px; display: block-inline; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;\">'+ item.type +'</span>'+\n                                '    </td></tr>'+\n                                '    <tr><td '+ td1 +'>'+ w2utils.lang('Modified') +':</td><td '+ td2 +'>'+ w2utils.date(item.modified) +'</td></tr>'+\n                                '    </table>'+\n                                '</div>';\n                            $('#w2ui-overlay').remove();\n                            $(event.target).w2overlay(preview);\n                        }\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                    })\n                    .on('mouseover', function (event) {\n                        var tmp = event.target;\n                        if (tmp.tagName != 'LI') tmp = tmp.parentNode;\n                        if ($(tmp).hasClass('nomouse')) return;\n                        if ($(tmp).data('mouse') == 'out') {\n                            var item = selected[$(tmp).attr('index')];\n                            // trigger event\n                            var eventData = obj.trigger({ phase: 'before', type: 'mouseOver', target: obj.el, originalEvent: event.originalEvent, item: item });\n                            if (eventData.isCancelled === true) return;\n                            // event after\n                            obj.trigger($.extend(eventData, { phase: 'after' }));\n                        }\n                        $(tmp).data('mouse', 'over');\n                    })\n                    .on('mouseout', function (event) {\n                        var tmp = event.target;\n                        if (tmp.tagName != 'LI') tmp = tmp.parentNode;\n                        if ($(tmp).hasClass('nomouse')) return;\n                        $(tmp).data('mouse', 'leaving');\n                        setTimeout(function () {\n                            if ($(tmp).data('mouse') == 'leaving') {\n                                $(tmp).data('mouse', 'out');\n                                var item = selected[$(tmp).attr('index')];\n                                // trigger event\n                                var eventData = obj.trigger({ phase: 'before', type: 'f', target: obj.el, originalEvent: event.originalEvent, item: item });\n                                if (eventData.isCancelled === true) return;\n                                // event after\n                                obj.trigger($.extend(eventData, { phase: 'after' }));\n                            }\n                        }, 0);\n                    });\n                // adjust height\n                $(this.el).height('auto');\n                var cntHeight = $(div).find('> div.w2ui-multi-items').height() + w2utils.getSize(div, '+height') * 2;\n                if (cntHeight < 26) cntHeight = 26;\n                if (cntHeight > options.maxHeight) cntHeight = options.maxHeight;\n                if (div.length > 0) div[0].scrollTop = 1000;\n                var inpHeight = w2utils.getSize($(this.el), 'height') - 2;\n                if (inpHeight > cntHeight) cntHeight = inpHeight\n                $(div).css({ 'height': cntHeight + 'px', overflow: (cntHeight == options.maxHeight ? 'auto' : 'hidden') });\n                if (cntHeight < options.maxHeight) $(div).prop('scrollTop', 0);\n                $(this.el).css({ 'height' : (cntHeight + 2) + 'px' });\n            }\n            return (new Date()).getTime() - time;\n        },\n\n        reset: function () {\n            var obj  = this;\n            var type = this.type;\n            this.clear();\n            this.type = type;\n            this.init();\n        },\n\n        // resizing width of list, enum, file controls\n        resize: function () {\n            var obj = this;\n            var new_width  = $(obj.el).width();\n            var new_height = $(obj.el).height();\n            if (obj.tmp.current_width == new_width && new_height > 0) return;\n\n            var focus  = this.helpers.focus;\n            var multi  = this.helpers.multi;\n            var suffix = this.helpers.suffix;\n            var prefix = this.helpers.prefix;\n\n            // resize helpers\n            if (focus) {\n                focus.width($(obj.el).width());\n            }\n            if (multi) {\n                var width = (w2utils.getSize(obj.el, 'width')\n                    - parseInt($(obj.el).css('margin-left'), 10)\n                    - parseInt($(obj.el).css('margin-right'), 10));\n                $(multi).width(width);\n            }\n            if (suffix) {\n                obj.options.suffix = '<div class=\"arrow-down\" style=\"margin-top: '+ ((parseInt($(obj.el).height()) - 6) / 2) +'px;\"></div>';\n                obj.addSuffix();\n            }\n            if (prefix) {\n                obj.addPrefix();\n            }\n            // remember width\n            obj.tmp.current_width = new_width;\n        },\n\n        clean: function (val) {\n            //issue #499\n            if(typeof val == 'number'){\n                 return val;\n            }\n            var options = this.options;\n            val = String(val).trim();\n            // clean\n            if (['int', 'float', 'money', 'currency', 'percent'].indexOf(this.type) != -1) {\n                if (typeof val == 'string') {\n                    if (options.autoFormat && ['money', 'currency'].indexOf(this.type) != -1) val = String(val).replace(options.moneyRE, '');\n                    if (options.autoFormat && this.type == 'percent') val = String(val).replace(options.percentRE, '');\n                    if (options.autoFormat && ['int', 'float'].indexOf(this.type) != -1) val = String(val).replace(options.numberRE, '');\n                    val = val.replace(options.decimalSymbol, '.');\n                }\n                if (parseFloat(val) == val) {\n                    if (options.min !== null && val < options.min) { val = options.min; $(this.el).val(options.min); }\n                    if (options.max !== null && val > options.max) { val = options.max; $(this.el).val(options.max); }\n                }\n                if (val !== '' && w2utils.isFloat(val)) val = Number(val); else val = '';\n            }\n            return val;\n        },\n\n        format: function (val) {\n            var options = this.options;\n            // autoformat numbers or money\n            if (options.autoFormat && val != '') {\n                switch (this.type) {\n                    case 'money':\n                    case 'currency':\n                        val = w2utils.formatNumber(Number(val).toFixed(options.currencyPrecision), options.groupSymbol);\n                        if (val != '') val = options.currencyPrefix + val + options.currencySuffix;\n                        break;\n                    case 'percent':\n                        val = w2utils.formatNumber(options.precision ? Number(val).toFixed(options.precision) : val, options.groupSymbol);\n                        if (val != '') val += '%';\n                        break;\n                    case 'float':\n                        val = w2utils.formatNumber(options.precision ? Number(val).toFixed(options.precision) : val, options.groupSymbol);\n                        break;\n                    case 'int':\n                        val = w2utils.formatNumber(val, options.groupSymbol);\n                        break;\n                }\n            }\n            return val;\n        },\n\n        change: function (event) {\n            var obj     = this;\n            var options = obj.options;\n            // numeric\n            if (['int', 'float', 'money', 'currency', 'percent'].indexOf(this.type) != -1) {\n                // check max/min\n                var val     =  $(this.el).val();\n                var new_val = this.format(this.clean($(this.el).val()));\n                // if was modified\n                if (val != '' && val != new_val) {\n                    $(this.el).val(new_val).change();\n                    // cancel event\n                    event.stopPropagation();\n                    event.preventDefault();\n                    return false;\n                }\n            }\n            // color\n            if (this.type == 'color') {\n                var color = '#' + $(this.el).val();\n                if ($(this.el).val().length != 6 && $(this.el).val().length != 3) color = '';\n                $(this.el).next().find('div').css('background-color', color);\n                if ($(obj.el).is(':focus')) this.updateOverlay();\n            }\n            // list, enum\n            if (['list', 'enum', 'file'].indexOf(this.type) != -1) {\n                obj.refresh();\n                // need time out to show icon indent properly\n                setTimeout(function () { obj.refresh(); }, 5); \n            }\n            // date, time\n            if (['date', 'time'].indexOf(this.type) != -1) {\n                // convert linux timestamps\n                var tmp = parseInt(obj.el.value);\n                if (w2utils.isInt(obj.el.value) && tmp > 3000) {\n                    if (this.type == 'time') $(obj.el).val(w2utils.formatTime(new Date(tmp), options.format)).change();\n                    if (this.type == 'date') $(obj.el).val(w2utils.formatDate(new Date(tmp), options.format)).change();\n                }\n            }\n        },\n\n        click: function (event) {\n            event.stopPropagation();\n            // lists\n            if (['list', 'combo', 'enum'].indexOf(this.type) != -1) {\n                if (!$(this.el).is(':focus')) this.focus(event);\n            }\n            // other fields with drops\n            if (['date', 'time', 'color'].indexOf(this.type) != -1) {\n                this.updateOverlay();\n            }\n        },\n\n        focus: function (event) {\n            var obj     = this;\n            var options = this.options;\n            // color, date, time\n            if (['color', 'date', 'time'].indexOf(obj.type) !== -1) {\n                if ($(obj.el).attr('readonly') || $(obj.el).attr('disabled')) return;\n                if ($(\"#w2ui-overlay\").length > 0) $('#w2ui-overlay')[0].hide();\n                setTimeout(function () { obj.updateOverlay(); }, 150);\n            }\n            // menu\n            if (['list', 'combo', 'enum'].indexOf(obj.type) != -1) {\n                if ($(obj.el).attr('readonly') || $(obj.el).attr('disabled')) return;\n                if ($(\"#w2ui-overlay\").length > 0) $('#w2ui-overlay')[0].hide();\n                obj.resize();\n                setTimeout(function () {\n                    if (obj.type == 'list' && $(obj.el).is(':focus')) {\n                        $(obj.helpers.focus).find('input').focus();\n                        return;\n                    }\n                    obj.search();\n                    setTimeout(function () { obj.updateOverlay(); }, 1);\n                }, 1);\n            }\n            // file\n            if (obj.type == 'file') {\n                $(obj.helpers.multi).css({ 'outline': 'auto 5px #7DB4F3', 'outline-offset': '-2px' });\n            }\n        },\n\n        blur: function (event) {\n            var obj     = this;\n            var options = obj.options;\n            var val     = $(obj.el).val().trim();\n            // hide overlay\n            if (['color', 'date', 'time', 'list', 'combo', 'enum'].indexOf(obj.type) != -1) {\n                if ($(\"#w2ui-overlay\").length > 0) $('#w2ui-overlay')[0].hide();\n            }\n            if (['int', 'float', 'money', 'currency', 'percent'].indexOf(obj.type) != -1) {\n                if (val !== '' && !obj.checkType(val)) {\n                    $(obj.el).val('').change();\n                    if (options.silent === false) {\n                        $(obj.el).w2tag('Not a valid number');\n                        setTimeout(function () { $(obj.el).w2tag(''); }, 3000);\n                    }\n                }\n            }\n            // date or time\n            if (['date', 'time'].indexOf(obj.type) != -1) {\n                // check if in range\n                if (val !== '' && !obj.inRange(obj.el.value)) {\n                    $(obj.el).val('').removeData('selected').change();\n                    if (options.silent === false) {\n                        $(obj.el).w2tag('Not in range');\n                        setTimeout(function () { $(obj.el).w2tag(''); }, 3000);\n                    }\n                } else {\n                    if (obj.type == 'date' && val !== '' && !w2utils.isDate(obj.el.value, options.format)) {\n                        $(obj.el).val('').removeData('selected').change();\n                        if (options.silent === false) {\n                            $(obj.el).w2tag('Not a valid date');\n                            setTimeout(function () { $(obj.el).w2tag(''); }, 3000);\n                        }\n                    }\n                    if (obj.type == 'time' && val !== '' && !w2utils.isTime(obj.el.value)) {\n                        $(obj.el).val('').removeData('selected').change();\n                        if (options.silent === false) {\n                            $(obj.el).w2tag('Not a valid time');\n                            setTimeout(function () { $(obj.el).w2tag(''); }, 3000);\n                        }\n                    }\n                }\n            }\n            // clear search input\n            if (obj.type == 'enum') {\n                $(obj.helpers.multi).find('input').val('').width(20);\n            }\n            // file\n            if (obj.type == 'file') {\n                $(obj.helpers.multi).css({ 'outline': 'none' });\n            }\n        },\n\n        keyPress: function (event) {\n            var obj     = this;\n            var options = obj.options;\n            // ignore wrong pressed key\n            if (['int', 'float', 'money', 'currency', 'percent', 'hex', 'color', 'alphanumeric'].indexOf(obj.type) != -1) {\n                // keyCode & charCode differ in FireFox\n                if (event.metaKey || event.ctrlKey || event.altKey || (event.charCode != event.keyCode && event.keyCode > 0)) return;\n                var ch = String.fromCharCode(event.charCode);\n                if (!obj.checkType(ch, true) && event.keyCode != 13) {\n                    event.preventDefault();\n                    if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\n                    return false;\n                }\n            }\n            // update date popup\n            if (['date', 'time'].indexOf(obj.type) != -1) {\n                setTimeout(function () { obj.updateOverlay(); }, 1);\n            }\n        },\n\n        keyDown: function (event, extra) {\n            var obj     = this;\n            var options = obj.options;\n            var key     = event.keyCode || (extra && extra.keyCode);\n            // numeric\n            if (['int', 'float', 'money', 'currency', 'percent'].indexOf(obj.type) != -1) {\n                if (!options.keyboard || $(obj.el).attr('readonly')) return;\n                var cancel = false;\n                var val = parseFloat($(obj.el).val().replace(options.moneyRE, '')) || 0;\n                var inc = options.step;\n                if (event.ctrlKey || event.metaKey) inc = 10;\n                switch (key) {\n                    case 38: // up\n                        if (event.shiftKey) break; // no action if shift key is pressed\n                        $(obj.el).val((val + inc <= options.max || options.max === null ? Number((val + inc).toFixed(12)) : options.max)).change();\n                        cancel = true;\n                        break;\n                    case 40: // down\n                        if (event.shiftKey) break; // no action if shift key is pressed\n                        $(obj.el).val((val - inc >= options.min || options.min === null ? Number((val - inc).toFixed(12)) : options.min)).change();\n                        cancel = true;\n                        break;\n                }\n                if (cancel) {\n                    event.preventDefault();\n                    setTimeout(function () {\n                        // set cursor to the end\n                        obj.el.setSelectionRange(obj.el.value.length, obj.el.value.length);\n                    }, 0);\n                }\n            }\n            // date\n            if (obj.type == 'date') {\n                if (!options.keyboard || $(obj.el).attr('readonly')) return;\n                var cancel  = false;\n                var daymil  = 24*60*60*1000;\n                var inc        = 1;\n                if (event.ctrlKey || event.metaKey) inc = 10;\n                var dt = w2utils.isDate($(obj.el).val(), options.format, true);\n                if (!dt) { dt = new Date(); daymil = 0; }\n                switch (key) {\n                    case 38: // up\n                        if (event.shiftKey) break; // no action if shift key is pressed\n                        var newDT = w2utils.formatDate(dt.getTime() + daymil, options.format);\n                        if (inc == 10) newDT = w2utils.formatDate(new Date(dt.getFullYear(), dt.getMonth()+1, dt.getDate()), options.format);\n                        $(obj.el).val(newDT).change();\n                        cancel = true;\n                        break;\n                    case 40: // down\n                        if (event.shiftKey) break; // no action if shift key is pressed\n                        var newDT = w2utils.formatDate(dt.getTime() - daymil, options.format);\n                        if (inc == 10) newDT = w2utils.formatDate(new Date(dt.getFullYear(), dt.getMonth()-1, dt.getDate()), options.format);\n                        $(obj.el).val(newDT).change();\n                        cancel = true;\n                        break;\n                }\n                if (cancel) {\n                    event.preventDefault();\n                    setTimeout(function () {\n                        // set cursor to the end\n                        obj.el.setSelectionRange(obj.el.value.length, obj.el.value.length);\n                        obj.updateOverlay();\n                    }, 0);\n                }\n            }\n            // time\n            if (obj.type == 'time') {\n                if (!options.keyboard || $(obj.el).attr('readonly')) return;\n                var cancel  = false;\n                var inc     = (event.ctrlKey || event.metaKey ? 60 : 1);\n                var val     = $(obj.el).val();\n                var time    = obj.toMin(val) || obj.toMin((new Date()).getHours() + ':' + ((new Date()).getMinutes() - 1));\n                switch (key) {\n                    case 38: // up\n                        if (event.shiftKey) break; // no action if shift key is pressed\n                        time += inc;\n                        cancel = true;\n                        break;\n                    case 40: // down\n                        if (event.shiftKey) break; // no action if shift key is pressed\n                        time -= inc;\n                        cancel = true;\n                        break;\n                }\n                if (cancel) {\n                    $(obj.el).val(obj.fromMin(time)).change();\n                    event.preventDefault();\n                    setTimeout(function () {\n                        // set cursor to the end\n                        obj.el.setSelectionRange(obj.el.value.length, obj.el.value.length);\n                    }, 0);\n                }\n            }\n            // color\n            if (obj.type == 'color') {\n                if ($(obj.el).attr('readonly')) return;\n                // paste\n                if (event.keyCode == 86 && (event.ctrlKey || event.metaKey)) {\n                    $(obj.el).prop('maxlength', 7);\n                    setTimeout(function () {\n                        var val = $(obj).val();\n                        if (val.substr(0, 1) == '#') val = val.substr(1);\n                        if (!w2utils.isHex(val)) val = '';\n                        $(obj).val(val).prop('maxlength', 6).change();\n                    }, 20);\n                }\n                if ((event.ctrlKey || event.metaKey) && !event.shiftKey) {\n                    if (typeof obj.tmp.cind1 == 'undefined') {\n                        obj.tmp.cind1 = -1;\n                        obj.tmp.cind2 = -1;\n                    } else {\n                        switch (key) {\n                            case 38: // up\n                                obj.tmp.cind1--;\n                                break;\n                            case 40: // down\n                                obj.tmp.cind1++;\n                                break;\n                            case 39: // right\n                                obj.tmp.cind2++;\n                                break;\n                            case 37: // left\n                                obj.tmp.cind2--;\n                                break;\n                        }\n                        if (obj.tmp.cind1 < 0) obj.tmp.cind1 = 0;\n                        if (obj.tmp.cind1 > this.pallete.length - 1) obj.tmp.cind1 = this.pallete.length - 1;\n                        if (obj.tmp.cind2 < 0) obj.tmp.cind2 = 0;\n                        if (obj.tmp.cind2 > this.pallete[0].length - 1) obj.tmp.cind2 = this.pallete[0].length - 1;\n                    }\n                    if ([37, 38, 39, 40].indexOf(key) != -1) {\n                        $(obj.el).val(this.pallete[obj.tmp.cind1][obj.tmp.cind2]).change();\n                        event.preventDefault();\n                    }\n                }\n            }\n            // list/select/combo\n            if (['list', 'combo', 'enum'].indexOf(obj.type) != -1) {\n                if ($(obj.el).attr('readonly')) return;\n                var selected  = $(obj.el).data('selected');\n                var focus     = $(obj.helpers.focus).find('input');\n                var indexOnly = false;\n                if (obj.type == 'list') {\n                    if ([37, 38, 39, 40].indexOf(key) == -1) obj.refresh(); // arrows\n                }\n                // apply arrows\n                switch (key) {\n                    case 27: // escape\n                        if (obj.type == 'list') {\n                            if ($(focus).val() != '') $(focus).val('');\n                            event.stopPropagation(); // escape in field should not close popup\n                        }\n                        break;\n                    case 37: // left\n                    case 39: // right\n                        // indexOnly = true;\n                        break;\n                    case 13: // enter\n                        if ($('#w2ui-overlay').length == 0) break; // no action if overlay not open\n                        var item  = options.items[options.index];\n                        var multi = $(obj.helpers.multi).find('input');\n                        if (obj.type == 'enum') {\n                            if (item != null) {\n                                // trigger event\n                                var eventData = obj.trigger({ phase: 'before', type: 'add', target: obj.el, originalEvent: event.originalEvent, item: item });\n                                if (eventData.isCancelled === true) return;\n                                item = eventData.item; // need to reassign because it could be recreated by user\n                                // default behavior\n                                if (selected.length >= options.max && options.max > 0) selected.pop();\n                                delete item.hidden;\n                                delete obj.tmp.force_open;\n                                selected.push(item);\n                                $(obj.el).change();\n                                multi.val('').width(20);\n                                obj.refresh();\n                                // event after\n                                obj.trigger($.extend(eventData, { phase: 'after' }));\n                            } else {\n                                // trigger event\n                                item = { id: multi.val(), text: multi.val() }\n                                var eventData = obj.trigger({ phase: 'before', type: 'new', target: obj.el, originalEvent: event.originalEvent, item: item });\n                                if (eventData.isCancelled === true) return;\n                                item = eventData.item; // need to reassign because it could be recreated by user\n                                // default behavior\n                                if (typeof obj.onNew == 'function') {\n                                    if (selected.length >= options.max && options.max > 0) selected.pop();\n                                    delete obj.tmp.force_open;\n                                    selected.push(item);\n                                    $(obj.el).change();\n                                    multi.val('').width(20);\n                                    obj.refresh();\n                                }\n                                // event after\n                                obj.trigger($.extend(eventData, { phase: 'after' }));\n                            }\n                        } else {\n                            if (item) $(obj.el).data('selected', item).val(item.text).change();\n                            if ($(obj.el).val() == '' && $(obj.el).data('selected')) $(obj.el).removeData('selected').val('').change();\n                            if (obj.type == 'list') {\n                                focus.val('');\n                                obj.refresh();\n                            }\n                            // hide overlay\n                            obj.tmp.force_hide = true;\n                        }\n                        break;\n                    case 8:  // backspace\n                    case 46: // delete\n                        if (obj.type == 'enum' && key == 8) {\n                            if ($(obj.helpers.multi).find('input').val() == '' && selected.length > 0) {\n                                var item = selected[selected.length - 1];\n                                // trigger event\n                                var eventData = obj.trigger({ phase: 'before', type: 'remove', target: obj.el, originalEvent: event.originalEvent, item: item });\n                                if (eventData.isCancelled === true) return;\n                                // default behavior\n                                selected.pop();\n                                $(obj.el).trigger('change');\n                                obj.refresh();\n                                // event after\n                                obj.trigger($.extend(eventData, { phase: 'after' }));\n                            }\n                        }\n                        if (obj.type == 'list' && $(focus).val() == '') {\n                            $(obj.el).data('selected', {}).change();\n                            obj.refresh();\n                        }\n                        break;\n                    case 38: // up\n                        options.index = w2utils.isInt(options.index) ? parseInt(options.index) : 0;\n                        options.index--;\n                        while (options.index > 0 && options.items[options.index].hidden) options.index--;\n                        if (options.index == 0 && options.items[options.index].hidden) {\n                            while (options.items[options.index] && options.items[options.index].hidden) options.index++;\n                        }\n                        indexOnly = true;\n                        break;\n                    case 40: // down\n                        options.index = w2utils.isInt(options.index) ? parseInt(options.index) : -1;\n                        options.index++;\n                        while (options.index < options.items.length-1 && options.items[options.index].hidden) options.index++;\n                        if (options.index == options.items.length-1 && options.items[options.index].hidden) {\n                            while (options.items[options.index] && options.items[options.index].hidden) options.index--;\n                        }\n                        // show overlay if not shown\n                        var input = obj.el;\n                        if (['enum'].indexOf(obj.type) != -1) input = obj.helpers.multi.find('input');\n                        if ($(input).val() == '' && $('#w2ui-overlay').length == 0) {\n                            obj.tmp.force_open = true;\n                        } else {\n                            indexOnly = true;\n                        }\n                        break;\n                }\n                if (indexOnly) {\n                    if (options.index < 0) options.index = 0;\n                    if (options.index >= options.items.length) options.index = options.items.length -1;\n                    obj.updateOverlay(indexOnly);\n                    // cancel event\n                    event.preventDefault();\n                    setTimeout(function () {\n                        // set cursor to the end\n                        if (obj.type == 'enum') {\n                            var tmp = obj.helpers.multi.find('input').get(0);\n                            tmp.setSelectionRange(tmp.value.length, tmp.value.length);\n                        } else if (obj.type == 'list') {\n                            var tmp = obj.helpers.focus.find('input').get(0);\n                            tmp.setSelectionRange(tmp.value.length, tmp.value.length);\n                        } else {\n                            obj.el.setSelectionRange(obj.el.value.length, obj.el.value.length);\n                        }\n                    }, 0);\n                    return;\n                }\n                // expand input\n                if (obj.type == 'enum') {\n                    var input  = obj.helpers.multi.find('input');\n                    var search = input.val();\n                    input.width(((search.length + 2) * 8) + 'px');\n                }\n                // run search\n                if ([16, 17, 18, 20, 37, 39, 91].indexOf(key) == -1) { // no refreah on crtl, shift, left/right arrows, etc\n                    setTimeout(function () {\n                        if (!obj.tmp.force_hide) obj.request();\n                        obj.search();\n                    }, 1);\n                }\n            }\n        },\n\n        keyUp: function (event) {\n            if (this.type == 'color') {\n                if (event.keyCode == 86 && (event.ctrlKey || event.metaKey)) $(this).prop('maxlength', 6);\n            }\n        },\n\n        clearCache: function () {\n            var options          = this.options;\n            options.items        = [];\n            this.tmp.xhr_loading = false;\n            this.tmp.xhr_search  = '';\n            this.tmp.xhr_total   = -1;\n            this.search();\n        },\n\n        request: function (interval) {\n            var obj      = this;\n            var options  = this.options;\n            var search   = $(obj.el).val() || '';\n            // if no url - do nothing\n            if (!options.url) return;\n            // --\n            if (obj.type == 'enum') {\n                var tmp = $(obj.helpers.multi).find('input');\n                if (tmp.length == 0) search = ''; else search = tmp.val();\n            }\n            if (obj.type == 'list') {\n                var tmp = $(obj.helpers.focus).find('input');\n                if (tmp.length == 0) search = ''; else search = tmp.val();\n            }\n            if (options.minLength != 0 && search.length < options.minLength) {\n                options.items = []; // need to empty the list\n                this.updateOverlay();\n                return;\n            }\n            if (typeof interval == 'undefined') interval = 350;\n            if (typeof obj.tmp.xhr_search == 'undefined') obj.tmp.xhr_search = '';\n            if (typeof obj.tmp.xhr_total == 'undefined') obj.tmp.xhr_total = -1;\n            // check if need to search\n            if (options.url && $(obj.el).prop('readonly') != true && (\n                    (options.items.length === 0 && obj.tmp.xhr_total !== 0) ||\n                    (obj.tmp.xhr_total == options.cacheMax && search.length > obj.tmp.xhr_search.length) ||\n                    (search.length >= obj.tmp.xhr_search.length && search.substr(0, obj.tmp.xhr_search.length) != obj.tmp.xhr_search) ||\n                    (search.length < obj.tmp.xhr_search.length)\n                )) {\n                // empty list\n                if (obj.tmp.xhr) obj.tmp.xhr.abort();\n                obj.tmp.xhr_loading = true;\n                obj.search();\n                // timeout\n                clearTimeout(obj.tmp.timeout);\n                obj.tmp.timeout = setTimeout(function () {\n                    // trigger event\n                    var url      = options.url;\n                    var postData = {\n                        search : search,\n                        max    : options.cacheMax\n                    };\n                    $.extend(postData, options.postData);\n                    var eventData = obj.trigger({ phase: 'before', type: 'request', target: obj.el, url: url, postData: postData });\n                    if (eventData.isCancelled === true) return;\n                    url      = eventData.url;\n                    postData = eventData.postData;\n                    // console.log('REMOTE SEARCH:', search);\n                    var ajaxOptions = {\n                        type     : 'GET',\n                        url      : url,\n                        data     : postData,\n                        dataType : 'JSON' // expected from server\n                    };\n                    if (w2utils.settings.dataType == 'JSON') {\n                        ajaxOptions.type        = 'POST';\n                        ajaxOptions.data        = JSON.stringify(ajaxOptions.data);\n                        ajaxOptions.contentType = 'application/json';\n                    }\n                    obj.tmp.xhr = $.ajax(ajaxOptions)\n                        .done(function (data, status, xhr) {\n                            // trigger event\n                            var eventData2 = obj.trigger({ phase: 'before', type: 'load', target: obj.el, search: postData.search, data: data, xhr: xhr });\n                            if (eventData2.isCancelled === true) return;\n                            // default behavior\n                            data = eventData2.data;\n                            if (typeof data == 'string') data = JSON.parse(data);\n                            if (data.status != 'success') {\n                                console.log('ERROR: server did not return proper structure. It should return', { status: 'success', items: [{ id: 1, text: 'item' }] });\n                                return;\n                            }\n                            // remove all extra items if more then needed for cache\n                            if (data.items.length > options.cacheMax) data.items.splice(options.cacheMax, 100000);\n                            // remember stats\n                            obj.tmp.xhr_loading = false;\n                            obj.tmp.xhr_search  = search;\n                            obj.tmp.xhr_total   = data.items.length;\n                            options.items       = obj.normMenu(data.items);\n                            if (search == '' && data.items.length == 0) obj.tmp.emptySet = true; else obj.tmp.emptySet = false;\n                            obj.search();\n                            // console.log('-->', 'retrieved:', obj.tmp.xhr_total);\n                            // event after\n                            obj.trigger($.extend(eventData2, { phase: 'after' }));\n                        })\n                        .fail(function (xhr, status, error) {\n                            // trigger event\n                            var errorObj = { status: status, error: error, rawResponseText: xhr.responseText };\n                            var eventData2 = obj.trigger({ phase: 'before', type: 'error', target: obj.el, search: search, error: errorObj, xhr: xhr });\n                            if (eventData2.isCancelled === true) return;\n                            // default behavior\n                            if (status != 'abort') {\n                                var data;\n                                try { data = $.parseJSON(xhr.responseText) } catch (e) {}\n                                console.log('ERROR: Server communication failed.', \n                                    '\\n   EXPECTED:', { status: 'success', items: [{ id: 1, text: 'item' }] }, \n                                    '\\n         OR:', { status: 'error', message: 'error message' },\n                                    '\\n   RECEIVED:', typeof data == 'object' ? data : xhr.responseText);\n                            }\n                            // reset stats\n                            obj.clearCache();\n                            // event after\n                            obj.trigger($.extend(eventData2, { phase: 'after' }));\n                        });\n                    // event after\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                }, interval);\n            }\n        },\n\n        search: function () {\n            var obj     = this;\n            var options = this.options;\n            var search  = $(obj.el).val();\n            var target  = obj.el;\n            var ids     = [];\n            var selected= $(obj.el).data('selected');\n            if (obj.type == 'enum') {\n                target = $(obj.helpers.multi).find('input');\n                search = target.val();\n                for (var s in selected) { if (selected[s]) ids.push(selected[s].id); }\n            }\n            if (obj.type == 'list') {\n                target = $(obj.helpers.focus).find('input');\n                search = target.val();\n                for (var s in selected) { if (selected[s]) ids.push(selected[s].id); }\n            }\n            // trigger event\n            var eventData = obj.trigger({ phase: 'before', type: 'search', target: target, search: search });\n            if (eventData.isCancelled === true) return;\n            if (obj.tmp.xhr_loading !== true) {\n                var shown = 0;\n                for (var i = 0; i < options.items.length; i++) {\n                    var item = options.items[i];\n                    if (typeof options.compare == 'function') {\n                        item.hidden = (options.compare.call(this, item, search) === false ? true : false)\n                    } else {\n                        var prefix = '';\n                        var suffix = '';\n                        if (['is', 'begins'].indexOf(options.match) != -1) prefix = '^';\n                        if (['is', 'ends'].indexOf(options.match) != -1) suffix = '$';\n                        try {\n                            var re = new RegExp(prefix + search + suffix, 'i');\n                            if (re.test(item.text) || item.text == '...') item.hidden = false; else item.hidden = true;\n                        } catch (e) {}\n                    }\n                    // do not show selected items\n                    if (obj.type == 'enum' && $.inArray(item.id, ids) != -1) item.hidden = true;\n                    if (item.hidden !== true) { shown++; delete item.hidden; }\n                }\n                // preselect first item\n                options.index = 0;\n                while (options.items[options.index] && options.items[options.index].hidden) options.index++;\n                if (shown <= 0) options.index = -1;\n                options.spinner = false;\n                obj.updateOverlay();\n                setTimeout(function () { \n                    var html = $('#w2ui-overlay').html() || '';\n                    if (options.markSearch && html.indexOf('$.fn.w2menuHandler') != -1) { // do not highlight when no items\n                        $('#w2ui-overlay').w2marker(search); \n                    }\n                }, 1);\n            } else {\n                options.items.splice(0, options.cacheMax);\n                options.spinner = true;\n                obj.updateOverlay();\n            }\n            // event after\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        updateOverlay: function (indexOnly) {\n            var obj     = this;\n            var options = this.options;\n            // color\n            if (this.type == 'color') {\n                if ($(obj.el).attr('readonly')) return;\n                if ($('#w2ui-overlay').length == 0) {\n                    $(obj.el).w2overlay(obj.getColorHTML());\n                } else {\n                    $('#w2ui-overlay > div').html(obj.getColorHTML());\n                }\n                // bind events\n                $('#w2ui-overlay .color')\n                    .on('mousedown', function (event) {\n                        var color = $(event.originalEvent.target).attr('name');\n                        var index = $(event.originalEvent.target).attr('index').split(':');\n                        obj.tmp.cind1 = index[0];\n                        obj.tmp.cind2 = index[1];\n                        $(obj.el).val(color).change();\n                        $(this).html('&#149;');\n                    })\n                    .on('mouseup', function () {\n                        setTimeout(function () {\n                            if ($(\"#w2ui-overlay\").length > 0) $('#w2ui-overlay').removeData('keepOpen')[0].hide();\n                        }, 10);\n                    });\n            }\n            // date\n            if (this.type == 'date') {\n                if ($(obj.el).attr('readonly')) return;\n                if ($('#w2ui-overlay').length == 0) {\n                    $(obj.el).w2overlay('<div class=\"w2ui-reset w2ui-calendar\" onclick=\"event.stopPropagation();\"></div>', {\n                        css: { \"background-color\": \"#f5f5f5\" }\n                    });\n                }\n                var month, year;\n                var dt = w2utils.isDate($(obj.el).val(), obj.options.format, true);\n                if (dt) { month = dt.getMonth() + 1; year = dt.getFullYear(); }\n                (function refreshCalendar(month, year) {\n                    $('#w2ui-overlay > div > div').html(obj.getMonthHTML(month, year));\n                    $('#w2ui-overlay .w2ui-calendar-title')\n                        .on('mousedown', function () {\n                            if ($(this).next().hasClass('w2ui-calendar-jump')) {\n                                $(this).next().remove();\n                            } else {\n                                var selYear, selMonth;\n                                $(this).after('<div class=\"w2ui-calendar-jump\" style=\"\"></div>');\n                                $(this).next().hide().html(obj.getYearHTML()).fadeIn(200);\n                                setTimeout(function () {\n                                    $('#w2ui-overlay .w2ui-calendar-jump')\n                                        .find('.w2ui-jump-month, .w2ui-jump-year')\n                                        .on('click', function () {\n                                            if ($(this).hasClass('w2ui-jump-month')) {\n                                                $(this).parent().find('.w2ui-jump-month').removeClass('selected');\n                                                $(this).addClass('selected');\n                                                selMonth = $(this).attr('name');\n                                            }\n                                            if ($(this).hasClass('w2ui-jump-year')) {\n                                                $(this).parent().find('.w2ui-jump-year').removeClass('selected');\n                                                $(this).addClass('selected');\n                                                selYear = $(this).attr('name');\n                                            }\n                                            if (selYear != null && selMonth != null) {\n                                                $('#w2ui-overlay .w2ui-calendar-jump').fadeOut(100);\n                                                setTimeout(function () { refreshCalendar(parseInt(selMonth)+1, selYear); }, 100);\n                                            }\n                                        });\n                                    $('#w2ui-overlay .w2ui-calendar-jump >:last-child').prop('scrollTop', 2000);\n                                }, 1);\n                            }\n                        });\n                    $('#w2ui-overlay .w2ui-date')\n                        .on('mousedown', function () {\n                            var day = $(this).attr('date');\n                            $(obj.el).val(day).change();\n                            $(this).css({ 'background-color': '#B6D5FB', 'border-color': '#aaa' });\n                        })\n                        .on('mouseup', function () {\n                            setTimeout(function () {\n                                if ($(\"#w2ui-overlay\").length > 0) $('#w2ui-overlay').removeData('keepOpen')[0].hide();\n                            }, 10);\n                        });\n                    $('#w2ui-overlay .previous').on('mousedown', function () {\n                        var tmp = obj.options.current.split('/');\n                        tmp[0]  = parseInt(tmp[0]) - 1;\n                        refreshCalendar(tmp[0], tmp[1]);\n                    });\n                    $('#w2ui-overlay .next').on('mousedown', function () {\n                        var tmp = obj.options.current.split('/');\n                        tmp[0]  = parseInt(tmp[0]) + 1;\n                        refreshCalendar(tmp[0], tmp[1]);\n                    });\n                }) (month, year);\n            }\n            // time\n            if (this.type == 'time') {\n                if ($(obj.el).attr('readonly')) return;\n                if ($('#w2ui-overlay').length == 0) {\n                    $(obj.el).w2overlay('<div class=\"w2ui-reset w2ui-calendar-time\" onclick=\"event.stopPropagation();\"></div>', {\n                        css: { \"background-color\": \"#fff\" }\n                    });\n                }\n                var h24 = (this.options.format == 'h24');\n                $('#w2ui-overlay > div').html(obj.getHourHTML());\n                $('#w2ui-overlay .w2ui-time')\n                    .on('mousedown', function (event) {\n                        $(this).css({ 'background-color': '#B6D5FB', 'border-color': '#aaa' });\n                        var hour = $(this).attr('hour');\n                        $(obj.el).val((hour > 12 && !h24 ? hour - 12 : hour) + ':00' + (!h24 ? (hour < 12 ? ' am' : ' pm') : '')).change();\n                    })\n                    .on('mouseup', function () {\n                        var hour = $(this).attr('hour');\n                        if ($(\"#w2ui-overlay\").length > 0) $('#w2ui-overlay')[0].hide();\n                        $(obj.el).w2overlay('<div class=\"w2ui-reset w2ui-calendar-time\"></div>', { css: { \"background-color\": \"#fff\" } });\n                        $('#w2ui-overlay > div').html(obj.getMinHTML(hour));\n                        $('#w2ui-overlay .w2ui-time')\n                            .on('mousedown', function () {\n                                $(this).css({ 'background-color': '#B6D5FB', 'border-color': '#aaa' });\n                                var min = $(this).attr('min');\n                                $(obj.el).val((hour > 12 && !h24 ? hour - 12 : hour) + ':' + (min < 10 ? 0 : '') + min + (!h24 ? (hour < 12 ? ' am' : ' pm') : '')).change();\n                            })\n                            .on('mouseup', function () {\n                                setTimeout(function () { if ($(\"#w2ui-overlay\").length > 0) $('#w2ui-overlay').removeData('keepOpen')[0].hide(); }, 10);\n                            });\n                    });\n            }\n            // list\n            if (['list', 'combo', 'enum'].indexOf(this.type) != -1) {\n                var el    = this.el;\n                var input = this.el;\n                if (this.type == 'enum') {\n                    el    = $(this.helpers.multi);\n                    input = $(el).find('input');\n                }\n                if (this.type == 'list') {\n                    input = $(this.helpers.focus).find('input');\n                }\n                if ($(input).is(':focus')) {\n                    if (options.openOnFocus === false && $(input).val() == '' && obj.tmp.force_open !== true) {\n                        $().w2overlay();\n                        return;\n                    }\n                    if (obj.tmp.force_hide) {\n                        $().w2overlay();\n                        setTimeout(function () {\n                            delete obj.tmp.force_hide;\n                        }, 1);                        \n                        return;\n                    }\n                    if ($(input).val() != '') delete obj.tmp.force_open;\n                    var msgNoItems = w2utils.lang('No matches');\n                    if (options.url != null && $(input).val().length < options.minLength && obj.tmp.emptySet !== true) msgNoItems = options.minLength + ' ' + w2utils.lang('letters or more...');\n                    if (options.url != null && $(input).val() == '' && obj.tmp.emptySet !== true) msgNoItems = w2utils.lang('Type to search....');\n                    $(el).w2menu((!indexOnly ? 'refresh' : 'refresh-index'), $.extend(true, {}, options, {\n                        search     : false,\n                        render     : options.renderDrop,\n                        maxHeight  : options.maxDropHeight,\n                        msgNoItems : msgNoItems,\n                        // selected with mouse\n                        onSelect: function (event) {\n                            if (obj.type == 'enum') {\n                                var selected = $(obj.el).data('selected');\n                                if (event.item) {\n                                    // trigger event\n                                    var eventData = obj.trigger({ phase: 'before', type: 'add', target: obj.el, originalEvent: event.originalEvent, item: event.item });\n                                    if (eventData.isCancelled === true) return;\n                                    // default behavior\n                                    if (selected.length >= options.max && options.max > 0) selected.pop();\n                                    delete event.item.hidden;\n                                    selected.push(event.item);\n                                    $(obj.el).data('selected', selected).change();\n                                    $(obj.helpers.multi).find('input').val('').width(20);\n                                    obj.refresh();\n                                    if ($(\"#w2ui-overlay\").length > 0) $('#w2ui-overlay')[0].hide();\n                                    // event after\n                                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                                }\n                            } else {\n                                $(obj.el).data('selected', event.item).val(event.item.text).change();\n                                if (obj.helpers.focus) obj.helpers.focus.find('input').val('');\n                            }\n                        }\n                    }));\n                }\n            }\n        },\n\n        inRange: function (str) {\n            var inRange = false;\n            if (this.type == 'date') {\n                var dt = w2utils.isDate(str, this.options.format, true);\n                if (dt) {\n                    // enable range\n                    if (this.options.start || this.options.end) {\n                        var st = (typeof this.options.start == 'string' ? this.options.start : $(this.options.start).val());\n                        var en = (typeof this.options.end == 'string' ? this.options.end : $(this.options.end).val());\n                        var start   = w2utils.isDate(st, this.options.format, true);\n                        var end     = w2utils.isDate(en, this.options.format, true);\n                        var current = new Date(dt);\n                        if (!start) start = current;\n                        if (!end) end = current;\n                        if (current >= start && current <= end) inRange = true;\n                    } else {\n                        inRange = true;\n                    }\n                    // block predefined dates\n                    if (this.options.blocked && $.inArray(str, this.options.blocked) != -1) inRange = false;\n                }\n            }\n            if (this.type == 'time') {\n                if (this.options.start || this.options.end) {\n                    var tm  = this.toMin(str);\n                    var tm1 = this.toMin(this.options.start);\n                    var tm2 = this.toMin(this.options.end);\n                    if (!tm1) tm1 = tm;\n                    if (!tm2) tm2 = tm;\n                    if (tm >= tm1 && tm <= tm2) inRange = true;\n                } else {\n                    inRange = true;\n                }\n            }\n            return inRange;\n        },\n\n        /*\n        *  INTERNAL FUNCTIONS\n        */\n\n        checkType: function (ch, loose) {\n            var obj = this;\n            switch (obj.type) {\n                case 'int':\n                    if (loose && ['-', obj.options.groupSymbol].indexOf(ch) != -1) return true;\n                    return w2utils.isInt(ch.replace(obj.options.numberRE, ''));\n                case 'percent':\n                    ch = ch.replace(/%/g, '');\n                case 'float':\n                    if (loose && ['-', w2utils.settings.decimalSymbol, obj.options.groupSymbol].indexOf(ch) != -1) return true;\n                    return w2utils.isFloat(ch.replace(obj.options.numberRE, ''));\n                case 'money':\n                case 'currency':\n                    if (loose && ['-', obj.options.decimalSymbol, obj.options.groupSymbol, obj.options.currencyPrefix, obj.options.currencySuffix].indexOf(ch) != -1) return true;\n                    return w2utils.isFloat(ch.replace(obj.options.moneyRE, ''));\n                case 'hex':\n                case 'color':\n                    return w2utils.isHex(ch);\n                case 'alphanumeric':\n                    return w2utils.isAlphaNumeric(ch);\n            }\n            return true;\n        },\n\n        addPrefix: function () {\n            var obj = this;\n            setTimeout(function () {\n                if (obj.type === 'clear') return;\n                var helper;\n                var tmp = $(obj.el).data('tmp') || {};\n                if (tmp['old-padding-left']) $(obj.el).css('padding-left', tmp['old-padding-left']);\n                tmp['old-padding-left'] = $(obj.el).css('padding-left');\n                $(obj.el).data('tmp', tmp);\n                // remove if already displaed\n                if (obj.helpers.prefix) $(obj.helpers.prefix).remove();\n                if (obj.options.prefix !== '') {\n                    // add fresh\n                    $(obj.el).before(\n                        '<div class=\"w2ui-field-helper\">'+\n                            obj.options.prefix +\n                        '</div>'\n                    );\n                    helper = $(obj.el).prev();\n                    helper\n                        .css({\n                            'color'          : $(obj.el).css('color'),\n                            'font-family'    : $(obj.el).css('font-family'),\n                            'font-size'      : $(obj.el).css('font-size'),\n                            'padding-top'    : $(obj.el).css('padding-top'),\n                            'padding-bottom' : $(obj.el).css('padding-bottom'),\n                            'padding-left'   : $(obj.el).css('padding-left'),\n                            'padding-right'  : 0,\n                            'margin-top'     : (parseInt($(obj.el).css('margin-top'), 10) + 2) + 'px',\n                            'margin-bottom'  : (parseInt($(obj.el).css('margin-bottom'), 10) + 1) + 'px',\n                            'margin-left'    : $(obj.el).css('margin-left'),\n                            'margin-right'   : 0\n                        })\n                        .on('click', function (event) {\n                            if (obj.options.icon && typeof obj.onIconClick == 'function') {\n                                // event before\n                                var eventData = obj.trigger({ phase: 'before', type: 'iconClick', target: obj.el, el: $(this).find('span.w2ui-icon')[0] });\n                                if (eventData.isCancelled === true) return;\n                                \n                                // intentionally empty\n\n                                // event after\n                                obj.trigger($.extend(eventData, { phase: 'after' }));                                \n                            } else {\n                                if (obj.type == 'list') {\n                                    $(obj.helpers.focus).find('input').focus();\n                                } else {\n                                    $(obj.el).focus();\n                                }\n                            }\n                        });\n                    $(obj.el).css('padding-left', (helper.width() + parseInt($(obj.el).css('padding-left'), 10)) + 'px');\n                    // remember helper\n                    obj.helpers.prefix = helper;\n                }\n            }, 1);\n        },\n\n        addSuffix: function () {\n            var obj = this;\n            var helper, pr;\n            setTimeout(function () {\n                if (obj.type === 'clear') return;\n                var tmp = $(obj.el).data('tmp') || {};\n                if (tmp['old-padding-right']) $(obj.el).css('padding-right', tmp['old-padding-right']);\n                tmp['old-padding-right'] = $(obj.el).css('padding-right');\n                $(obj.el).data('tmp', tmp);\n                pr = parseInt($(obj.el).css('padding-right'), 10);\n                if (obj.options.arrows) {\n                    // remove if already displaed\n                    if (obj.helpers.arrows) $(obj.helpers.arrows).remove();\n                    // add fresh\n                    $(obj.el).after(\n                        '<div class=\"w2ui-field-helper\" style=\"border: 1px solid transparent\">&nbsp;'+\n                        '    <div class=\"w2ui-field-up\" type=\"up\">'+\n                        '        <div class=\"arrow-up\" type=\"up\"></div>'+\n                        '    </div>'+\n                        '    <div class=\"w2ui-field-down\" type=\"down\">'+\n                        '        <div class=\"arrow-down\" type=\"down\"></div>'+\n                        '    </div>'+\n                        '</div>');\n                    var height = w2utils.getSize(obj.el, 'height');\n                    helper = $(obj.el).next();\n                    helper.css({\n                            'color'         : $(obj.el).css('color'),\n                            'font-family'   : $(obj.el).css('font-family'),\n                            'font-size'     : $(obj.el).css('font-size'),\n                            'height'        : ($(obj.el).height() + parseInt($(obj.el).css('padding-top'), 10) + parseInt($(obj.el).css('padding-bottom'), 10) ) + 'px',\n                            'padding'       : 0,\n                            'margin-top'    : (parseInt($(obj.el).css('margin-top'), 10) + 1) + 'px',\n                            'margin-bottom' : 0,\n                            'border-left'   : '1px solid silver'\n                        })\n                        .css('margin-left', '-'+ (helper.width() + parseInt($(obj.el).css('margin-right'), 10) + 12) + 'px')\n                        .on('mousedown', function (event) {\n                            var body = $('body');\n                            body.on('mouseup', tmp);\n                            body.data('_field_update_timer', setTimeout(update, 700));\n                            update(false);\n                            // timer function\n                            function tmp() {\n                                clearTimeout(body.data('_field_update_timer'));\n                                body.off('mouseup', tmp);\n                            }\n                            // update function\n                            function update(notimer) {\n                                $(obj.el).focus();\n                                obj.keyDown($.Event(\"keydown\"), {\n                                    keyCode : ($(event.target).attr('type') == 'up' ? 38 : 40)\n                                });\n                                if (notimer !== false) $('body').data('_field_update_timer', setTimeout(update, 60));\n                            }\n                        });\n                    pr += helper.width() + 12;\n                    $(obj.el).css('padding-right', pr + 'px');\n                    // remember helper\n                    obj.helpers.arrows = helper;\n                }\n                if (obj.options.suffix !== '') {\n                    // remove if already displaed\n                    if (obj.helpers.suffix) $(obj.helpers.suffix).remove();\n                    // add fresh\n                    $(obj.el).after(\n                        '<div class=\"w2ui-field-helper\">'+\n                            obj.options.suffix +\n                        '</div>');\n                    helper = $(obj.el).next();\n                    helper\n                        .css({\n                            'color'          : $(obj.el).css('color'),\n                            'font-family'    : $(obj.el).css('font-family'),\n                            'font-size'      : $(obj.el).css('font-size'),\n                            'padding-top'    : $(obj.el).css('padding-top'),\n                            'padding-bottom' : $(obj.el).css('padding-bottom'),\n                            'padding-left'   : '3px',\n                            'padding-right'  : $(obj.el).css('padding-right'),\n                            'margin-top'     : (parseInt($(obj.el).css('margin-top'), 10) + 2) + 'px',\n                            'margin-bottom'  : (parseInt($(obj.el).css('margin-bottom'), 10) + 1) + 'px'\n                        })\n                        .on('click', function (event) {\n                            if (obj.type == 'list') {\n                                $(obj.helpers.focus).find('input').focus();\n                            } else {\n                                $(obj.el).focus();\n                            }\n                        });\n\n                    helper.css('margin-left', '-'+ (w2utils.getSize(helper, 'width') + parseInt($(obj.el).css('margin-right'), 10) + 2) + 'px');\n                    pr += helper.width() + 3;\n                    $(obj.el).css('padding-right', pr + 'px');\n                    // remember helper\n                    obj.helpers.suffix = helper;\n                }\n            }, 1);\n        },\n\n        addFocus: function () {\n            var obj      = this;\n            var options  = this.options;\n            var width    = 0; // 11 - show search icon, 0 do not show\n            var pholder;\n            // clean up & init\n            $(obj.helpers.focus).remove();\n            // build helper\n            var html =\n                '<div class=\"w2ui-field-helper\">'+ \n                '    <div class=\"w2ui-icon icon-search\" style=\"opacity: 0\"></div>'+\n                '    <input type=\"text\" autocomplete=\"off\">'+\n                '<div>';\n            $(obj.el).attr('tabindex', -1).before(html);\n            var helper = $(obj.el).prev();\n            obj.helpers.focus = helper;\n            helper.css({\n                    width           : $(obj.el).width(),\n                    \"margin-top\"    : $(obj.el).css('margin-top'),\n                    \"margin-left\"   : (parseInt($(obj.el).css('margin-left')) + parseInt($(obj.el).css('padding-left'))) + 'px',\n                    \"margin-bottom\" : $(obj.el).css('margin-bottom'),\n                    \"margin-right\"  : $(obj.el).css('margin-right')\n                })\n                .find('input')\n                .css({\n                    cursor   : 'default',\n                    width    : '100%',\n                    outline  : 'none',\n                    opacity  : 1,\n                    margin   : 0,\n                    border   : '1px solid transparent',\n                    padding  : $(obj.el).css('padding-top'),\n                    \"padding-left\"     : 0,\n                    \"margin-left\"      : (width > 0 ? width + 6 : 0),\n                    \"background-color\" : 'transparent'\n                });\n            // INPUT events\n            helper.find('input')\n                .on('click', function (event) {\n                    if ($('#w2ui-overlay').length == 0) obj.focus(event);\n                    event.stopPropagation();\n                })\n                .on('focus', function (event) {\n                    pholder = $(obj.el).attr('placeholder');\n                    $(obj.el).css({ 'outline': 'auto 5px #7DB4F3', 'outline-offset': '-2px' });\n                    $(this).val('');\n                    $(obj.el).triggerHandler('focus');\n                    if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\n                })\n                .on('blur', function (event) {\n                    $(obj.el).css('outline', 'none');\n                    $(this).val('');\n                    obj.refresh(); \n                    $(obj.el).triggerHandler('blur');\n                    if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\n                    if (pholder != null) $(obj.el).attr('placeholder', pholder);\n                })\n                .on('keydown', function (event) {\n                    var el = this;\n                    obj.keyDown(event);\n                    setTimeout(function () { \n                        if (el.value == '') $(obj.el).attr('placeholder', pholder); else $(obj.el).attr('placeholder', '');\n                    }, 10);\n                })\n                .on('keyup', function (event) { obj.keyUp(event) })\n                .on('keypress', function (event) { obj.keyPress(event); });\n            // MAIN div\n            helper.on('click', function (event) { $(this).find('input').focus(); });\n            obj.refresh();\n        },    \n\n        addMulti: function () {\n            var obj         = this;\n            var options     = this.options;\n            // clean up & init\n            $(obj.helpers.multi).remove();\n            // build helper\n            var html   = '';\n            var margin =\n                'margin-top     : 0px; ' +\n                'margin-bottom  : 0px; ' +\n                'margin-left    : ' + $(obj.el).css('margin-left') + '; ' +\n                'margin-right   : ' + $(obj.el).css('margin-right') + '; '+\n                'width          : ' + (w2utils.getSize(obj.el, 'width')\n                                    - parseInt($(obj.el).css('margin-left'), 10)\n                                    - parseInt($(obj.el).css('margin-right'), 10))\n                                    + 'px;';\n            if (obj.type == 'enum') {\n                html =  '<div class=\"w2ui-field-helper w2ui-list\" style=\"'+ margin + '; box-sizing: border-box\">'+\n                        '    <div style=\"padding: 0px; margin: 0px; display: inline-block\" class=\"w2ui-multi-items\">'+\n                        '    <ul>'+\n                        '        <li style=\"padding-left: 0px; padding-right: 0px\" class=\"nomouse\">'+\n                        '            <input type=\"text\" style=\"width: 20px\" autocomplete=\"off\" '+ ($(obj.el).attr('readonly') ? 'readonly': '') + '>'+\n                        '        </li>'+\n                        '    </ul>'+\n                        '    </div>'+\n                        '</div>';\n            }\n            if (obj.type == 'file') {\n                html =  '<div class=\"w2ui-field-helper w2ui-list\" style=\"'+ margin + '; box-sizing: border-box\">'+\n                        '   <div style=\"position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px;\">'+\n                        '       <input class=\"file-input\" type=\"file\" style=\"width: 100%; height: 100%; opacity: 0;\" name=\"attachment\" multiple tabindex=\"-1\">'+\n                        '   </div>'+\n                        '    <div style=\"position: absolute; padding: 0px; margin: 0px; display: inline-block\" class=\"w2ui-multi-items\">'+\n                        '        <ul><li style=\"padding-left: 0px; padding-right: 0px\" class=\"nomouse\"></li></ul>'+                        \n                        '    </div>'+\n                        '</div>';\n            }\n            // old bg and boder\n            var tmp = $(obj.el).data('tmp') || {};\n            tmp['old-background-color'] = $(obj.el).css('background-color');\n            tmp['old-border-color']     = $(obj.el).css('border-color');\n            $(obj.el).data('tmp', tmp);\n\n            $(obj.el)\n                .before(html)\n                .css({\n                    'background-color' : 'transparent',\n                    'border-color'     : 'transparent'\n                });\n\n            var div    = $(obj.el).prev();\n            obj.helpers.multi = div;\n            if (obj.type == 'enum') {\n                $(obj.el).attr('tabindex', -1);\n                // INPUT events\n                div.find('input')\n                    .on('click', function (event) {\n                        if ($('#w2ui-overlay').length == 0) obj.focus(event);\n                        $(obj.el).triggerHandler('click');\n                    })\n                    .on('focus', function (event) {\n                        $(div).css({ 'outline': 'auto 5px #7DB4F3', 'outline-offset': '-2px' });\n                        $(obj.el).triggerHandler('focus');\n                        if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\n                    })\n                    .on('blur', function (event) {\n                        $(div).css('outline', 'none');\n                        $(obj.el).triggerHandler('blur');\n                        if (event.stopPropagation) event.stopPropagation(); else event.cancelBubble = true;\n                    })\n                    .on('keyup',    function (event) { obj.keyUp(event) })\n                    .on('keydown',  function (event) { obj.keyDown(event) })\n                    .on('keypress', function (event) { div.find('.w2ui-enum-placeholder').remove(); obj.keyPress(event); });\n                // MAIN div\n                div.on('click', function (event) { $(this).find('input').focus(); });\n            }\n            if (obj.type == 'file') {\n                $(obj.el).css('outline', 'none');\n                div.on('click', function (event) {\n                        $(obj.el).focus();\n                        if ($(obj.el).attr('readonly')) return;\n                        obj.blur(event);\n                        obj.resize();\n                        setTimeout(function () { div.find('input').click(); }, 10); // needed this when clicked on items div\n                    })\n                    .on('dragenter', function (event) {\n                        if ($(obj.el).attr('readonly')) return;\n                        $(div).addClass('w2ui-file-dragover'); \n                    })\n                    .on('dragleave', function (event) {\n                        if ($(obj.el).attr('readonly')) return;\n                        var tmp = $(event.target).parents('.w2ui-field-helper');\n                        if (tmp.length == 0) $(div).removeClass('w2ui-file-dragover');\n                    })\n                    .on('drop', function (event) {\n                        if ($(obj.el).attr('readonly')) return;\n                        $(div).removeClass('w2ui-file-dragover');\n                        var files = event.originalEvent.dataTransfer.files;\n                        for (var i = 0, l = files.length; i < l; i++) obj.addFile.call(obj, files[i]);\n                        // cancel to stop browser behaviour\n                        event.preventDefault();\n                        event.stopPropagation();\n                    })\n                    .on('dragover', function (event) {\n                        // cancel to stop browser behaviour\n                        event.preventDefault();\n                        event.stopPropagation();\n                    });\n                div.find('input')\n                    .on('click', function (event) {\n                        event.stopPropagation();\n                    })\n                    .on('change', function () {\n                        if (typeof this.files !== \"undefined\") {\n                            for (var i = 0, l = this.files.length; i < l; i++) {\n                                obj.addFile.call(obj, this.files[i]);\n                            }\n                        }\n                    });\n            }\n            obj.refresh();\n        },    \n\n        addFile: function (file) {\n            var obj      = this;\n            var options  = this.options;\n            var selected = $(obj.el).data('selected');\n            var newItem  = {\n                name     : file.name,\n                type     : file.type,\n                modified : file.lastModifiedDate,\n                size     : file.size,\n                content  : null,\n                file     : file\n            };\n            var size = 0;\n            var cnt  = 0;\n            var err;\n            for (var s in selected) { \n                // check for dups\n                if (selected[s].name == file.name && selected[s].size == file.size) return;\n                size += selected[s].size; cnt++; \n            }\n            // trigger event\n            var eventData = obj.trigger({ phase: 'before', type: 'add', target: obj.el, file: newItem, total: cnt, totalSize: size });\n            if (eventData.isCancelled === true) return;\n            // check params\n            if (options.maxFileSize !== 0 && newItem.size > options.maxFileSize) {\n                err = 'Maximum file size is '+ w2utils.formatSize(options.maxFileSize);\n                if (options.silent === false) $(obj.el).w2tag(err);\n                console.log('ERROR: '+ err);\n                return;\n            }\n            if (options.maxSize !== 0 && size + newItem.size > options.maxSize) {\n                err = 'Maximum total size is '+ w2utils.formatSize(options.maxSize);\n                if (options.silent === false) $(obj.el).w2tag(err);\n                console.log('ERROR: '+ err);\n                return;\n            }\n            if (options.max !== 0 && cnt >= options.max) {\n                err = 'Maximum number of files is '+ options.max;\n                if (options.silent === false) $(obj.el).w2tag(err);\n                console.log('ERROR: '+ err);\n                return;\n            }\n            selected.push(newItem);\n            // read file as base64\n            if (typeof FileReader !== \"undefined\") {\n                var reader = new FileReader();\n                // need a closure\n                reader.onload = (function () {\n                    return function (event) {\n                        var fl  = event.target.result;\n                        var ind = fl.indexOf(',');\n                        newItem.content = fl.substr(ind+1);\n                        obj.refresh();\n                        $(obj.el).trigger('change');\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                    };\n                })();\n                reader.readAsDataURL(file);\n            } else {\n                obj.refresh();\n                $(obj.el).trigger('change');\n            }\n        },\n\n        normMenu: function (menu) {\n            if ($.isArray(menu)) {\n                for (var m = 0; m < menu.length; m++) {\n                    if (typeof menu[m] == 'string') {\n                        menu[m] = { id: menu[m], text: menu[m] };\n                    } else {\n                        if (typeof menu[m].text != 'undefined' && typeof menu[m].id == 'undefined') menu[m].id = menu[m].text;\n                        if (typeof menu[m].text == 'undefined' && typeof menu[m].id != 'undefined') menu[m].text = menu[m].id;\n                        if (typeof menu[m].caption != 'undefined') menu[m].text = menu[m].caption;\n                    }\n                }\n                return menu;\n            } else if (typeof menu == 'object') {\n                var tmp = [];\n                for (var m in menu) tmp.push({ id: m, text: menu[m] });\n                return tmp;\n            }\n        },\n\n        getColorHTML: function () {\n            var html =  '<div class=\"w2ui-color\">'+\n                        '<table cellspacing=\"5\">';\n            for (var i = 0; i < 8; i++) {\n                html += '<tr>';\n                for (var j = 0; j < 8; j++) {\n                    html += '<td>'+\n                            '    <div class=\"color\" style=\"background-color: #'+ this.pallete[i][j] +';\" name=\"'+ this.pallete[i][j] +'\" index=\"'+ i + ':' + j +'\">'+\n                            '        '+ ($(this.el).val() == this.pallete[i][j] ? '&#149;' : '&nbsp;')+\n                            '    </div>'+\n                            '</td>';\n                }\n                html += '</tr>';\n                if (i < 2) html += '<tr><td style=\"height: 8px\" colspan=\"8\"></td></tr>';\n            }\n            html += '</table></div>';\n            return html;\n        },\n\n        getMonthHTML: function (month, year) {\n            var td          = new Date();\n            var months      = w2utils.settings.fullmonths;\n            var daysCount   = ['31', '28', '31', '30', '31', '30', '31', '31', '30', '31', '30', '31'];\n            var today       = td.getFullYear() + '/' + (Number(td.getMonth()) + 1) + '/' + td.getDate();\n            var days        = w2utils.settings.fulldays.slice();    // creates copy of the array\n            var sdays       = w2utils.settings.shortdays.slice();   // creates copy of the array            \n            if (w2utils.settings.weekStarts != 'M') {\n                days.unshift(days.pop());\n                sdays.unshift(sdays.pop());\n            }\n            // normalize date\n            year  = w2utils.isInt(year)  ? parseInt(year)  : td.getFullYear();\n            month = w2utils.isInt(month) ? parseInt(month) : td.getMonth() + 1;\n            if (month > 12) { month -= 12; year++; }\n            if (month < 1 || month === 0)  { month += 12; year--; }\n            if (year/4 == Math.floor(year/4)) { daysCount[1] = '29'; } else { daysCount[1] = '28'; }\n            this.options.current = month + '/' + year;\n\n            // start with the required date\n            td = new Date(year, month-1, 1);\n            var weekDay = td.getDay();\n            var dayTitle = '';\n            for (var i = 0; i < sdays.length; i++) dayTitle += '<td title=\"'+ days[i] +'\">' + sdays[i] + '</td>';\n\n            var html  =\n                '<div class=\"w2ui-calendar-title title\">'+\n                '    <div class=\"w2ui-calendar-previous previous\"> <div></div> </div>'+\n                '    <div class=\"w2ui-calendar-next next\"> <div></div> </div> '+\n                        months[month-1] +', '+ year +\n                '</div>'+\n                '<table class=\"w2ui-calendar-days\" cellspacing=\"0\">'+\n                '    <tr class=\"w2ui-day-title\">' + dayTitle + '</tr>'+\n                '    <tr>';\n\n            var day = 1;\n            if (w2utils.settings.weekStarts != 'M') weekDay++;\n            for (var ci = 1; ci < 43; ci++) {\n                if (weekDay === 0 && ci == 1) {\n                    for (var ti = 0; ti < 6; ti++) html += '<td class=\"w2ui-day-empty\">&nbsp;</td>';\n                    ci += 6;\n                } else {\n                    if (ci < weekDay || day > daysCount[month-1]) {\n                        html += '<td class=\"w2ui-day-empty\">&nbsp;</td>';\n                        if ((ci) % 7 === 0) html += '</tr><tr>';\n                        continue;\n                    }\n                }\n                var dt  = year + '/' + month + '/' + day;\n                var DT  = new Date(dt);\n                var className = '';\n                if (DT.getDay() == 6) className  = ' w2ui-saturday';\n                if (DT.getDay() == 0) className  = ' w2ui-sunday';\n                if (dt == today) className += ' w2ui-today';\n\n                var dspDay  = day;\n                var col     = '';\n                var bgcol   = '';\n                var tmp_dt  = w2utils.formatDate(dt, this.options.format);\n                if (this.options.colored && this.options.colored[tmp_dt] !== undefined) { // if there is predefined colors for dates\n                    var tmp = this.options.colored[tmp_dt].split(':');\n                    bgcol   = 'background-color: ' + tmp[0] + ';';\n                    col     = 'color: ' + tmp[1] + ';';\n                }\n                html += '<td class=\"'+ (this.inRange(tmp_dt) ? 'w2ui-date ' : 'w2ui-blocked') + className + '\" style=\"'+ col + bgcol + '\" date=\"'+ tmp_dt +'\">'+\n                            dspDay +\n                        '</td>';\n                if (ci % 7 === 0 || (weekDay === 0 && ci == 1)) html += '</tr><tr>';\n                day++;\n            }\n            html += '</tr></table>';\n            return html;\n        },\n\n        getYearHTML: function () {\n            var months = w2utils.settings.shortmonths;\n            var mhtml  = '';\n            var yhtml  = '';\n            for (var m = 0; m < months.length; m++) {\n                mhtml += '<div class=\"w2ui-jump-month\" name=\"'+ m +'\">'+ months[m] + '</div>';\n            }\n            for (var y = 1950; y <= 2020; y++) {\n                yhtml += '<div class=\"w2ui-jump-year\" name=\"'+ y +'\">'+ y + '</div>'\n            }\n            return '<div>'+ mhtml +'</div><div>'+ yhtml +'</div>';\n        },\n\n        getHourHTML: function () {\n            var tmp = [];\n            var h24 = (this.options.format == 'h24');\n            for (var a = 0; a < 24; a++) {\n                var time = (a >= 12 && !h24 ? a - 12 : a) + ':00' + (!h24 ? (a < 12 ? ' am' : ' pm') : '');\n                if (a == 12 && !h24) time = '12:00 pm';\n                if (!tmp[Math.floor(a/8)]) tmp[Math.floor(a/8)] = '';\n                var tm1 = this.fromMin(this.toMin(time));\n                var tm2 = this.fromMin(this.toMin(time) + 59);\n                tmp[Math.floor(a/8)] += '<div class=\"'+ (this.inRange(tm1) || this.inRange(tm2) ? 'w2ui-time ' : 'w2ui-blocked') + '\" hour=\"'+ a +'\">'+ time +'</div>';\n            }\n            var html =\n                '<div class=\"w2ui-calendar-time\"><table><tr>'+\n                '    <td>'+ tmp[0] +'</td>' +\n                '    <td>'+ tmp[1] +'</td>' +\n                '    <td>'+ tmp[2] +'</td>' +\n                '</tr></table></div>';\n            return html;\n        },\n\n        getMinHTML: function (hour) {\n            if (typeof hour == 'undefined') hour = 0;\n            var h24 = (this.options.format == 'h24');\n            var tmp = [];\n            for (var a = 0; a < 60; a += 5) {\n                var time = (hour > 12 && !h24 ? hour - 12 : hour) + ':' + (a < 10 ? 0 : '') + a + ' ' + (!h24 ? (hour < 12 ? 'am' : 'pm') : '');\n                var ind = a < 20 ? 0 : (a < 40 ? 1 : 2);\n                if (!tmp[ind]) tmp[ind] = '';\n                tmp[ind] += '<div class=\"'+ (this.inRange(time) ? 'w2ui-time ' : 'w2ui-blocked') + '\" min=\"'+ a +'\">'+ time +'</div>';\n            }\n            var html =\n                '<div class=\"w2ui-calendar-time\"><table><tr>'+\n                '    <td>'+ tmp[0] +'</td>' +\n                '    <td>'+ tmp[1] +'</td>' +\n                '    <td>'+ tmp[2] +'</td>' +\n                '</tr></table></div>';\n            return html;\n        },\n\n        toMin: function (str) {\n            if (typeof str != 'string') return null;\n            var tmp = str.split(':');\n            if (tmp.length == 2) {\n                tmp[0] = parseInt(tmp[0]);\n                tmp[1] = parseInt(tmp[1]);\n                if (str.indexOf('pm') != -1 && tmp[0] != 12) tmp[0] += 12;\n            } else {\n                return null;\n            }\n            return tmp[0] * 60 + tmp[1];\n        },\n\n        fromMin: function (time) {\n            var ret = '';\n            if (time >= 24 * 60) time = time % (24 * 60);\n            if (time < 0) time = 24 * 60 + time;\n            var hour = Math.floor(time/60);\n            var min  = ((time % 60) < 10 ? '0' : '') + (time % 60);\n            if (this.options.format.indexOf('h24') != -1) {\n                ret = hour + ':' + min;\n            } else {\n                ret = (hour <= 12 ? hour : hour - 12) + ':' + min + ' ' + (hour >= 12 ? 'pm' : 'am');\n            }\n            return ret;\n        }\n    };\n\n    $.extend(w2field.prototype, w2utils.event);\n    w2obj.field = w2field;\n\n}) (jQuery);\n\n/************************************************************************\n*   Library: Web 2.0 UI for jQuery (using prototypical inheritance)\n*   - Following objects defined\n*        - w2form      - form widget\n*        - $().w2form  - jQuery wrapper\n*   - Dependencies: jQuery, w2utils, w2fields, w2tabs, w2toolbar, w2alert\n*\n* == NICE TO HAVE ==\n*   - refresh(field) - would refresh only one field\n*   - include delta on save\n*   - form should read <select> <options> into items\n*   - two way data bindings\n*   - verify validation of fields\n*   - added getChanges() - not complete\n*   - nested record object\n*\n* == 1.5 changes\n*   - $('#form').w2form() - if called w/o argument then it returns form object\n*   - added onProgress\n*   - added field.html.style (for the whole field)\n*   - added enable/disable, show/hide\n*   - added field.disabled, field.hidden\n*   - when field is blank, set record.field = null\n*   - action: { caption: 'Limpiar', style: '', class: '', onClick: function () {} }\n*\n************************************************************************/\n\n\n(function () {\n    var w2form = function(options) {\n        // public properties\n        this.name      = null;\n        this.header    = '';\n        this.box       = null;     // HTML element that hold this element\n        this.url       = '';\n        this.routeData = {};       // data for dynamic routes\n        this.formURL   = '';       // url where to get form HTML\n        this.formHTML  = '';       // form HTML (might be loaded from the url)\n        this.page      = 0;        // current page\n        this.recid     = 0;        // can be null or 0\n        this.fields    = [];\n        this.actions   = {};\n        this.record    = {};\n        this.original  = {};\n        this.postData  = {};\n        this.toolbar   = {};       // if not empty, then it is toolbar\n        this.tabs      = {};       // if not empty, then it is tabs object\n\n        this.style         = '';\n        this.focus         = 0;    // focus first or other element\n        this.msgNotJSON    = w2utils.lang('Return data is not in JSON format.');\n        this.msgAJAXerror  = w2utils.lang('AJAX error. See console for more details.');\n        this.msgRefresh    = w2utils.lang('Refreshing...');\n        this.msgSaving     = w2utils.lang('Saving...');\n\n        // events\n        this.onRequest   = null;\n        this.onLoad      = null;\n        this.onValidate  = null;\n        this.onSubmit    = null;\n        this.onProgress  = null;\n        this.onSave      = null;\n        this.onChange    = null;\n        this.onRender    = null;\n        this.onRefresh   = null;\n        this.onResize    = null;\n        this.onDestroy   = null;\n        this.onAction    = null;\n        this.onToolbar   = null;\n        this.onError     = null;\n\n        // internal\n        this.isGenerated = false;\n        this.last = {\n            xhr: null        // jquery xhr requests\n        };\n\n        $.extend(true, this, w2obj.form, options);\n    };\n\n    // ====================================================\n    // -- Registers as a jQuery plugin\n\n    $.fn.w2form = function(method) {\n        if ($.isPlainObject(method)) {\n            var obj = this;\n            // check name parameter\n            if (!w2utils.checkName(method, 'w2form')) return;\n            // remember items\n            var record   = method.record;\n            var original = method.original;\n            var fields   = method.fields;\n            var toolbar  = method.toolbar;\n            var tabs     = method.tabs;\n            // extend items\n            var object = new w2form(method);\n            $.extend(object, { record: {}, original: {}, fields: [], tabs: {}, toolbar: {}, handlers: [] });\n            if ($.isArray(tabs)) {\n                $.extend(true, object.tabs, { tabs: [] });\n                for (var t = 0; t < tabs.length; t++) {\n                    var tmp = tabs[t];\n                    if (typeof tmp === 'object') object.tabs.tabs.push(tmp); else object.tabs.tabs.push({ id: tmp, caption: tmp });\n                }\n            } else {\n                $.extend(true, object.tabs, tabs);\n            }\n            $.extend(true, object.toolbar, toolbar);\n            // reassign variables\n            if (fields) for (var p = 0; p < fields.length; p++) {\n                var field = $.extend(true, {}, fields[p]);\n                if (typeof field.name == 'undefined' && typeof field.field != 'undefined') field.name = field.field;\n                if (typeof field.field == 'undefined' && typeof field.name != 'undefined') field.field = field.name;\n                object.fields[p] = field;\n            }\n            for (var p in record) { // it is an object\n                if ($.isPlainObject(record[p])) {\n                    object.record[p] = $.extend(true, {}, record[p]);\n                } else {\n                    object.record[p] = record[p];\n                }\n            }\n            for (var p in original) { // it is an object\n                if ($.isPlainObject(original[p])) {\n                    object.original[p] = $.extend(true, {}, original[p]);\n                } else {\n                    object.original[p] = original[p];\n                }\n            }\n            if (obj.length > 0) object.box = obj[0];\n            // render if necessary\n            if (object.formURL != '') {\n                $.get(object.formURL, function (data) { // should always be $.get as it is template\n                    object.formHTML = data;\n                    object.isGenerated = true;\n                    if ($(object.box).length != 0 || data.length != 0) {\n                        $(object.box).html(data);\n                        object.render(object.box);\n                    }\n                });\n            } else if (object.formHTML != '') {\n                // it is already loaded into formHTML\n            } else if ($(this).length != 0 && $.trim($(this).html()) != '') {\n                object.formHTML = $(this).html();\n            }  else { // try to generate it\n                object.formHTML = object.generateHTML();\n            }\n            // register new object\n            w2ui[object.name] = object;\n            // render if not loaded from url\n            if (object.formURL == '') {\n                if (String(object.formHTML).indexOf('w2ui-page') == -1) {\n                    object.formHTML = '<div class=\"w2ui-page page-0\">'+ object.formHTML +'</div>';\n                }\n                $(object.box).html(object.formHTML);\n                object.isGenerated = true;\n                object.render(object.box);\n            }\n            return object;\n\n        } else {\n            var obj = w2ui[$(this).attr('name')];\n            if (!obj) return null;\n            if (arguments.length > 0) {\n                if (obj[method]) obj[method].apply(obj, Array.prototype.slice.call(arguments, 1));\n                return this;\n            } else {\n                return obj;\n            }\n        }\n    };\n\n    // ====================================================\n    // -- Implementation of core functionality\n\n    w2form.prototype = {\n\n        get: function (field, returnIndex) {\n            if (arguments.length === 0) {\n                var all = [];\n                for (var f1 = 0; f1 < this.fields.length; f1++) {\n                    if (this.fields[f1].name != null) all.push(this.fields[f1].name);\n                }\n                return all;\n            } else {\n                for (var f2 = 0; f2 < this.fields.length; f2++) {\n                    if (this.fields[f2].name == field) {\n                        if (returnIndex === true) return f2; else return this.fields[f2];\n                    }\n                }\n                return null;\n            }\n        },\n\n        set: function (field, obj) {\n            for (var f = 0; f < this.fields.length; f++) {\n                if (this.fields[f].name == field) {\n                    $.extend(this.fields[f] , obj);\n                    this.refresh();\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        show: function () {\n            var affected = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var fld = this.get(arguments[a]);\n                if (fld && fld.hidden) { \n                    fld.hidden = false;\n                    affected++;\n                }\n            }\n            if (affected > 0) this.refresh();\n            return affected;\n        },\n\n        hide: function () {\n            var affected = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var fld = this.get(arguments[a]);\n                if (fld && !fld.hidden) { \n                    fld.hidden = true;\n                    affected++;\n                }\n            }\n            if (affected > 0) this.refresh();\n            return affected;\n        },\n\n        enable: function () {\n            var affected = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var fld = this.get(arguments[a]);\n                if (fld && fld.disabled) { \n                    fld.disabled = false;\n                    affected++;\n                }\n            }\n            if (affected > 0) this.refresh();\n            return affected;\n        },\n\n        disable: function () {\n            var affected = 0;\n            for (var a = 0; a < arguments.length; a++) {\n                var fld = this.get(arguments[a]);\n                if (fld && !fld.disabled) { \n                    fld.disabled = true;\n                    affected++;\n                }\n            }\n            if (affected > 0) this.refresh();\n            return affected;\n        },\n\n        reload: function (callBack) {\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (url && this.recid != 0 && this.recid != null) {\n                // this.clear();\n                this.request(callBack);\n            } else {\n                // this.refresh(); // no need to refresh\n                if (typeof callBack == 'function') callBack();\n            }\n        },\n\n        clear: function () {\n            this.recid  = 0;\n            this.record = {};\n            $().w2tag();\n            this.refresh();\n        },\n\n        error: function (msg) {\n            var obj = this;\n            // let the management of the error outside of the grid\n            var eventData = this.trigger({ target: this.name, type: 'error', message: msg , xhr: this.last.xhr });\n            if (eventData.isCancelled === true) {\n                if (typeof callBack == 'function') callBack();\n                return;\n            }\n            // need a time out because message might be already up)\n            setTimeout(function () { w2alert(msg, 'Error');    }, 1);\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        validate: function (showErrors) {\n            if (typeof showErrors == 'undefined') showErrors = true;\n            $().w2tag(); // hide all tags before validating\n            // validate before saving\n            var errors = [];\n            for (var f = 0; f < this.fields.length; f++) {\n                var field = this.fields[f];\n                if (this.record[field.name] == null) this.record[field.name] = '';\n                switch (field.type) {\n                    case 'int':\n                        if (this.record[field.name] && !w2utils.isInt(this.record[field.name])) {\n                            errors.push({ field: field, error: w2utils.lang('Not an integer') });\n                        }\n                        break;\n                    case 'float':\n                        if (this.record[field.name] && !w2utils.isFloat(this.record[field.name])) {\n                            errors.push({ field: field, error: w2utils.lang('Not a float') });\n                        }\n                        break;\n                    case 'money':\n                        if (this.record[field.name] && !w2utils.isMoney(this.record[field.name])) {\n                            errors.push({ field: field, error: w2utils.lang('Not in money format') });\n                        }\n                        break;\n                    case 'color':\n                    case 'hex':\n                        if (this.record[field.name] && !w2utils.isHex(this.record[field.name])) {\n                            errors.push({ field: field, error: w2utils.lang('Not a hex number') });\n                        }\n                        break;\n                    case 'email':\n                        if (this.record[field.name] && !w2utils.isEmail(this.record[field.name])) {\n                            errors.push({ field: field, error: w2utils.lang('Not a valid email') });\n                        }\n                        break;\n                    case 'checkbox':\n                        // convert true/false\n                        if (this.record[field.name] == true) this.record[field.name] = 1; else this.record[field.name] = 0;\n                        break;\n                    case 'date':\n                        // format date before submit\n                        if (!field.options.format) field.options.format = w2utils.settings.date_format;\n                        if (this.record[field.name] && !w2utils.isDate(this.record[field.name], field.options.format)) {\n                            errors.push({ field: field, error: w2utils.lang('Not a valid date') + ': ' + field.options.format });\n                        } else {\n                        }\n                        break;\n                    case 'list':\n                    case 'combo':\n                        break;\n                    case 'enum':\n                        break;\n                }\n                // === check required - if field is '0' it should be considered not empty\n                var val = this.record[field.name];\n                if (field.required && (val === '' || ($.isArray(val) && val.length == 0) || ($.isPlainObject(val) && $.isEmptyObject(val)))) {\n                    errors.push({ field: field, error: w2utils.lang('Required field') });\n                }\n                if (field.equalto && this.record[field.name] != this.record[field.equalto]) {\n                    errors.push({ field: field, error: w2utils.lang('Field should be equal to ') + field.equalto });\n                }\n            }\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'validate', errors: errors });\n            if (eventData.isCancelled === true) return;\n            // show error\n            if (showErrors) for (var e in eventData.errors) {\n                var err = eventData.errors[e];\n                if (err.field.type == 'radio') { // for radio and checkboxes\n                    $($(err.field.el).parents('div')[0]).w2tag(err.error, { \"class\": 'w2ui-error' });\n                } else if (['enum', 'file'].indexOf(err.field.type) != -1) {\n                    (function (err) {\n                        setTimeout(function () {\n                            var fld = $(err.field.el).data('w2field').helpers.multi;\n                            $(err.field.el).w2tag(err.error);\n                            $(fld).addClass('w2ui-error');\n                        }, 1);\n                    })(err);\n                } else {\n                    $(err.field.el).w2tag(err.error, { \"class\": 'w2ui-error' });\n                }\n                this.goto(errors[0].field.page);                \n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            return errors;\n        },\n\n        getChanges: function () {\n            var differ = function(record, original, result) {\n                for (var i in record) {\n                    if (typeof record[i] == \"object\") {\n                        result[i] = differ(record[i], original[i] || {}, {});\n                        if (!result[i] || $.isEmptyObject(result[i])) delete result[i];\n                    } else if (record[i] != original[i]) {\n                        result[i] = record[i];\n                    }\n                }\n                return result;\n            };\n            return differ(this.record, this.original, {});\n        },\n\n        request: function (postData, callBack) { // if (1) param then it is call back if (2) then postData and callBack\n            var obj = this;\n            // check for multiple params\n            if (typeof postData == 'function') {\n                callBack = postData;\n                postData = null;\n            }\n            if (typeof postData == 'undefined' || postData == null) postData = {};\n            if (!this.url || (typeof this.url == 'object' && !this.url.get)) return;\n            if (this.recid == null || typeof this.recid == 'undefined') this.recid = 0;\n            // build parameters list\n            var params = {};\n            // add list params\n            params['cmd']   = 'get-record';\n            params['recid'] = this.recid;\n            // append other params\n            $.extend(params, this.postData);\n            $.extend(params, postData);\n            // event before\n            var eventData = this.trigger({ phase: 'before', type: 'request', target: this.name, url: this.url, postData: params });\n            if (eventData.isCancelled === true) { if (typeof callBack == 'function') callBack({ status: 'error', message: 'Request aborted.' }); return; }\n            // default action\n            this.record   = {};\n            this.original = {};\n            // call server to get data\n            this.lock(this.msgRefresh);\n            var url = eventData.url;\n            if (typeof eventData.url == 'object' && eventData.url.get) url = eventData.url.get;\n            if (this.last.xhr) try { this.last.xhr.abort(); } catch (e) {}\n            // process url with routeData\n            if (!$.isEmptyObject(obj.routeData)) {\n                var info  = w2utils.parseRoute(url);\n                if (info.keys.length > 0) {\n                    for (var k = 0; k < info.keys.length; k++) {\n                        if (obj.routeData[info.keys[k].name] == null) continue;\n                        url = url.replace((new RegExp(':'+ info.keys[k].name, 'g')), obj.routeData[info.keys[k].name]);\n                    }\n                }\n            }\n            var ajaxOptions = {\n                type     : 'POST',\n                url      : url,\n                data     : eventData.postData, \n                dataType : 'text'   // expected from server\n            };\n            if (w2utils.settings.dataType == 'HTTP') {\n                ajaxOptions.data = String($.param(ajaxOptions.data, false)).replace(/%5B/g, '[').replace(/%5D/g, ']');\n            }\n            if (w2utils.settings.dataType == 'RESTFULL') {\n                ajaxOptions.type = 'GET';\n                ajaxOptions.data = String($.param(ajaxOptions.data, false)).replace(/%5B/g, '[').replace(/%5D/g, ']');\n            }\n            if (w2utils.settings.dataType == 'JSON') {\n                ajaxOptions.type        = 'POST';\n                ajaxOptions.data        = JSON.stringify(ajaxOptions.data);\n                ajaxOptions.contentType = 'application/json';\n            }\n            this.last.xhr = $.ajax(ajaxOptions)\n                .done(function (data, status, xhr) {\n                    obj.unlock();\n                    // event before\n                    var eventData = obj.trigger({ phase: 'before', target: obj.name, type: 'load', xhr: xhr });\n                    if (eventData.isCancelled === true) {\n                        if (typeof callBack == 'function') callBack({ status: 'error', message: 'Request aborted.' });\n                        return;\n                    }\n                    // parse server response\n                    var data;\n                    var responseText = obj.last.xhr.responseText;\n                    if (status != 'error') {\n                        // default action\n                        if (typeof responseText != 'undefined' && responseText != '') {\n                            // check if the onLoad handler has not already parsed the data\n                            if (typeof responseText == \"object\") {\n                                data = responseText;\n                            } else {\n                                // $.parseJSON or $.getJSON did not work because those expect perfect JSON data - where everything is in double quotes\n                                //\n                                // TODO: avoid (potentially malicious) code injection from the response.\n                                try { eval('data = '+ responseText); } catch (e) { }\n                            }\n                            if (typeof data == 'undefined') {\n                                data = {\n                                    status       : 'error',\n                                    message      : obj.msgNotJSON,\n                                    responseText : responseText\n                                }\n                            }\n                            if (data['status'] == 'error') {\n                                obj.error(data['message']);\n                            } else {\n                                obj.record   = $.extend({}, data.record);\n                                obj.original = $.extend({}, data.record);\n                            }\n                        }\n                    } else {\n                        obj.error('AJAX Error ' + xhr.status + ': '+ xhr.statusText);\n                        data = {\n                            status       : 'error',\n                            message      : obj.msgAJAXerror,\n                            responseText : responseText\n                        };\n                    }\n                    // event after\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                    obj.refresh();\n                    // call back\n                    if (typeof callBack == 'function') callBack(data);\n                })\n                .fail(function (xhr, status, error) {\n                    // trigger event\n                    var errorObj = { status: status, error: error, rawResponseText: xhr.responseText };\n                    var eventData2 = obj.trigger({ phase: 'before', type: 'error', error: errorObj, xhr: xhr });\n                    if (eventData2.isCancelled === true) return;\n                    // default behavior\n                    if (status != 'abort') {\n                        var data;\n                        try { data = $.parseJSON(xhr.responseText) } catch (e) {}\n                        console.log('ERROR: Server communication failed.', \n                            '\\n   EXPECTED:', { status: 'success', items: [{ id: 1, text: 'item' }] }, \n                            '\\n         OR:', { status: 'error', message: 'error message' },\n                            '\\n   RECEIVED:', typeof data == 'object' ? data : xhr.responseText);\n                    }\n                    // event after\n                    obj.trigger($.extend(eventData2, { phase: 'after' }));\n                });\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        submit: function (postData, callBack) {\n            return this.save(postData, callBack);\n        },\n\n        save: function (postData, callBack) {\n            var obj = this;\n            $(this.box).find(':focus').change(); // trigger onchange\n            // check for multiple params\n            if (typeof postData == 'function') {\n                callBack = postData;\n                postData = null;\n            }\n            // validation\n            var errors = obj.validate(true);\n            if (errors.length !== 0) return;\n            // submit save\n            if (typeof postData == 'undefined' || postData == null) postData = {};\n            if (!obj.url || (typeof obj.url == 'object' && !obj.url.save)) {\n                console.log(\"ERROR: Form cannot be saved because no url is defined.\");\n                return;\n            }\n            obj.lock(obj.msgSaving + ' <span id=\"'+ obj.name +'_progress\"></span>');\n            // need timer to allow to lock\n            setTimeout(function () {\n                // build parameters list\n                var params = {};\n                // add list params\n                params['cmd']   = 'save-record';\n                params['recid'] = obj.recid;\n                // append other params\n                $.extend(params, obj.postData);\n                $.extend(params, postData);\n                params.record = $.extend(true, {}, obj.record);\n                // event before\n                var eventData = obj.trigger({ phase: 'before', type: 'submit', target: obj.name, url: obj.url, postData: params });\n                if (eventData.isCancelled === true) return;\n                // default action\n                var url = eventData.url;\n                if (typeof eventData.url == 'object' && eventData.url.save) url = eventData.url.save;\n                if (obj.last.xhr) try { obj.last.xhr.abort(); } catch (e) {}\n                // process url with routeData\n                if (!$.isEmptyObject(obj.routeData)) {\n                    var info  = w2utils.parseRoute(url);\n                    if (info.keys.length > 0) {\n                        for (var k = 0; k < info.keys.length; k++) {\n                            if (obj.routeData[info.keys[k].name] == null) continue;\n                            url = url.replace((new RegExp(':'+ info.keys[k].name, 'g')), obj.routeData[info.keys[k].name]);\n                        }\n                    }\n                }\n                var ajaxOptions = {\n                    type     : 'POST',\n                    url      : url,\n                    data     : eventData.postData, \n                    dataType : 'text',   // expected from server\n                    xhr : function() {\n                        var xhr = new window.XMLHttpRequest();\n                        // upload\n                        xhr.upload.addEventListener(\"progress\", function(evt) {\n                            if (evt.lengthComputable) {\n                                var eventData3 = obj.trigger({ phase: 'before', type: 'progress', total: evt.total, loaded: evt.loaded, originalEvent: evt });\n                                if (eventData3.isCancelled === true) return;\n                                // default behavior\n                                var percent = Math.round(evt.loaded / evt.total * 100);\n                                $('#'+ obj.name + '_progress').text(''+ percent + '%');\n                                // event after\n                                obj.trigger($.extend(eventData3, { phase: 'after' }));\n                            }\n                        }, false);\n                        return xhr;\n                    }\n                };\n                if (w2utils.settings.dataType == 'HTTP') {\n                    ajaxOptions.data = String($.param(ajaxOptions.data, false)).replace(/%5B/g, '[').replace(/%5D/g, ']');\n                }\n                if (w2utils.settings.dataType == 'RESTFULL') {\n                    if (obj.recid != 0 && obj.recid != null) ajaxOptions.type = 'PUT';\n                    ajaxOptions.data = String($.param(ajaxOptions.data, false)).replace(/%5B/g, '[').replace(/%5D/g, ']');\n                }\n                if (w2utils.settings.dataType == 'JSON') {\n                    ajaxOptions.type        = 'POST';\n                    ajaxOptions.data        = JSON.stringify(ajaxOptions.data);\n                    ajaxOptions.contentType = 'application/json';\n                }\n\n                obj.last.xhr = $.ajax(ajaxOptions)\n                    .done(function (data, status, xhr) {\n                        obj.unlock();\n                        // event before\n                        var eventData = obj.trigger({ phase: 'before', target: obj.name, type: 'save', xhr: xhr, status: status });\n                        if (eventData.isCancelled === true) return;\n                        // parse server response\n                        var data;\n                        var responseText = xhr.responseText;\n                        if (status != 'error') {\n                            // default action\n                            if (typeof responseText != 'undefined' && responseText != '') {\n                                // check if the onLoad handler has not already parsed the data\n                                if (typeof responseText == \"object\") {\n                                    data = responseText;\n                                } else {\n                                    // $.parseJSON or $.getJSON did not work because those expect perfect JSON data - where everything is in double quotes\n                                    //\n                                    // TODO: avoid (potentially malicious) code injection from the response.\n                                    try { eval('data = '+ responseText); } catch (e) { }\n                                }\n                                if (typeof data == 'undefined') {\n                                    data = {\n                                        status       : 'error',\n                                        message      : obj.msgNotJSON,\n                                        responseText : responseText\n                                    }\n                                }\n                                if (data['status'] == 'error') {\n                                    obj.error(data['message']);\n                                } else {\n                                    obj.original = $.extend({}, obj.record);\n                                }\n                            }\n                        } else {\n                            obj.error('AJAX Error ' + xhr.status + ': '+ xhr.statusText);\n                            data = {\n                                status       : 'error',\n                                message      : obj.msgAJAXerror,\n                                responseText : responseText\n                            };\n                        }\n                        // event after\n                        obj.trigger($.extend(eventData, { phase: 'after' }));\n                        obj.refresh();\n                        // call back\n                        if (data.status == 'success' && typeof callBack == 'function') callBack(data);\n                    })\n                    .fail(function (xhr, status, error) {\n                        // trigger event\n                        var errorObj = { status: status, error: error, rawResponseText: xhr.responseText };\n                        var eventData2 = obj.trigger({ phase: 'before', type: 'error', error: errorObj, xhr: xhr });\n                        if (eventData2.isCancelled === true) return;\n                        // default behavior\n                        console.log('ERROR: server communication failed. The server should return', \n                            { status: 'success' }, 'OR', { status: 'error', message: 'error message' }, \n                            ', instead the AJAX request produced this: ', errorObj);\n                        // event after\n                        obj.trigger($.extend(eventData2, { phase: 'after' }));\n                    });\n                // event after\n                obj.trigger($.extend(eventData, { phase: 'after' }));\n            }, 50);\n        },\n\n        lock: function (msg, showSpinner) {\n            var box = $(this.box).find('> div:first-child');\n            var args = Array.prototype.slice.call(arguments, 0);\n            args.unshift(box);\n            w2utils.lock.apply(window, args);\n        },\n\n        unlock: function (speed) {\n            var obj = this;\n            setTimeout(function () { w2utils.unlock(obj.box, speed); }, 25); // needed timer so if server fast, it will not flash\n        },\n\n        goto: function (page) {\n            if (typeof page != 'undefined') this.page = page;\n            // if it was auto size, resize it\n            if ($(this.box).data('auto-size') === true) $(this.box).height(0);\n            this.refresh();\n        },\n\n        generateHTML: function () {\n            var pages = []; // array for each page\n            var group = '';\n            var page;\n            for (var f = 0; f < this.fields.length; f++) {\n                var html = '';\n                var field = this.fields[f];\n                if (typeof field.html == 'undefined') field.html = {};\n                field.html = $.extend(true, { caption: '', span: 6, attr: '', text: '', style: '', page: 0 }, field.html);\n                if (typeof page == 'undefined') page = field.html.page;\n                if (field.html.caption == '') field.html.caption = field.name;\n                var input = '<input name=\"'+ field.name +'\" type=\"text\" '+ field.html.attr +'/>';\n                if ((field.type === 'pass') || (field.type === 'password')){\n                    input = '<input name=\"' + field.name + '\" type = \"password\" ' + field.html.attr + '/>';\n                }\n                if (field.type == 'checkbox') input = '<input name=\"'+ field.name +'\" type=\"checkbox\" '+ field.html.attr +'/>';\n                if (field.type == 'textarea') input = '<textarea name=\"'+ field.name +'\" '+ field.html.attr +'></textarea>';\n                if (field.type == 'toggle')   input = '<input name=\"'+ field.name +'\" type=\"checkbox\" '+ field.html.attr +' class=\"w2ui-toggle\"/><div><div></div></div>';\n                if (field.html.group) {\n                    if (group != '') html += '\\n   </div>';\n                    html += '\\n   <div class=\"w2ui-group-title\">'+ field.html.group + '</div>\\n   <div class=\"w2ui-group\">';\n                    group = field.html.group;\n                }\n                if (field.html.page != page && group != '') {\n                    pages[pages.length-1] += '\\n   </div>';\n                    group = '';\n                }\n                html += '\\n      <div class=\"w2ui-field '+ (typeof field.html.span != 'undefined' ? 'w2ui-span'+ field.html.span : '') +'\" style=\"'+ field.html.style +'\">'+ \n                        '\\n         <label>' + w2utils.lang(field.html.caption) +'</label>'+\n                        '\\n         <div>'+ input + w2utils.lang(field.html.text) + '</div>'+\n                        '\\n      </div>';\n                if (typeof pages[field.html.page] == 'undefined') pages[field.html.page] = '';\n                pages[field.html.page] += html;\n                page = field.html.page;\n            }\n            if (group != '') pages[pages.length-1] += '\\n   </div>';\n            if (this.tabs.tabs) {\n                for (var i = 0; i < this.tabs.tabs.length; i++) if (typeof pages[i] == 'undefined') pages[i] = '';\n            }\n            for (var p = 0; p < pages.length; p++) pages[p] = '<div class=\"w2ui-page page-'+ p +'\">' + pages[p] + '\\n</div>';\n            // buttons if any\n            var buttons = '';\n            if (!$.isEmptyObject(this.actions)) {\n                var addClass = '';\n                buttons += '\\n<div class=\"w2ui-buttons\">';\n                for (var a in this.actions) { // it is an object\n                    var act  = this.actions[a];\n                    var info = { caption: '', style: '', \"class\": '' };\n                    if ($.isPlainObject(act)) {\n                        if (act.caption) info.caption = act.caption;\n                        if (act.style) info.style = act.style;\n                        if (act[\"class\"]) info['class'] = act['class'];\n                    } else {\n                        info.caption = a;\n                        if (['save', 'update', 'create'].indexOf(a.toLowerCase()) != -1) info['class'] = 'w2ui-btn-green'; else info['class'] = '';\n                    }\n                    buttons += '\\n    <button name=\"'+ a +'\" class=\"w2ui-btn '+ info['class'] +'\" style=\"'+ info.style +'\">'+ \n                                            w2utils.lang(info.caption) +'</button>';\n                }\n                buttons += '\\n</div>';\n            }\n            return pages.join('') + buttons;\n        },\n\n        action: function (action, event) {\n            var click = null;\n            var act   = this.actions[action];\n            var click = act;\n            if ($.isPlainObject(act) && act.onClick) click = act.onClick;\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: action, type: 'action', click: click, originalEvent: event });\n            if (eventData.isCancelled === true) return;\n            // default actions\n            if (typeof click == 'function') click.call(this, event);\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n        },\n\n        resize: function () {\n            var obj = this;\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'resize' });\n            if (eventData.isCancelled === true) return;\n            // default behaviour\n            var main    = $(this.box).find('> div');\n            var header  = $(this.box).find('> div .w2ui-form-header');\n            var toolbar = $(this.box).find('> div .w2ui-form-toolbar');\n            var tabs    = $(this.box).find('> div .w2ui-form-tabs');\n            var page    = $(this.box).find('> div .w2ui-page');\n            var cpage   = $(this.box).find('> div .w2ui-page.page-'+ this.page);\n            var dpage   = $(this.box).find('> div .w2ui-page.page-'+ this.page + ' > div');\n            var buttons = $(this.box).find('> div .w2ui-buttons');\n            // if no height, calculate it\n            resizeElements();\n            if (parseInt($(this.box).height()) == 0 || $(this.box).data('auto-size') === true) {\n                $(this.box).height(\n                    (header.length > 0 ? w2utils.getSize(header, 'height') : 0) +\n                    ((typeof this.tabs === 'object' && $.isArray(this.tabs.tabs) && this.tabs.tabs.length > 0) ? w2utils.getSize(tabs, 'height') : 0) +\n                    ((typeof this.toolbar == 'object' && $.isArray(this.toolbar.items) && this.toolbar.items.length > 0) ? w2utils.getSize(toolbar, 'height') : 0) +\n                    (page.length > 0 ? w2utils.getSize(dpage, 'height') + w2utils.getSize(cpage, '+height') + 12 : 0) +  // why 12 ???\n                    (buttons.length > 0 ? w2utils.getSize(buttons, 'height') : 0)\n                );\n                $(this.box).data('auto-size', true);\n            }\n            resizeElements();\n            // event after\n            obj.trigger($.extend(eventData, { phase: 'after' }));\n\n            function resizeElements() {\n                // resize elements\n                main.width($(obj.box).width()).height($(obj.box).height());\n                toolbar.css('top', (obj.header != '' ? w2utils.getSize(header, 'height') : 0));\n                tabs.css('top', (obj.header != '' ? w2utils.getSize(header, 'height') : 0)\n                              + ((typeof obj.toolbar == 'object' && $.isArray(obj.toolbar.items) && obj.toolbar.items.length > 0) ? w2utils.getSize(toolbar, 'height') : 0));\n                page.css('top', (obj.header != '' ? w2utils.getSize(header, 'height') : 0)\n                              + ((typeof obj.toolbar == 'object' && $.isArray(obj.toolbar.items) && obj.toolbar.items.length > 0) ? w2utils.getSize(toolbar, 'height') + 5 : 0)\n                              + ((typeof obj.tabs === 'object' && $.isArray(obj.tabs.tabs) && obj.tabs.tabs.length > 0) ? w2utils.getSize(tabs, 'height') + 5 : 0));\n                page.css('bottom', (buttons.length > 0 ? w2utils.getSize(buttons, 'height') : 0));\n            }\n        },\n\n        refresh: function () {\n            var time = (new Date()).getTime();\n            var obj = this;\n            if (!this.box) return;\n            if (!this.isGenerated || typeof $(this.box).html() == 'undefined') return;\n            // update what page field belongs\n            $(this.box).find('input, textarea, select').each(function (index, el) {\n                var name  = (typeof $(el).attr('name') != 'undefined' ? $(el).attr('name') : $(el).attr('id'));\n                var field = obj.get(name);\n                if (field) {\n                    // find page\n                    var div = $(el).parents('.w2ui-page');\n                    if (div.length > 0) {\n                        for (var i = 0; i < 100; i++) {\n                            if (div.hasClass('page-'+i)) { field.page = i; break; }\n                        }\n                    }\n                }\n            });\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'refresh', page: this.page })\n            if (eventData.isCancelled === true) return;\n            // default action\n            $(this.box).find('.w2ui-page').hide();\n            $(this.box).find('.w2ui-page.page-' + this.page).show();\n            $(this.box).find('.w2ui-form-header').html(this.header);\n            // refresh tabs if needed\n            if (typeof this.tabs === 'object' && $.isArray(this.tabs.tabs) && this.tabs.tabs.length > 0) {\n                $('#form_'+ this.name +'_tabs').show();\n                this.tabs.active = this.tabs.tabs[this.page].id;\n                this.tabs.refresh();\n            } else {\n                $('#form_'+ this.name +'_tabs').hide();\n            }\n            // refresh tabs if needed\n            if (typeof this.toolbar == 'object' && $.isArray(this.toolbar.items) && this.toolbar.items.length > 0) {\n                $('#form_'+ this.name +'_toolbar').show();\n                this.toolbar.refresh();\n            } else {\n                $('#form_'+ this.name +'_toolbar').hide();\n            }\n            // refresh values of all fields\n            for (var f = 0; f < this.fields.length; f++) {\n                var field = this.fields[f];\n                if (typeof field.name == 'undefined' && typeof field.field != 'undefined') field.name = field.field;\n                if (typeof field.field == 'undefined' && typeof field.name != 'undefined') field.field = field.name;\n                field.$el = $(this.box).find('[name=\"'+ String(field.name).replace(/\\\\/g, '\\\\\\\\') +'\"]');\n                field.el  = field.$el[0];\n                if (typeof field.el == 'undefined') {\n                    console.log('ERROR: Cannot associate field \"'+ field.name + '\" with html control. Make sure html control exists with the same name.');\n                    //return;\n                }\n                if (field.el) field.el.id = field.name;\n                var tmp = $(field).data('w2field');\n                if (tmp) tmp.clear();\n                $(field.$el).off('change').on('change', function () {\n                    var value_new      = this.value;\n                    var value_previous = obj.record[this.name] ? obj.record[this.name] : '';\n                    var field          = obj.get(this.name);\n                    if (['list', 'enum', 'file'].indexOf(field.type) != -1 && $(this).data('selected')) {\n                        var nv = $(this).data('selected');\n                        var cv = obj.record[this.name];\n                        if ($.isArray(nv)) {\n                            value_new = [];\n                            for (var i = 0; i < nv.length; i++) value_new[i] = $.extend(true, {}, nv[i]); // clone array\n                        }\n                        if ($.isPlainObject(nv)) {\n                            value_new = $.extend(true, {}, nv); // clone object\n                        }\n                        if ($.isArray(cv)) {\n                            value_previous = [];\n                            for (var i = 0; i < cv.length; i++) value_previous[i] = $.extend(true, {}, cv[i]); // clone array\n                        }\n                        if ($.isPlainObject(cv)) {\n                            value_previous = $.extend(true, {}, cv); // clone object\n                        }\n                    }\n                    if (field.type == 'toggle') value_new = ($(this).prop('checked') ? 1 : 0);\n                    // clean extra chars\n                    if (['int', 'float', 'percent', 'money', 'currency'].indexOf(field.type) != -1) {\n                        value_new = $(this).data('w2field').clean(value_new);\n                    }\n                    if (value_new === value_previous) return;\n                    // event before\n                    var eventData = obj.trigger({ phase: 'before', target: this.name, type: 'change', value_new: value_new, value_previous: value_previous });\n                    if (eventData.isCancelled === true) {\n                        $(this).val(obj.record[this.name]); // return previous value\n                        return;\n                    }\n                    // default action\n                    var val = this.value;\n                    if (this.type == 'select')   val = this.value;\n                    if (this.type == 'checkbox') val = this.checked ? true : false;\n                    if (this.type == 'radio') {\n                        field.$el.each(function (index, el) {\n                            if (el.checked) val = el.value;\n                        });\n                    }\n                    if (['int', 'float', 'percent', 'money', 'currency', 'list', 'combo', 'enum', 'file', 'toggle'].indexOf(field.type) != -1) {\n                        val = value_new;\n                    }\n                    if (['enum', 'file'].indexOf(field.type) != -1) {\n                        if (val.length > 0) {\n                            var fld = $(field.el).data('w2field').helpers.multi;\n                            $(fld).removeClass('w2ui-error');\n                        }\n                    }\n                    if (val == '' || ($.isArray(val) && val.length == 0) || ($.isPlainObject(val) && $.isEmptyObject(val))) val = null;\n                    obj.record[this.name] = val;\n                    // event after\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                });\n                // required\n                if (field.required) {\n                    $(field.el).parent().parent().addClass('w2ui-required');\n                } else {\n                    $(field.el).parent().parent().removeClass('w2ui-required');\n                }\n                // disabled\n                if (field.disabled) {\n                    $(field.el).prop('readonly', true);\n                } else {\n                    $(field.el).prop('readonly', false);\n                }\n                // hidden\n                if (field.hidden) {\n                    $(field.el).parent().parent().hide();\n                } else {\n                    $(field.el).parent().parent().show();\n                }\n            }\n            // attach actions on buttons\n            $(this.box).find('button, input[type=button]').each(function (index, el) {\n                $(el).off('click').on('click', function (event) {\n                    var action = this.value;\n                    if (this.id)   action = this.id;\n                    if (this.name) action = this.name;\n                    obj.action(action, event);\n                });\n            });\n            // init controls with record\n            for (var f = 0; f < this.fields.length; f++) {\n                var field = this.fields[f];\n                var value = (typeof this.record[field.name] != 'undefined' ? this.record[field.name] : '');\n                if (!field.el) continue;\n                field.type = String(field.type).toLowerCase();\n                if (!field.options) field.options = {};\n                switch (field.type) {\n                    case 'text':\n                    case 'textarea':\n                    case 'email':\n                    case 'pass':\n                    case 'password':\n                        field.el.value = value;\n                        break;\n                    case 'int':\n                    case 'float':\n                    case 'money':\n                    case 'currency':\n                    case 'percent':\n                        //issue #499\n                        if(typeof value == 'number'){\n                             field.el.value = w2utils.formatNumber(value,field.options.groupSymbol,field.options.decimalSymbol);\n                         } else {\n                             field.el.value = value;\n                         }\n                         $(field.el).w2field($.extend({}, field.options, { type: field.type }));\n                         break;\n                    case 'hex':\n                    case 'alphanumeric':\n                    case 'color':\n                    case 'date':\n                    case 'time':\n                        field.el.value = value;\n                        $(field.el).w2field($.extend({}, field.options, { type: field.type }));\n                        break;\n                    case 'toggle':\n                        if (w2utils.isFloat(value)) value = parseFloat(value);\n                        $(field.el).prop('checked', (value ? true : false));\n                        this.record[field.name] = (value ? 1 : 0);\n                        break;\n                    // enums\n                    case 'list':\n                    case 'combo':\n                        if (field.type == 'list') {\n                            var tmp_value = ($.isPlainObject(value) ? value.id : value);\n                            // normalized options\n                            var items = field.options.items;\n                            if ($.isArray(items) && items.length > 0 && !$.isPlainObject(items[0])) {\n                                field.options.items = w2obj.field.prototype.normMenu(items);\n                            }\n                            // find value from items \n                            for (var i = 0; i < field.options.items.length; i++) {\n                                var item = field.options.items[i];\n                                if (item.id == tmp_value) {\n                                    value = $.extend(true, {}, item);\n                                    obj.record[field.name] = value;\n                                    break;\n                                }\n                            }\n                        } else if (field.type == 'combo' && !$.isPlainObject(value)) {\n                            field.el.value = value;\n                        } else if ($.isPlainObject(value) && typeof value.text != 'undefined') {\n                            field.el.value = value.text;\n                        } else {\n                            field.el.value = '';\n                        }\n                        if (!$.isPlainObject(value)) value = {};\n                        $(field.el).w2field($.extend({}, field.options, { type: field.type, selected: value }));\n                        break;\n                    case 'enum':\n                    case 'file':\n                        if (!$.isArray(value)) value = [];\n                        $(field.el).w2field($.extend({}, field.options, { type: field.type, selected: value }));\n                        break;\n\n                    // standard HTML\n                    case 'select':\n                        // generate options\n                        var items = field.options.items;\n                        if (typeof items != 'undefined' && items.length > 0) {\n                            items = w2obj.field.prototype.normMenu(items);\n                            $(field.el).html('');\n                            for (var it = 0; it < items.length; it++) {\n                                $(field.el).append('<option value=\"'+ items[it].id +'\">' + items[it].text + '</option');\n                            }\n                        }\n                        $(field.el).val(value);\n                        break;\n                    case 'radio':\n                        $(field.$el).prop('checked', false).each(function (index, el) {\n                            if ($(el).val() == value) $(el).prop('checked', true);\n                        });\n                        break;\n                    case 'checkbox':\n                        $(field.el).prop('checked', value ? true : false);\n                        break;\n                    default:\n                        $(field.el).w2field($.extend({}, field.options, { type: field.type }));\n                        break;\n                }\n            }\n            // wrap pages in div\n            var tmp = $(this.box).find('.w2ui-page');\n            for (var i = 0; i < tmp.length; i++) {\n                if ($(tmp[i]).find('> *').length > 1) $(tmp[i]).wrapInner('<div></div>');\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            this.resize();\n            return (new Date()).getTime() - time;\n        },\n\n        render: function (box) {\n            var time = (new Date()).getTime();\n            var obj = this;\n            if (typeof box == 'object') {\n                // remove from previous box\n                if ($(this.box).find('#form_'+ this.name +'_tabs').length > 0) {\n                    $(this.box).removeAttr('name')\n                        .removeClass('w2ui-reset w2ui-form')\n                        .html('');\n                }\n                this.box = box;\n            }\n            if (!this.isGenerated) return;\n            if (!this.box) return;\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'render', box: (typeof box != 'undefined' ? box : this.box) });\n            if (eventData.isCancelled === true) return;\n            // default actions\n            if ($.isEmptyObject(this.original) && !$.isEmptyObject(this.record)) {\n                this.original = $.extend(true, {}, this.record);\n            }\n            var html =  '<div>' +\n                        (this.header != '' ? '<div class=\"w2ui-form-header\">' + this.header + '</div>' : '') +\n                        '    <div id=\"form_'+ this.name +'_toolbar\" class=\"w2ui-form-toolbar\"></div>' +\n                        '    <div id=\"form_'+ this.name +'_tabs\" class=\"w2ui-form-tabs\"></div>' +\n                            this.formHTML +\n                        '</div>';\n            $(this.box).attr('name', this.name)\n                .addClass('w2ui-reset w2ui-form')\n                .html(html);\n            if ($(this.box).length > 0) $(this.box)[0].style.cssText += this.style;\n\n            // init toolbar regardless it is defined or not\n            if (typeof this.toolbar.render !== 'function') {\n                this.toolbar = $().w2toolbar($.extend({}, this.toolbar, { name: this.name +'_toolbar', owner: this }));\n                this.toolbar.on('click', function (event) {\n                    var eventData = obj.trigger({ phase: 'before', type: 'toolbar', target: event.target, originalEvent: event });\n                    if (eventData.isCancelled === true) return;\n                    // no default action\n                    obj.trigger($.extend(eventData, { phase: 'after' }));\n                });\n            }\n            if (typeof this.toolbar == 'object' && typeof this.toolbar.render == 'function') {\n                this.toolbar.render($('#form_'+ this.name +'_toolbar')[0]);\n            }\n            // init tabs regardless it is defined or not\n            if (typeof this.tabs.render !== 'function') {\n                this.tabs = $().w2tabs($.extend({}, this.tabs, { name: this.name +'_tabs', owner: this }));\n                this.tabs.on('click', function (event) {\n                    obj.goto(this.get(event.target, true));\n                });\n            }\n            if (typeof this.tabs == 'object' && typeof this.tabs.render == 'function') {\n                this.tabs.render($('#form_'+ this.name +'_tabs')[0]);\n            }\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            // after render actions\n            this.resize();\n            var url = (typeof this.url != 'object' ? this.url : this.url.get);\n            if (url && this.recid != 0 && this.recid != null) {\n                this.request();\n            } else {\n                this.refresh();\n            }\n            // attach to resize event\n            if ($('.w2ui-layout').length == 0) { // if there is layout, it will send a resize event\n                this.tmp_resize = function (event) { w2ui[obj.name].resize(); }\n                $(window).off('resize', 'body').on('resize', 'body', this.tmp_resize);\n            }\n            setTimeout(function () { obj.resize(); obj.refresh(); }, 150); // need timer because resize is on timer\n            // focus on load\n            function focusEl() {\n                var inputs = $(obj.box).find('input, select, textarea');\n                if (inputs.length > obj.focus) inputs[obj.focus].focus();\n            }\n            if (this.focus >= 0) setTimeout(focusEl, 500); // need timeout to allow form to render\n            return (new Date()).getTime() - time;\n        },\n\n        destroy: function () {\n            // event before\n            var eventData = this.trigger({ phase: 'before', target: this.name, type: 'destroy' });\n            if (eventData.isCancelled === true) return;\n            // clean up\n            if (typeof this.toolbar == 'object' && this.toolbar.destroy) this.toolbar.destroy();\n            if (typeof this.tabs == 'object' && this.tabs.destroy) this.tabs.destroy();\n            if ($(this.box).find('#form_'+ this.name +'_tabs').length > 0) {\n                $(this.box)\n                    .removeAttr('name')\n                    .removeClass('w2ui-reset w2ui-form')\n                    .html('');\n            }\n            delete w2ui[this.name];\n            // event after\n            this.trigger($.extend(eventData, { phase: 'after' }));\n            $(window).off('resize', 'body')\n        }\n    };\n\n    $.extend(w2form.prototype, w2utils.event);\n    w2obj.form = w2form;\n})();\n"
},function(){}]);